(this["webpackJsonpworkflow-sample"]=this["webpackJsonpworkflow-sample"]||[]).push([[0],{141:function(e,t,a){e.exports=a(173)},146:function(e,t,a){},147:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),c=(a(146),a(147),a(41)),i=a(17),s=a(105),u=a.n(s),m=a(132),f=a(70),d=a(119),w=a(13),p=a(36),E=a(50),b=a(19),h=a(25),v=a(15),g=a(131),y=a(209),k=a(212),O=a(208),j=a(210),C=a(123),S=a.n(C),x=a(203),I=Object(x.a)((function(e){return{sheetTitle:{padding:0,margin:"0 0 24px 24px",textAlign:"left"},drawer:{width:440,flexShrink:0},drawerPaper:{width:440},boxAlign:{textAlign:"right"}}})),N=function(e){var t=e.isOpen,a=void 0!==t&&t,n=e.title,l=e.handleClose,o=e.children,c=I();return r.a.createElement(y.a,{className:c.drawer,variant:"persistent",anchor:"right",open:a,classes:{paper:c.drawerPaper}},r.a.createElement(k.a,{className:c.sheetTitle},r.a.createElement(O.a,{className:c.boxAlign},r.a.createElement(j.a,{onClick:l},r.a.createElement(S.a,null))),n),o)},T=a(96),D=function(e){var t=e.isOpen,a=e.header,n=e.body;return r.a.createElement("div",{style:{position:"absolute",top:0,right:0}},r.a.createElement(T.a,{show:t,delay:3e3,autohide:!0},r.a.createElement(T.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},a)),r.a.createElement(T.a.Body,null,n)))};function A(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return t}})),r=Object(w.a)(a,2),l=r[0],o=r[1];return[l,Object(n.useCallback)((function(t){try{e&&(o(t),window.localStorage.setItem(e,JSON.stringify(t)))}catch(a){console.log(a)}}),[e])]}var R=function(e){var t,a=e.type,l=e.workflowId,o=e.onNodeClick,c=Object(n.useState)({}),i=Object(w.a)(c,2),s=i[0],u=i[1],m=A("ws:workflows",[]),d=Object(w.a)(m,1)[0],p="#E5ECE2",E=[{eventId:"one",eventType:null,state:"approved"},{eventId:"two",eventType:null,state:"rejected"},{eventId:"three",eventType:null,state:null},{eventId:"four",eventType:null,state:null}];Object(n.useEffect)((function(){if(a&&"sequential"===a.toLowerCase())u({nodes:[{id:"node1",height:100,width:100,offsetX:200,offsetY:100,style:{fill:p},annotations:[{content:"Step 1 - Document Selection"},{stepType:"documentUpload",stepNumber:"one"}]},{id:"node2",height:100,width:100,offsetX:400,offsetY:100,style:{fill:p},annotations:[{content:"Step 2 - Document Review"},{stepType:"singleReview",stepNumber:"two"}]},{id:"node3",height:100,width:100,offsetX:600,offsetY:100,style:{fill:p},annotations:[{content:"Step 3 - Document Review"},{stepType:"singleReview",stepNumber:"three"}]},{id:"node4",height:100,width:100,offsetX:800,offsetY:100,style:{fill:p},annotations:[{content:"Step 4 - Document Review"},{stepType:"singleReview",stepNumber:"four"}]}],connectors:[{id:"connector1",sourceID:"node1",targetID:"node2"},{id:"connector2",sourceID:"node2",targetID:"node3"},{id:"connector3",sourceID:"node3",targetID:"node4"}]});else if("parallel"===a.toLowerCase()){u({nodes:[{id:"node1",height:100,width:100,offsetX:200,offsetY:100,style:{fill:p},annotations:[{content:"Step 1 - Document Selection"},{stepType:"documentUpload",stepNumber:"one"}]},{id:"node2",height:100,width:100,offsetX:400,offsetY:100,style:{fill:p},annotations:[{content:"Step 2 - Document Review"},{stepType:"multiReview",stepNumber:"two"}]}],connectors:[{id:"connector1",sourceID:"node1",targetID:"node2"}]})}}),[a]),Object(n.useEffect)((function(){var e=d.filter((function(e){return e.id!==l}));if(console.log(e),e.length&&"sequential"===a.toLowerCase())for(var t=E,n=function(e){switch(t[e].state){case"approved":u((function(t){var a=Object(f.a)({},t);return a.nodes[e].style.fill="#61FF33",a}));break;case"rejected":u((function(t){var a=Object(f.a)({},t);return a.nodes[e].style.fill="#FA2116",a}));break;case null:u((function(t){var a=Object(f.a)({},t);return a.nodes[e].style.fill="white",a}));break;default:return{v:null}}},r=0;r<t.length;r++){var o=n(r);if("object"===typeof o)return o.v}else a.toLowerCase()}),[l,a]);var b=Object(n.useCallback)((function(e){if("node1"===e.id)return r.a.createElement("button",{onClick:function(){return alert("test")}},"Test")}),[]);return r.a.createElement(g.a,{id:"diagram",width:"100%",height:"550px",ref:function(e){return t=e},nodeTemplate:b,created:function(e){s.nodes.forEach((function(e){t.add(e)})),s.connectors.forEach((function(e){t.add(e)}))},click:function(e){if(e){var t=e.actualObject;if(t){var a=t.properties.annotations[1];o&&o(a)}}}})},F=a(61),W=a(69),P=a(51),L=function(){var e=Object(P.b)(),t=e.values,a=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,null,"Select reviewers to review"),r.a.createElement(F.a,{id:"basic-typeahead-multiple",name:"reviewers",labelKey:"name",multiple:!0,onChange:function(e){e&&a("reviewers",e)},options:["Pritam","Ashish","Anupam"],placeholder:"Choose reviewers...",selected:t.reviewers})))},G=function(e){var t=e.fetchedWorkflow,a=Object(n.useState)({}),l=Object(w.a)(a,2),o=l[0],c=l[1];return Object(n.useEffect)((function(){var e={step:2,reviewers:[{name:"Apoorva",status:"In Progress"},{name:"Aniva",status:"Not started"}]};console.log(e),c(e)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Group,{as:h.a,controlId:"formPlaintextEmail"},r.a.createElement(b.a.Label,{column:!0,sm:"12"},"Reviewers"),r.a.createElement(v.a,{sm:"10"},o&&o.reviewers&&r.a.createElement(W.a,null,o.reviewers.map((function(e){return r.a.createElement(W.a.Item,null,e.name," - ",e.status)}))))))},J=function(){var e=Object(P.b)(),t=e.values,a=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,null,"Select document to review"),r.a.createElement(F.a,{id:"basic-typeahead-single",name:"selectedDocument",labelKey:"name",onChange:function(e){e&&a("selectedDocument",e)},options:["F24H Wizard","MadCap Flare POC"],placeholder:"Choose a document...",selected:t.selectedDocument})))},Y=function(e){var t=e.workflowId,a=Object(n.useState)({}),l=Object(w.a)(a,2),o=l[0],c=l[1],i=A("ws:workflows",[]),s=Object(w.a)(i,1)[0];return Object(n.useEffect)((function(){var e=s.filter((function(e){return e.workflowId===t}));if(e){var a={document:e[0].stepConfiguration.selectedDocument[0]};c(a)}}),[t,s]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Group,{as:h.a,controlId:"formPlaintextEmail"},r.a.createElement(b.a.Label,{column:!0,sm:"12"},"Document to review"),r.a.createElement(v.a,{sm:"10"},r.a.createElement(b.a.Control,{plaintext:!0,readOnly:!0,value:o.document}))))},X=function(e){var t=e.nodeType,a=e.stepNumber,l=Object(P.b)(),o=l.values,c=l.setFieldValue,i=Object(n.useState)([]),s=Object(w.a)(i,2),u=s[0],m=s[1];Object(n.useEffect)((function(){"multiReview"===t?m(["Pritam","Ashish","Anupam"]):"singleReview"===t&&("one"===a?m(["John Doe","Jane Doe"]):"two"===a?m(["Akhil","Ashwini"]):"three"===a?m(["Auro","Chitra"]):"four"===a&&m(["Shubho","Biplap"]))}),[t,a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,null,"Select reviewer to review"),r.a.createElement(F.a,{id:"basic-typeahead-multiple",name:"reviewers-".concat(a),labelKey:"name",onChange:function(e){e&&c("reviewers-".concat(a),e)},options:u,placeholder:"Choose reviewer...",selected:o["reviewers-".concat(a)]||[]})))},B=function(e){var t=e.workflowId,a=e.stepNumber,l=Object(n.useState)({}),o=Object(w.a)(l,2),c=o[0],i=o[1],s=A("ws:workflows",[]),u=Object(w.a)(s,1)[0];return Object(n.useEffect)((function(){var e=u.filter((function(e){return e.workflowId===t}));if(e){var n={reviewer:e[0].stepConfiguration["reviewers-".concat(a)]};console.log(n,a),i(n)}}),[t,a,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Group,{as:h.a,controlId:"formPlaintextEmail"},r.a.createElement(b.a.Label,{column:!0,sm:"12"},"Reviewer"),r.a.createElement(v.a,{sm:"10"},c&&c.reviewer&&r.a.createElement(W.a,null,r.a.createElement(W.a.Item,null,c.reviewer[0])))))},U=a(206),V=a(207),q=a(87),z=a.n(q),K=function(){var e=Object(n.useState)(""),t=Object(w.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),c=Object(w.a)(o,2),s=c[0],g=c[1],y=Object(n.useState)(!1),k=Object(w.a)(y,2),O=k[0],j=k[1],C=Object(n.useState)(!1),S=Object(w.a)(C,2),x=S[0],I=(S[1],Object(n.useState)(!1)),T=Object(w.a)(I,2),F=T[0],W=T[1],G=Object(i.f)().type,Y=Object(i.e)(),B=A("ws:workflows",[]),q=Object(w.a)(B,2),K=q[0],H=q[1],M=function(e){e&&(l(e.stepType),g(e.stepNumber),j(!0))},$=function(){j(!1)},Q=Object(n.useCallback)((function(){if(a)switch(a){case"documentUpload":return r.a.createElement(J,null);case"multiReview":return r.a.createElement(L,null);case"singleReview":return r.a.createElement(X,{nodeType:a,stepNumber:s});default:return null}}),[a,s]),Z=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,l,o,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("values",t),e.next=3,fetch("http://ec2-3-129-9-103.us-east-2.compute.amazonaws.com:8888/workflow/initiate",{method:"POST",body:JSON.stringify({workflowType:G,name:t.workflowName})});case 3:(a=e.sent).ok&&W(!0),W(!0),n=a.json(),r=n.workflowId,l=n.workflowType,o=n.name,(c={workflowId:r,workflowType:l,name:o,stepConfiguration:Object(f.a)({},t)}).workflowId&&(i=[].concat(Object(m.a)(K),[c]),H(i),Y.push("/workflows/"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(P.a,{initialValues:{selectedDocument:[],reviewers:[],workflowName:""},onSubmit:Z},(function(e){var t=e.handleSubmit,a=e.handleChange;return r.a.createElement(b.a,{onSubmit:t},r.a.createElement(E.a,{fluid:!0},r.a.createElement(h.a,{style:{margin:"20px"}},r.a.createElement(v.a,{xs:4,style:{textAlign:"left"}},r.a.createElement("h4",null,"Create Workflow")),r.a.createElement(v.a,{xs:4},r.a.createElement(b.a.Group,{controlId:"formWorkflowName"},r.a.createElement(b.a.Control,{type:"text",name:"workflowName",onChange:a}),r.a.createElement(b.a.Text,{className:"text-muted"},"Give your workflow a name"))),r.a.createElement(v.a,{xs:2},r.a.createElement(p.a,{variant:"primary",type:"submit"},"Start Workflow")),r.a.createElement(v.a,{xs:2},r.a.createElement("span",null,"Status: ",r.a.createElement(z.a,{style:{color:"grey"}}),"Not Started"))),r.a.createElement(h.a,null,r.a.createElement(v.a,null,r.a.createElement(R,{type:G,onNodeClick:M}),r.a.createElement(N,{isOpen:O,handleClose:$,title:"Step Configuration"},r.a.createElement(U.a,null,Q()),r.a.createElement(V.a,null,r.a.createElement(p.a,{variant:"light",onClick:$},"Close"))))),r.a.createElement(D,{isOpen:x,header:"Workflow Configuration",body:"Saved step configuration"}),r.a.createElement(D,{isOpen:F,header:"Workflow",body:"New workflow started"})))}))},H=function(){var e=Object(i.f)(),t=e.workflowId,a=e.type,l=Object(n.useState)(""),o=Object(w.a)(l,2),c=o[0],s=o[1],u=Object(n.useState)(""),m=Object(w.a)(u,2),f=m[0],d=m[1],b=Object(n.useState)(!1),g=Object(w.a)(b,2),y=g[0],k=g[1],O=function(){k(!1)},j=Object(n.useMemo)((function(){if(console.log("stepnumber",f,t),c)switch(c){case"documentUpload":return r.a.createElement(Y,{workflowId:t});case"multiReview":return r.a.createElement(G,{workflowId:t});case"singleReview":return r.a.createElement(B,{workflowId:t,stepNumber:f});default:return null}}),[c,t,f]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{fluid:!0},r.a.createElement(h.a,{style:{margin:"20px"}},r.a.createElement(v.a,{xs:6,style:{textAlign:"left"}},r.a.createElement("h4",null,"View Workflow")),r.a.createElement(v.a,{xs:3},r.a.createElement("span",null,"Status: ",r.a.createElement(z.a,{style:{color:"grey"}}),"Not Started"))),r.a.createElement(h.a,null,r.a.createElement(v.a,null,r.a.createElement(R,{type:a,workflowId:t,onNodeClick:function(e){e&&(s(e.stepType),d(e.stepNumber),console.log(e.stepNumber),k(!0))}}),r.a.createElement(N,{isOpen:y,handleClose:O,title:"Step Configuration"},r.a.createElement(U.a,null,j),r.a.createElement(V.a,null,r.a.createElement(p.a,{variant:"light",onClick:O},"Cancel")))))))},M=a(211),$=function(){var e={display:"flex",justifyContent:"center"},t=Object(n.useState)(!1),a=Object(w.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),i=Object(w.a)(c,2),s=i[0],u=i[1],m=function(e){fetch("http://ec2-3-131-133-128.us-east-2.compute.amazonaws.com:8888/acknowledgement/",{method:"POST",body:JSON.stringify({workflowId:"7aa6682f-910e-49ac-8698-9eab44295b80",level:"three",value:e}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){console.log("Response after Approval",e)})).catch((function(e){return console.error("Received Error while posting via acknowledge service: ",e)}))};return r.a.createElement(E.a,{fluid:!0},r.a.createElement(h.a,{style:{margin:"20px",borderBottom:"1px solid black"}},r.a.createElement("h3",null," WorkFlow Approval Page")),r.a.createElement(h.a,{style:{margin:"30px"}},r.a.createElement(v.a,{xs:2,style:e},r.a.createElement("h4",null,"1")),r.a.createElement(v.a,{xs:4,style:e},r.a.createElement("h4",null,"First Workflow")),r.a.createElement(v.a,{xs:3,style:e},r.a.createElement(p.a,{variant:"success",onClick:function(){o(!0),u("Workflow has been Approved"),m("approve")}}," Approve ")),r.a.createElement(v.a,{xs:3,style:e},r.a.createElement(p.a,{variant:"danger",onClick:function(){o(!0),u("Workflow has been Rejected"),m("reject")}}," Reject "))),l&&r.a.createElement(M.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:l,onClose:function(){o(!1)},ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},s)}))},Q=(a(170),a(171),a(129)),Z=a(76),_=a(130),ee=function(){var e=Object(i.e)(),t=A("ws:workflows",[]),a=Object(w.a)(t,1)[0];return r.a.createElement(E.a,{fluid:!0},r.a.createElement(h.a,{style:{margin:"20px"}},r.a.createElement(v.a,{xs:6,style:{textAlign:"left"}},r.a.createElement("h3",null,"Your Workflows")),r.a.createElement(v.a,{xs:6,style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(Q.a,{id:"dropdown-item-button",title:"Create Workflows"},r.a.createElement(Z.a.Item,{as:c.b,to:"/workflows/create/sequential"},"Sequential Review"),r.a.createElement(Z.a.Item,{as:c.b,to:"/workflows/create/parallel"},"Parallel Review")))),r.a.createElement(h.a,{style:{margin:"40px"}},r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Type"))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t.workflowId,style:{cursor:"pointer"},onClick:function(){return function(t){if(t&&t.workflowId){var a=t.workflowType.toLowerCase();e.push("/workflows/view/".concat(a,"/").concat(t.workflowId))}}(t)}},r.a.createElement("td",null,t.workflowId),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.workflowType))}))))))},te=function(){return r.a.createElement(ee,null)};var ae=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(c.a,{basename:"/"},r.a.createElement(i.a,{exact:!0,path:"/",component:te}),r.a.createElement(i.a,{exact:!0,path:"/workflows/",component:ee}),r.a.createElement(i.a,{exact:!0,path:"/workflows/create/:type",component:K}),r.a.createElement(i.a,{exact:!0,path:"/workflows/view/:type/:workflowId",component:H}),r.a.createElement(i.a,{exact:!0,path:"/workflows/approval",component:$})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[141,1,2]]]);
//# sourceMappingURL=main.4d5e3e86.chunk.js.map