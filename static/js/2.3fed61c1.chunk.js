/*! For license information please see 2.3fed61c1.chunk.js.LICENSE.txt */
(this["webpackJsonpworkflow-sample"]=this["webpackJsonpworkflow-sample"]||[]).push([[2],[function(e,t,i){"use strict";e.exports=i(97)},function(e,t,i){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}i.d(t,"a",(function(){return n}))},function(e,t,i){e.exports=i(103)()},function(e,t,i){var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)&&n.length){var a=r.apply(null,n);a&&e.push(a)}else if("object"===o)for(var s in n)i.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},function(e,t){function i(){return e.exports=i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},i.apply(this,arguments)}e.exports=i},function(e,t,i){"use strict";function n(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}i.d(t,"a",(function(){return n}))},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(5);function r(e,t){if(null==e)return{};var i,r,o=Object(n.a)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i(1);var n=i(0),r=i.n(n),o=r.a.createContext({});o.Consumer,o.Provider;function a(e,t){var i=Object(n.useContext)(o);return e||i[t]||t}},function(e,t){e.exports=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}},function(e,t,i){"use strict";function n(e){var t,i,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=n(e[t]))&&(r&&(r+=" "),r+=i);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,i=0,r="";i<arguments.length;)(e=arguments[i++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}},function(e,t,i){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=i(98)},function(e,t,i){"use strict";var n=i(1),r=i(7),o=i(0),a=i.n(o),s=(i(2),i(36)),l=i.n(s),c=i(129),h=i(150),d=i(157),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i){var o=t.defaultTheme,s=t.withTheme,p=void 0!==s&&s,u=t.name,f=Object(r.a)(t,["defaultTheme","withTheme","name"]);var g=u,m=Object(c.a)(e,Object(n.a)({defaultTheme:o,Component:i,name:u||i.displayName,classNamePrefix:g},f)),y=a.a.forwardRef((function(e,t){e.classes;var s,l=e.innerRef,c=Object(r.a)(e,["classes","innerRef"]),f=m(Object(n.a)(Object(n.a)({},i.defaultProps),e)),g=c;return("string"===typeof u||p)&&(s=Object(d.a)()||o,u&&(g=Object(h.a)({theme:s,name:u,props:c})),p&&!g.theme&&(g.theme=s)),a.a.createElement(i,Object(n.a)({ref:l||t,classes:f},g))}));return l()(y,i),y}},u=i(29);t.a=function(e,t){return p(e,Object(n.a)({defaultTheme:u.a},t))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return b})),i.d(t,"b",(function(){return g})),i.d(t,"c",(function(){return f})),i.d(t,"d",(function(){return v}));var n=i(15),r=i(0),o=i.n(r),a=(i(2),i(23)),s=i(66),l=i(21),c=i(1),h=i(67),d=i.n(h),p=(i(73),i(5)),u=(i(36),function(e){var t=Object(s.a)();return t.displayName=e,t}("Router-History")),f=function(e){var t=Object(s.a)();return t.displayName=e,t}("Router"),g=function(e){function t(t){var i;return(i=e.call(this,t)||this).state={location:t.history.location},i._isMounted=!1,i._pendingLocation=null,t.staticContext||(i.unlisten=t.history.listen((function(e){i._isMounted?i.setState({location:e}):i._pendingLocation=e}))),i}Object(n.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var i=t.prototype;return i.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&this.unlisten()},i.render=function(){return o.a.createElement(f.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(u.Provider,{children:this.props.children||null,value:this.props.history}))},t}(o.a.Component);o.a.Component;o.a.Component;var m={},y=0;function v(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var i=t,n=i.path,r=i.exact,o=void 0!==r&&r,a=i.strict,s=void 0!==a&&a,l=i.sensitive,c=void 0!==l&&l;return[].concat(n).reduce((function(t,i){if(!i&&""!==i)return null;if(t)return t;var n=function(e,t){var i=""+t.end+t.strict+t.sensitive,n=m[i]||(m[i]={});if(n[e])return n[e];var r=[],o={regexp:d()(e,r,t),keys:r};return y<1e4&&(n[e]=o,y++),o}(i,{end:o,strict:s,sensitive:c}),r=n.regexp,a=n.keys,l=r.exec(e);if(!l)return null;var h=l[0],p=l.slice(1),u=e===h;return o&&!u?null:{path:i,url:"/"===i&&""===h?"/":h,isExact:u,params:a.reduce((function(e,t,i){return e[t.name]=p[i],e}),{})}}),null)}var b=function(e){function t(){return e.apply(this,arguments)||this}return Object(n.a)(t,e),t.prototype.render=function(){var e=this;return o.a.createElement(f.Consumer,null,(function(t){t||Object(l.a)(!1);var i=e.props.location||t.location,n=e.props.computedMatch?e.props.computedMatch:e.props.path?v(i.pathname,e.props):t.match,r=Object(c.a)({},t,{location:i,match:n}),a=e.props,s=a.children,h=a.component,d=a.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(f.Provider,{value:r},r.match?s?"function"===typeof s?s(r):s:h?o.a.createElement(h,r):d?d(r):null:"function"===typeof s?s(r):null)}))},t}(o.a.Component);function w(e){return"/"===e.charAt(0)?e:"/"+e}function x(e,t){if(!e)return t;var i=w(e);return 0!==t.pathname.indexOf(i)?t:Object(c.a)({},t,{pathname:t.pathname.substr(i.length)})}function S(e){return"string"===typeof e?e:Object(a.e)(e)}function C(e){return function(){Object(l.a)(!1)}}function P(){}o.a.Component;o.a.Component;o.a.useContext},function(e,t,i){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}i.d(t,"a",(function(){return n}))},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(0),r=i(40);function o(e,t){return n.useMemo((function(){return null==e&&null==t?null:function(i){Object(r.a)(e,i),Object(r.a)(t,i)}}),[e,t])}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(88);function r(e){if("string"!==typeof e)throw new Error(Object(n.a)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,i){"use strict";t.a=function(e,t){if(!e)throw new Error("Invariant failed")}},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,i){"use strict";i.d(t,"a",(function(){return x})),i.d(t,"b",(function(){return E})),i.d(t,"d",(function(){return I})),i.d(t,"c",(function(){return g})),i.d(t,"f",(function(){return m})),i.d(t,"e",(function(){return f}));var n=i(1);function r(e){return"/"===e.charAt(0)}function o(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}var a=function(e,t){void 0===t&&(t="");var i,n=e&&e.split("/")||[],a=t&&t.split("/")||[],s=e&&r(e),l=t&&r(t),c=s||l;if(e&&r(e)?a=n:n.length&&(a.pop(),a=a.concat(n)),!a.length)return"/";if(a.length){var h=a[a.length-1];i="."===h||".."===h||""===h}else i=!1;for(var d=0,p=a.length;p>=0;p--){var u=a[p];"."===u?o(a,p):".."===u?(o(a,p),d++):d&&(o(a,p),d--)}if(!c)for(;d--;d)a.unshift("..");!c||""===a[0]||a[0]&&r(a[0])||a.unshift("");var f=a.join("/");return i&&"/"!==f.substr(-1)&&(f+="/"),f};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var l=function e(t,i){if(t===i)return!0;if(null==t||null==i)return!1;if(Array.isArray(t))return Array.isArray(i)&&t.length===i.length&&t.every((function(t,n){return e(t,i[n])}));if("object"===typeof t||"object"===typeof i){var n=s(t),r=s(i);return n!==t||r!==i?e(n,r):Object.keys(Object.assign({},t,i)).every((function(n){return e(t[n],i[n])}))}return!1},c=i(21);function h(e){return"/"===e.charAt(0)?e:"/"+e}function d(e){return"/"===e.charAt(0)?e.substr(1):e}function p(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function u(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function f(e){var t=e.pathname,i=e.search,n=e.hash,r=t||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function g(e,t,i,r){var o;"string"===typeof e?(o=function(e){var t=e||"/",i="",n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(i=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===i?"":i,hash:"#"===n?"":n}}(e)).state=t:(void 0===(o=Object(n.a)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return i&&(o.key=i),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,i,n,r){if(null!=e){var o="function"===typeof e?e(t,i):e;"string"===typeof o?"function"===typeof n?n(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(e){var i=!0;function n(){i&&e.apply(void 0,arguments)}return t.push(n),function(){i=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,i)}))}}}var v=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}function w(){try{return window.history.state||{}}catch(e){return{}}}function x(e){void 0===e&&(e={}),v||Object(c.a)(!1);var t=window.history,i=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,d=void 0===l?b:l,m=o.keyLength,x=void 0===m?6:m,S=e.basename?u(h(e.basename)):"";function C(e){var t=e||{},i=t.key,n=t.state,r=window.location,o=r.pathname+r.search+r.hash;return S&&(o=p(o,S)),g(o,n,i)}function P(){return Math.random().toString(36).substr(2,x)}var O=y();function E(e){Object(n.a)(B,e),B.length=t.length,O.notifyListeners(B.location,B.action)}function T(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||A(C(e.state))}function I(){A(C(w()))}var k=!1;function A(e){if(k)k=!1,E();else{O.confirmTransitionTo(e,"POP",d,(function(t){t?E({action:"POP",location:e}):function(e){var t=B.location,i=D.indexOf(t.key);-1===i&&(i=0);var n=D.indexOf(e.key);-1===n&&(n=0);var r=i-n;r&&(k=!0,R(r))}(e)}))}}var M=C(w()),D=[M.key];function L(e){return S+f(e)}function R(e){t.go(e)}var j=0;function N(e){1===(j+=e)&&1===e?(window.addEventListener("popstate",T),r&&window.addEventListener("hashchange",I)):0===j&&(window.removeEventListener("popstate",T),r&&window.removeEventListener("hashchange",I))}var z=!1;var B={length:t.length,action:"POP",location:M,createHref:L,push:function(e,n){var r=g(e,n,P(),B.location);O.confirmTransitionTo(r,"PUSH",d,(function(e){if(e){var n=L(r),o=r.key,a=r.state;if(i)if(t.pushState({key:o,state:a},null,n),s)window.location.href=n;else{var l=D.indexOf(B.location.key),c=D.slice(0,l+1);c.push(r.key),D=c,E({action:"PUSH",location:r})}else window.location.href=n}}))},replace:function(e,n){var r=g(e,n,P(),B.location);O.confirmTransitionTo(r,"REPLACE",d,(function(e){if(e){var n=L(r),o=r.key,a=r.state;if(i)if(t.replaceState({key:o,state:a},null,n),s)window.location.replace(n);else{var l=D.indexOf(B.location.key);-1!==l&&(D[l]=r.key),E({action:"REPLACE",location:r})}else window.location.replace(n)}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=O.setPrompt(e);return z||(N(1),z=!0),function(){return z&&(z=!1,N(-1)),t()}},listen:function(e){var t=O.appendListener(e);return N(1),function(){N(-1),t()}}};return B}var S={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:d,decodePath:h},slash:{encodePath:h,decodePath:h}};function C(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function P(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function O(e){window.location.replace(C(window.location.href)+"#"+e)}function E(e){void 0===e&&(e={}),v||Object(c.a)(!1);var t=window.history,i=(window.navigator.userAgent.indexOf("Firefox"),e),r=i.getUserConfirmation,o=void 0===r?b:r,a=i.hashType,s=void 0===a?"slash":a,l=e.basename?u(h(e.basename)):"",d=S[s],m=d.encodePath,w=d.decodePath;function x(){var e=w(P());return l&&(e=p(e,l)),g(e)}var E=y();function T(e){Object(n.a)(H,e),H.length=t.length,E.notifyListeners(H.location,H.action)}var I=!1,k=null;function A(){var e,t,i=P(),n=m(i);if(i!==n)O(n);else{var r=x(),a=H.location;if(!I&&(t=r,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(k===f(r))return;k=null,function(e){if(I)I=!1,T();else{E.confirmTransitionTo(e,"POP",o,(function(t){t?T({action:"POP",location:e}):function(e){var t=H.location,i=R.lastIndexOf(f(t));-1===i&&(i=0);var n=R.lastIndexOf(f(e));-1===n&&(n=0);var r=i-n;r&&(I=!0,j(r))}(e)}))}}(r)}}var M=P(),D=m(M);M!==D&&O(D);var L=x(),R=[f(L)];function j(e){t.go(e)}var N=0;function z(e){1===(N+=e)&&1===e?window.addEventListener("hashchange",A):0===N&&window.removeEventListener("hashchange",A)}var B=!1;var H={length:t.length,action:"POP",location:L,createHref:function(e){var t=document.querySelector("base"),i="";return t&&t.getAttribute("href")&&(i=C(window.location.href)),i+"#"+m(l+f(e))},push:function(e,t){var i=g(e,void 0,void 0,H.location);E.confirmTransitionTo(i,"PUSH",o,(function(e){if(e){var t=f(i),n=m(l+t);if(P()!==n){k=t,function(e){window.location.hash=e}(n);var r=R.lastIndexOf(f(H.location)),o=R.slice(0,r+1);o.push(t),R=o,T({action:"PUSH",location:i})}else T()}}))},replace:function(e,t){var i=g(e,void 0,void 0,H.location);E.confirmTransitionTo(i,"REPLACE",o,(function(e){if(e){var t=f(i),n=m(l+t);P()!==n&&(k=t,O(n));var r=R.indexOf(f(H.location));-1!==r&&(R[r]=t),T({action:"REPLACE",location:i})}}))},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=E.setPrompt(e);return B||(z(1),B=!0),function(){return B&&(B=!1,z(-1)),t()}},listen:function(e){var t=E.appendListener(e);return z(1),function(){z(-1),t()}}};return H}function T(e,t,i){return Math.min(Math.max(e,t),i)}function I(e){void 0===e&&(e={});var t=e,i=t.getUserConfirmation,r=t.initialEntries,o=void 0===r?["/"]:r,a=t.initialIndex,s=void 0===a?0:a,l=t.keyLength,c=void 0===l?6:l,h=y();function d(e){Object(n.a)(w,e),w.length=w.entries.length,h.notifyListeners(w.location,w.action)}function p(){return Math.random().toString(36).substr(2,c)}var u=T(s,0,o.length-1),m=o.map((function(e){return g(e,void 0,"string"===typeof e?p():e.key||p())})),v=f;function b(e){var t=T(w.index+e,0,w.entries.length-1),n=w.entries[t];h.confirmTransitionTo(n,"POP",i,(function(e){e?d({action:"POP",location:n,index:t}):d()}))}var w={length:m.length,action:"POP",location:m[u],index:u,entries:m,createHref:v,push:function(e,t){var n=g(e,t,p(),w.location);h.confirmTransitionTo(n,"PUSH",i,(function(e){if(e){var t=w.index+1,i=w.entries.slice(0);i.length>t?i.splice(t,i.length-t,n):i.push(n),d({action:"PUSH",location:n,index:t,entries:i})}}))},replace:function(e,t){var n=g(e,t,p(),w.location);h.confirmTransitionTo(n,"REPLACE",i,(function(e){e&&(w.entries[w.index]=n,d({action:"REPLACE",location:n}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),h.setPrompt(e)},listen:function(e){return h.appendListener(e)}};return w}},function(e,t,i){"use strict";i.d(t,"b",(function(){return o}));var n=i(7),r={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},o={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function a(e){return"".concat(Math.round(e),"ms")}t.a={easing:r,duration:o,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.duration,s=void 0===i?o.standard:i,l=t.easing,c=void 0===l?r.easeInOut:l,h=t.delay,d=void 0===h?0:h;Object(n.a)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:a(s)," ").concat(c," ").concat("string"===typeof d?d:a(d))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(47);var r=i(79),o=i(51);function a(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||Object(r.a)(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(0),r="undefined"!==typeof window?n.useLayoutEffect:n.useEffect;function o(e){var t=n.useRef(e);return r((function(){t.current=e})),n.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},function(e,t,i){"use strict";t.a=function(e,t){}},function(e,t,i){"use strict";var n=i(128);t.a=function(e,t){return t?Object(n.a)(e,t,{clone:!1}):e}},function(e,t,i){"use strict";var n=i(34),r=i(7),o=i(128),a=i(1),s=["xs","sm","md","lg","xl"];function l(e){var t=e.values,i=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,n=e.unit,o=void 0===n?"px":n,l=e.step,c=void 0===l?5:l,h=Object(r.a)(e,["values","unit","step"]);function d(e){var t="number"===typeof i[e]?i[e]:e;return"@media (min-width:".concat(t).concat(o,")")}function p(e,t){var n=s.indexOf(t);return n===s.length-1?d(e):"@media (min-width:".concat("number"===typeof i[e]?i[e]:e).concat(o,") and ")+"(max-width:".concat((-1!==n&&"number"===typeof i[s[n+1]]?i[s[n+1]]:t)-c/100).concat(o,")")}return Object(a.a)({keys:s,values:i,up:d,down:function(e){var t=s.indexOf(e)+1,n=i[s[t]];return t===s.length?d("xs"):"@media (max-width:".concat(("number"===typeof n&&t>0?n:e)-c/100).concat(o,")")},between:p,only:function(e){return p(e,e)},width:function(e){return i[e]}},h)}function c(e,t,i){var r;return Object(a.a)({gutters:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.a)({paddingLeft:t(2),paddingRight:t(2)},i,Object(n.a)({},e.up("sm"),Object(a.a)({paddingLeft:t(3),paddingRight:t(3)},i[e.up("sm")])))},toolbar:(r={minHeight:56},Object(n.a)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(n.a)(r,e.up("sm"),{minHeight:64}),r)},i)}var h=i(88),d={black:"#000",white:"#fff"},p={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},u={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},f={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},g={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},y={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=i(31),w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:p[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:p[800],default:"#303030"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function S(e,t,i,n){var r=n.light||n,o=n.dark||1.5*n;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:"light"===t?e.light=Object(b.d)(e.main,r):"dark"===t&&(e.dark=Object(b.a)(e.main,o)))}function C(e){var t=e.primary,i=void 0===t?{light:u[300],main:u[500],dark:u[700]}:t,n=e.secondary,s=void 0===n?{light:f.A200,main:f.A400,dark:f.A700}:n,l=e.error,c=void 0===l?{light:g[300],main:g[500],dark:g[700]}:l,C=e.warning,P=void 0===C?{light:m[300],main:m[500],dark:m[700]}:C,O=e.info,E=void 0===O?{light:y[300],main:y[500],dark:y[700]}:O,T=e.success,I=void 0===T?{light:v[300],main:v[500],dark:v[700]}:T,k=e.type,A=void 0===k?"light":k,M=e.contrastThreshold,D=void 0===M?3:M,L=e.tonalOffset,R=void 0===L?.2:L,j=Object(r.a)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function N(e){return Object(b.c)(e,x.text.primary)>=D?x.text.primary:w.text.primary}var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Object(a.a)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Object(h.a)(4,t));if("string"!==typeof e.main)throw new Error(Object(h.a)(5,JSON.stringify(e.main)));return S(e,"light",i,R),S(e,"dark",n,R),e.contrastText||(e.contrastText=N(e.main)),e},B={dark:x,light:w};return Object(o.a)(Object(a.a)({common:d,type:A,primary:z(i),secondary:z(s,"A400","A200","A700"),error:z(c),warning:z(P),info:z(E),success:z(I),grey:p,contrastThreshold:D,getContrastText:N,augmentColor:z,tonalOffset:R},B[A]),j)}function P(e){return Math.round(1e5*e)/1e5}var O={textTransform:"uppercase"};function E(e,t){var i="function"===typeof t?t(e):t,n=i.fontFamily,s=void 0===n?'"Roboto", "Helvetica", "Arial", sans-serif':n,l=i.fontSize,c=void 0===l?14:l,h=i.fontWeightLight,d=void 0===h?300:h,p=i.fontWeightRegular,u=void 0===p?400:p,f=i.fontWeightMedium,g=void 0===f?500:f,m=i.fontWeightBold,y=void 0===m?700:m,v=i.htmlFontSize,b=void 0===v?16:v,w=i.allVariants,x=i.pxToRem,S=Object(r.a)(i,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var C=c/14,E=x||function(e){return"".concat(e/b*C,"rem")},T=function(e,t,i,n,r){return Object(a.a)({fontFamily:s,fontWeight:e,fontSize:E(t),lineHeight:i},'"Roboto", "Helvetica", "Arial", sans-serif'===s?{letterSpacing:"".concat(P(n/t),"em")}:{},r,w)},I={h1:T(d,96,1.167,-1.5),h2:T(d,60,1.2,-.5),h3:T(u,48,1.167,0),h4:T(u,34,1.235,.25),h5:T(u,24,1.334,0),h6:T(g,20,1.6,.15),subtitle1:T(u,16,1.75,.15),subtitle2:T(g,14,1.57,.1),body1:T(u,16,1.5,.15),body2:T(u,14,1.43,.15),button:T(g,14,1.75,.4,O),caption:T(u,12,1.66,.4),overline:T(u,12,2.66,1,O)};return Object(o.a)(Object(a.a)({htmlFontSize:b,pxToRem:E,round:P,fontFamily:s,fontSize:c,fontWeightLight:d,fontWeightRegular:u,fontWeightMedium:g,fontWeightBold:y},I),S,{clone:!1})}function T(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var I=["none",T(0,2,1,-1,0,1,1,0,0,1,3,0),T(0,3,1,-2,0,2,2,0,0,1,5,0),T(0,3,3,-2,0,3,4,0,0,1,8,0),T(0,2,4,-1,0,4,5,0,0,1,10,0),T(0,3,5,-1,0,5,8,0,0,1,14,0),T(0,3,5,-1,0,6,10,0,0,1,18,0),T(0,4,5,-2,0,7,10,1,0,2,16,1),T(0,5,5,-3,0,8,10,1,0,3,14,2),T(0,5,6,-3,0,9,12,1,0,3,16,2),T(0,6,6,-3,0,10,14,1,0,4,18,3),T(0,6,7,-4,0,11,15,1,0,4,20,3),T(0,7,8,-4,0,12,17,2,0,5,22,4),T(0,7,8,-4,0,13,19,2,0,5,24,4),T(0,7,9,-4,0,14,21,2,0,5,26,4),T(0,8,9,-5,0,15,22,2,0,6,28,5),T(0,8,10,-5,0,16,24,2,0,6,30,5),T(0,8,11,-5,0,17,26,2,0,6,32,5),T(0,9,11,-5,0,18,28,2,0,7,34,6),T(0,9,12,-6,0,19,29,2,0,7,36,6),T(0,10,13,-6,0,20,31,3,0,8,38,7),T(0,10,13,-6,0,21,33,3,0,8,40,7),T(0,10,14,-6,0,22,35,3,0,8,42,7),T(0,11,14,-7,0,23,36,3,0,9,44,8),T(0,11,15,-7,0,24,38,3,0,9,46,8)],k={borderRadius:4},A=i(158);function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Object(A.a)({spacing:e}),i=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return 0===i.length?t(1):1===i.length?t(i[0]):i.map((function(e){if("string"===typeof e)return e;var i=t(e);return"number"===typeof i?"".concat(i,"px"):i})).join(" ")};return Object.defineProperty(i,"unit",{get:function(){return e}}),i.mui=!0,i}var D=i(24),L=i(53);var R=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,i=void 0===t?{}:t,n=e.mixins,a=void 0===n?{}:n,s=e.palette,h=void 0===s?{}:s,d=e.spacing,p=e.typography,u=void 0===p?{}:p,f=Object(r.a)(e,["breakpoints","mixins","palette","spacing","typography"]),g=C(h),m=l(i),y=M(d),v=Object(o.a)({breakpoints:m,direction:"ltr",mixins:c(m,y,a),overrides:{},palette:g,props:{},shadows:I,typography:E(g,u),spacing:y,shape:k,transitions:D.a,zIndex:L.a},f),b=arguments.length,w=new Array(b>1?b-1:0),x=1;x<b;x++)w[x-1]=arguments[x];return v=w.reduce((function(e,t){return Object(o.a)(e,t)}),v)}();t.a=R},function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}i.d(t,"a",(function(){return r}))},function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return h})),i.d(t,"d",(function(){return d}));var n=i(88);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),i)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),i=e.match(t);return i&&1===i[0].length&&(i=i.map((function(e){return e+e}))),i?"rgb".concat(4===i.length?"a":"","(").concat(i.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),i=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(i))throw new Error(Object(n.a)(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:i,values:r=r.map((function(e){return parseFloat(e)}))}}function a(e){var t=e.type,i=e.values;return-1!==t.indexOf("rgb")?i=i.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),"".concat(t,"(").concat(i.join(", "),")")}function s(e,t){var i=l(e),n=l(t);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}function l(e){var t="hsl"===(e=o(e)).type?o(function(e){var t=(e=o(e)).values,i=t[0],n=t[1]/100,r=t[2]/100,s=n*Math.min(r,1-r),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+i/30)%12;return r-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",h=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",h.push(t[3])),a({type:c,values:h})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e,t){return e=o(e),t=r(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,a(e)}function h(e,t){if(e=o(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var i=0;i<3;i+=1)e.values[i]*=1-t;return a(e)}function d(e,t){if(e=o(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;return a(e)}},function(e,t,i){"use strict";var n=!("undefined"===typeof window||!window.document||!window.document.createElement),r=!1,o=!1;try{var a={get passive(){return r=!0},get once(){return o=r=!0}};n&&(window.addEventListener("test",a,a),window.removeEventListener("test",a,!0))}catch(c){}var s=function(e,t,i,n){if(n&&"boolean"!==typeof n&&!o){var a=n.once,s=n.capture,l=i;!o&&a&&(l=i.__once||function e(n){this.removeEventListener(t,e,s),i.call(this,n)},i.__once=l),e.addEventListener(t,l,r?n:s)}e.addEventListener(t,i,n)};var l=function(e,t,i,n){var r=n&&"boolean"!==typeof n?n.capture:n;e.removeEventListener(t,i,r),i.__once&&e.removeEventListener(t,i.__once,r)};t.a=function(e,t,i,n){return s(e,t,i,n),function(){l(e,t,i,n)}}},function(e,t,i){"use strict";var n=function(){};e.exports=n},function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";e.exports=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;var n,r,o;if(Array.isArray(t)){if((n=t.length)!=i.length)return!1;for(r=n;0!==r--;)if(!e(t[r],i[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(i).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(i,o[r]))return!1;for(r=n;0!==r--;){var a=o[r];if(!e(t[a],i[a]))return!1}return!0}return t!==t&&i!==i}},function(e,t,i){"use strict";var n=i(73),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?a:s[e.$$typeof]||r}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var c=Object.defineProperty,h=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,i,n){if("string"!==typeof i){if(f){var r=u(i);r&&r!==f&&e(t,r,n)}var a=h(i);d&&(a=a.concat(d(i)));for(var s=l(t),g=l(i),m=0;m<a.length;++m){var y=a[m];if(!o[y]&&(!n||!n[y])&&(!g||!g[y])&&(!s||!s[y])){var v=p(i,y);try{c(t,y,v)}catch(b){}}}}return t}},function(e,t,i){"use strict";e.exports=function(e,t,i,n,r,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[i,n,r,o,a,s],h=0;(l=new Error(t.replace(/%s/g,(function(){return c[h++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}i.d(t,"a",(function(){return r}))},function(e,t,i){"use strict";var n=i(0),r=i.n(n);t.a=r.a.createContext(null)},function(e,t,i){"use strict";function n(e,t){"function"===typeof e?e(t):e&&(e.current=t)}i.d(t,"a",(function(){return n}))},function(e,t){function i(){return e.exports=i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},i.apply(this,arguments)}e.exports=i},function(e,t,i){"use strict";var n=i(1),r=i(5),o=i(3),a=i.n(o),s=i(0),l=i.n(s),c=i(9),h=["xl","lg","md","sm","xs"],d=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.className,s=e.as,d=void 0===s?"div":s,p=Object(r.a)(e,["bsPrefix","className","as"]),u=Object(c.a)(i,"col"),f=[],g=[];return h.forEach((function(e){var t,i,n,r=p[e];if(delete p[e],"object"===typeof r&&null!=r){var o=r.span;t=void 0===o||o,i=r.offset,n=r.order}else t=r;var a="xs"!==e?"-"+e:"";t&&f.push(!0===t?""+u+a:""+u+a+"-"+t),null!=n&&g.push("order"+a+"-"+n),null!=i&&g.push("offset"+a+"-"+i)})),f.length||f.push(u),l.a.createElement(d,Object(n.a)({},p,{ref:t,className:a.a.apply(void 0,[o].concat(f,g))}))}));d.displayName="Col",t.a=d},function(e,t,i){"use strict";var n=i(1),r=i(5),o=i(3),a=i.n(o),s=i(0),l=i.n(s),c=(i(65),i(2)),h=i.n(c),d={type:h.a.string,tooltip:h.a.bool,as:h.a.elementType},p=l.a.forwardRef((function(e,t){var i=e.as,o=void 0===i?"div":i,s=e.className,c=e.type,h=void 0===c?"valid":c,d=e.tooltip,p=void 0!==d&&d,u=Object(r.a)(e,["as","className","type","tooltip"]);return l.a.createElement(o,Object(n.a)({},u,{ref:t,className:a()(s,h+"-"+(p?"tooltip":"feedback"))}))}));p.displayName="Feedback",p.propTypes=d;var u=p,f=l.a.createContext({controlId:void 0}),g=i(9),m=l.a.forwardRef((function(e,t){var i=e.id,o=e.bsPrefix,c=e.bsCustomPrefix,h=e.className,d=e.type,p=void 0===d?"checkbox":d,u=e.isValid,m=void 0!==u&&u,y=e.isInvalid,v=void 0!==y&&y,b=e.isStatic,w=e.as,x=void 0===w?"input":w,S=Object(r.a)(e,["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"]),C=Object(s.useContext)(f),P=C.controlId,O=C.custom?[c,"custom-control-input"]:[o,"form-check-input"],E=O[0],T=O[1];return o=Object(g.a)(E,T),l.a.createElement(x,Object(n.a)({},S,{ref:t,type:p,id:i||P,className:a()(h,o,m&&"is-valid",v&&"is-invalid",b&&"position-static")}))}));m.displayName="FormCheckInput";var y=m,v=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.bsCustomPrefix,c=e.className,h=e.htmlFor,d=Object(r.a)(e,["bsPrefix","bsCustomPrefix","className","htmlFor"]),p=Object(s.useContext)(f),u=p.controlId,m=p.custom?[o,"custom-control-label"]:[i,"form-check-label"],y=m[0],v=m[1];return i=Object(g.a)(y,v),l.a.createElement("label",Object(n.a)({},d,{ref:t,htmlFor:h||u,className:a()(c,i)}))}));v.displayName="FormCheckLabel";var b=v,w=l.a.forwardRef((function(e,t){var i=e.id,o=e.bsPrefix,c=e.bsCustomPrefix,h=e.inline,d=void 0!==h&&h,p=e.disabled,m=void 0!==p&&p,v=e.isValid,w=void 0!==v&&v,x=e.isInvalid,S=void 0!==x&&x,C=e.feedbackTooltip,P=void 0!==C&&C,O=e.feedback,E=e.className,T=e.style,I=e.title,k=void 0===I?"":I,A=e.type,M=void 0===A?"checkbox":A,D=e.label,L=e.children,R=e.custom,j=e.as,N=void 0===j?"input":j,z=Object(r.a)(e,["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"]),B="switch"===M||R,H=B?[c,"custom-control"]:[o,"form-check"],_=H[0],W=H[1];o=Object(g.a)(_,W);var F=Object(s.useContext)(f).controlId,V=Object(s.useMemo)((function(){return{controlId:i||F,custom:B}}),[F,B,i]),U=null!=D&&!1!==D&&!L,Y=l.a.createElement(y,Object(n.a)({},z,{type:"switch"===M?"checkbox":M,ref:t,isValid:w,isInvalid:S,isStatic:!U,disabled:m,as:N}));return l.a.createElement(f.Provider,{value:V},l.a.createElement("div",{style:T,className:a()(E,o,B&&"custom-"+M,d&&o+"-inline")},L||l.a.createElement(l.a.Fragment,null,Y,U&&l.a.createElement(b,{title:k},D),(w||S)&&l.a.createElement(u,{type:w?"valid":"invalid",tooltip:P},O))))}));w.displayName="FormCheck",w.Input=y,w.Label=b;var x=w,S=l.a.forwardRef((function(e,t){var i=e.id,o=e.bsPrefix,c=e.bsCustomPrefix,h=e.className,d=e.isValid,p=e.isInvalid,u=e.lang,m=e.as,y=void 0===m?"input":m,v=Object(r.a)(e,["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"]),b=Object(s.useContext)(f),w=b.controlId,x=b.custom?[c,"custom-file-input"]:[o,"form-control-file"],S=x[0],C=x[1];return o=Object(g.a)(S,C),l.a.createElement(y,Object(n.a)({},v,{ref:t,id:i||w,type:"file",lang:u,className:a()(h,o,d&&"is-valid",p&&"is-invalid")}))}));S.displayName="FormFileInput";var C=S,P=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.bsCustomPrefix,c=e.className,h=e.htmlFor,d=Object(r.a)(e,["bsPrefix","bsCustomPrefix","className","htmlFor"]),p=Object(s.useContext)(f),u=p.controlId,m=p.custom?[o,"custom-file-label"]:[i,"form-file-label"],y=m[0],v=m[1];return i=Object(g.a)(y,v),l.a.createElement("label",Object(n.a)({},d,{ref:t,htmlFor:h||u,className:a()(c,i),"data-browse":d["data-browse"]}))}));P.displayName="FormFileLabel";var O=P,E=l.a.forwardRef((function(e,t){var i=e.id,o=e.bsPrefix,c=e.bsCustomPrefix,h=e.disabled,d=void 0!==h&&h,p=e.isValid,m=void 0!==p&&p,y=e.isInvalid,v=void 0!==y&&y,b=e.feedbackTooltip,w=void 0!==b&&b,x=e.feedback,S=e.className,P=e.style,E=e.label,T=e.children,I=e.custom,k=e.lang,A=e["data-browse"],M=e.as,D=void 0===M?"div":M,L=e.inputAs,R=void 0===L?"input":L,j=Object(r.a)(e,["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"]),N=I?[c,"custom"]:[o,"form-file"],z=N[0],B=N[1];o=Object(g.a)(z,B);var H=Object(s.useContext)(f).controlId,_=Object(s.useMemo)((function(){return{controlId:i||H,custom:I}}),[H,I,i]),W=null!=E&&!1!==E&&!T,F=l.a.createElement(C,Object(n.a)({},j,{ref:t,isValid:m,isInvalid:v,disabled:d,as:R,lang:k}));return l.a.createElement(f.Provider,{value:_},l.a.createElement(D,{style:P,className:a()(S,o,I&&"custom-file")},T||l.a.createElement(l.a.Fragment,null,I?l.a.createElement(l.a.Fragment,null,F,W&&l.a.createElement(O,{"data-browse":A},E)):l.a.createElement(l.a.Fragment,null,W&&l.a.createElement(O,null,E),F),(m||v)&&l.a.createElement(u,{type:m?"valid":"invalid",tooltip:w},x))))}));E.displayName="FormFile",E.Input=C,E.Label=O;var T=E,I=(i(33),l.a.forwardRef((function(e,t){var i,o,c=e.bsPrefix,h=e.bsCustomPrefix,d=e.type,p=e.size,u=e.htmlSize,m=e.id,y=e.className,v=e.isValid,b=void 0!==v&&v,w=e.isInvalid,x=void 0!==w&&w,S=e.plaintext,C=e.readOnly,P=e.custom,O=e.as,E=void 0===O?"input":O,T=Object(r.a)(e,["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"]),I=Object(s.useContext)(f).controlId,k=P?[h,"custom"]:[c,"form-control"],A=k[0],M=k[1];if(c=Object(g.a)(A,M),S)(o={})[c+"-plaintext"]=!0,i=o;else if("file"===d){var D;(D={})[c+"-file"]=!0,i=D}else if("range"===d){var L;(L={})[c+"-range"]=!0,i=L}else if("select"===E&&P){var R;(R={})[c+"-select"]=!0,R[c+"-select-"+p]=p,i=R}else{var j;(j={})[c]=!0,j[c+"-"+p]=p,i=j}return l.a.createElement(E,Object(n.a)({},T,{type:d,size:u,ref:t,readOnly:C,id:m||I,className:a()(y,i,b&&"is-valid",x&&"is-invalid")}))})));I.displayName="FormControl";var k=Object.assign(I,{Feedback:u}),A=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.className,c=e.children,h=e.controlId,d=e.as,p=void 0===d?"div":d,u=Object(r.a)(e,["bsPrefix","className","children","controlId","as"]);i=Object(g.a)(i,"form-group");var m=Object(s.useMemo)((function(){return{controlId:h}}),[h]);return l.a.createElement(f.Provider,{value:m},l.a.createElement(p,Object(n.a)({},u,{ref:t,className:a()(o,i)}),c))}));A.displayName="FormGroup";var M=A,D=i(42),L=l.a.forwardRef((function(e,t){var i=e.as,o=void 0===i?"label":i,c=e.bsPrefix,h=e.column,d=e.srOnly,p=e.className,u=e.htmlFor,m=Object(r.a)(e,["as","bsPrefix","column","srOnly","className","htmlFor"]),y=Object(s.useContext)(f).controlId;c=Object(g.a)(c,"form-label");var v="col-form-label";"string"===typeof h&&(v=v+"-"+h);var b=a()(p,c,d&&"sr-only",h&&v);return u=u||y,h?l.a.createElement(D.a,Object(n.a)({as:"label",className:b,htmlFor:u},m)):l.a.createElement(o,Object(n.a)({ref:t,className:b,htmlFor:u},m))}));L.displayName="FormLabel",L.defaultProps={column:!1,srOnly:!1};var R=L,j=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.className,s=e.as,c=void 0===s?"small":s,h=e.muted,d=Object(r.a)(e,["bsPrefix","className","as","muted"]);return i=Object(g.a)(i,"form-text"),l.a.createElement(c,Object(n.a)({},d,{ref:t,className:a()(o,i,h&&"text-muted")}))}));j.displayName="FormText";var N=j,z=l.a.forwardRef((function(e,t){return l.a.createElement(x,Object(n.a)({},e,{ref:t,type:"switch"}))}));z.displayName="Switch",z.Input=x.Input,z.Label=x.Label;var B=z,H=i(57),_=Object(H.a)("form-row"),W=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.inline,s=e.className,c=e.validated,h=e.as,d=void 0===h?"form":h,p=Object(r.a)(e,["bsPrefix","inline","className","validated","as"]);return i=Object(g.a)(i,"form"),l.a.createElement(d,Object(n.a)({},p,{ref:t,className:a()(s,c&&"was-validated",o&&i+"-inline")}))}));W.displayName="Form",W.defaultProps={inline:!1},W.Row=_,W.Group=M,W.Control=k,W.Check=x,W.File=T,W.Switch=B,W.Label=R,W.Text=N;t.a=W},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(0);var r=function(e){var t=Object(n.useRef)(e);return Object(n.useEffect)((function(){t.current=e}),[e]),t};function o(e){var t=r(e);return Object(n.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return w}));var n=i(14),r=i(15),o=i(0),a=i.n(o),s=i(23),l=(i(2),i(1)),c=i(5),h=i(21);a.a.Component;var d=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).history=Object(s.b)(t.props),t}return Object(r.a)(t,e),t.prototype.render=function(){return a.a.createElement(n.b,{history:this.history,children:this.props.children})},t}(a.a.Component);var p=function(e,t){return"function"===typeof e?e(t):e},u=function(e,t){return"string"===typeof e?Object(s.c)(e,null,null,t):e},f=function(e){return e},g=a.a.forwardRef;"undefined"===typeof g&&(g=f);var m=g((function(e,t){var i=e.innerRef,n=e.navigate,r=e.onClick,o=Object(c.a)(e,["innerRef","navigate","onClick"]),s=o.target,h=Object(l.a)({},o,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}});return h.ref=f!==g&&t||i,a.a.createElement("a",h)}));var y=g((function(e,t){var i=e.component,r=void 0===i?m:i,o=e.replace,s=e.to,d=e.innerRef,y=Object(c.a)(e,["component","replace","to","innerRef"]);return a.a.createElement(n.c.Consumer,null,(function(e){e||Object(h.a)(!1);var i=e.history,n=u(p(s,e.location),e.location),c=n?i.createHref(n):"",m=Object(l.a)({},y,{href:c,navigate:function(){var t=p(s,e.location);(o?i.replace:i.push)(t)}});return f!==g?m.ref=t||d:m.innerRef=d,a.a.createElement(r,m)}))})),v=function(e){return e},b=a.a.forwardRef;"undefined"===typeof b&&(b=v);var w=b((function(e,t){var i=e["aria-current"],r=void 0===i?"page":i,o=e.activeClassName,s=void 0===o?"active":o,d=e.activeStyle,f=e.className,g=e.exact,m=e.isActive,w=e.location,x=e.sensitive,S=e.strict,C=e.style,P=e.to,O=e.innerRef,E=Object(c.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(n.c.Consumer,null,(function(e){e||Object(h.a)(!1);var i=w||e.location,o=u(p(P,i),i),c=o.pathname,T=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),I=T?Object(n.d)(i.pathname,{path:T,exact:g,sensitive:x,strict:S}):null,k=!!(m?m(I,i):I),A=k?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((function(e){return e})).join(" ")}(f,s):f,M=k?Object(l.a)({},C,{},d):C,D=Object(l.a)({"aria-current":k&&r||null,className:A,style:M,to:o},E);return v!==b?D.ref=t||O:D.innerRef=O,a.a.createElement(y,D)}))}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(47);function r(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(n.a)(e,t):void 0}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i(25),i(1);var n=i(45),r=(i(2),i(28),{xs:0,sm:600,md:960,lg:1280,xl:1920}),o={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function a(e,t,i){if(Array.isArray(t)){var r=e.theme.breakpoints||o;return t.reduce((function(e,n,o){return e[r.up(r.keys[o])]=i(t[o]),e}),{})}if("object"===Object(n.a)(t)){var a=e.theme.breakpoints||o;return Object.keys(t).reduce((function(e,n){return e[a.up(n)]=i(t[n]),e}),{})}return i(t)}},function(e,t,i){"use strict";t.a={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},function(e,t,i){"use strict";function n(e){return e&&e.ownerDocument||document}i.d(t,"a",(function(){return n}))},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,i){"use strict";i.d(t,"a",(function(){return hi}));var n=i(4),r=i.n(n),o=i(10),a=i.n(o),s=i(83),l=i.n(s),c=i(2),h=i.n(c),d=i(0),p=i.n(d);function u(e){var t=Object(d.useRef)(null);return Object(d.useEffect)((function(){t.current=e})),t.current}var f=i(8),g=i.n(f),m=i(22),y=i.n(m),v=i(6),b=i.n(v),w=i(35),x=i.n(w),S=i(37),C=i.n(S),P={JUSTIFY:"justify",LEFT:"left",RIGHT:"right"};function O(e){return"string"===typeof e?e:"label"}var E=0;function T(e){return Array.isArray(e)&&e.length?e[0]:void 0}function I(e){return"function"===typeof e}function k(e){return"string"===typeof e}function A(){}function M(e,t){var i={};return t.forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])})),i}function D(e){return E+=1,(null==e?"":String(e))+E}function L(e){return I(Object.values)?Object.values(e):function(e){return Object.keys(e).reduce((function(t,i){return Object.prototype.propertyIsEnumerable.call(e,i)&&t.push(e[i]),t}),[])}(e)}var R=function(e,t){return k(e)||!e.paginationOption&&!e.customOption?(i=I(t)?t(e):k(e)?e:e[t],k(i)||C()(!1),i):e[O(t)];var i};var j=function(e,t){var i=t.allowNew,n=t.labelKey,r=t.text;return!(!i||!r.trim())&&("function"===typeof i?i(e,t):!e.some((function(e){return R(e,n)===r})))};function N(e,t){if(!k(e))return e[t]}for(var z=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779\xd0"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"OE",letters:"\x8c\u0152"},{base:"oe",letters:"\x9c\u0153"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],B={},H=0;H<z.length;H++)for(var _=z[H].letters,W=0;W<_.length;W++)B[_[W]]=z[H].base;function F(e){return e.replace(/[\u0300-\u036F]/g,"").replace(/[^\u0000-\u007E]/g,(function(e){return B[e]||e}))}var V=i(33),U=i.n(V),Y={};function X(e,t){if(!e&&-1!==t.indexOf("deprecated")){if(Y[t])return;Y[t]=!0}for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];U.a.apply(void 0,[e,"[react-bootstrap-typeahead] "+t].concat(n))}function G(e,t,i){var n=e,r=t;return i.caseSensitive||(n=n.toLowerCase(),r=r.toLowerCase()),i.ignoreDiacritics&&(n=F(n),r=F(r)),-1!==r.indexOf(n)}function q(e,t){var i=t.filterBy,n=t.labelKey,r=t.multiple,o=t.selected,a=t.text;if(r&&o.some((function(t){return x()(t,e)})))return!1;if(I(n)&&G(a,n(e),t))return!0;var s=i.slice();return k(n)&&-1===s.indexOf(n)&&s.unshift(n),k(e)?(X(s.length<=1,"You cannot filter by properties when `option` is a string."),G(a,e,t)):s.some((function(i){var n=N(e,i);return k(n)||(X(!1,"Fields passed to `filterBy` should have string values. Value will be converted to a string; results may be unexpected."),n=String(n)),G(a,n,t)}))}function Z(e){return e.displayName||e.name||"Component"}var K=/[\u0300-\u036F]/;function $(e,t){var i=new RegExp(function(e){return"string"!==typeof e&&C()(!1),e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(F(t)),"i").exec(F(e));if(!i)return null;var n=i.index,r=i[0].length;if(K.test(e)){for(var o=0;o<=n;o++)K.test(e[o])&&(n+=1);for(var a=n;a<=n+r;a++)K.test(e[a])&&(r+=1)}return{end:n+r,start:n}}var Q=function(e){var t=e.activeIndex,i=e.initialItem,n=e.isFocused,r=e.isMenuShown,o=e.labelKey,a=e.multiple,s=e.selected,l=e.text;if(!l||!n||!r||!i||i.customOption||t>-1||s.length&&!a)return"";var c=R(i,o),h=$(c.toLowerCase(),l.toLowerCase());return h&&0===h.start?l+c.slice(h.end,c.length):""},J=i(3),ee=i.n(J);function te(e,t){return(e||"")+"-item-"+t}var ie=function(e){var t=e.activeIndex,i=e.id,n=e.isFocused,o=e.isMenuShown,s=e.multiple,l=e.onFocus,c=e.placeholder,h=a()(e,["activeIndex","id","isFocused","isMenuShown","multiple","onFocus","placeholder"]);return function(e){var d,p=void 0===e?{}:e,u=p.className,f=a()(p,["className"]),g=r()({autoComplete:"off",placeholder:c,type:"text"},f,h,{"aria-activedescendant":t>=0?te(i,t):void 0,"aria-autocomplete":"both","aria-expanded":o,"aria-haspopup":"listbox","aria-owns":o?i:void 0,className:ee()((d={},d[u||""]=!s,d.focus=n,d)),onClick:l,onFocus:l,role:"combobox"});return s?r()({},g,{"aria-autocomplete":"list","aria-expanded":void 0,inputClassName:u,role:void 0}):g}};var ne=function(e){var t=e.activeItem,i=e.labelKey,n=e.multiple,r=e.selected,o=e.text;if(t)return R(t,i);var a=!n&&!!r.length&&T(r);return a?R(a,i):o};var re=function(e){var t=e.allowNew,i=e.highlightOnlyResult,n=e.results;return!(!i||t)&&(1===n.length&&!N(T(n),"disabled"))};var oe=function(e,t){return!t||t>=e.length?e:e.slice(0,t)};function ae(e,t,i){for(var n=e;i[n]&&i[n].disabled;)n+=38===t?-1:1;return n}function se(e,t,i){var n=e;return(n=ae(n+=38===t?-1:1,t,i))===i.length?n=-1:-2===n&&(n=ae(n=i.length-1,t,i)),n}function le(e){return null!=e.selectionStart}function ce(e){e.preventDefault()}function he(e){return"large"===e||"lg"===e}function de(e){return"small"===e||"sm"===e}var pe=Object(d.createContext)({activeIndex:-1,hintText:"",id:"",initialItem:null,inputNode:null,isOnlyResult:!1,onActiveItemChange:A,onAdd:A,onInitialItemChange:A,onMenuItemClick:A,selectHintOnEnter:void 0,setItem:A}),ue=function(){return Object(d.useContext)(pe)},fe=["activeIndex","disabled","id","inputRef","isFocused","isMenuShown","multiple","onBlur","onChange","onFocus","onKeyDown","placeholder"],ge=["activeIndex","hideMenu","isMenuShown","labelKey","onClear","onHide","onRemove","results","selected","text","toggleMenu"],me=["activeIndex","id","initialItem","inputNode","onActiveItemChange","onAdd","onInitialItemChange","onMenuItemClick","selectHintOnEnter","setItem"],ye=function(e){var t=e.allowNew,i=e.children,n=e.initialItem,o=e.isMenuShown,a=e.onAdd,s=e.onInitialItemChange,l=e.onKeyDown,c=e.onMenuToggle,h=e.results,f=u(e);Object(d.useEffect)((function(){t||h.length||s(null)})),Object(d.useEffect)((function(){f&&f.isMenuShown!==o&&c(o)}));var g=r()({},M(e,ge),{getInputProps:ie(r()({},M(e,fe),{onKeyDown:function(t){switch(t.keyCode){case 13:n&&re(e)&&a(n)}l(t)},value:ne(e)}))}),m=r()({},M(e,me),{hintText:Q(e),isOnlyResult:re(e)});return p.a.createElement(pe.Provider,{value:m},i(g))},ve=[{alt:"onBlur",prop:"onBlur"},{alt:"onInputChange",prop:"onChange"},{alt:"onFocus",prop:"onFocus"},{alt:"onKeyDown",prop:"onKeyDown"}],be=h.a.oneOf(L({LARGE:"large",LG:"lg",SM:"sm",SMALL:"small"}));function we(e,t){return function(i,n,r){var o;h.a.checkPropTypes(((o={})[n]=e,o),i,"prop",r),I(t)&&t(i,n,r)}}function xe(e,t,i){X(null!=e[t],"The prop `"+t+"` is required to make `"+i+"` accessible for users of assistive technologies such as screen readers.")}var Se=h.a.oneOfType([h.a.object,h.a.string]);var Ce,Pe,Oe={allowNew:h.a.oneOfType([h.a.bool,h.a.func]),autoFocus:h.a.bool,caseSensitive:we(h.a.bool,(function(e,t,i){var n=e.caseSensitive,r=e.filterBy;X(!n||"function"!==typeof r,"Your `filterBy` function will override the `caseSensitive` prop.")})),defaultInputValue:we(h.a.string,(function(e,t,i){var n=e.defaultInputValue,r=e.defaultSelected,o=e.multiple,a=e.selected,s=r.length?"defaultSelected":"selected";X(!(!o&&n&&(r.length||a&&a.length)),"`defaultInputValue` will be overridden by the value from `"+s+"`.")})),defaultOpen:h.a.bool,defaultSelected:we(h.a.arrayOf(Se),(function(e,t,i){var n=e.defaultSelected;X(e.multiple||n.length<=1,"You are passing multiple options to the `defaultSelected` prop of a Typeahead in single-select mode. The selections will be truncated to a single selection.")})),filterBy:h.a.oneOfType([h.a.arrayOf(h.a.string.isRequired),h.a.func]),highlightOnlyResult:we(h.a.bool,(function(e,t,i){var n=e.allowNew;X(!(e.highlightOnlyResult&&n),"`highlightOnlyResult` will not work with `allowNew`.")})),id:we(h.a.oneOfType([h.a.number,h.a.string]),xe),ignoreDiacritics:we(h.a.bool,(function(e,t,i){var n=e.filterBy;X(e.ignoreDiacritics||"function"!==typeof n,"Your `filterBy` function will override the `ignoreDiacritics` prop.")})),labelKey:we(h.a.oneOfType([h.a.string,h.a.func]),(function(e,t,i){var n=e.allowNew;X(!(I(e.labelKey)&&n),"`labelKey` must be a string when `allowNew={true}`.")})),maxResults:h.a.number,minLength:h.a.number,multiple:h.a.bool,onBlur:h.a.func,onChange:h.a.func,onFocus:h.a.func,onInputChange:h.a.func,onKeyDown:h.a.func,onMenuToggle:h.a.func,onPaginate:h.a.func,open:h.a.bool,options:h.a.arrayOf(Se).isRequired,paginate:h.a.bool,selected:we(h.a.arrayOf(Se),(function(e,t,i){var n=e.multiple,r=e.onChange,o=e.selected;X(n||!o||o.length<=1,"You are passing multiple options to the `selected` prop of a Typeahead in single-select mode. This may lead to unexpected behaviors or errors."),X(!o||o&&I(r),"You provided a `selected` prop without an `onChange` handler. If you want the typeahead to be uncontrolled, use `defaultSelected`. Otherwise, set `onChange`.")})),selectHintOnEnter:(Ce=h.a.bool,Pe="Use the `shouldSelect` prop on the `Hint` component to define which keystrokes can select the hint.",function(e,t,i){var n;return null!=e[t]&&X(!1,"The `"+t+"` prop is deprecated. "+Pe),h.a.checkPropTypes(((n={})[t]=Ce,n),e,"prop",i)})},Ee={allowNew:!1,autoFocus:!1,caseSensitive:!1,defaultInputValue:"",defaultOpen:!1,defaultSelected:[],filterBy:[],highlightOnlyResult:!1,ignoreDiacritics:!0,labelKey:"label",maxResults:100,minLength:0,multiple:!1,onBlur:A,onFocus:A,onInputChange:A,onKeyDown:A,onMenuToggle:A,onPaginate:A,paginate:!0};function Te(e){var t=e.defaultInputValue,i=e.defaultOpen,n=e.defaultSelected,r=e.maxResults,o=e.multiple,a=e.selected?e.selected.slice():n.slice(),s=t;return!o&&a.length&&(s=R(T(a),e.labelKey),a.length>1&&(a=a.slice(0,1))),{activeIndex:-1,activeItem:null,initialItem:null,isFocused:!1,selected:a,showMenu:i,shownResults:r,text:s}}function Ie(e,t){return r()({},Te(t),{isFocused:e.isFocused,selected:[],text:""})}function ke(e,t){var i=Te(t);return{activeIndex:i.activeIndex,activeItem:i.activeItem,initialItem:i.initialItem,showMenu:!1,shownResults:i.shownResults}}function Ae(e,t){return e.showMenu?ke(0,t):{showMenu:!0}}var Me=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,b()(g()(t),"state",Te(t.props)),b()(g()(t),"inputNode",void 0),b()(g()(t),"isMenuShown",!1),b()(g()(t),"items",[]),b()(g()(t),"blur",(function(){t.inputNode&&t.inputNode.blur(),t.hideMenu()})),b()(g()(t),"clear",(function(){t.setState(Ie)})),b()(g()(t),"focus",(function(){t.inputNode&&t.inputNode.focus()})),b()(g()(t),"getInput",(function(){return t.inputNode})),b()(g()(t),"inputRef",(function(e){t.inputNode=e})),b()(g()(t),"setItem",(function(e,i){t.items[i]=e})),b()(g()(t),"hideMenu",(function(){t.setState(ke)})),b()(g()(t),"toggleMenu",(function(){t.setState(Ae)})),b()(g()(t),"_handleActiveIndexChange",(function(e){t.setState((function(t){return{activeIndex:e,activeItem:-1===e?null:t.activeItem}}))})),b()(g()(t),"_handleActiveItemChange",(function(e){x()(e,t.state.activeItem)||t.setState({activeItem:e})})),b()(g()(t),"_handleBlur",(function(e){e.persist(),t.setState({isFocused:!1},(function(){return t.props.onBlur(e)}))})),b()(g()(t),"_handleChange",(function(e){t.props.onChange&&t.props.onChange(e)})),b()(g()(t),"_handleClear",(function(){t.setState(Ie,(function(){return t._handleChange([])}))})),b()(g()(t),"_handleFocus",(function(e){e.persist(),t.setState({isFocused:!0,showMenu:!0},(function(){return t.props.onFocus(e)}))})),b()(g()(t),"_handleInitialItemChange",(function(e){x()(e,t.state.initialItem)||t.setState({initialItem:e})})),b()(g()(t),"_handleInputChange",(function(e){e.persist();var i=e.currentTarget.value,n=t.props,r=n.multiple,o=n.onInputChange,a=t.state.selected.length&&!r;t.setState((function(e,t){var n=Te(t),r=n.activeIndex,o=n.activeItem,s=n.shownResults;return{activeIndex:r,activeItem:o,selected:a?[]:e.selected,showMenu:!0,shownResults:s,text:i}}),(function(){o(i,e),a&&t._handleChange([])}))})),b()(g()(t),"_handleKeyDown",(function(e){var i=t.state.activeItem;if(!t.isMenuShown)return 38!==e.keyCode&&40!==e.keyCode||t.setState({showMenu:!0}),void t.props.onKeyDown(e);switch(e.keyCode){case 38:case 40:e.preventDefault(),t._handleActiveIndexChange(se(t.state.activeIndex,e.keyCode,t.items));break;case 13:e.preventDefault(),i&&t._handleMenuItemSelect(i,e);break;case 27:case 9:t.hideMenu()}t.props.onKeyDown(e)})),b()(g()(t),"_handleMenuItemSelect",(function(e,i){e.paginationOption?t._handlePaginate(i):t._handleSelectionAdd(e)})),b()(g()(t),"_handlePaginate",(function(e){e.persist(),t.setState((function(e,t){return{shownResults:e.shownResults+t.maxResults}}),(function(){return t.props.onPaginate(e,t.state.shownResults)}))})),b()(g()(t),"_handleSelectionAdd",(function(e){var i,n,o=t.props,a=o.multiple,s=o.labelKey,l=e;!k(l)&&l.customOption&&(l=r()({},l,{id:D("new-id-")})),a?(i=t.state.selected.concat(l),n=""):(i=[l],n=R(l,s)),t.setState((function(e,t){return r()({},ke(0,t),{initialItem:l,selected:i,text:n})}),(function(){return t._handleChange(i)}))})),b()(g()(t),"_handleSelectionRemove",(function(e){var i=t.state.selected.filter((function(t){return!x()(t,e)}));t.focus(),t.setState((function(e,t){return r()({},ke(0,t),{selected:i})}),(function(){return t._handleChange(i)}))})),t}y()(t,e);var i=t.prototype;return i.componentDidMount=function(){this.props.autoFocus&&this.focus()},i.componentDidUpdate=function(e,t){var i=this.props,n=i.labelKey,r=i.multiple,o=i.selected;!function(e,t){var i,n,r,o=!e&&t;o?(i="uncontrolled",n="controlled",r="an"):(i="controlled",n="uncontrolled",r="a"),X(!(o||e&&!t),"You are changing "+r+" "+i+" typeahead to be "+n+". Input elements should not switch from "+i+" to "+n+" (or vice versa). Decide between using a controlled or uncontrolled element for the lifetime of the component.")}(o,e.selected),o&&!x()(o,t.selected)&&(this.setState({selected:o}),r||this.setState({text:o.length?R(T(o),n):""}))},i.render=function(){var e=this.props,t=(e.onChange,a()(e,["onChange"])),i=r()({},t,this.state),n=i.filterBy,o=i.labelKey,s=i.options,l=i.paginate,c=i.shownResults,h=i.text;this.isMenuShown=function(e){var t=e.open,i=e.minLength,n=e.showMenu,r=e.text;return t||!1===t?t:!(r.length<i)&&n}(i),this.items=[];var d=[];if(this.isMenuShown){var u="function"===typeof n?n:q;d=s.filter((function(e){return u(e,i)}));var f,g,m=l&&d.length>c;if(d=oe(d,c),j(d,i))d.push(((f={customOption:!0})[O(o)]=h,f));if(m)d.push(((g={})[O(o)]="",g.paginationOption=!0,g))}return p.a.createElement(ye,r()({},i,{hideMenu:this.hideMenu,inputNode:this.inputNode,inputRef:this.inputRef,isMenuShown:this.isMenuShown,onActiveItemChange:this._handleActiveItemChange,onAdd:this._handleSelectionAdd,onBlur:this._handleBlur,onChange:this._handleInputChange,onClear:this._handleClear,onFocus:this._handleFocus,onHide:this.hideMenu,onInitialItemChange:this._handleInitialItemChange,onKeyDown:this._handleKeyDown,onMenuItemClick:this._handleMenuItemSelect,onRemove:this._handleSelectionRemove,results:d,setItem:this.setItem,toggleMenu:this.toggleMenu}))},t}(p.a.Component);b()(Me,"propTypes",Oe),b()(Me,"defaultProps",Ee);var De=Me,Le={delay:h.a.number,isLoading:h.a.bool.isRequired,minLength:h.a.number,onSearch:h.a.func.isRequired,options:h.a.arrayOf(Se),promptText:h.a.node,searchText:h.a.node,useCache:h.a.bool},Re={delay:200,minLength:2,options:[],promptText:"Type to search...",searchText:"Searching...",useCache:!0};function je(e){var t=e.allowNew,i=e.delay,n=e.emptyLabel,o=e.isLoading,s=e.minLength,c=e.onInputChange,h=e.onSearch,p=e.options,f=e.promptText,g=e.searchText,m=e.useCache,y=a()(e,["allowNew","delay","emptyLabel","isLoading","minLength","onInputChange","onSearch","options","promptText","searchText","useCache"]),v=Object(d.useRef)({}),b=Object(d.useRef)(),w=Object(d.useRef)(e.defaultInputValue||""),x=Object(d.useReducer)((function(e){return!e}),!1)[1],S=u(e),C=Object(d.useCallback)((function(e){w.current=e,!e||s&&e.length<s||(m&&v.current[e]?x():h(e))}),[x,s,h,m]);Object(d.useEffect)((function(){return b.current=l()(C,i),function(){b.current&&b.current.cancel()}}),[i,C]),Object(d.useEffect)((function(){!o&&S&&S.isLoading&&m&&(v.current[w.current]=p)}));var P=Object(d.useCallback)((function(e,t){c&&c(e,t),b.current&&b.current(e)}),[c]),O=v.current[w.current];return r()({},y,{allowNew:I(t)?t:t&&!o,emptyLabel:w.current.length?o?g:n:f,isLoading:o,minLength:s,onInputChange:P,options:m&&O?O:p})}function Ne(e){var t=Object(d.forwardRef)((function(t,i){return p.a.createElement(e,r()({},je(t),{ref:i}))}));return t.displayName="withAsync("+Z(e)+")",t.propTypes=Le,t.defaultProps=Re,t}var ze=i(32),Be=i(48),He=i(12),_e=i.n(He),We=i(54),Fe=function(){};var Ve=function(e,t,i){var n=void 0===i?{}:i,r=n.disabled,o=n.clickTrigger,a=void 0===o?"click":o,s=Object(d.useRef)(!1),l=t||Fe,c=Object(d.useCallback)((function(t){var i,n,r,o=e&&("current"in e?e.current:e);U()(!!o,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),s.current=!o||!!((r=t).metaKey||r.altKey||r.ctrlKey||r.shiftKey)||!function(e){return 0===e.button}(t)||(i=o,n=t.target,i.contains?i.contains(n):i.compareDocumentPosition?i===n||!!(16&i.compareDocumentPosition(n)):void 0)}),[e]),h=Object(Be.a)((function(e){s.current||l(e)})),p=Object(Be.a)((function(e){27===e.keyCode&&l(e)}));Object(d.useEffect)((function(){if(!r&&null!=e){var t,i=(t=e.current,Object(We.a)(_e.a.findDOMNode(t))),n=Object(ze.a)(i,a,c,!0),o=Object(ze.a)(i,a,h),s=Object(ze.a)(i,"keyup",p),l=[];return"ontouchstart"in i.documentElement&&(l=[].slice.call(i.body.children).map((function(e){return Object(ze.a)(e,"mousemove",Fe)}))),function(){n(),o(),s(),l.forEach((function(e){return e()}))}}}),[e,r,a,c,h,p])},Ue={label:h.a.string,onClick:h.a.func,size:be},Ye={label:"Clear",onClick:A},Xe=function(e){var t=e.className,i=e.label,n=e.onClick,o=e.size,s=a()(e,["className","label","onClick","size"]);return p.a.createElement("button",r()({},s,{"aria-label":i,className:ee()("close","rbt-close",{"rbt-close-lg":he(o)},t),onClick:function(e){e.stopPropagation(),n(e)},type:"button"}),p.a.createElement("span",{"aria-hidden":"true"},"\xd7"),p.a.createElement("span",{className:"sr-only"},i))};Xe.propTypes=Ue,Xe.defaultProps=Ye;var Ge=Xe,qe={label:h.a.string},Ze=function(e){var t=e.label;return p.a.createElement("div",{className:"rbt-loader spinner-border spinner-border-sm",role:"status"},p.a.createElement("span",{className:"sr-only"},t))};Ze.propTypes=qe,Ze.defaultProps={label:"Loading..."};var Ke=Ze,$e=i(84),Qe=i.n($e),Je=i(41),et=i.n(Je),tt=i(16),it=i.n(tt),nt=i(55),rt=i.n(nt),ot=i(17),at=i.n(ot),st=i(85),lt=i.n(st),ct=i(68),ht=i(69),dt=i.n(ht),pt=dt()(),ut=dt()(),ft=(d.Component,function(e,t){if("function"===typeof e)return function(e){if("function"===typeof e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.apply(void 0,i)}}(e,t);null!=e&&(e.current=t)}),gt={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},mt={},yt=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,at()(it()(t),"state",{data:void 0,placement:void 0}),at()(it()(t),"popperInstance",void 0),at()(it()(t),"popperNode",null),at()(it()(t),"arrowNode",null),at()(it()(t),"setPopperNode",(function(e){e&&t.popperNode!==e&&(ft(t.props.innerRef,e),t.popperNode=e,t.updatePopperInstance())})),at()(it()(t),"setArrowNode",(function(e){t.arrowNode=e})),at()(it()(t),"updateStateModifier",{enabled:!0,order:900,fn:function(e){var i=e.placement;return t.setState({data:e,placement:i}),e}}),at()(it()(t),"getOptions",(function(){return{placement:t.props.placement,eventsEnabled:t.props.eventsEnabled,positionFixed:t.props.positionFixed,modifiers:et()({},t.props.modifiers,{arrow:et()({},t.props.modifiers&&t.props.modifiers.arrow,{enabled:!!t.arrowNode,element:t.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:t.updateStateModifier})}})),at()(it()(t),"getPopperStyle",(function(){return t.popperNode&&t.state.data?et()({position:t.state.data.offsets.popper.position},t.state.data.styles):gt})),at()(it()(t),"getPopperPlacement",(function(){return t.state.data?t.state.placement:void 0})),at()(it()(t),"getArrowStyle",(function(){return t.arrowNode&&t.state.data?t.state.data.arrowStyles:mt})),at()(it()(t),"getOutOfBoundariesState",(function(){return t.state.data?t.state.data.hide:void 0})),at()(it()(t),"destroyPopperInstance",(function(){t.popperInstance&&(t.popperInstance.destroy(),t.popperInstance=null)})),at()(it()(t),"updatePopperInstance",(function(){t.destroyPopperInstance();var e=it()(t).popperNode,i=t.props.referenceElement;i&&e&&(t.popperInstance=new ct.a(i,e,t.getOptions()))})),at()(it()(t),"scheduleUpdate",(function(){t.popperInstance&&t.popperInstance.scheduleUpdate()})),t}rt()(t,e);var i=t.prototype;return i.componentDidUpdate=function(e,t){this.props.placement===e.placement&&this.props.referenceElement===e.referenceElement&&this.props.positionFixed===e.positionFixed&&lt()(this.props.modifiers,e.modifiers,{strict:!0})?this.props.eventsEnabled!==e.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()):this.updatePopperInstance(),t.placement!==this.state.placement&&this.scheduleUpdate()},i.componentWillUnmount=function(){ft(this.props.innerRef,null),this.destroyPopperInstance()},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}});var e},t}(d.Component);at()(yt,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});ct.a.placements;function vt(e){var t=e.referenceElement,i=Qe()(e,["referenceElement"]);return d.createElement(pt.Consumer,null,(function(e){return d.createElement(yt,et()({referenceElement:void 0!==t?t:e},i))}))}var bt="undefined"===typeof Element?function(){}:Element,wt={align:h.a.oneOf(L(P)),children:h.a.func.isRequired,dropup:h.a.bool,flip:h.a.bool,isMenuShown:h.a.bool,positionFixed:h.a.bool,referenceElement:h.a.instanceOf(bt)},xt={align:P.JUSTIFY,dropup:!1,flip:!1,isMenuShown:!1,positionFixed:!1};function St(e){var t=e.align;return{computeStyles:{enabled:!0,fn:function(e){var i=e.styles,n=a()(e,["styles"]);return r()({},n,{styles:r()({},i,{width:t!==P.RIGHT&&t!==P.LEFT?n.offsets.reference.width:i.width})})}},flip:{enabled:e.flip},preventOverflow:{escapeWithReference:!0}}}var Ct={bottom:{end:"bottom-end",start:"bottom-start"},top:{end:"top-end",start:"top-start"}};function Pt(e){var t=e.align,i=e.dropup;return Ct[i?"top":"bottom"][t===P.RIGHT?"end":"start"]}var Ot=function(e){var t=e.children,i=e.isMenuShown,n=e.positionFixed,o=e.referenceElement;return i?d.createElement(vt,{modifiers:St(e),placement:Pt(e),positionFixed:n,referenceElement:o},(function(e){var i=e.ref,n=a()(e,["ref"]);return t(r()({},n,{innerRef:i,inputHeight:o?o.offsetHeight:0}))})):null};Ot.propTypes=wt,Ot.defaultProps=xt;var Et=Ot,Tt={onBlur:h.a.func,onClick:h.a.func,onFocus:h.a.func,onRemove:h.a.func,option:Se.isRequired},It=function(e){var t="withToken("+Z(e)+")",i=function(t){return p.a.createElement(e,function(e){var t=e.onBlur,i=e.onClick,n=e.onFocus,o=e.onRemove,s=e.option,l=a()(e,["onBlur","onClick","onFocus","onRemove","option"]),c=Object(d.useState)(!1),h=c[0],p=c[1],u=Object(d.useState)(null),f=u[0],g=u[1],m=function(e,t,i){e.stopPropagation(),p(t),"function"===typeof i&&i(e)},y=function(e){m(e,!1,t)},v=function(){o&&o(s)};return Ve(f,y,r()({},l,{disabled:!h})),r()({},l,{active:h,onBlur:y,onClick:function(e){m(e,!0,i)},onFocus:function(e){m(e,!0,n)},onKeyDown:function(e){switch(e.keyCode){case 8:h&&(e.preventDefault(),v())}},onRemove:I(o)?v:void 0,ref:g})}(t))};return i.displayName=t,i.propTypes=Tt,i};var kt=Object(d.forwardRef)((function(e,t){var i=e.active,n=e.children,o=e.className,s=e.onRemove,l=e.tabIndex,c=a()(e,["active","children","className","onRemove","tabIndex"]);return p.a.createElement("div",r()({},c,{className:ee()("rbt-token","rbt-token-removeable",{"rbt-token-active":!!i},o),ref:t,tabIndex:l||0}),n,p.a.createElement(Ge,{className:"rbt-token-remove-button",label:"Remove",onClick:s,tabIndex:-1}))})),At=function(e){var t=e.children,i=e.className,n=e.disabled,r=e.href,o=ee()("rbt-token",{"rbt-token-disabled":n},i);return r&&!n?p.a.createElement("a",{className:o,href:r},t):p.a.createElement("div",{className:o},t)},Mt=It(Object(d.forwardRef)((function(e,t){var i=e.disabled,n=e.onRemove,o=e.readOnly;return i||o||!I(n)?p.a.createElement(At,e):p.a.createElement(kt,r()({},e,{ref:t}))})));function Dt(e,t,i){return void 0===i&&(i=""),i&&(i=i.replace(i[0],i[0].toUpperCase())),["Top","Right","Bottom","Left"].map((function(n){return e[t+n+i]})).join(" ")}var Lt=function(e){var t=e.children,i=e.shouldSelect;1!==p.a.Children.count(t)&&C()(!1);var n=ue(),o=n.hintText,a=n.initialItem,s=n.inputNode,l=n.onAdd,c=n.selectHintOnEnter,h=Object(d.useRef)(null);return Object(d.useEffect)((function(){!function(e,t){if(e&&t){var i=window.getComputedStyle(e);t.style.borderStyle=Dt(i,"border","style"),t.style.borderWidth=Dt(i,"border","width"),t.style.fontSize=i.fontSize,t.style.height=i.height,t.style.lineHeight=i.lineHeight,t.style.margin=Dt(i,"margin"),t.style.padding=Dt(i,"padding")}}(s,h.current)})),{child:Object(d.cloneElement)(t,r()({},t.props,{onKeyDown:function(e){o&&a&&function(e,t){var i=!1,n=e.currentTarget,r=e.keyCode;return 39===r&&(i=!le(n)||n.selectionStart===n.value.length),9===r&&(e.preventDefault(),i=!0),13===r&&(i=!!t.selectHintOnEnter),"function"===typeof t.shouldSelect?t.shouldSelect(i,e):i}(e,{selectHintOnEnter:c,shouldSelect:i})&&l(a),t.props.onKeyDown&&t.props.onKeyDown(e)}})),hintRef:h,hintText:o}},Rt=function(e){var t=e.className,i=a()(e,["className"]),n=Lt(i),r=n.child,o=n.hintRef,s=n.hintText;return p.a.createElement("div",{className:t,style:{display:"flex",flex:1,height:"100%",position:"relative"}},r,p.a.createElement("input",{"aria-hidden":!0,className:"rbt-input-hint",ref:o,readOnly:!0,style:{backgroundColor:"transparent",borderColor:"transparent",boxShadow:"none",color:"rgba(0, 0, 0, 0.35)",left:0,pointerEvents:"none",position:"absolute",top:0,width:"100%"},tabIndex:-1,value:s}))},jt=p.a.forwardRef((function(e,t){return p.a.createElement("input",r()({},e,{className:ee()("rbt-input-main",e.className),ref:t}))}));var Nt=function(e){var t=function(t){function i(){return t.apply(this,arguments)||this}return y()(i,t),i.prototype.render=function(){var t=this.props,i=t.className,n=t.isInvalid,o=t.isValid,s=t.size,l=a()(t,["className","isInvalid","isValid","size"]);return p.a.createElement(e,r()({},l,{className:ee()("form-control","rbt-input",{"form-control-lg":he(s),"form-control-sm":de(s),"is-invalid":n,"is-valid":o},i)}))},i}(p.a.Component);return b()(t,"displayName","withClassNames("+Z(e)+")"),t},zt=Nt(function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,b()(g()(t),"wrapperRef",p.a.createRef()),b()(g()(t),"_input",void 0),b()(g()(t),"getInputRef",(function(e){t._input=e,t.props.inputRef(e)})),b()(g()(t),"_handleContainerClickOrFocus",(function(e){if(t.props.disabled)e.currentTarget.blur();else{var i=t._input;i&&(e.currentTarget!==i&&le(i)&&(i.selectionStart=i.value.length),i.focus())}})),b()(g()(t),"_handleKeyDown",(function(e){var i=t.props,n=i.onKeyDown,r=i.selected,o=i.value;switch(e.keyCode){case 8:if(e.currentTarget===t._input&&r.length&&!o&&(e.preventDefault(),t.wrapperRef.current)){var a=t.wrapperRef.current.children,s=a[a.length-2];s&&s.focus()}}n(e)})),t}return y()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,i=e.className,n=e.inputClassName,o=(e.inputRef,e.placeholder),s=e.referenceElementRef,l=e.selected,c=e.shouldSelectHint,h=a()(e,["children","className","inputClassName","inputRef","placeholder","referenceElementRef","selected","shouldSelectHint"]);return p.a.createElement("div",{className:ee()("rbt-input-multi",i),disabled:h.disabled,onClick:this._handleContainerClickOrFocus,onFocus:this._handleContainerClickOrFocus,ref:s,tabIndex:-1},p.a.createElement("div",{className:"rbt-input-wrapper",ref:this.wrapperRef},t,p.a.createElement(Rt,{shouldSelect:c},p.a.createElement(jt,r()({},h,{className:n,onKeyDown:this._handleKeyDown,placeholder:l.length?"":o,ref:this.getInputRef,style:{backgroundColor:"transparent",border:0,boxShadow:"none",cursor:"inherit",outline:"none",padding:0,width:"100%",zIndex:1}})))))},t}(p.a.Component)),Bt=Nt((function(e){var t=e.inputRef,i=e.referenceElementRef,n=e.shouldSelectHint,o=a()(e,["inputRef","referenceElementRef","shouldSelectHint"]);return p.a.createElement(Rt,{shouldSelect:n},p.a.createElement(jt,r()({},o,{ref:function(e){t(e),i(e)}})))})),Ht={children:h.a.string.isRequired,highlightClassName:h.a.string,search:h.a.string.isRequired},_t=function(e){function t(){return e.apply(this,arguments)||this}return y()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,i=e.highlightClassName,n=e.search;if(!n||!t)return t;for(var r=0,o=t,a=[];o;){var s=$(o,n);if(!s){a.push(o);break}var l=o.slice(0,s.start);l&&a.push(l);var c=o.slice(s.start,s.end);a.push(p.a.createElement("mark",{className:i,key:r},c)),r+=1,o=o.slice(s.end)}return a},t}(p.a.PureComponent);b()(_t,"propTypes",Ht),b()(_t,"defaultProps",{highlightClassName:"rbt-highlight-text"});var Wt=_t;function Ft(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function Vt(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function Ut(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var i=getComputedStyle(e,null);return Vt(i.overflowY,t)||Vt(i.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function Yt(e,t,i,n,r,o,a,s){return o<e&&a>t||o>e&&a<t?0:o<=e&&s<=i||a>=t&&s>=i?o-e-n:a>t&&s<i||o<e&&s>i?a-t+r:0}var Xt=function(e,t){var i=window,n=t.scrollMode,r=t.block,o=t.inline,a=t.boundary,s=t.skipOverflowHiddenElements,l="function"==typeof a?a:function(e){return e!==a};if(!Ft(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,h=[],d=e;Ft(d)&&l(d);){if((d=d.parentNode)===c){h.push(d);break}d===document.body&&Ut(d)&&!Ut(document.documentElement)||Ut(d,s)&&h.push(d)}for(var p=i.visualViewport?i.visualViewport.width:innerWidth,u=i.visualViewport?i.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,m=e.getBoundingClientRect(),y=m.height,v=m.width,b=m.top,w=m.right,x=m.bottom,S=m.left,C="start"===r||"nearest"===r?b:"end"===r?x:b+y/2,P="center"===o?S+v/2:"end"===o?w:S,O=[],E=0;E<h.length;E++){var T=h[E],I=T.getBoundingClientRect(),k=I.height,A=I.width,M=I.top,D=I.right,L=I.bottom,R=I.left;if("if-needed"===n&&b>=0&&S>=0&&x<=u&&w<=p&&b>=M&&x<=L&&S>=R&&w<=D)return O;var j=getComputedStyle(T),N=parseInt(j.borderLeftWidth,10),z=parseInt(j.borderTopWidth,10),B=parseInt(j.borderRightWidth,10),H=parseInt(j.borderBottomWidth,10),_=0,W=0,F="offsetWidth"in T?T.offsetWidth-T.clientWidth-N-B:0,V="offsetHeight"in T?T.offsetHeight-T.clientHeight-z-H:0;if(c===T)_="start"===r?C:"end"===r?C-u:"nearest"===r?Yt(g,g+u,u,z,H,g+C,g+C+y,y):C-u/2,W="start"===o?P:"center"===o?P-p/2:"end"===o?P-p:Yt(f,f+p,p,N,B,f+P,f+P+v,v),_=Math.max(0,_+g),W=Math.max(0,W+f);else{_="start"===r?C-M-z:"end"===r?C-L+H+V:"nearest"===r?Yt(M,L,k,z,H+V,C,C+y,y):C-(M+k/2)+V/2,W="start"===o?P-R-N:"center"===o?P-(R+A/2)+F/2:"end"===o?P-D+B+F:Yt(R,D,A,N,B+F,P,P+v,v);var U=T.scrollLeft,Y=T.scrollTop;C+=Y-(_=Math.max(0,Math.min(Y+_,T.scrollHeight-k+V))),P+=U-(W=Math.max(0,Math.min(U+W,T.scrollWidth-A+F)))}O.push({el:T,top:_,left:W})}return O};function Gt(e){return e===Object(e)&&0!==Object.keys(e).length}var qt=function(e,t){var i=!e.ownerDocument.documentElement.contains(e);if(Gt(t)&&"function"===typeof t.behavior)return t.behavior(i?[]:Xt(e,t));if(!i){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:Gt(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var i="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,r=e.top,o=e.left;n.scroll&&i?n.scroll({top:r,left:o,behavior:t}):(n.scrollTop=r,n.scrollLeft=o)}))}(Xt(e,n),n.behavior)}},Zt={option:Se.isRequired,position:h.a.number},Kt=function(e){var t="withItem("+Z(e)+")",i=function(t){return p.a.createElement(e,function(e){var t=e.label,i=e.onClick,n=e.option,o=e.position,s=a()(e,["label","onClick","option","position"]),l=ue(),c=l.activeIndex,h=l.id,p=l.isOnlyResult,u=l.onActiveItemChange,f=l.onInitialItemChange,g=l.onMenuItemClick,m=l.setItem,y=Object(d.useRef)(null);Object(d.useEffect)((function(){0===o&&f(n)})),Object(d.useEffect)((function(){if(o===c){u(n);var e=y.current;e&&qt(e,{block:"nearest",boundary:e.parentNode,inline:"nearest",scrollMode:"if-needed"})}}));var v=Object(d.useCallback)((function(e){g(n,e),i&&i(e)}),[i,g,n]),b=p||c===o;return m(n,o),r()({},s,{active:b,"aria-label":t,"aria-selected":b,id:te(h,o),onClick:v,onMouseDown:ce,ref:y,role:"option"})}(t))};return i.displayName=t,i.propTypes=Zt,i};var $t=p.a.forwardRef((function(e,t){var i=e.active,n=e.children,o=e.className,s=e.disabled,l=e.onClick,c=e.onMouseDown,h=a()(e,["active","children","className","disabled","onClick","onMouseDown"]);return p.a.createElement("a",r()({},h,{className:ee()("dropdown-item",{active:i,disabled:s},o),href:"#",onClick:function(e){e.preventDefault(),!s&&l&&l(e)},onMouseDown:c,ref:t}),n)})),Qt=Kt($t),Jt={"aria-label":h.a.string,emptyLabel:h.a.node,id:we(h.a.oneOfType([h.a.number,h.a.string]),xe),maxHeight:h.a.string},ei=function(e){function t(){return e.apply(this,arguments)||this}y()(t,e);var i=t.prototype;return i.componentDidUpdate=function(e){var t=this.props,i=t.inputHeight,n=t.scheduleUpdate;i!==e.inputHeight&&n()},i.render=function(){var e=this.props,t=e.children,i=e.className,n=e.emptyLabel,o=e.id,a=e.innerRef,s=e.maxHeight,l=e.style,c=e.text,h=0===d.Children.count(t)?p.a.createElement($t,{disabled:!0,role:"option"},n):t;return p.a.createElement("div",{"aria-label":this.props["aria-label"],className:ee()("rbt-menu","dropdown-menu","show",i),id:o,key:c,ref:a,role:"listbox",style:r()({},l,{display:"block",maxHeight:s,overflow:"auto"})},h)},t}(p.a.Component);b()(ei,"propTypes",Jt),b()(ei,"defaultProps",{"aria-label":"menu-options",emptyLabel:"No matches found.",maxHeight:"300px"}),b()(ei,"Divider",(function(e){return p.a.createElement("div",{className:"dropdown-divider",role:"separator"})})),b()(ei,"Header",(function(e){return p.a.createElement("div",r()({},e,{className:"dropdown-header",role:"heading"}))}));var ti=ei,ii={newSelectionPrefix:h.a.node,paginationText:h.a.node,renderMenuItemChildren:h.a.func},ni={newSelectionPrefix:"New selection: ",paginationText:"Display additional results...",renderMenuItemChildren:function(e,t,i){return p.a.createElement(Wt,{search:t.text},R(e,t.labelKey))}},ri=function(e){var t=e.labelKey,i=e.newSelectionPrefix,n=e.options,o=e.paginationText,s=e.renderMenuItemChildren,l=e.text,c=a()(e,["labelKey","newSelectionPrefix","options","paginationText","renderMenuItemChildren","text"]);return p.a.createElement(ti,r()({},c,{text:l}),n.map((function(n,a){var c=R(n,t),h={disabled:N(n,"disabled"),label:c,option:n,position:a};return n.customOption?p.a.createElement(Qt,r()({},h,{className:"rbt-menu-custom-option",key:a,label:c}),i,p.a.createElement(Wt,{search:l},c)):n.paginationOption?p.a.createElement(d.Fragment,{key:"pagination-item"},p.a.createElement(ti.Divider,null),p.a.createElement(Qt,r()({},h,{className:"rbt-menu-pagination-option",label:o}),o)):p.a.createElement(Qt,r()({},h,{key:a}),s(n,e,a))})))};ri.propTypes=ii,ri.defaultProps=ni;var oi=ri,ai={clearButton:h.a.bool,inputProps:we(h.a.object,(function(e,t,i){var n=e.inputProps;n&&"[object Object]"===Object.prototype.toString.call(n)&&ve.forEach((function(e){var t=e.alt,i=e.prop,r=t?" Use the top-level `"+t+"` prop instead.":null;X(!n[i],"The `"+i+"` property of `inputProps` will be ignored."+r)}))})),isInvalid:h.a.bool,isLoading:h.a.bool,isValid:h.a.bool,renderInput:h.a.func,renderMenu:h.a.func,renderToken:h.a.func,size:be},si={clearButton:!1,inputProps:{},isInvalid:!1,isLoading:!1,isValid:!1,renderMenu:function(e,t,i){return p.a.createElement(oi,r()({},t,{labelKey:i.labelKey,options:e,text:i.text}))},renderToken:function(e,t,i){return p.a.createElement(Mt,{disabled:t.disabled,key:i,onRemove:t.onRemove,option:e,tabIndex:t.tabIndex},R(e,t.labelKey))}};var li=function(e){var t=e.children,i=e.onRootClose,n=a()(e,["children","onRootClose"]),r=Object(d.useState)(null),o=r[0],s=r[1];return Ve(o,i,n),t(s)},ci=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,b()(g()(t),"_referenceElement",void 0),b()(g()(t),"referenceElementRef",(function(e){t._referenceElement=e})),b()(g()(t),"_renderInput",(function(e,i){var n=t.props,o=n.isInvalid,a=n.isValid,s=n.multiple,l=n.renderInput,c=n.renderToken,h=n.size;if(I(l))return l(e,i);var d=r()({},e,{isInvalid:o,isValid:a,size:h});if(!s)return p.a.createElement(Bt,d);var u=i.labelKey,f=i.onRemove,g=i.selected;return p.a.createElement(zt,r()({},d,{selected:g}),g.map((function(e,t){return c(e,r()({},d,{labelKey:u,onRemove:f}),t)})))})),b()(g()(t),"_renderMenu",(function(e,i,n){var o=t.props,a=o.emptyLabel,s=o.id,l=o.maxHeight,c=o.newSelectionPrefix,h=o.paginationText,d=o.renderMenu,p=o.renderMenuItemChildren;return d(e,r()({},i,{emptyLabel:a,id:s,maxHeight:l,newSelectionPrefix:c,paginationText:h,renderMenuItemChildren:p}),n)})),b()(g()(t),"_renderAux",(function(e){var i,n=e.onClear,r=e.selected,o=t.props,a=o.clearButton,s=o.disabled,l=o.isLoading,c=o.size;return l?i=p.a.createElement(Ke,null):a&&!s&&r.length&&(i=p.a.createElement(Ge,{onClick:n,onFocus:function(e){e.stopPropagation()},onMouseDown:ce,size:c})),i?p.a.createElement("div",{className:ee()("rbt-aux",{"rbt-aux-lg":he(c)})},i):null})),t}return y()(t,e),t.prototype.render=function(){var e=this,t=this.props,i=t.children,n=t.className,o=t.instanceRef,s=t.open,l=t.options,c=t.style;return p.a.createElement(De,r()({},this.props,{options:l,ref:o}),(function(t){var o=t.getInputProps,l=a()(t,["getInputProps"]),h=l.hideMenu,d=l.isMenuShown,u=l.results,f=e._renderAux(l);return p.a.createElement(li,{disabled:s||!d,onRootClose:h},(function(t){return p.a.createElement("div",{className:ee()("rbt",{"has-aux":!!f},n),ref:t,style:r()({},c,{outline:"none",position:"relative"}),tabIndex:-1},e._renderInput(r()({},o(e.props.inputProps),{referenceElementRef:e.referenceElementRef}),l),p.a.createElement(Et,r()({},function(e){return M(e,["align","dropup","flip","positionFixed"])}(e.props),{isMenuShown:d,referenceElement:e._referenceElement}),(function(t){return e._renderMenu(u,t,l)})),f,I(i)?i(l):i)}))}))},t}(p.a.Component);b()(ci,"propTypes",ai),b()(ci,"defaultProps",si);var hi=Object(d.forwardRef)((function(e,t){return p.a.createElement(ci,r()({},e,{instanceRef:t}))}));Ne(hi)},function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i(1),r=i(5),o=i(3),a=i.n(o),s=/-(.)/g;var l=i(0),c=i.n(l),h=i(9),d=function(e){return e[0].toUpperCase()+(t=e,t.replace(s,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function p(e,t){var i=void 0===t?{}:t,o=i.displayName,s=void 0===o?d(e):o,l=i.Component,p=i.defaultProps,u=c.a.forwardRef((function(t,i){var o=t.className,s=t.bsPrefix,d=t.as,p=void 0===d?l||"div":d,u=Object(r.a)(t,["className","bsPrefix","as"]),f=Object(h.a)(s,e);return c.a.createElement(p,Object(n.a)({ref:i,className:a()(o,f)},u))}));return u.defaultProps=p,u.displayName=s,u}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(80);var r=i(51),o=i(81);function a(e,t){return Object(n.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(e,t)||Object(r.a)(e,t)||Object(o.a)()}},function(e,t,i){"use strict";var n=i(1),r=i(5),o=i(0),a=i.n(o),s=i(3),l=i.n(s);function c(e){var t=function(e){var t=Object(o.useRef)(e);return t.current=e,t}(e);Object(o.useEffect)((function(){return function(){return t.current()}}),[])}var h=Math.pow(2,31)-1;function d(){var e=function(){var e=Object(o.useRef)(!0),t=Object(o.useRef)((function(){return e.current}));return Object(o.useEffect)((function(){return function(){e.current=!1}}),[]),t.current}(),t=Object(o.useRef)();return c((function(){return clearTimeout(t.current)})),Object(o.useMemo)((function(){var i=function(){return clearTimeout(t.current)};return{set:function(n,r){void 0===r&&(r=0),e()&&(i(),r<=h?t.current=setTimeout(n,r):function e(t,i,n){var r=n-Date.now();t.current=r<=h?setTimeout(i,r):setTimeout((function(){return e(t,i,n)}),h)}(t,n,Date.now()+r))},clear:i}}),[])}var p=i(54);function u(e,t){return function(e){var t=Object(p.a)(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var f=/([A-Z])/g;var g=/^ms-/;function m(e){return function(e){return e.replace(f,"-$1").toLowerCase()}(e).replace(g,"-ms-")}var y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var v=function(e,t){var i="",n="";if("string"===typeof t)return e.style.getPropertyValue(m(t))||u(e).getPropertyValue(m(t));Object.keys(t).forEach((function(r){var o=t[r];o||0===o?!function(e){return!(!e||!y.test(e))}(r)?i+=m(r)+": "+o+";":n+=r+"("+o+") ":e.style.removeProperty(m(r))})),n&&(i+="transform: "+n+";"),e.style.cssText+=";"+i},b=i(32);function w(e,t,i){void 0===i&&(i=5);var n=!1,r=setTimeout((function(){n||function(e){var t=document.createEvent("HTMLEvents");t.initEvent("transitionend",!0,!0),e.dispatchEvent(t)}(e)}),t+i),o=Object(b.a)(e,"transitionend",(function(){n=!0}),{once:!0});return function(){clearTimeout(r),o()}}function x(e,t,i,n){null==i&&(i=function(e){var t=v(e,"transitionDuration")||"",i=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*i}(e)||0);var r=w(e,i,n),o=Object(b.a)(e,"transitionend",t);return function(){r(),o()}}var S,C=i(61);var P=((S={})[C.b]="show",S[C.a]="show",S),O=a.a.forwardRef((function(e,t){var i=e.className,s=e.children,c=Object(r.a)(e,["className","children"]),h=Object(o.useCallback)((function(e){!function(e){e.offsetHeight}(e),c.onEnter&&c.onEnter(e)}),[c]);return a.a.createElement(C.c,Object(n.a)({ref:t,addEndListener:x},c,{onEnter:h}),(function(e,t){return a.a.cloneElement(s,Object(n.a)({},t,{className:l()("fade",i,s.props.className,P[e])}))}))}));O.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},O.displayName="Fade";var E=O,T=i(48),I=i(9),k=i(2),A=i.n(k),M={label:A.a.string.isRequired,onClick:A.a.func},D=a.a.forwardRef((function(e,t){var i=e.label,o=e.onClick,s=e.className,c=Object(r.a)(e,["label","onClick","className"]);return a.a.createElement("button",Object(n.a)({ref:t,type:"button",className:l()("close",s),onClick:o},c),a.a.createElement("span",{"aria-hidden":"true"},"\xd7"),a.a.createElement("span",{className:"sr-only"},i))}));D.displayName="CloseButton",D.propTypes=M,D.defaultProps={label:"Close"};var L=D,R=a.a.createContext({onClose:function(){}}),j=a.a.forwardRef((function(e,t){var i=e.bsPrefix,s=e.closeLabel,c=e.closeButton,h=e.className,d=e.children,p=Object(r.a)(e,["bsPrefix","closeLabel","closeButton","className","children"]);i=Object(I.a)(i,"toast-header");var u=Object(o.useContext)(R),f=Object(T.a)((function(e){u&&u.onClose&&u.onClose(e)}));return a.a.createElement("div",Object(n.a)({ref:t},p,{className:l()(i,h)}),d,c&&a.a.createElement(L,{label:s,onClick:f,className:"ml-2 mb-1","data-dismiss":"toast"}))}));j.displayName="ToastHeader",j.defaultProps={closeLabel:"Close",closeButton:!0};var N=j,z=i(57),B=Object(z.a)("toast-body"),H=a.a.forwardRef((function(e,t){var i=e.bsPrefix,s=e.className,c=e.children,h=e.transition,p=void 0===h?E:h,u=e.show,f=void 0===u||u,g=e.animation,m=void 0===g||g,y=e.delay,v=void 0===y?3e3:y,b=e.autohide,w=void 0!==b&&b,x=e.onClose,S=Object(r.a)(e,["bsPrefix","className","children","transition","show","animation","delay","autohide","onClose"]);i=Object(I.a)(i,"toast");var C=Object(o.useRef)(v),P=Object(o.useRef)(x);Object(o.useEffect)((function(){C.current=v,P.current=x}),[v,x]);var O=d(),T=!(!w||!f),k=Object(o.useCallback)((function(){T&&(null==P.current||P.current())}),[T]);Object(o.useEffect)((function(){O.set(k,C.current)}),[O,k]);var A=Object(o.useMemo)((function(){return{onClose:x}}),[x]),M=!(!p||!m),D=a.a.createElement("div",Object(n.a)({},S,{ref:t,className:l()(i,s,!M&&(f?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}),c);return a.a.createElement(R.Provider,{value:A},M&&p?a.a.createElement(p,{in:f,unmountOnExit:!0},D):D)}));H.displayName="Toast";t.a=Object.assign(H,{Body:B,Header:N})},function(e,t,i){"use strict";var n=i(1),r=i(5),o=i(3),a=i.n(o),s=i(0),l=i.n(s),c=i(9);var h=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];e.apply(this,n),t.apply(this,n)}}),null)};function d(e){return!e||"#"===e.trim()}var p=l.a.forwardRef((function(e,t){var i=e.as,o=void 0===i?"a":i,a=e.disabled,s=e.onKeyDown,c=Object(r.a)(e,["as","disabled","onKeyDown"]),p=function(e){var t=c.href,i=c.onClick;(a||d(t))&&e.preventDefault(),a?e.stopPropagation():i&&i(e)};return d(c.href)&&(c.role=c.role||"button",c.href=c.href||"#"),a&&(c.tabIndex=-1,c["aria-disabled"]=!0),l.a.createElement(o,Object(n.a)({ref:t},c,{onClick:p,onKeyDown:h((function(e){" "===e.key&&(e.preventDefault(),p(e))}),s)}))}));p.displayName="SafeAnchor";var u=p,f=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.variant,s=e.size,h=e.active,d=e.className,p=e.block,f=e.type,g=e.as,m=Object(r.a)(e,["bsPrefix","variant","size","active","className","block","type","as"]),y=Object(c.a)(i,"btn"),v=a()(d,y,h&&"active",y+"-"+o,p&&y+"-block",s&&y+"-"+s);if(m.href)return l.a.createElement(u,Object(n.a)({},m,{as:g,ref:t,className:a()(v,m.disabled&&"disabled")}));t&&(m.ref=t),f?m.type=f:g||(m.type="button");var b=g||"button";return l.a.createElement(b,Object(n.a)({},m,{className:v}))}));f.displayName="Button",f.defaultProps={variant:"primary",active:!1,disabled:!1};t.a=f},function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return p}));var n=i(5),r=i(15),o=(i(2),i(0)),a=i.n(o),s=i(12),l=i.n(s),c=!1,h=i(39),d="entering",p="entered",u=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var r,o=i&&!i.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?o?(r="exited",n.appearStatus=d):r=p:r=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",n.state={status:r},n.nextCallback=null,n}Object(r.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==d&&i!==p&&(t=d):i!==d&&i!==p||(t="exiting")}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,i,n=this.props.timeout;return e=t=i=n,null!=n&&"number"!==typeof n&&(e=n.exit,t=n.enter,i=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:i}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===d?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},i.performEnter=function(e){var t=this,i=this.props.enter,n=this.context?this.context.isMounting:e,r=this.props.nodeRef?[n]:[l.a.findDOMNode(this),n],o=r[0],a=r[1],s=this.getTimeouts(),h=n?s.appear:s.enter;!e&&!i||c?this.safeSetState({status:p},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:d},(function(){t.props.onEntering(o,a),t.onTransitionEnd(h,(function(){t.safeSetState({status:p},(function(){t.props.onEntered(o,a)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),n=this.props.nodeRef?void 0:l.a.findDOMNode(this);t&&!c?(this.props.onExit(n),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(n),e.onTransitionEnd(i.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(n)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(n){i&&(i=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:l.a.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(i&&!n){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],o=r[0],a=r[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,i=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(n.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.a.createElement(h.a.Provider,{value:null},"function"===typeof i?i(e,r):a.a.cloneElement(a.a.Children.only(i),r))},t}(a.a.Component);function f(){}u.contextType=h.a,u.propTypes={},u.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},u.UNMOUNTED="unmounted",u.EXITED="exited",u.ENTERING=d,u.ENTERED=p,u.EXITING="exiting";t.c=u},,function(e,t,i){"use strict";var n=i(113);e.exports=Function.prototype.bind||n},function(e,t,i){"use strict";var n=i(75),r="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(i){return!1}}(),c=function(e,t,i,n){var r;(!(t in e)||"function"===typeof(r=n)&&"[object Function]"===o.call(r)&&n())&&(l?s(e,t,{configurable:!0,enumerable:!1,value:i,writable:!0}):e[t]=i)},h=function(e,t){var i=arguments.length>2?arguments[2]:{},o=n(t);r&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)c(e,o[s],t[o[s]],i[o[s]])};h.supportsDescriptors=!!l,e.exports=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];function n(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=null;return t.forEach((function(e){if(null==r){var t=e.apply(void 0,i);null!=t&&(r=t)}})),r}return(0,o.default)(n)};var n,r=i(123),o=(n=r)&&n.__esModule?n:{default:n};e.exports=t.default},function(e,t,i){"use strict";(function(e){var n=i(0),r=i.n(n),o=i(15),a=i(2),s=i.n(a),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function c(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(i,n){e=i,t.forEach((function(t){return t(e,n)}))}}}var h=r.a.createContext||function(e,t){var i,r,a="__create-react-context-"+function(){var e="__global_unique_id__";return l[e]=(l[e]||0)+1}()+"__",h=function(e){function i(){var t;return(t=e.apply(this,arguments)||this).emitter=c(t.props.value),t}Object(o.a)(i,e);var n=i.prototype;return n.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},n.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var i,n=this.props.value,r=e.value;((o=n)===(a=r)?0!==o||1/o===1/a:o!==o&&a!==a)?i=0:(i="function"===typeof t?t(n,r):1073741823,0!==(i|=0)&&this.emitter.set(e.value,i))}var o,a},n.render=function(){return this.props.children},i}(n.Component);h.childContextTypes=((i={})[a]=s.a.object.isRequired,i);var d=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,i){0!==((0|e.observedBits)&i)&&e.setState({value:e.getValue()})},e}Object(o.a)(i,t);var n=i.prototype;return n.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},n.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},n.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},n.getValue=function(){return this.context[a]?this.context[a].get():e},n.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},i}(n.Component);return d.contextTypes=((r={})[a]=s.a.object,r),{Provider:h,Consumer:d}};t.a=h}).call(this,i(44))},function(e,t,i){var n=i(105);e.exports=u,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=p;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var i,n=[],o=0,a=0,s="",h=t&&t.delimiter||"/";null!=(i=r.exec(e));){var d=i[0],p=i[1],u=i.index;if(s+=e.slice(a,u),a=u+d.length,p)s+=p[1];else{var f=e[a],g=i[2],m=i[3],y=i[4],v=i[5],b=i[6],w=i[7];s&&(n.push(s),s="");var x=null!=g&&null!=f&&f!==g,S="+"===b||"*"===b,C="?"===b||"*"===b,P=i[2]||h,O=y||v;n.push({name:m||o++,prefix:g||"",delimiter:P,optional:C,repeat:S,partial:x,asterisk:!!w,pattern:O?c(O):w?".*":"[^"+l(P)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&n.push(s),n}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var i=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(i[r]=new RegExp("^(?:"+e[r].pattern+")$",d(t)));return function(t,r){for(var o="",s=t||{},l=(r||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var h=e[c];if("string"!==typeof h){var d,p=s[h.name];if(null==p){if(h.optional){h.partial&&(o+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(n(p)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var u=0;u<p.length;u++){if(d=l(p[u]),!i[c].test(d))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===u?h.prefix:h.delimiter)+d}}else{if(d=h.asterisk?encodeURI(p).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(p),!i[c].test(d))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+d+'"');o+=h.prefix+d}}else o+=h}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function p(e,t,i){n(t)||(i=t||i,t=[]);for(var r=(i=i||{}).strict,o=!1!==i.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)a+=l(c);else{var p=l(c.prefix),u="(?:"+c.pattern+")";t.push(c),c.repeat&&(u+="(?:"+p+u+")*"),a+=u=c.optional?c.partial?p+"("+u+")?":"(?:"+p+"("+u+"))?":p+"("+u+")"}}var f=l(i.delimiter||"/"),g=a.slice(-f.length)===f;return r||(a=(g?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":r&&g?"":"(?="+f+"|$)",h(new RegExp("^"+a,d(i)),t)}function u(e,t,i){return n(t)||(i=t||i,t=[]),i=i||{},e instanceof RegExp?function(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(e,t)}(e,t):n(e)?function(e,t,i){for(var n=[],r=0;r<e.length;r++)n.push(u(e[r],t,i).source);return h(new RegExp("(?:"+n.join("|")+")",d(i)),t)}(e,t,i):function(e,t,i){return p(o(e,i),t,i)}(e,t,i)}},function(e,t,i){"use strict";(function(e){var i="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,n=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(i&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var r=i&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),n))}};function o(e){return e&&"[object Function]"==={}.toString.call(e)}function a(e,t){if(1!==e.nodeType)return[];var i=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?i[t]:i}function s(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function l(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=a(e),i=t.overflow,n=t.overflowX,r=t.overflowY;return/(auto|scroll|overlay)/.test(i+r+n)?e:l(s(e))}function c(e){return e&&e.referenceNode?e.referenceNode:e}var h=i&&!(!window.MSInputMethodContext||!document.documentMode),d=i&&/MSIE 10/.test(navigator.userAgent);function p(e){return 11===e?h:10===e?d:h||d}function u(e){if(!e)return document.documentElement;for(var t=p(10)?document.body:null,i=e.offsetParent||null;i===t&&e.nextElementSibling;)i=(e=e.nextElementSibling).offsetParent;var n=i&&i.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===a(i,"position")?u(i):i:e?e.ownerDocument.documentElement:document.documentElement}function f(e){return null!==e.parentNode?f(e.parentNode):e}function g(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var i=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=i?e:t,r=i?t:e,o=document.createRange();o.setStart(n,0),o.setEnd(r,0);var a=o.commonAncestorContainer;if(e!==a&&t!==a||n.contains(r))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||u(e.firstElementChild)===e)}(a)?a:u(a);var s=f(e);return s.host?g(s.host,t):g(e,f(t).host)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",i="top"===t?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement,o=e.ownerDocument.scrollingElement||r;return o[i]}return e[i]}function y(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=m(t,"top"),r=m(t,"left"),o=i?-1:1;return e.top+=n*o,e.bottom+=n*o,e.left+=r*o,e.right+=r*o,e}function v(e,t){var i="x"===t?"Left":"Top",n="Left"===i?"Right":"Bottom";return parseFloat(e["border"+i+"Width"])+parseFloat(e["border"+n+"Width"])}function b(e,t,i,n){return Math.max(t["offset"+e],t["scroll"+e],i["client"+e],i["offset"+e],i["scroll"+e],p(10)?parseInt(i["offset"+e])+parseInt(n["margin"+("Height"===e?"Top":"Left")])+parseInt(n["margin"+("Height"===e?"Bottom":"Right")]):0)}function w(e){var t=e.body,i=e.documentElement,n=p(10)&&getComputedStyle(i);return{height:b("Height",t,i,n),width:b("Width",t,i,n)}}var x=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},S=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),C=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};function O(e){return P({},e,{right:e.left+e.width,bottom:e.top+e.height})}function E(e){var t={};try{if(p(10)){t=e.getBoundingClientRect();var i=m(e,"top"),n=m(e,"left");t.top+=i,t.left+=n,t.bottom+=i,t.right+=n}else t=e.getBoundingClientRect()}catch(u){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?w(e.ownerDocument):{},s=o.width||e.clientWidth||r.width,l=o.height||e.clientHeight||r.height,c=e.offsetWidth-s,h=e.offsetHeight-l;if(c||h){var d=a(e);c-=v(d,"x"),h-=v(d,"y"),r.width-=c,r.height-=h}return O(r)}function T(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=p(10),r="HTML"===t.nodeName,o=E(e),s=E(t),c=l(e),h=a(t),d=parseFloat(h.borderTopWidth),u=parseFloat(h.borderLeftWidth);i&&r&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var f=O({top:o.top-s.top-d,left:o.left-s.left-u,width:o.width,height:o.height});if(f.marginTop=0,f.marginLeft=0,!n&&r){var g=parseFloat(h.marginTop),m=parseFloat(h.marginLeft);f.top-=d-g,f.bottom-=d-g,f.left-=u-m,f.right-=u-m,f.marginTop=g,f.marginLeft=m}return(n&&!i?t.contains(c):t===c&&"BODY"!==c.nodeName)&&(f=y(f,t)),f}function I(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.ownerDocument.documentElement,n=T(e,i),r=Math.max(i.clientWidth,window.innerWidth||0),o=Math.max(i.clientHeight,window.innerHeight||0),a=t?0:m(i),s=t?0:m(i,"left"),l={top:a-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:r,height:o};return O(l)}function k(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===a(e,"position"))return!0;var i=s(e);return!!i&&k(i)}function A(e){if(!e||!e.parentElement||p())return document.documentElement;for(var t=e.parentElement;t&&"none"===a(t,"transform");)t=t.parentElement;return t||document.documentElement}function M(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=r?A(e):g(e,c(t));if("viewport"===n)o=I(a,r);else{var h=void 0;"scrollParent"===n?"BODY"===(h=l(s(t))).nodeName&&(h=e.ownerDocument.documentElement):h="window"===n?e.ownerDocument.documentElement:n;var d=T(h,a,r);if("HTML"!==h.nodeName||k(a))o=d;else{var p=w(e.ownerDocument),u=p.height,f=p.width;o.top+=d.top-d.marginTop,o.bottom=u+d.top,o.left+=d.left-d.marginLeft,o.right=f+d.left}}var m="number"===typeof(i=i||0);return o.left+=m?i:i.left||0,o.top+=m?i:i.top||0,o.right-=m?i:i.right||0,o.bottom-=m?i:i.bottom||0,o}function D(e){return e.width*e.height}function L(e,t,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=M(i,n,o,r),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},l=Object.keys(s).map((function(e){return P({key:e},s[e],{area:D(s[e])})})).sort((function(e,t){return t.area-e.area})),c=l.filter((function(e){var t=e.width,n=e.height;return t>=i.clientWidth&&n>=i.clientHeight})),h=c.length>0?c[0].key:l[0].key,d=e.split("-")[1];return h+(d?"-"+d:"")}function R(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=n?A(t):g(t,c(i));return T(i,r,n)}function j(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),i=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),n=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+n,height:e.offsetHeight+i}}function N(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function z(e,t,i){i=i.split("-")[0];var n=j(e),r={width:n.width,height:n.height},o=-1!==["right","left"].indexOf(i),a=o?"top":"left",s=o?"left":"top",l=o?"height":"width",c=o?"width":"height";return r[a]=t[a]+t[l]/2-n[l]/2,r[s]=i===s?t[s]-n[c]:t[N(s)],r}function B(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function H(e,t,i){return(void 0===i?e:e.slice(0,function(e,t,i){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===i}));var n=B(e,(function(e){return e[t]===i}));return e.indexOf(n)}(e,"name",i))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=e.function||e.fn;e.enabled&&o(i)&&(t.offsets.popper=O(t.offsets.popper),t.offsets.reference=O(t.offsets.reference),t=i(t,e))})),t}function _(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=R(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=L(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=z(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=H(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function W(e,t){return e.some((function(e){var i=e.name;return e.enabled&&i===t}))}function F(e){for(var t=[!1,"ms","Webkit","Moz","O"],i=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var r=t[n],o=r?""+r+i:e;if("undefined"!==typeof document.body.style[o])return o}return null}function V(){return this.state.isDestroyed=!0,W(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[F("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function U(e){var t=e.ownerDocument;return t?t.defaultView:window}function Y(e,t,i,n){i.updateBound=n,U(e).addEventListener("resize",i.updateBound,{passive:!0});var r=l(e);return function e(t,i,n,r){var o="BODY"===t.nodeName,a=o?t.ownerDocument.defaultView:t;a.addEventListener(i,n,{passive:!0}),o||e(l(a.parentNode),i,n,r),r.push(a)}(r,"scroll",i.updateBound,i.scrollParents),i.scrollElement=r,i.eventsEnabled=!0,i}function X(){this.state.eventsEnabled||(this.state=Y(this.reference,this.options,this.state,this.scheduleUpdate))}function G(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,U(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function q(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function Z(e,t){Object.keys(t).forEach((function(i){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&q(t[i])&&(n="px"),e.style[i]=t[i]+n}))}var K=i&&/Firefox/i.test(navigator.userAgent);function $(e,t,i){var n=B(e,(function(e){return e.name===t})),r=!!n&&e.some((function(e){return e.name===i&&e.enabled&&e.order<n.order}));if(!r){var o="`"+t+"`",a="`"+i+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return r}var Q=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],J=Q.slice(3);function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=J.indexOf(e),n=J.slice(i+1).concat(J.slice(0,i));return t?n.reverse():n}var te="flip",ie="clockwise",ne="counterclockwise";function re(e,t,i,n){var r=[0,0],o=-1!==["right","left"].indexOf(n),a=e.split(/(\+|\-)/).map((function(e){return e.trim()})),s=a.indexOf(B(a,(function(e){return-1!==e.search(/,|\s/)})));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==s?[a.slice(0,s).concat([a[s].split(l)[0]]),[a[s].split(l)[1]].concat(a.slice(s+1))]:[a];return(c=c.map((function(e,n){var r=(1===n?!o:o)?"height":"width",a=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,i,n){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],a=r[2];if(!o)return e;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=i;break;case"%":case"%r":default:s=n}return O(s)[t]/100*o}if("vh"===a||"vw"===a){return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}(e,r,t,i)}))}))).forEach((function(e,t){e.forEach((function(i,n){q(i)&&(r[t]+=i*("-"===e[n-1]?-1:1))}))})),r}var oe={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,i=t.split("-")[0],n=t.split("-")[1];if(n){var r=e.offsets,o=r.reference,a=r.popper,s=-1!==["bottom","top"].indexOf(i),l=s?"left":"top",c=s?"width":"height",h={start:C({},l,o[l]),end:C({},l,o[l]+o[c]-a[c])};e.offsets.popper=P({},a,h[n])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var i=t.offset,n=e.placement,r=e.offsets,o=r.popper,a=r.reference,s=n.split("-")[0],l=void 0;return l=q(+i)?[+i,0]:re(i,o,a,s),"left"===s?(o.top+=l[0],o.left-=l[1]):"right"===s?(o.top+=l[0],o.left+=l[1]):"top"===s?(o.left+=l[0],o.top-=l[1]):"bottom"===s&&(o.left+=l[0],o.top+=l[1]),e.popper=o,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var i=t.boundariesElement||u(e.instance.popper);e.instance.reference===i&&(i=u(i));var n=F("transform"),r=e.instance.popper.style,o=r.top,a=r.left,s=r[n];r.top="",r.left="",r[n]="";var l=M(e.instance.popper,e.instance.reference,t.padding,i,e.positionFixed);r.top=o,r.left=a,r[n]=s,t.boundaries=l;var c=t.priority,h=e.offsets.popper,d={primary:function(e){var i=h[e];return h[e]<l[e]&&!t.escapeWithReference&&(i=Math.max(h[e],l[e])),C({},e,i)},secondary:function(e){var i="right"===e?"left":"top",n=h[i];return h[e]>l[e]&&!t.escapeWithReference&&(n=Math.min(h[i],l[e]-("right"===e?h.width:h.height))),C({},i,n)}};return c.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";h=P({},h,d[t](e))})),e.offsets.popper=h,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,i=t.popper,n=t.reference,r=e.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(r),s=a?"right":"bottom",l=a?"left":"top",c=a?"width":"height";return i[s]<o(n[l])&&(e.offsets.popper[l]=o(n[l])-i[c]),i[l]>o(n[s])&&(e.offsets.popper[l]=o(n[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var i;if(!$(e.instance.modifiers,"arrow","keepTogether"))return e;var n=t.element;if("string"===typeof n){if(!(n=e.instance.popper.querySelector(n)))return e}else if(!e.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],o=e.offsets,s=o.popper,l=o.reference,c=-1!==["left","right"].indexOf(r),h=c?"height":"width",d=c?"Top":"Left",p=d.toLowerCase(),u=c?"left":"top",f=c?"bottom":"right",g=j(n)[h];l[f]-g<s[p]&&(e.offsets.popper[p]-=s[p]-(l[f]-g)),l[p]+g>s[f]&&(e.offsets.popper[p]+=l[p]+g-s[f]),e.offsets.popper=O(e.offsets.popper);var m=l[p]+l[h]/2-g/2,y=a(e.instance.popper),v=parseFloat(y["margin"+d]),b=parseFloat(y["border"+d+"Width"]),w=m-e.offsets.popper[p]-v-b;return w=Math.max(Math.min(s[h]-g,w),0),e.arrowElement=n,e.offsets.arrow=(C(i={},p,Math.round(w)),C(i,u,""),i),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var i=M(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],r=N(n),o=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case te:a=[n,r];break;case ie:a=ee(n);break;case ne:a=ee(n,!0);break;default:a=t.behavior}return a.forEach((function(s,l){if(n!==s||a.length===l+1)return e;n=e.placement.split("-")[0],r=N(n);var c=e.offsets.popper,h=e.offsets.reference,d=Math.floor,p="left"===n&&d(c.right)>d(h.left)||"right"===n&&d(c.left)<d(h.right)||"top"===n&&d(c.bottom)>d(h.top)||"bottom"===n&&d(c.top)<d(h.bottom),u=d(c.left)<d(i.left),f=d(c.right)>d(i.right),g=d(c.top)<d(i.top),m=d(c.bottom)>d(i.bottom),y="left"===n&&u||"right"===n&&f||"top"===n&&g||"bottom"===n&&m,v=-1!==["top","bottom"].indexOf(n),b=!!t.flipVariations&&(v&&"start"===o&&u||v&&"end"===o&&f||!v&&"start"===o&&g||!v&&"end"===o&&m),w=!!t.flipVariationsByContent&&(v&&"start"===o&&f||v&&"end"===o&&u||!v&&"start"===o&&m||!v&&"end"===o&&g),x=b||w;(p||y||x)&&(e.flipped=!0,(p||y)&&(n=a[l+1]),x&&(o=function(e){return"end"===e?"start":"start"===e?"end":e}(o)),e.placement=n+(o?"-"+o:""),e.offsets.popper=P({},e.offsets.popper,z(e.instance.popper,e.offsets.reference,e.placement)),e=H(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,i=t.split("-")[0],n=e.offsets,r=n.popper,o=n.reference,a=-1!==["left","right"].indexOf(i),s=-1===["top","left"].indexOf(i);return r[a?"left":"top"]=o[i]-(s?r[a?"width":"height"]:0),e.placement=N(t),e.offsets.popper=O(r),e}},hide:{order:800,enabled:!0,fn:function(e){if(!$(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,i=B(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<i.top||t.left>i.right||t.top>i.bottom||t.right<i.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var i=t.x,n=t.y,r=e.offsets.popper,o=B(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:t.gpuAcceleration,s=u(e.instance.popper),l=E(s),c={position:r.position},h=function(e,t){var i=e.offsets,n=i.popper,r=i.reference,o=Math.round,a=Math.floor,s=function(e){return e},l=o(r.width),c=o(n.width),h=-1!==["left","right"].indexOf(e.placement),d=-1!==e.placement.indexOf("-"),p=t?h||d||l%2===c%2?o:a:s,u=t?o:s;return{left:p(l%2===1&&c%2===1&&!d&&t?n.left-1:n.left),top:u(n.top),bottom:u(n.bottom),right:p(n.right)}}(e,window.devicePixelRatio<2||!K),d="bottom"===i?"top":"bottom",p="right"===n?"left":"right",f=F("transform"),g=void 0,m=void 0;if(m="bottom"===d?"HTML"===s.nodeName?-s.clientHeight+h.bottom:-l.height+h.bottom:h.top,g="right"===p?"HTML"===s.nodeName?-s.clientWidth+h.right:-l.width+h.right:h.left,a&&f)c[f]="translate3d("+g+"px, "+m+"px, 0)",c[d]=0,c[p]=0,c.willChange="transform";else{var y="bottom"===d?-1:1,v="right"===p?-1:1;c[d]=m*y,c[p]=g*v,c.willChange=d+", "+p}var b={"x-placement":e.placement};return e.attributes=P({},b,e.attributes),e.styles=P({},c,e.styles),e.arrowStyles=P({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,i;return Z(e.instance.popper,e.styles),t=e.instance.popper,i=e.attributes,Object.keys(i).forEach((function(e){!1!==i[e]?t.setAttribute(e,i[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&Z(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,i,n,r){var o=R(r,t,e,i.positionFixed),a=L(i.placement,o,t,e,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return t.setAttribute("x-placement",a),Z(t,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}}},ae=function(){function e(t,i){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};x(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=r(this.update.bind(this)),this.options=P({},e.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(P({},e.Defaults.modifiers,a.modifiers)).forEach((function(t){n.options.modifiers[t]=P({},e.Defaults.modifiers[t]||{},a.modifiers?a.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return P({name:e},n.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&o(e.onLoad)&&e.onLoad(n.reference,n.popper,n.options,e,n.state)})),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return S(e,[{key:"update",value:function(){return _.call(this)}},{key:"destroy",value:function(){return V.call(this)}},{key:"enableEventListeners",value:function(){return X.call(this)}},{key:"disableEventListeners",value:function(){return G.call(this)}}]),e}();ae.Utils=("undefined"!==typeof window?window:e).PopperUtils,ae.placements=Q,ae.Defaults=oe,t.a=ae}).call(this,i(44))},function(e,t,i){"use strict";t.__esModule=!0;var n=o(i(0)),r=o(i(121));function o(e){return e&&e.__esModule?e:{default:e}}t.default=n.default.createContext||r.default,e.exports=t.default},function(e,t,i){"use strict";var n=i(1),r=i(5),o=i(3),a=i.n(o),s=i(0),l=i.n(s),c=i(9),h=["xl","lg","md","sm","xs"],d=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.className,s=e.noGutters,d=e.as,p=void 0===d?"div":d,u=Object(r.a)(e,["bsPrefix","className","noGutters","as"]),f=Object(c.a)(i,"row"),g=f+"-cols",m=[];return h.forEach((function(e){var t,i=u[e];delete u[e];var n="xs"!==e?"-"+e:"";null!=(t=null!=i&&"object"===typeof i?i.cols:i)&&m.push(""+g+n+"-"+t)})),l.a.createElement(p,Object(n.a)({ref:t},u,{className:a.a.apply(void 0,[o,f,s&&"no-gutters"].concat(m))}))}));d.displayName="Row",d.defaultProps={noGutters:!1},t.a=d},,function(e,t,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(e,t){for(var i,s,l=a(e),c=1;c<arguments.length;c++){for(var h in i=Object(arguments[c]))r.call(i,h)&&(l[h]=i[h]);if(n){s=n(i);for(var d=0;d<s.length;d++)o.call(i,s[d])&&(l[s[d]]=i[s[d]])}}return l}},function(e,t,i){"use strict";e.exports=i(106)},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,i){"use strict";var n=Array.prototype.slice,r=i(76),o=Object.keys,a=o?function(e){return o(e)}:i(108),s=Object.keys;a.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return r(e)?s(n.call(e)):s(e)}):Object.keys=a;return Object.keys||a},e.exports=a},function(e,t,i){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t=n.call(e),i="[object Arguments]"===t;return i||(i="[object Array]"!==t&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),i}},function(e,t,i){"use strict";var n=Object,r=TypeError;e.exports=function(){if(null!=this&&this!==n(this))throw new r("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e}},function(e,t,i){"use strict";var n=i(77),r=i(64).supportsDescriptors,o=Object.getOwnPropertyDescriptor,a=TypeError;e.exports=function(){if(!r)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=o(RegExp.prototype,"flags");if(e&&"function"===typeof e.get&&"boolean"===typeof/a/.dotAll)return e.get}return n}},function(e,t,i){"use strict";function n(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e){if(Array.isArray(e))return e}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";var n=i(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(0)),o=(0,n(i(107)).default)(r.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=o},function(e,t,i){(function(t){var i=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")(),h=Object.prototype.toString,d=Math.max,p=Math.min,u=function(){return c.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var s=r.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):n.test(e)?NaN:+e}e.exports=function(e,t,i){var n,r,o,a,s,l,c=0,h=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var i=n,o=r;return n=r=void 0,c=t,a=e.apply(o,i)}function b(e){return c=e,s=setTimeout(x,t),h?v(e):a}function w(e){var i=e-l;return void 0===l||i>=t||i<0||m&&e-c>=o}function x(){var e=u();if(w(e))return S(e);s=setTimeout(x,function(e){var i=t-(e-l);return m?p(i,o-(e-c)):i}(e))}function S(e){return s=void 0,y&&n?v(e):(n=r=void 0,a)}function C(){var e=u(),i=w(e);if(n=arguments,r=this,l=e,i){if(void 0===s)return b(l);if(m)return s=setTimeout(x,t),v(l)}return void 0===s&&(s=setTimeout(x,t)),a}return t=g(t)||0,f(i)&&(h=!!i.leading,o=(m="maxWait"in i)?d(g(i.maxWait)||0,t):o,y="trailing"in i?!!i.trailing:y),C.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=r=s=void 0},C.flush=function(){return void 0===s?a:S(u())},C}}).call(this,i(44))},function(e,t){e.exports=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}},function(e,t,i){var n=i(75),r=i(109),o=i(110),a=i(111),s=i(114),l=i(120),c=Date.prototype.getTime;function h(e,t,i){var u=i||{};return!!(u.strict?o(e,t):e===t)||(!e||!t||"object"!==typeof e&&"object"!==typeof t?u.strict?o(e,t):e==t:function(e,t,i){var o,u;if(typeof e!==typeof t)return!1;if(d(e)||d(t))return!1;if(e.prototype!==t.prototype)return!1;if(r(e)!==r(t))return!1;var f=a(e),g=a(t);if(f!==g)return!1;if(f||g)return e.source===t.source&&s(e)===s(t);if(l(e)&&l(t))return c.call(e)===c.call(t);var m=p(e),y=p(t);if(m!==y)return!1;if(m||y){if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}if(typeof e!==typeof t)return!1;try{var v=n(e),b=n(t)}catch(w){return!1}if(v.length!==b.length)return!1;for(v.sort(),b.sort(),o=v.length-1;o>=0;o--)if(v[o]!=b[o])return!1;for(o=v.length-1;o>=0;o--)if(u=v[o],!h(e[u],t[u],i))return!1;return!0}(e,t,u))}function d(e){return null===e||void 0===e}function p(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&("function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0]))}e.exports=h},function(e,t,i){"use strict";var n=i(1),r=i(5),o=i(3),a=i.n(o),s=i(0),l=i.n(s),c=i(9),h=l.a.forwardRef((function(e,t){var i=e.bsPrefix,o=e.fluid,s=e.as,h=void 0===s?"div":s,d=e.className,p=Object(r.a)(e,["bsPrefix","fluid","as","className"]),u=Object(c.a)(i,"container"),f="string"===typeof o?"-"+o:"-fluid";return l.a.createElement(h,Object(n.a)({ref:t},p,{className:a()(d,o?""+u+f:u)}))}));h.displayName="Container",h.defaultProps={fluid:!1},t.a=h},function(e,t,i){"use strict";i.d(t,"a",(function(){return Xf}));var n=i(0),r=i(12),o="ej2_instances",a=0,s=!1;function l(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function c(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<n.length&&!g(i);r++)i=i[n[r]];return i}function h(e,t,i){var n,r,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=i||{},s=a,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?s[r]=void 0===t?{}:t:f(s[r])&&(s[r]={}),s=s[r];return a}function d(e){return!f(e)&&e.constructor==={}.constructor}function p(e,t){if(!f(t))for(var i=e,n=t,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];f(i.deepMerge)||-1===i.deepMerge.indexOf(a)||!d(n[a])&&!Array.isArray(n[a])?i[a]=n[a]:u(i[a],i[a],n[a],!0)}}function u(e,t,i,n){var r=e&&"object"===typeof e?e:{},o=arguments.length;n&&(o-=1);for(var a=function(e){if(!s[e])return"continue";var t=s[e];Object.keys(t).forEach((function(e){var i,o=r[e],a=t[e],s=Array.isArray(a)&&Array.isArray(o)&&a.length!==o.length,l=!w()||!(o instanceof Event)&&!s;n&&l&&(d(a)||Array.isArray(a))?d(a)?(i=o||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?u(i,{},a,n):r[e]=u(i,{},a,n)):(i=w()?o&&Object.keys(a).length:o||[],r[e]=u([],i,a,n)):r[e]=a}))},s=arguments,l=1;l<o;l++)a(l);return r}function f(e){return void 0===e||null===e}function g(e){return"undefined"===typeof e}function m(e){return e+"_"+a++}function y(e,t){return e===t||!(e===document||!e)&&y(e.parentNode,t)}function v(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}function b(e){var t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"}function w(){return s}function x(e,t){var i="string"===typeof e?document.querySelector(e):e;if(i[o])for(var n=0,r=i[o];n<r.length;n++){var a=r[n];if(a instanceof t)return a}return null}var S,C={latn:{_digits:"0123456789",_type:"numeric"}},P={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},O=[0,1,2,3,4,5,6,7,8,9],E=function(){function e(){}return e.getMainObject=function(e,t){return c(w()?t:"main."+t,e)},e.getNumberingSystem=function(e){return c("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,r=t||Object.keys(e);n<r.length;n++){var o=r[n];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(P);i<n.length;i++){var r=n[i];t[e[r]]=P[r]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[n]+"|":e[n];return i},e.convertValueParts=function(e,t,i){return e.replace(t,(function(e){return i[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=c("numbers",e),t.nSystem=c("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i,n){var r={},o=this.getDefaultNumberingSystem(e);if(!g(o.nSystem)||n){var a=n?c("obj.mapperDigits",o):c(o.nSystem+"._digits",t);g(a)||(r.numericPair=this.reverseObject(a,O),r.numberParseRegex=new RegExp(this.constructRegex(a),"g"),r.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(r.numericRegex=a[0]+"-"+a[9],r.symbolNumberSystem=c(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),r.symbolMatch=this.getSymbolMatch(r.symbolNumberSystem),r.numberSystem=o.nSystem))}return r},e.getNumberMapper=function(e,t,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(e);if(!g(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=c("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=c("timeSeparator",n.numberSymbols);var o=c(r.nSystem+"._digits",t);if(!g(o))for(var a=0,s=O;a<s.length;a++){var l=s[a];n.mapper[l]=o[l]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=C,e}(),T={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};!function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var i=e.getDate(),n=e.getMonth(),r=e.getFullYear(),o=n+1,a=r;o<3&&(a-=1,o+=12);var s=Math.floor(a/100),l=s-Math.floor(s/4)-2,c=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(o+1))+i-l-1524,h=c+(l=(s=Math.floor((c-1867216.25)/36524.25))-Math.floor(s/4)+1)+1524,d=Math.floor((h-122.1)/365.25),p=Math.floor(365.25*d),u=Math.floor((h-p)/30.6001);i=h-p-Math.floor(30.6001*u),(n=Math.floor((h-p)/20.6001))>13&&(d+=1,n-=12),n-=1,r=d-4716;var f=c-24e5,g=c-1948084,m=Math.floor(g/10631);g-=10631*m;var y=Math.floor((g-.1335)/(10631/30)),v=30*m+y;g-=Math.floor(y*(10631/30)+.1335);var b=Math.floor((g+28.5001)/29.5);13===b&&(b=12);for(var w=g-Math.floor(29.5001*b-29),x=0;x<t.length&&!(t[x]>f);x++);var S=x+16260,C=Math.floor((S-1)/12),P=C+1,O=S-12*C,E=f-t[x-1]+1;return(E+"").length>2&&(E=w,O=b,P=v),{year:P,month:O,date:E}},e.toGregorian=function(e,i,n){var r=n+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5,o=Math.floor(r+.5),a=Math.floor((o-1867216.25)/36524.25),s=(a=o+1+a-Math.floor(a/4))+1524,l=Math.floor((s-122.1)/365.25),c=Math.floor(365.25*l),h=Math.floor((s-c)/30.6001),d=s-c-Math.floor(30.6001*h),p=h-(h>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+d)}}(S||(S={}));var I=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,k=["sun","mon","tue","wed","thu","fri","sat"],A={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},M={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},D=function(){function e(){}return e.dateFormat=function(e,t,i){var n=this,r=Z.getDependables(i,e,t.calendar),o=c("parserObject.numbers",r),a=r.dateObject,s={isIslamic:Z.islamicRegex.test(t.calendar)};w()&&t.isServerRendered&&(t=Z.compareBlazorDateFormats(t,e));var l=t.format||Z.getResultantPattern(t.skeleton,r.dateObject,t.type,!1,w()?e:"");if(s.dateSeperator=w()?c("dateSeperator",a):Z.getDateSeparator(r.dateObject),g(l))v("Format options or type given must be invalid");else{l=Z.ConvertDateToWeekFormat(l),w()&&(l=l.replace(/tt/,"a")),s.pattern=l,s.numMapper=w()?u({},o):E.getNumberMapper(r.parserObject,E.getNumberingSystem(i));for(var h=0,d=l.match(I)||[];h<d.length;h++){var p=d[h],f=p.length,m=p[0];"K"===m&&(m="h");switch(m){case"E":case"c":w()?s.weekday=c("days."+Z.monthIndex[f],a):s.weekday=r.dateObject[Z.days]["stand-alone"][Z.monthIndex[f]];break;case"M":case"L":w()?s.month=c("months."+Z.monthIndex[f],a):s.month=r.dateObject[Z.month]["stand-alone"][Z.monthIndex[f]];break;case"a":s.designator=w()?c("dayPeriods",a):c("dayPeriods.format.wide",a);break;case"G":var y=f<=3?"eraAbbr":4===f?"eraNames":"eraNarrow";s.era=w()?c("eras",a):c("eras."+y,r.dateObject);break;case"z":s.timeZone=c("dates.timeZoneNames",r.parserObject)}}}return function(e){return isNaN(e.getDate())?null:n.intDateFormatter(e,s)}},e.intDateFormatter=function(e,t){for(var i="",n=t.pattern.match(Z.dateParseRegex),r=this.getCurrentDateValue(e,t.isIslamic),o=0,a=n;o<a.length;o++){var s=a[o],l=s.length,c=s[0];"K"===c&&(c="h");var h=void 0,d="",p=void 0,u=void 0,g="";switch(c){case"M":case"L":h=r.month,l>2?i+=t.month[h]:p=!0;break;case"E":case"c":i+=t.weekday[k[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(p=!0,"d"===c)h=r.date;else if("f"===c){p=!1,u=!0;var m=(d=(d=e[A[c]]().toString()).substring(0,l)).length;if(l!==m){if(l>3)continue;for(var y=0;y<l-m;y++)d="0"+d.toString()}g+=d}else h=e[A[c]]();"h"===c&&(h=h%12||12);break;case"y":u=!0,g+=r.year,2===l&&(g=g.substr(g.length-2));break;case"a":var v=e.getHours()<12?"am":"pm";i+=t.designator[v];break;case"G":var b=e.getFullYear()<0?0:1,w=t.era[b];f(w)&&(w=t.era[b?0:1]),i+=w||"";break;case"'":i+="''"===s?"'":s.replace(/\'/g,"");break;case"z":var x=e.getTimezoneOffset(),S=l<4?"+H;-H":t.timeZone.hourFormat;S=S.replace(/:/g,t.numMapper.timeSeparator),0===x?i+=t.timeZone.gmtZeroFormat:(u=!0,g=this.getTimeZoneValue(x,S)),g=t.timeZone.gmtFormat.replace(/\{0\}/,g);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;case"W":p=!0,h=Z.getWeekOfYear(e);break;default:i+=s}p&&(u=!0,g=this.checkTwodigitNumber(h,l)),u&&(i+=E.convertValueParts(g,Z.latnParseRegex,t.numMapper.mapper))}return i},e.getCurrentDateValue=function(e,t){return t?S.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},e.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],r=Math.abs(e);return n.replace(/HH?|mm/g,(function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?r/60:r%60),t)}))},e}(),L={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},R=["infinity","nan","group","decimal","exponential"],j=function(){function e(){}return e.numberFormatter=function(e,t,i){var n,r=this,o=u({},t),a={},s={},l=Z.getDependables(i,e,"",!0),h=l.numericObject;s.numberMapper=w()?u({},h):E.getNumberMapper(l.parserObject,E.getNumberingSystem(i),!0),s.currencySymbol=w()?c("currencySymbol",h):Z.getCurrencySymbol(l.numericObject,o.currency||q,t.altSymbol),s.percentSymbol=w()?c("numberSymbols.percentSign",h):s.numberMapper.numberSymbols.percentSign,s.minusSymbol=w()?c("numberSymbols.minusSign",h):s.numberMapper.numberSymbols.minusSign;var d=s.numberMapper.numberSymbols;if(t.format&&!Z.formatRegex.test(t.format))a=Z.customFormat(t.format,s,l.numericObject);else{if(u(o,Z.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,w()||(n=Z.getSymbolPattern(o.type,s.numberMapper.numberSystem,l.numericObject,o.isAccount)),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),g(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),g(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&!w()&&(n=n.replace(/\u00A4/g,Z.defaultCurrency)),w())a.nData=u({},{},c(o.type+"nData",h)),a.pData=u({},{},c(o.type+"pData",h)),"currency"===o.type&&t.currency&&Z.replaceBlazorCurrency([a.pData,a.nData],s.currencySymbol,t.currency);else{var p=n.split(";");a.nData=Z.getFormatData(p[1]||"-"+p[0],!0,s.currencySymbol),a.pData=Z.getFormatData(p[0],!1,s.currencySymbol),o.useGrouping&&(o.groupSeparator=d[R[2]],o.groupData=this.getGroupingDetails(p[0]))}if(g(o.minimumFractionDigits)&&(o.minimumFractionDigits=a.nData.minimumFraction),g(o.maximumFractionDigits)){var f=a.nData.maximumFraction;o.maximumFractionDigits=g(f)&&o.isPercent?0:f}var m=o.minimumFractionDigits,y=o.maximumFractionDigits;g(m)||g(y)||m>y&&(o.maximumFractionDigits=m)}return u(a.nData,o),u(a.pData,o),function(e){return isNaN(e)?d[R[1]]:isFinite(e)?r.intNumberFormatter(e,a,s):d[R[0]]}},e.getGroupingDetails=function(e){var t={},i=e.match(Z.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];t.primary=o.length-r-1;var a=n.lastIndexOf(",",r-1);-1!==a&&(t.secondary=r-1-a)}}return t},e.checkValueRange=function(e,t,i,n){var r=n?"f":"s",o=0,a=L["l"+r],s=L["m"+r];if(g(e)||(this.checkRange(e,a,n),o++),g(t)||(this.checkRange(t,s,n),o++),2===o){if(!(e<t))return!0;v(s+"specified must be less than the"+a)}else i&&1===o&&v("Both"+s+"and"+s+"must be present");return!1},e.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&v(t+"value must be within the range"+n[0]+"to"+n[1])},e.intNumberFormatter=function(e,t,i){var n;if(!g(t.nData.type)){e<0?(e*=-1,n=t.nData):n=0===e&&t.zeroData||t.pData;var r="";return n.isPercent&&(e*=100),n.groupOne?r=this.processSignificantDigits(e,n.minimumSignificantDigits,n.maximumSignificantDigits):(r=this.processFraction(e,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,n.minimumIntegerDigits))),"scientific"===n.type&&(r=(r=e.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[R[4]])),r=r.replace(".",i.numberMapper.numberSymbols[R[3]]),n.useGrouping&&(r=this.groupNumbers(r,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[R[3]]||".",n.groupData.secondary)),r=E.convertValueParts(r,Z.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+r+n.nend}},e.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},e.groupNumbers=function(e,t,i,n,r){for(var o=!f(r)&&0!==r,a=e.split(n),s=a[0],l=s.length,c="";l>t;)c=s.slice(l-t,l)+(c.length?i+c:""),l-=t,o&&(t=r,o=!1);return a[0]=s.slice(0,l)+(c.length?i:"")+c,a.join(n)},e.processFraction=function(e,t,i){var n=(e+"").split(".")[1],r=n?n.length:0;if(t&&r<t){var o="";if(0!==r){o+=e;for(var a=0;a<t-r;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!f(i)&&(r>i||0===i)?e.toFixed(i):e+""},e.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],r=n.length;if(r<t){for(var o=0;o<t-r;o++)n="0"+n;i[0]=n}return i.join(".")},e}(),N=/^[0-9]*$/,z={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},B=function(){function e(){}return e.dateParser=function(e,t,i){var n=this,r=Z.getDependables(i,e,t.calendar),o=E.getCurrentNumericOptions(r.parserObject,E.getNumberingSystem(i),!1,w()),a={};w()&&t.isServerRendered&&(t=Z.compareBlazorDateFormats(t,e));var s,l=t.format||Z.getResultantPattern(t.skeleton,r.dateObject,t.type,!1,w()?e:""),h="";if(g(l))v("Format options or type given must be invalid");else{l=Z.ConvertDateToWeekFormat(l),a={isIslamic:Z.islamicRegex.test(t.calendar),pattern:l,evalposition:{},culture:e};for(var d=l.match(Z.dateParseRegex)||[],p=d.length,u=0,m=0,y=!1,b=o.numericRegex,x=w()?r.parserObject.numbers:E.getNumberMapper(r.parserObject,E.getNumberingSystem(i)),C=0;C<p;C++){var P=d[C],O=P.length,T="K"===P[0]?"h":P[0],I=void 0,k=void 0,A=M[T],D=2===O?"":"?";switch(y&&(u=m,y=!1),T){case"E":case"c":var L=void 0;L=w()?c("days."+Z.monthIndex[O],r.dateObject):r.dateObject[Z.days]["stand-alone"][Z.monthIndex[O]];var R=E.reverseObject(L);h+="("+Object.keys(R).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(k=!0,("M"===T||"L"===T)&&O>2){var j=void 0;j=w()?c("months."+Z.monthIndex[O],r.dateObject):r.dateObject.months["stand-alone"][Z.monthIndex[O]],a[A]=E.reverseObject(j),h+="("+Object.keys(a[A]).join("|")+")"}else if("f"===T){if(O>3)continue;I=!0,h+="("+b+b+"?"+b+"?)"}else I=!0,h+="("+b+b+D+")";"h"===T&&(a.hour12=!0);break;case"W":h+="("+b+(1===O?"?":"")+b+")";break;case"y":k=I=!0,h+=2===O?"("+b+b+")":"("+b+"{"+O+",})";break;case"a":k=!0;var N=w()?c("dayPeriods",r.dateObject):c("dayPeriods.format.wide",r.dateObject);a[A]=E.reverseObject(N),h+="("+Object.keys(a[A]).join("|")+")";break;case"G":k=!0;var z=O<=3?"eraAbbr":4===O?"eraNames":"eraNarrow";a[A]=E.reverseObject(w()?c("eras",r.dateObject):c("eras."+z,r.dateObject)),h+="("+Object.keys(a[A]).join("|")+"?)";break;case"z":k=0!==(new Date).getTimezoneOffset(),a[A]=c("dates.timeZoneNames",r.parserObject);var B=a[A],H=(s=O<4)?"+H;-H":B.hourFormat;H=H.replace(/:/g,x.timeSeparator),h+="("+this.parseTimeZoneRegx(H,B,b)+")?",y=!0,m=s?6:12;break;case"'":h+="("+P.replace(/\'/g,"")+")?";break;default:h+="([\\D])"}k&&(a.evalposition[A]={isNumber:I,pos:C+1+u,hourOnly:s}),C!==p-1||f(h)||(a.parserRegex=new RegExp("^"+h+"$","i"))}}return function(e){var t=n.internalDateParse(e,a,o);if(f(t)||!Object.keys(t).length)return null;if(a.isIslamic){var i={},r=t.year,s=t.day,l=t.month,c=r?r+"":"",h=2===c.length;r&&l&&s&&!h||(i=S.getHijriDate(new Date)),h&&(r=parseInt((i.year+"").slice(0,2)+c,10));var d=S.toGregorian(r||i.year,l||i.month,s||i.date);t.year=d.getFullYear(),t.month=d.getMonth()+1,t.day=d.getDate()}return n.getDateObject(t)}},e.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,r=e.designator,o=e.timeZone;if(!g(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var a=0,s=["hour","minute","second","milliseconds","month","day"];a<s.length;a++){var l=s[a],c=e[l];if(g(c)&&"day"===l&&i.setDate(1),!g(c))if("month"===l){if((c-=1)<0||c>11)return new Date("invalid");var h=i.getDate();i.setDate(1),i[z[l]](c);var d=new Date(i.getFullYear(),c+1,0).getDate();i.setDate(h<d?h:d)}else{if("day"===l){var p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(c<1||c>p)return null}i[z[l]](c)}}if(!g(r)){var u=i.getHours();"pm"===r?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!g(o)){var f=o-i.getTimezoneOffset();0!==f&&i.setMinutes(i.getMinutes()+f)}return i},e.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),r={hour:0,minute:0,second:0};i.numericRegex;if(f(n))return null;for(var o=0,a=Object.keys(t.evalposition);o<a.length;o++){var s=a[o],l=t.evalposition[s],c=n[l.pos];if(l.isNumber)r[s]=this.internalNumberParser(c,i);else if("timeZone"!==s||g(c))c="month"!==s||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?c:c[0].toUpperCase()+c.substring(1).toLowerCase(),r[s]=t[s][c];else{var h=l.pos,d=void 0,p=n[h+1],u=!g(p);l.hourOnly?d=60*this.getZoneValue(u,p,n[h+4],i):(d=60*this.getZoneValue(u,p,n[h+7],i),d+=this.getZoneValue(u,n[h+4],n[h+10],i)),f(d)||(r[s]=d)}}return t.hour12&&(r.hour12=!0),r},e.internalNumberParser=function(e,t){return e=E.convertValueParts(e,t.numberParseRegex,t.numericPair),N.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,i){var n,r,o=t.gmtFormat,a="("+i+")("+i+")";return n=e.replace("+","\\+"),r=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+a+")"):n.replace(/H|m/g,"("+a+"?)")).split(";").map((function(e){return o.replace("{0}",e)})),n=r.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,i,n){var r=e?t:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return e?-o:o},e}(),H=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,_=/,/g,W=["minusSign","infinity"],F=function(){function e(){}return e.numberParser=function(e,t,i){var n,r=this,o=Z.getDependables(i,e,"",!0),a={custom:!0};Z.formatRegex.test(t.format)||!t.format?(u(a,Z.getProperNumericSkeleton(t.format||"N")),a.custom=!1):u(a,Z.customFormat(t.format,null,null));var s,l=c("numbers",o.parserObject);if(n=E.getCurrentNumericOptions(o.parserObject,E.getNumberingSystem(i),!0,w()),a.symbolRegex=E.getSymbolRegex(Object.keys(n.symbolMatch)),a.infinity=n.symbolNumberSystem[W[1]],w())a.nData=u({},{},c(a.type+"nData",l)),a.pData=u({},{},c(a.type+"pData",l)),"currency"===a.type&&t.currency&&Z.replaceBlazorCurrency([a.pData,a.nData],c("currencySymbol",l),t.currency);else if(s=Z.getSymbolPattern(a.type,n.numberSystem,o.numericObject,a.isAccount)){var h=(s=s.replace(/\u00A4/g,Z.defaultCurrency)).split(";");a.nData=Z.getFormatData(h[1]||"-"+h[0],!0,""),a.pData=Z.getFormatData(h[0],!0,"")}return function(e){return r.getParsedNumber(e,a,n)}},e.getParsedNumber=function(e,t,i){var n,r,o,a,s,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=E.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=E.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf(".")&&(e="0"+e);var c=e.match(H);if(f(c))return NaN;a=c[1],o=c[2];var h=c[5];return s=c[6],r=(n=t.custom?a===t.nData.nlead&&s===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==s.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(_,""),h&&(o+=h),l=+o,("percent"===t.type||r)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),n&&(l*=-1),l},e}(),V=function(){function e(e){this.ranArray=[],this.boundedEvents={},f(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!f(t)){var r=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:f(n)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[e].push({handler:t,context:r,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=c(e,this.boundedEvents);if(t){for(var r=0;r<n.length;r++)if(i){if(n[r].id===i){n.splice(r,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===n[r].handler){n.splice(r,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var r=c(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(r,t,i,n,0);for(var o=0,a=r;o<a.length;o++){var s=a[o];s.handler.call(s.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,n,r){var o=this,a=r===e.length-1;if(r<e.length){var s=e[r],l=s.handler.call(s.context,t);if(l&&"function"===typeof l.then){if(!i)return l;l.then((function(l){if(l="string"===typeof l&&o.isJson(l)?JSON.parse(l,o.dateReviver):l,u(t,t,l,!0),!i||!a)return o.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)})).catch((function(e){n&&n.call(s.context,"string"===typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)}))}else{if(!i||!a)return this.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)}}},e.prototype.dateReviver=function(e,t){return w&&"string"===typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),U=new V,Y=!1,X={},G="en-US",q="USD";!function(){function e(e){e&&(this.culture=e)}e.prototype.getDateFormat=function(e){return D.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},X)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=q),w()&&e&&!e.format&&(e.minimumFractionDigits=0),j.numberFormatter(this.getCulture(),e||{},X)},e.prototype.getDateParser=function(e){return B.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},X)},e.prototype.getNumberParser=function(e){return w()&&e&&!e.format&&(e.minimumFractionDigits=0),F.numberParser(this.getCulture(),e||{format:"N"},X)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return Z.getActualDateTimeFormat(this.getCulture(),e,X,t)},e.prototype.getNumberPattern=function(e,t){return Z.getActualNumberFormat(this.getCulture(),e,X,t)},e.prototype.getFirstDayOfWeek=function(){return Z.getWeekData(this.getCulture(),X)},e.prototype.getCulture=function(){return this.culture||G}}();var Z,K={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi;e.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function s(t,i,n,r,o){var a,s=n||"date";if(o)a=p({skeleton:t},o).format||p({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(a=c(s+"Formats."+t,i),"dateTime"===s){var l=c("dateFormats."+t,i),h=c("timeFormats."+t,i);a=a.replace("{1}",l).replace("{0}",h)}}else a=c("dateTimeFormats.availableFormats."+t,i);g(a)&&"yMd"===t&&(a="M/d/y")}return a}function l(t,i,n,r){var o={},a=n||"gregorian";if(o.parserObject=E.getMainObject(t,i)||(w()?e.blazorDefaultObject:e.defaultObject),r)o.numericObject=c("numbers",o.parserObject);else{var s=w()?"dates":"dates.calendars."+a;o.dateObject=c(s,o.parserObject)}return o}function h(e,t,i,n){return c(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?c(e+"Formats-numberSystem-"+t+".standard",i):"")}function d(t){var i=t.match(e.dateConverterMapper);if(i&&w()){var n=3===i[0].length?"EEE":"EEEE";return t.replace(e.dateConverterMapper,n)}return t}function p(e,t){var i=e.format||e.skeleton,n=c((t||"en-US")+"."+i,K);return n||(n=c("en-US."+i,K)),n&&(n=d(n),e.format=n.replace(/tt/,"a")),e}function m(t){var i=t.match(e.formatRegex),n={},r=i[1].toUpperCase();return n.isAccount="A"===r,n.type=e.patternMatcher[r],t.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function y(i,n,r,o){var a=o?{}:{nlead:"",nend:""},s=i.match(e.customRegex);if(s){o||(a.nlead=v(s[1],r),a.nend=v(s[10],r),a.groupPattern=s[4]);var l=s[7];if(l&&n){var c=l.match(t);f(c)?a.minimumFraction=0:a.minimumFraction=c.length,a.maximumFraction=l.length-1}}return a}function v(t,i){return t?t.replace(e.defaultCurrency,i):""}function b(e,t,i){return c("currencies."+t+(i?"."+i:".symbol"),e)||c("currencies."+t+".symbol-alt-narrow",e)||"$"}function x(t,n,r){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=t.match(e.customRegex);if(f(a)||""===a[5]&&"N/A"!==t)return o.type=void 0,o;o.nlead=a[1],o.nend=a[10];var s=a[6];o.useGrouping=-1!==s.indexOf(","),s=s.replace(/,/g,"");var l=a[7];if(-1!==s.indexOf("0")&&(o.minimumIntegerDigits=s.length-s.indexOf("0")),f(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),f(n)?u(o,S([o.nlead,o.nend],"%","%")):(u(o,S([o.nlead,o.nend],"$",n.currencySymbol)),o.isCurrency||u(o,S([o.nlead,o.nend],"%",n.percentSymbol))),!f(r)){var c=h(o.type,n.numberMapper.numberSystem,r,!1);o.useGrouping&&(o.groupSeparator=n.numberMapper.numberSymbols[i[2]],o.groupData=j.getGroupingDetails(c.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function S(e,t,i){for(var n={nlead:e[0],nend:e[1]},r=0;r<2;r++){var o=e[r],s=o.indexOf(t);if(-1!==s&&(s<o.indexOf("'")||s>o.lastIndexOf("'"))){n[a[r]]=o.substr(0,s)+i+o.substr(s+1),n[a[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=s,e.getDependables=l,e.getSymbolPattern=h,e.ConvertDateToWeekFormat=d,e.compareBlazorDateFormats=p,e.getProperNumericSkeleton=m,e.getFormatData=y,e.getCurrencySymbol=b,e.customFormat=function(e,t,i){for(var n={},r=e.split(";"),o=["pData","nData","zeroData"],a=0;a<r.length;a++)n[o[a]]=x(r[a],t,i);return f(n.nData)&&(n.nData=u({},n.pData),n.nData.nlead=f(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},e.isCurrencyPercent=S,e.getDateSeparator=function(e){var t=(c("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,o){var a=l(i,e,t.calendar);w()&&(t=p(t,e));var h=t.format||s(t.skeleton,a.dateObject,t.type);if(o){if(-1!==(h=h.replace(n,(function(e){return r[e]}))).indexOf("z")){var d=h.match(/z/g).length,u=void 0,f={timeZone:{}};f.numMapper=E.getNumberMapper(a.parserObject,E.getNumberingSystem(i)),f.timeZone=c("dates.timeZoneNames",a.parserObject);var g=(new Date).getTimezoneOffset(),m=d<4?"+H;-H":f.timeZone.hourFormat;m=m.replace(/:/g,f.numMapper.timeSeparator),0===g?u=f.timeZone.gmtZeroFormat:(u=D.getTimeZoneValue(g,m),u=f.timeZone.gmtFormat.replace(/\{0\}/,u)),h=h.replace(/[z]+/,'"'+u+'"')}h=h.replace(/ $/,"")}return h},e.getActualNumberFormat=function(t,i,n,r){var o,a,s=l(n,t,"",!0),d={custom:!0},p=s.numericObject,f={},g=(i.format||"").match(e.currencyFormatRegex),v=e.formatRegex.test(i.format)?m(i.format||"N"):{},x={};if(g){x.numberMapper=w()?u({},s.numericObject):E.getNumberMapper(s.parserObject,E.getNumberingSystem(n),!0);var S=w()?c("currencySymbol",s.numericObject):b(s.numericObject,i.currency||q,i.altSymbol),C=h("currency",x.numberMapper.numberSystem,s.numericObject,/a/i.test(i.format)),P=(C=C.replace(/\u00A4/g,S)).split(";");f.hasNegativePattern=!!w()||P.length>1,f.nData=w()?c(v.type+"nData",p):y(P[1]||"-"+P[0],!0,S),f.pData=w()?c(v.type+"pData",p):y(P[0],!1,S),g[2]||i.minimumFractionDigits||i.maximumFractionDigits||(o=y(C.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(u(d,m(i.format||"N")),d.custom=!1,a="###0",d.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||o){d.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=d.fractionDigits),a=function(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var r=i-t,o=0;o<r;o++)e+="#";return e}(a,o||d.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)}if(i.minimumIntegerDigits&&(a=function(e,t){for(var i=e.split("."),n="",r=0;r<t;r++)n+="0";return i[1]?n+"."+i[1]:n}(a,i.minimumIntegerDigits)),i.useGrouping&&(a=function(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var r=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;r>0;r-=3)e=","+i[r-2]+i[r-1]+i[r]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(a)),"currency"===d.type||d.type&&w()){w()&&"currency"!==d.type&&(f.pData=c(d.type+"pData",p),f.nData=c(d.type+"nData",p));var O=a;a=f.pData.nlead+O+f.pData.nend,(f.hasNegativePattern||w())&&(a+=";"+f.nData.nlead+O+f.nData.nend)}"percent"!==d.type||w()||(a+=" %")}else a=i.format.replace(/\'/g,'"');return Object.keys(x).length>0&&(a=r?a:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+c("numberMapper.numberSymbols.group",t)+i[1].replace(".",c("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",c("numberMapper.numberSymbols.decimal",t));return e}(a,x)),a},e.getWeekData=function(e,t){var i="sun",n=c("supplemental.weekData.firstDay",t),r=e;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),n&&(i=n[r]||"sun"),o[i]},e.replaceBlazorCurrency=function(e,t,i){var n=c(i||"",T);if(t!==n)for(var r=0,o=e;r<o.length;r++){var a=o[r];a.nend=a.nend.replace(t,n),a.nlead=a.nlead.replace(t,n)}},e.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var r=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((t=Math.floor((r+n-1)/7)+1)>52){var o=new Date(this.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((r+n-1)/7);return t}}(Z||(Z={}));var $=/^(.*?):[ \t]*([^\r\n]*)$/gm,Q=function(){function e(e,t,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"===typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!f(i)||i):"object"===typeof e&&(this.options=e,p(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}return e.prototype.send=function(e){var t=this;this.data=f(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise((function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},f(t.onLoad)||(t.httpRequest.onload=t.onLoad),f(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),f(t.onAbort)||(t.httpRequest.onabort=t.onAbort),f(t.onError)||(t.httpRequest.onerror=t.onError),f(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),f(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(f(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=$.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=$.exec(this.httpRequest.getAllResponseHeaders());return f(i=t[e.toLowerCase()])?null:i},e}(),J=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,ee=/msie|trident/i,te=/Trident\/7\./,ie=/(ipad|iphone|ipod touch)/i,ne=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,re=/android/i,oe=/trident|windows phone|edge/i,ae=/(version)[ \/]([\w.]+)/i,se={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!==typeof window&&(window.browserDetails=window.browserDetails||{});var le=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,r=Object.keys(se);n<r.length;n++){var o=r[n];if(i=e.userAgent.match(se[o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(te)){t.name="msie";break}var a=e.userAgent.match(ae);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,i){var n=window.browserDetails;return"undefined"===typeof n[t]?n[t]=i.test(e.userAgent):n[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return g(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",ee)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return g(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return g(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return g(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",J)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",ie)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",ne)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",re)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return g(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(g(window.cordova)&&g(window.PhoneGap)&&g(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",oe)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return g(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return g(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return g(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return g(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!==typeof navigator?navigator.userAgent:"",e}(),ce=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,r,o){var a,s=e.addOrGetEventData(t);a=o?function(e,t){var i;return function(){var n=this,r=arguments,o=function(){return i=null,e.apply(n,r)};clearTimeout(i),i=setTimeout(o,t)}}(n,o):n,r&&(a=a.bind(r));for(var l=i.split(" "),c=0;c<l.length;c++)s.push({name:l[c],listener:n,debounce:a}),le.isIE?t.addEventListener(l[c],a):t.addEventListener(l[c],a,{passive:!1});return a},e.remove=function(t,i,n){for(var r=e.addOrGetEventData(t),o=i.split(" "),a=function(e){var i,a=-1;r&&0!==r.length&&r.some((function(t,r){return t.name===o[e]&&t.listener===n&&(a=r,i=t.debounce,!0)})),-1!==a&&r.splice(a,1),i&&t.removeEventListener(o[e],i)},s=0;s<o.length;s++)a(s)},e.clearEvents=function(t){var i,n;n=u([],n,i=e.addOrGetEventData(t));for(var r=0;r<n.length;r++)t.removeEventListener(n[r].name,n[r].debounce),i.shift()},e.trigger=function(t,i,n){for(var r=0,o=e.addOrGetEventData(t);r<o.length;r++){var a=o[r];a.name===i&&a.debounce.call(this,n)}},e}(),he=new RegExp("\\n|\\r|\\s\\s+","g"),de=new RegExp(/'|"/g),pe=new RegExp("if ?\\("),ue=new RegExp("else if ?\\("),fe=new RegExp("else"),ge=new RegExp("for ?\\("),me=new RegExp("(/if|/for)"),ye=new RegExp("\\((.*)\\)",""),ve=new RegExp("^[0-9]+$","g"),be=new RegExp("[\\w\"'.\\s+]+","g"),we=new RegExp('"(.*?)"',"g"),xe=new RegExp("[\\w\"'@#$.\\s+]+","g"),Se=new RegExp("\\${([^}]*)}","g"),Ce=/^\..*/gm,Pe=/\\/gi,Oe=/\\\\/gi,Ee=new RegExp("[\\w\"'@#$.\\s+]+","g"),Te=/\window\./gm;function Ie(e,t){var i=function(e,t,i){var n=0,r=[],o=e.match(/class="([^\"]+|)\s{2}/g),a="";o&&o.forEach((function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}));return e.replace(he,"").replace(we,"'$1'").replace(Se,(function(e,o,a,s){var l=o.match(ye);if(l){var c=l[1];if(ue.test(o))o='";} '+o.replace(l[1],c.replace(be,(function(e){return ke(e=e.trim(),!de.test(e)&&-1===r.indexOf(e),t,r)})))+'{ \n str = str + "';else if(pe.test(o))o='"; '+o.replace(l[1],c.replace(xe,(function(e){return De(e,t,r)})))+'{ \n str = str + "';else if(ge.test(o)){var h=l[1].split(" of ");o='"; '+o.replace(l[1],(function(e){return r.push(h[0]),r.push(h[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+ke(h[1],!0,t,r)+".length; i"+n+"++"}))+"{ \n "+h[0]+"= "+ke(h[1],!0,t,r)+"[i"+n+"]; \n var "+h[0]+"Index=i"+n+'; \n str = str + "'}else{var d=o.split("("),p=i&&i.hasOwnProperty(d[0])?"this.":"global";p=/\./.test(d[0])?"":p;var u=l[1].split(",");0===l[1].length||/data/.test(u[0])||/window./.test(u[0])||(l[1]="global"===p?t+"."+l[1]:l[1]);if(Te.test(o)&&/\]\./gm.test(o)||/\@|\$|\#/gm.test(o)){/\@|\$|\#|\]\./gm.test(o)&&(o='"+ '+("global"===p?"":p)+o.replace(l[1],c.replace(Ee,(function(e){return De(e,t,r)})))+'+ "')}else o='" + '+("global"===p?"":p)+o.replace(c,ke(l[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==p,t,r))+'+"'}}else fe.test(o)?o='"; '+o.replace(fe,'} else { \n str = str + "'):o.match(me)?o=o.replace(me,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(o)?(o.match(Pe)&&(o=Me(o)),o='"+'+Ae(o,-1===r.indexOf(o),t,r)+'"]+"'):o=o.match(Pe)?'"+'+Ae(o=Me(o),-1===r.indexOf(o),t,r)+'"]+"':'"+'+ke(o.replace(/\,/gi,"+"+t+"."),-1===r.indexOf(o),t,r)+'+"';return o}))}(e,"data",t);return new Function("data",'var str="'+i+'"; return str;').bind(t)}function ke(e,t,i,n){return t&&!ve.test(e)&&-1===n.indexOf(e.split(".")[0])?i+"."+e:e}function Ae(e,t,i,n){return t&&!ve.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function Me(e){return e=e.match(Oe)?e:e.replace(Pe,"\\\\")}function De(e,t,i){e=e.trim();if(/\window\./gm.test(e))return e;var n=/'|"/gm;return/\@|\$|\#/gm.test(e)&&(e=Ae(e,-1===i.indexOf(e),t,i)+'"]'),Ce.test(e)?function(e,t,i,n){return!t||ve.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!n.test(e)&&-1===i.indexOf(e),t,i):ke(e,!n.test(e)&&-1===i.indexOf(e),t,i)}var Le=/^[\n\r.]+\<tr|^\<tr/,Re=/^[\n\r.]+\<svg|^\<path|^\<g/,je={};function Ne(){return"-"+Math.random().toString(36).substr(2,5)}function ze(e,t){var i=We.compile(e,t);return function(e,t,n,r,o,a){var s=i(e,t,n);if(w()&&!o){var l=r+Ne();if(je[r]||(je[r]=[]),f(a))e.BlazorTemplateId=l,je[r].push(e);else for(var c=0,h=Object.keys(je[r][a]);c<h.length;c++){var d=h[c];"BlazorTemplateId"!==d&&e[d]&&(je[r][a][d]=e[d]),"BlazorTemplateId"===d&&(l=je[r][a][d])}return"rowTemplate"===n?[rt("tr",{id:l,className:"e-blazor-template"})]:[rt("div",{id:l,className:"e-blazor-template"})]}return"string"===typeof s?Re.test(s)?rt("svg",{innerHTML:s}).childNodes:rt(Le.test(s)?"table":"div",{innerHTML:s}).childNodes:s}}function Be(e,t,i,n,r){if(w()){window.sfBlazor.updateTemplate(t,je[e],e,i,r),!1!==n&&(je[e]=[])}}function He(e,t,i){var n=document.getElementById(e);if(n)for(var r=n.getElementsByClassName("blazor-inner-template"),o=0;o<r.length;o++){var a=" ";a=f(i)?r[o].getAttribute("data-templateId"):r[i].getAttribute("data-templateId");var s=document.getElementById(a);if(s)for(var l=s.childNodes.length,c=0;c<l;c++)f(i)?r[o].appendChild(s.childNodes[0]):(r[i].appendChild(s.childNodes[0]),o=r.length)}}var _e,We={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),Ie(e,t)},e}())).compile},Fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ve=/(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,Ue=/^(\.|#)/,Ye={".":"className","#":"id"},Xe={className:"attributes.className",id:"attributes.id",tagName:"tagName"},Ge=["area","base","basefont","br","col","frame","hr","img","input","link","meta","param","embed","command","keygen","source","track","wbr"],qe=["a","address","article","applet","aside","audio","blockquote","button","canvas","center","dd","del","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","ins","isindex","li","map","menu","noframes","noscript","object","ol","output","p","pre","section","script","table","tbody","td","tfoot","th","thead","tr","ul","video"],Ze=["abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"],Ke=["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"],$e=["checked","compact","declare","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","readonly","selected"],Qe=["Script","style"],Je={tabindex:"tabIndex"},et=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,tt=/^<\/([-A-Za-z0-9_]+)[^>]*>/,it=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;!function(e){function t(e,t){t&&e&&e.forEach((function(e){return d(e)&&(e.parent&&i(e),e.parent=t),e}))}function i(e){var t=e.parent;if(t){var i=t.children.indexOf(e);-1!==i&&t.children.splice(i)}return t}function n(e,t){var i=e.match(Ue),n={};if(i){var r=Ye[i[0]];if("className"===r){var o=t.filter((function(e){return e.hasOwnProperty("className")}))[0],a=!1;o||(a=!0,o={});var s=o[r]||"";o[r]=s+"(?=.*?\\b{value}\\b)".replace("{value}",e.replace(".","")),a&&t.push(o)}else n[r]=e.replace(i[0],""),t.push(n)}else t.push({tagName:e})}function r(e,t,i,n){if(e.children){var o=e.children.filter((function(e){if("string"!==typeof e){for(var i=!0,n=0,r=t;n<r.length;n++){var o=r[n],a=Object.keys(o)[0],s=o[a],l=c(Xe[a],e);if("className"===a){if(!new RegExp("^"+s+".*$").test(l)){i=!1;break}}else if(l!==s){i=!1;break}}return i}return!1}));return n||o.length&&!i||e.children.forEach((function(e){d(e)&&(o=o.concat(r(e,t,i)))})),o}return[]}function o(e){for(var t,i=[],n=[],r=[];e;){t=!0;var o=a(n);if(o&&s(Qe,o))e=e.replace(new RegExp("([\\s\\S]*?)</"+a(r)+"[^>]*>"),(function(e,t){return u(t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2")),""})),p("",a(n));else{if(0===e.indexOf("</"))(l=e.match(tt))&&(e=e.substring(l[0].length),l[0].replace(tt,p)),t=!1;else if(0===e.indexOf("<")){var l;(l=e.match(et))&&(e=e.substring(l[0].length),l[0].replace(et,d)),t=!1}if(t){var c=e.indexOf("<"),h=c<0?e:e.substring(0,c);e=c<0?"":e.substring(c),u(h)}}e}function d(e,t,o){if(t=t.toLowerCase(),s(qe,t))for(;a(n)&&s(Ze,a(n));)p("",a(n));s(Ke,t)&&a(n)&&p("",t);var l=s(Ge,t);l||n.push(t);var c={};o.replace(it,(function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=i[2]?i[2]:i[3]?i[3]:i[4]?i[4]:s($e,t)?t:"";if("style"===t){for(var o=r.split(";"),a={},l=0,h=o.length;l<h;l++){var d=o[l],p=d.split(":");a[p[0]]=p[1]}r=a}c[t=Je[t]||t]=r})),c["data-id"]=Ne();var h={tagName:t,attributes:c};if(l){var d=r[0]||i;void 0===d.children&&(d.children=[]),h.parent=d,d.children.push(h)}else r.unshift(h)}function p(e,t){var o;if(t)for(o=n.length-1;o>=0&&n[o]!==t;o--);else o=0;if(o>=0){for(var a=r.length-1;a>=o;a--){var s=r.shift();if(0===r.length)i.push(s);else{var l=r[0];void 0===l.children&&(l.children=[]),s.parent=l,l.children.push(s)}}n.length=o}}function u(e){if(0===r.length)i.push(e);else{var t=r[0];void 0===t.children&&(t.children=[]),t.children.push(e)}}return i}function a(e){return e[e.length-1]}function s(e,t){return-1!==e.indexOf(t)}e.createElement=function(e,t){var i=[],n=u({},{},t,!0);if(!f(t)&&Object.keys(t).length&&(n.innerHTML&&(i=o(n.innerHTML),delete n.innerHTML),n.attrs&&(u(n,n.attrs),delete n.attrs),n.styles)){for(var r=n.styles.split(";"),a={},s=0,l=r.length;s<l;s++){var c=r[s].split(":");a[c[0]]=c[1]}delete n.styles,n.style=a}return{tagName:e,attributes:n||{},children:i}},e.assignParent=t,e.append=function(e,i){t(e,i),i.children?i.children=i.children.concat(e):i.children=[].concat(e)},e.prepend=function(e,i){if(t(e,i),i.children&&i.children.length)for(var n=e.length-1;n>=0;n--)i.children.unshift(e[n]);else i.children=[],i.children.concat(e)},e.detach=i,e.vDomSelector=function e(t){for(var i=t.ele,o=t.selector,a=t.selectAll,s=t.immediateParent,l=o.split(" "),c=i,h=0,d=l.length;h<d;h++){var p=!1,u=c,f=l[h],g=[];if(Fe.test(f))!0,n(f,g);else if(-1===f.indexOf(">"))for(var m=0,y=f.match(Ve);m<y.length;m++){n(y[m],g)}else if(-1!==f.indexOf(">")){p=!0;for(var v=i,b=void 0,w=0,x=0,S=f.split(">");x<S.length;x++){var C=S[x];if(!v)break;if(v.length){for(var P=[],O=0,E=v;O<E.length;O++){var T=E[O];P=P.concat(e({ele:T,selector:C,selectAll:a,immediateParent:!!w}))}b=P}else b=e({ele:v,selector:C,selectAll:a,immediateParent:!!w});w++,v=b}b&&(c=b)}if(!p)if(u.length){for(var I=[],k=0,A=u;k<A.length;k++){var M=A[k];I=I.concat(r(M,g,a,s))}c=I}else c=r(u,g,a,s)}return a?c:c[0]||null},e.accessElement=r,e.ConvertHTMLToJSon=o,e.cloneNode=function(e,t){return d(e)?t?u({},{},e,!0):{tagName:e.tagName,attributes:e.attributes}:e.cloneNode(t)},e.setStyleAttribute=function(e,t){e.attributes.style?e.attributes.style=u({},t):e.attributes.style=u(e.attributes.style,t)}}(_e||(_e={}));var nt=/^svg|^path|^g/;function rt(e,t){var i=nt.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"===typeof t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&ft(i,t.attrs)),i}function ot(e,t){for(var i=st(t),n=0,r=e;n<r.length;n++)for(var o=r[n],a=0,s=i;a<s.length;a++){var l=s[a];if(d(o)){var p=c("attributes.className",o);f(p)?h("attributes.className",l,o):new RegExp("\\b"+l+"\\b","i").test(p)||h("attributes.className",p+" "+l,o)}else o.classList.contains(l)||o.classList.add(l)}return e}function at(e,t){for(var i=st(t),n=0,r=e;n<r.length;n++){var o=r[n],a=d(o);if(a?c("attributes.className",o):""!==o.className)for(var s=0,l=i;s<l.length;s++){var p=l[s];if(a){var u=c("attributes.className",o).split(" "),f=u.indexOf(p);-1!==f&&u.splice(f,1),h("attributes.className",u.join(" "),o)}else o.classList.remove(p)}}return e}function st(e){var t=[];return"string"===typeof e?t.push(e):t=e,t}function lt(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function ct(e,t,i){if(d(t))_e.prepend(e,t);else{for(var n=document.createDocumentFragment(),r=0,o=e;r<o.length;r++){var a=o[r];n.appendChild(a)}t.insertBefore(n,t.firstElementChild),i&&dt(t)}return e}function ht(e,t,i){if(d(t))_e.append(e,t);else{for(var n=document.createDocumentFragment(),r=0,o=e;r<o.length;r++){var a=o[r];n.appendChild(a)}t.appendChild(n),i&&dt(t)}return e}function dt(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),pt(t)}))}function pt(e){return d(e)?_e.detach(e):e.parentNode.removeChild(e)}function ut(e){if(d(e))_e.detach(e);else{var t=e.parentNode;ce.clearEvents(e),t.removeChild(e)}}function ft(e,t){for(var i=e,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if(d(i)){var a=o;"tabindex"===o&&(a="tabIndex"),i.attributes[a]=t[o]}else i.setAttribute(o,t[o])}return i}function gt(e,t,i){return void 0===t&&(t=document),d(t)&&i?_e.vDomSelector({ele:t,selector:e,selectAll:!1}):t.querySelector(e)}function mt(e,t,i){return void 0===t&&(t=document),d(t)&&!i?_e.vDomSelector({ele:t,selector:e,selectAll:!0}):t.querySelectorAll(e)}function yt(e,t){var i=e;if("function"===typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(wt(i,t))return i;i=i.parentNode}return null}function vt(e,t){void 0!==t&&(d(e)?_e.setStyleAttribute(e,t):Object.keys(t).forEach((function(i){e.style[i]=t[i]})))}function bt(e,t,i){ot([e],t),at([e],i)}function wt(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var xt=new RegExp("]"),St=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new V(this),g(t)||(this.element="string"===typeof t?document.querySelector(t):t,f(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),g(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,p(this,e),!0!==t?(p(this.changedProperties,e),this.dataBind()):w()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(t[r]instanceof Array)for(var o=0,a=t[r];o<a.length;o++){var s=a[o];void 0!==s.dataBind&&s.dataBind()}else t[r].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(w()&&(e=e||{},u(this.bulkChanges,{},e,!0),this.allowServerDataBinding)){window.sfBlazor.updateModel(this),this.bulkChanges={}}},e.prototype.saveChanges=function(e,t,i){if(w()){var n={};n[e]=t,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),r=function(i){i.source===window&&"string"===typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",r),e=r=n=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,n){var r=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(e,t,i,n);if(xt.test(e)){var s=c(e,this);if(s){if(window.Blazor){var l=s.call(this,t);l&&"function"===typeof l.then?i?l.then((function(e){i&&(e="string"===typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,i.call(r,e))})).catch((function(e){n&&(e="string"===typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,n.call(r,e))})):a=l:i&&i.call(this,t)}else s.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=o,a}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();ot([this.element],["e-lib",e]),f(this.element.ej2_instances)?h("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),at([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&at([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function Ct(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[t]=l(n,[e,t,i])),e.properties[t]}function Pt(e,t,i,n,r,o){for(var a=[],s=i?i.length:0,c=0;c<s;c++){var h=n;if(o&&(h=n(i[c],e)),r){var d=l(h,[e,t,{},!0]);d.setProperties(i[c],!0),a.push(d)}else a.push(l(h,[e,t,i[c],!1]))}return a}function Ot(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function Et(e,t){return function(i){if(this.properties[t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[t]=i}}}function Tt(e,t,i){return function(){return Ct(this,t,e,i)}}function It(e,t,i){return function(n){Ct(this,t,e,i).setProperties(n)}}function kt(e,t,i){return function(){var n=i({});return this.properties.hasOwnProperty(t)?this.properties[t]:Ct(this,t,e,n)}}function At(e,t,i){return function(n){var r=i(n,this);Ct(this,t,e,r).setProperties(n)}}function Mt(e,t,i){return function(){var n=this;if(!this.properties.hasOwnProperty(t)){var r=Pt(this,t,e,i,!1);this.properties[t]=r}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||o||["push","pop"].forEach((function(e){var r={value:jt(e,t,i,n.properties[t]).bind(n),configurable:!0};Object.defineProperty(n.properties[t],e,r)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function Dt(e,t,i){return function(n){this.isComplexArraySetter=!0;var r=Pt(this,t,e,i,!1),o=Pt(this,t,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,r),this.properties[t]=o}}function Lt(e,t,i){return function(n){var r=this.properties.hasOwnProperty(t)?this.properties[t]:e,o=Pt(this,t,n,i,!0,!0);this.saveChanges(t,o,r),this.properties[t]=o}}function Rt(e,t,i){return function(){var n=i({});if(!this.properties.hasOwnProperty(t)){var r=Pt(this,t,e,n,!1);this.properties[t]=r}return this.properties[t]}}function jt(e,t,i,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var a=0;a<i.length;a++){Array.prototype[e].apply(n,[i[a]]);var s=Nt(o+(n.length-1),i[a],!this.controlParent,e);this.serverDataBind(s,i[a],!1,e)}break;case"pop":Array.prototype[e].apply(n);var l=Nt(o+n.length,null,!this.controlParent,e);this.serverDataBind(l,{ejsAction:"pop"},!1,e)}return n}}function Nt(e,t,i,n){var r=e;if(i&&((r={})[e]=t,t&&"object"===typeof t)){r[e].ejsAction=n}return r}function zt(e){return function(t,i){var n={set:Et(e,i),get:Ot(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Ut(t,i,"prop",e)}}function Bt(e,t){return function(i,n){var r={set:It(e,n,t),get:Tt(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),Ut(i,n,"complexProp",e,t)}}function Ht(e){return function(t,i){var n={set:At({},i,e),get:kt({},i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Ut(t,i,"complexProp",{},e)}}function _t(e,t){return function(i,n){var r={set:Dt(e,n,t),get:Mt(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),Ut(i,n,"colProp",e,t)}}function Wt(e){return function(t,i){var n={set:Lt([],i,e),get:Rt([],i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Ut(t,i,"colProp",{},e)}}function Ft(){return function(e,t){var i={set:function(e){var i=this.properties[t];if(i!==e){var n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var n=c("propName",t);return n&&(i=n+"-"+i),e(c("parentObj",t),i)}(this,t);!1===g(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[t]=e}},get:Ot(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),Ut(e,t,"event")}}function Vt(e){}function Ut(e,t,i,n,r){g(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:r}),e.propList[i+"Names"].push(t)}var Yt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Gt=function(e){function t(t){var i=e.call(this,t,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return Yt(t,e),i=t,t.prototype.animate=function(e,t){t=t||{};var n=this.getModel(t);if("string"===typeof e)for(var r=0,o=Array.prototype.slice.call(mt(e,document));r<o.length;r++){var a=o[r];n.element=a,i.delayAnimation(n)}else n.element=e,i.delayAnimation(n)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){e.delay?setTimeout((function(){i.applyAnimation(e)}),e.delay):i.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,r=0,o=e.duration;e.element.setAttribute("e-animate","true");!function a(s){try{if(s){r=0===r?s:r,e.timeStamp=s+e.timeStamp-r,r=s,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(a)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else performance.now(),n=requestAnimationFrame(a),e.element.setAttribute("e-animation-id",n.toString())}catch(c){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,c)}}()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},Xt([zt("FadeIn")],t.prototype,"name",void 0),Xt([zt(400)],t.prototype,"duration",void 0),Xt([zt("ease")],t.prototype,"timingFunction",void 0),Xt([zt(0)],t.prototype,"delay",void 0),Xt([Ft()],t.prototype,"progress",void 0),Xt([Ft()],t.prototype,"begin",void 0),Xt([Ft()],t.prototype,"end",void 0),Xt([Ft()],t.prototype,"fail",void 0),t=i=Xt([Vt],t)}(St);function qt(e,t,i){var n=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===n.rippleFlag||void 0===n.rippleFlag&&!Jt?Function:(e.setAttribute("data-ripple","true"),ce.add(e,"mousedown",Zt,{parent:e,rippleOptions:n}),ce.add(e,"mouseup",Kt,{parent:e,rippleOptions:n,done:i}),ce.add(e,"mouseleave",$t,{parent:e,rippleOptions:n}),le.isPointer&&ce.add(e,"transitionend",$t,{parent:e,rippleOptions:n}),function(){e.removeAttribute("data-ripple"),ce.remove(e,"mousedown",Zt),ce.remove(e,"mouseup",Kt),ce.remove(e,"mouseleave",$t),ce.remove(e,"transitionend",$t)})}function Zt(e){var t=e.target,i=this.rippleOptions.selector,n=i?yt(t,i):t;if(!(!n||this.rippleOptions&&yt(t,this.rippleOptions.ignore))){var r=n.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,a=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),s=Math.max(Math.abs(o-r.left),Math.abs(o-r.right)),l=Math.max(Math.abs(a-r.top),Math.abs(a-r.bottom)),c=Math.sqrt(s*s+l*l),h=2*c+"px",d=o-r.left-c,p=a-r.top-c;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,p=0,h="100%"),n.classList.add("e-ripple");var u=rt("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+d+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&ce.add(n,"mouseleave",$t,{parent:this.parent,rippleOptions:this.rippleOptions})}}function Kt(e){Qt(e,this)}function $t(e){Qt(e,this)}function Qt(e,t){var i=t.rippleOptions.duration,n=e.target,r=t.rippleOptions.selector,o=r?yt(n,r):n;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var a=mt(".e-ripple-element",o),s=a[a.length-1];s&&(s.style.opacity="0.5"),t.parent!==o&&ce.remove(o,"mouseleave",$t),setTimeout((function(){s&&s.parentNode&&s.parentNode.removeChild(s),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)}),i)}}var Jt=!1;var ei,ti=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var r=e[n],o=0,a=t;o<a.length;o++){var s=a[o],c=r.member;if(s.prototype.getModuleName()===r.member&&!this.isModuleLoaded(c)){var d=l(s,r.args),p=this.getMemberName(c);r.isProperty?h(p,s,this.parent):h(p,d,this.parent);var u=r;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||c(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t,i,n=this,r=e.map((function(e){return n.getMemberName(e.member)})),o=0,a=this.loadedModules.filter((function(e){return-1===r.indexOf(e.member)}));o<a.length;o++){var s=a[o];s.isProperty||c(s.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(s),1),t=this.parent,i=s.member,delete t[i]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),ii=function(){function e(e,t,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=c("callChildDataBind",St),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=n,this.setProperties(i,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(p(this,e),this.updateChange(!1,this.propName),this.clearChanges()):p(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(h(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),h(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,i,n){if(w()&&!this.parentObj.isComplexArraySetter){var r,o={},a=i?this.getParentKey(!0)+"."+e:e;if(-1!==a.indexOf(".")){var s=a.split(".");r=o;for(var l=0;l<s.length;l++){var c=l===s.length-1;r[s[l]]=c?t:{},r=c?r:r[s[l]]}}else o[a]={},r=o[a],o[a][e]=t;if(this.isParentArray){r.ejsAction=n||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,i+=t=-1!==t?"-"+t:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},e}(),ni=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ri=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},oi=0,ai=0,si=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.randomId=function(){if("undefined"!==typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,f(n.enableRtl)&&n.setProperties({enableRtl:Y},!0),f(n.locale)&&n.setProperties({locale:G},!0),n.moduleLoader=new ti(n),n.localObserver=new V(n),U.on("notifyExternalChange",n.detectFunction,n,n.randomId),g(i)||n.appendTo(),n}return ni(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(at([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),U.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new V(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.appendTo=function(t){if(f(t)||"string"!==typeof t?f(t)||(this.element=t):this.element=document.querySelector(t),!f(this.element)){var i="e-"+this.getModuleName().toLowerCase();ot([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=c("ej2_instances",this.element);n&&-1!==n.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){if(w()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,i){if("string"===typeof e)this.localObserver.on(e,t,i);else for(var n=0,r=e;n<r.length;n++){var o=r[n];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"===typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var r=n[i];this.localObserver.off(r.event,r.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[i])&&this.prototype.injectedModules.push(e[i])},t.prototype.createElement=function(e,t,i){return i&&this.isReactHybrid?(t&&(t={}),t["data-id"]=Ne(),_e.createElement(e,t)):rt(e,t)},t.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);f(e)||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(oi=0),ei=this.pageID(location.href),ai=history.length,e+"_"+ei+"_"+oi++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return ei!==this.pageID(location.href)||ai!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,r=e;n<r.length;n++){var o,a=r[n];g(o=c(a,this))||h(a,this.getActualProperties(o),i)}return JSON.stringify(i,(function(e,i){return t.getActualProperties(i)}))},t.prototype.getActualProperties=function(e){return e instanceof ii?c("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var i={},n=function(n){if(-1===t.indexOf(n)){var o=e[n];if("object"!==typeof o||o instanceof Array)i[n]=o;else{var a=t.filter((function(e){return new RegExp(n+".").test(e)})).map((function(e){return e.replace(n+".","")}));i[n]=r.iterateJsonProperties(r.getActualProperties(o),a)}}},r=this,o=0,a=Object.keys(e);o<a.length;o++){n(a[o])}return i},ri([zt(!1)],t.prototype,"enablePersistence",void 0),ri([zt()],t.prototype,"enableRtl",void 0),ri([zt()],t.prototype,"locale",void 0),t=ri([Vt],t)}(St);"undefined"!==typeof window&&window.addEventListener("popstate",(function(){oi=0}));var li=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ci=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},hi={left:0,top:0,bottom:0,right:0},di={isDragged:!1},pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return li(t,e),ci([zt(0)],t.prototype,"left",void 0),ci([zt(0)],t.prototype,"top",void 0),t}(ii),ui=function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.dragLimit=i.getDefaultPosition(),r.borderWidth=i.getDefaultPosition(),r.padding=i.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}var i;return li(t,e),i=t,t.prototype.bind=function(){this.toggleEvents(),le.isIE&&ot([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return u({},hi)},t.prototype.toggleEvents=function(e){var t;g(this.handle)||(t=gt(this.handle,this.element));var i=this.enableTapHold&&le.isDevice&&le.isTouch?this.mobileInitialize:this.initialize;e?ce.remove(t||this.element,le.touchStartEvent,i):ce.add(t||this.element,le.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)}),this.tapHoldThreshold),ce.add(document,le.touchMoveEvent,this.removeTapholdTimer,this),ce.add(document,le.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),ce.remove(document,le.touchMoveEvent,this.removeTapholdTimer),ce.remove(document,le.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return f(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY):this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),f(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"===typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!f(yt(e.target,i[n])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!g(e.changedTouches)&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var r=this.getCoordinates(e);if(this.initialPosition={x:r.pageX,y:r.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=r.pageX-(o.left+this.parentScrollX),this.relativeYPosition=r.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(ce.add(document,le.touchMoveEvent,this.intDragStart,this),ce.add(document,le.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,ce.trigger(document.documentElement,le.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!g(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var i,n=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var a=yt(e.target,this.dragTarget);f(a)||(o=a)}this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);var s=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(s*s+l*l)>=this.distance||this.externalInitialize){var c=this.getHelperElement(e);if(!c||f(c))return;var h=this.helperElement=c;if(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart){var d={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:w()?this.bindDragEvents.bind(this):null,dragElement:h};this.trigger("dragStart",d)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var p=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragElePosition={top:i.top,left:i.left},vt(h,this.getDragPosition({position:"absolute",left:p.left,top:p.top})),ce.remove(document,le.touchMoveEvent,this.intDragStart),ce.remove(document,le.touchEndEvent,this.intDestroy),w()||this.bindDragEvents(h)}}},t.prototype.bindDragEvents=function(e){lt(e)?(ce.add(document,le.touchMoveEvent,this.intDrag,this),ce.add(document,le.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(f(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(g(e.changedTouches)||1===e.changedTouches.length){var t,i;this.position=this.getMousePosition(e,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var a=this.checkTargetElement(e);if(a.target&&a.instance){var s=!0;this.hoverObject&&(this.hoverObject.instance!==a.instance?this.triggerOutFunction(e,a):s=!1),s&&(a.instance.dragData[this.scope]=this.droppables[this.scope],a.instance.intOver(e,a.target),this.hoverObject=a)}else this.hoverObject&&this.triggerOutFunction(e,a);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var c=this.parentClientRect.left,h=this.parentClientRect.top,d=this.getCoordinates(e),p=d.pageX,u=d.pageY,m=this.position.left-this.diffX,y=this.position.top-this.diffY;if(this.dragArea){var v=getComputedStyle(l);if(this.pageX!==p||this.skipDistanceCheck){var b=l.offsetWidth+(parseFloat(v.marginLeft)+parseFloat(v.marginRight));t=this.dragLimit.left>m&&m>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<m+b&&m>0?m-(m-this.dragLimit.right)+window.pageXOffset-b:m<0?this.dragLimit.left:m}if(this.pageY!==u||this.skipDistanceCheck){var w=l.offsetHeight+(parseFloat(v.marginTop)+parseFloat(v.marginBottom));i=this.dragLimit.top>y&&y>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<y+w&&y>0?y-(y-this.dragLimit.bottom)+window.pageYOffset-w:y<0?this.dragLimit.top:y}}else t=m,i=y;var x,S,C=h+this.borderWidth.top,P=c+this.borderWidth.left;this.dragProcessStarted&&(f(i)&&(i=this.prevTop),f(t)&&(t=this.prevLeft)),this.dragArea?(x=i-C<0?this.dragLimit.top:i-C,S=t-P<0?this.dragElePosition.left:t-P):(x=i-C,S=t-P);var O=this.getProcessedPositionValue({top:x+"px",left:S+"px"});vt(l,this.getDragPosition(O)),!this.elementInViewport(l)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=p,this.pageY=u}},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=u({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,g(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),ce.remove(document,le.touchMoveEvent,this.intDragStart),ce.remove(document,le.touchEndEvent,this.intDragStop),ce.remove(document,le.touchEndEvent,this.intDestroy),ce.remove(document,le.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(di.isDragged=!di.isDragged),di.isDragged},t.prototype.setDragArea=function(){var e,t,i,n=0,r=0;if(i="string"===typeof this.dragArea?gt(this.dragArea):this.dragArea){var o=i.getBoundingClientRect();e=i.scrollWidth?i.scrollWidth:o.right-o.left,t=i.scrollHeight?i.scrollHeight:o.bottom-o.top;for(var a=["Top","Left","Bottom","Right"],s=getComputedStyle(i),l=0;l<a.length;l++){var c=a[l],h=s["border"+c+"Width"],d=s["padding"+c],p=c.toLowerCase();this.borderWidth[p]=isNaN(parseFloat(h))?0:parseFloat(h),this.padding[p]=isNaN(parseFloat(d))?0:parseFloat(d)}n=o.top,r=o.left,this.dragLimit.left=r+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"";return y(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t},t.prototype.getMousePosition=function(e,t){var i,n,r=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),a=f(r.offsetParent);return t?(i=this.clone?o.pageX:o.pageX+(a?0:r.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+(a?0:r.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=rt("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!f(t.parentNode)){var n=yt(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,r=i;n<r.length;n++){var o=r[n];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},ci([Bt({},pi)],t.prototype,"cursorAt",void 0),ci([zt(!0)],t.prototype,"clone",void 0),ci([zt()],t.prototype,"dragArea",void 0),ci([zt()],t.prototype,"isDragScroll",void 0),ci([Ft()],t.prototype,"drag",void 0),ci([Ft()],t.prototype,"dragStart",void 0),ci([Ft()],t.prototype,"dragStop",void 0),ci([zt(1)],t.prototype,"distance",void 0),ci([zt()],t.prototype,"handle",void 0),ci([zt()],t.prototype,"abort",void 0),ci([zt()],t.prototype,"helper",void 0),ci([zt("default")],t.prototype,"scope",void 0),ci([zt("")],t.prototype,"dragTarget",void 0),ci([zt()],t.prototype,"axis",void 0),ci([zt()],t.prototype,"queryPositionInfo",void 0),ci([zt(!1)],t.prototype,"enableTailMode",void 0),ci([zt(!1)],t.prototype,"skipDistanceCheck",void 0),ci([zt(!0)],t.prototype,"preventDefault",void 0),ci([zt(!1)],t.prototype,"enableAutoScroll",void 0),ci([zt(!1)],t.prototype,"enableTapHold",void 0),ci([zt(750)],t.prototype,"tapHoldThreshold",void 0),t=i=ci([Vt],t)}(St),fi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gi=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},mi=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return fi(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){ce.add(this.element,le.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,r=this.dragData[this.scope],o=!!r&&(r.helper&&lt(r.helper));o&&(i=this.isDropArea(e,r.helper,t),this.accept&&(n=wt(r.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},r="touchend"===e.type;if(r||n.target===t){t.style.display="none";var o=r?e.changedTouches[0]:e,a=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=y(a,this.element),n.canDrop&&(n.target=a),t.style.display=""}return n},t.prototype.destroy=function(){ce.remove(this.element,le.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},gi([zt()],t.prototype,"accept",void 0),gi([zt("default")],t.prototype,"scope",void 0),gi([Ft()],t.prototype,"drop",void 0),gi([Ft()],t.prototype,"over",void 0),gi([Ft()],t.prototype,"out",void 0),t=gi([Vt],t)}(St),yi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vi=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},bi={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},wi=function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,o=e.shiftKey,a=e.which,s=0,l=Object.keys(r.keyConfigs);s<l.length;s++)for(var c=l[s],h=0,d=r.keyConfigs[c].split(",");h<d.length;h++){var p=d[h],u=i.getKeyConfigData(p.trim());t===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&a===u.keyCode&&(e.action=c,r.keyAction&&r.keyAction(e))}},r.bind(),r}var i;return yi(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=n,n},t.getKeyCode=function(e){return bi[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},vi([zt({})],t.prototype,"keyConfigs",void 0),vi([zt("keyup")],t.prototype,"eventName",void 0),vi([Ft()],t.prototype,"keyAction",void 0),t=i=vi([Vt],t)}(St),xi=function(){function e(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||G)}return e.prototype.setLocale=function(t){var i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings},e.load=function(e){this.locale=u(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return f(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]},e.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},e.locale={},e}(),Si=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ci=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Si(t,e),Ci([zt(50)],t.prototype,"swipeThresholdDistance",void 0),t}(ii),Oi=/(Up|Down)/,Ei=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=n.updateChangeTouches(e);void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout((function(){n.tapHoldEvent(e)}),n.tapHoldThreshold),ce.add(n.element,le.touchMoveEvent,n.moveEvent,n),ce.add(n.element,le.touchEndEvent,n.endEvent,n),ce.add(n.element,le.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=n.updateChangeTouches(e);n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=u(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),ce.remove(n.element,le.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"===typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout((function(){n.tapCount=0}),n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=n.updateChangeTouches(e),i=t.clientX-n.startPoint.clientX,r=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),r=Math.floor(r<0?-1*r:i),n.isTouchMoved=i>1||r>1,n.endPoint=t,n.calcPoints(e);var o={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var a=void 0,s=n.swipeSettings.swipeThresholdDistance;a=u(a,n.defaultArgs,o);var l=!1,c=n.element,h=n.isScrollable(c),d=Oi.test(n.movedDirection);(s<n.distanceX&&!d||s<n.distanceY&&d)&&(l=!h||n.checkSwipe(c,d)),l&&n.trigger("swipe",a)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout((function(){n.touchAction=!0}),"function"!==typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),ce.remove(n.element,le.touchMoveEvent,n.moveEvent),ce.remove(n.element,le.touchEndEvent,n.endEvent),ce.remove(n.element,le.touchCancelEvent,n.cancelEvent)},n.bind(),n}return Si(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),le.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){ce.add(this.element,le.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){ce.remove(this.element,le.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,ce.remove(this.element,le.touchMoveEvent,this.moveEvent),ce.remove(this.element,le.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),ce.remove(this.element,le.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),r=t-this.startPoint.clientX,o=i-this.startPoint.clientX,a=n-this.tStampStart;return Math.sqrt(r*r+o*o)/a},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Ci([Ft()],t.prototype,"tap",void 0),Ci([Ft()],t.prototype,"tapHold",void 0),Ci([Ft()],t.prototype,"swipe",void 0),Ci([Ft()],t.prototype,"scroll",void 0),Ci([zt(350)],t.prototype,"tapThreshold",void 0),Ci([zt(750)],t.prototype,"tapHoldThreshold",void 0),Ci([Bt({},Pi)],t.prototype,"swipeSettings",void 0),t=Ci([Vt],t)}(St),Ti=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Ii=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],ki=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],Ai=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:Ti,attributes:Ii}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[t].attributes,n=0;n<i.length;n++)this.wrapElement.children[t].removeAttribute(i[n].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){pt(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+ki.join("],[")+"]");e.length>0&&e.forEach((function(e){ki.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,i){var n=e.wrapElement.querySelectorAll(t.selector);n.length>0&&n.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}(),Mi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Di=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],Li=["accordion","tab","splitter"],Ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attrKeys=[],t.cachedTimeOut=0,t.isAppendCalled=!1,t.initRenderCalled=!1,t.isReact=!0,t}return Mi(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.isReact=!0;var e=Object.keys(this.props);this.htmlattributes={},this.attrKeys=Di.concat(this.controlAttributes||[]);for(var t=0,i=e;t<i.length;t++){var n=i[t];-1===n.indexOf("data-")&&-1===n.indexOf("aria-")&&-1===this.attrKeys.indexOf(n)||(this.htmlattributes[n]=this.props[n])}},t.prototype.componentDidMount=function(){var e=this;this.refreshChild(!0),this.canDelayUpdate=-1!==Li.indexOf(this.getModuleName()),this.props.immediateRender?this.renderReactComponent():this.cachedTimeOut=setTimeout((function(){e.renderReactComponent()}))},t.prototype.renderReactComponent=function(){var e=r.findDOMNode(this);e&&(this.isAppendCalled=!0,this.appendTo(e))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.initRenderCalled?(this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(r.findDOMNode(this))),this.updateProperties(e)):this.updateProperties(e,!0)},t.prototype.updateProperties=function(e,t){for(var i=this,n=u({},e),r=0,o=Object.keys(e);r<o.length;r++){var a=o[r],s="className"===a;s||f(this.htmlattributes[a])||this.htmlattributes[a]===n[a]||(this.htmlattributes[a]=n[a]),this.props[a]===e[a]?delete n[a]:-1!==this.attrKeys.indexOf(a)&&(s?(this.element.classList.remove(this.props[a]),this.element.classList.add(n[a])):"disabled"!==a&&delete n[a])}n.children&&delete n.children,this.initRenderCalled&&(this.canDelayUpdate||this.props.delayUpdate)?setTimeout((function(){i.refreshProperties(n,e,t)})):this.refreshProperties(n,e,t)},t.prototype.refreshProperties=function(e,t,i){Object.keys(e).length&&(i||this.processComplexTemplate(e,this),this.setProperties(e,i)),this.refreshChild(i,t)},t.prototype.processComplexTemplate=function(e,t){var i=t.complexTemplate;if(i)for(var n in i){var r=i[n];e[n]&&h(r,c(n,e),e)}},t.prototype.getDefaultAttributes=function(){return this.htmlattributes},t.prototype.trigger=function(e,t,i){if(!0!==this.isDestroyed){"change"!==e&&"input"!==e||this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var n=this.isProtectedOnChange;this.isProtectedOnChange=!1,this.modelObserver.notify(e,t,i),this.isProtectedOnChange=n}},t.prototype.compareValues=function(e,t){var i=typeof e;if(i===typeof t){if(e.constructor!==t.constructor)return!1;if(e===t)return!0;if(e instanceof Date||e instanceof RegExp||e instanceof String||e instanceof Number||"function"===i)return e.tostring===t.tostring;if(d(e)||Array.isArray(e)){var n=e,r=t;return d(n)&&(n=[e],r=[t]),this.compareObjects(n,r).status}}return!1},t.prototype.compareObjects=function(e,t,i){var n,r=[];if(e.length===t.length)for(var o=0,a=t.length;o<a;o++){for(var s={},l=e[o],c=t[o],h=0,d=Object.keys(c);h<d.length;h++){var p=d[h],u=l[p],f=c[p];if(!l.hasOwnProperty(p)||!this.compareValues(f,u)){if(!i)return{status:!1};n=!1,s[p]=f}}Object.keys(s).length&&r.push({index:o,value:s,key:i})}else n=!1;return{status:n,changedProperties:r}},t.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var i=this.getInjectedModules()||[],n=0,r=this.getInjectedServices()||[];n<r.length;n++){var o=r[n];-1===i.indexOf(o)&&i.push(o)}this.injectedModules=i}if(this.directivekeys){var a=[],s=this.validateChildren({},this.directivekeys,t||this.props);if(s&&Object.keys(s).length){if(!e&&this.skipRefresh)for(var l=0,h=this.skipRefresh;l<h.length;l++){delete s[h[l]]}if(this.prevProperties)for(var d=Object.keys(this.prevProperties),p=0;p<d.length;p++){var f=d[p];if(s.hasOwnProperty(f)){var g=this.compareObjects(this.prevProperties[f],s[f],f);if(g.status)delete s[f];else{g.changedProperties.length&&(a=a.concat(g.changedProperties));var m={};m[f]=s[f],this.prevProperties=u(this.prevProperties,m)}}}else this.prevProperties=u({},s,{},!0);if(a.length)for(var y=0,v=a;y<v.length;y++){var b=v[y],w=c(b.key+"."+b.index,this);w&&w.setProperties?w.setProperties(b.value):u(w,b.value)}else this.setProperties(s,e)}}},t.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut),this.initRenderCalled&&this.destroy()},t.prototype.validateChildren=function(e,t,i){for(var r=!1,o=0,a=n.Children.toArray(i.children);o<a.length;o++){var s=a[o],l=this.getChildType(s),c=t[l];if(l&&t){var h=this.getChildProps(n.Children.toArray(s.props.children),c);h.length&&(r=!0,e[s.type.propertyName||l]=h)}}return r?e:null},t.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},t.prototype.getChildProps=function(e,t){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n],a=!1,s=void 0;"string"===typeof t?(a=!0,s=t):s=Object.keys(t)[0];var l=o.props;if(this.getChildType(o)===s)if(a||!l.children){var c=u({},l,{},!0);this.processComplexTemplate(c,o.type),i.push(c)}else{var h=this.validateChildren(u({},l),t[s],l)||l;h.children&&delete h.children,this.processComplexTemplate(h,o.type),i.push(h)}}return i},t.prototype.getInjectedServices=function(){for(var e=0,t=n.Children.toArray(this.props.children);e<t.length;e++){var i=t[e];if(i.type.isService)return i.props.services}return[]},t}(n.PureComponent),ji=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attrKeys=[],t.cachedTimeOut=0,t.isAppendCalled=!1,t.isReact=!0,t}ji(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.isReact=!0},t.prototype.generateReactElements=function(e){var t=e.children;if(t&&t.length){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r];"string"===typeof a?i.push(a):a.tagName?i.push(this.generateReactElements(a)):a.template&&i.push(n.createElement(a.template,a.data||{}))}return n.createElement(e.tagName,e.attributes,i)}return n.createElement(e.tagName,e.attributes)},t.prototype.componentDidMount=function(){this.mount&&this.mount()},t.prototype.componentDidUpdate=function(){this.currentContext(this.currentContext.calls,this.currentContext.args)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this;this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(r.findDOMNode(this)));for(var i=u({},e),n=0,o=Object.keys(e);n<o.length;n++){var a=o[n],s="className"===a;s||f(this.htmlattributes[a])||this.htmlattributes[a]===i[a]||(this.htmlattributes[a]=i[a]),this.props[a]===e[a]?delete i[a]:-1!==this.attrKeys.indexOf(a)&&(s?(this.element.classList.remove(this.props[a]),this.element.classList.add(i[a])):"disabled"!==a&&delete i[a])}i.children&&delete i.children,this.canDelayUpdate||this.props.delayUpdate?setTimeout((function(){t.refreshProperties(i,e)})):this.refreshProperties(i,e)},t.prototype.refreshProperties=function(e,t){Object.keys(e).length&&(this.processComplexTemplate(e,this),this.setProperties(e)),this.refreshChild(!1,t)},t.prototype.processComplexTemplate=function(e,t){var i=t.complexTemplate;if(i)for(var n in i){var r=i[n];e[n]&&h(r,c(n,e),e)}},t.prototype.trigger=function(e,t,i){if(!0!==this.isDestroyed){"change"!==e&&"input"!==e||this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var n=this.isProtectedOnChange;this.isProtectedOnChange=!1,this.modelObserver.notify(e,t,i),this.isProtectedOnChange=n}},t.prototype.compareObjects=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var i=this.getInjectedModules()||[],n=0,r=this.getInjectedServices()||[];n<r.length;n++){var o=r[n];-1===i.indexOf(o)&&i.push(o)}this.injectedModules=i}if(this.directivekeys){var a=this.validateChildren({},this.directivekeys,t||this.props);if(a){if(!e&&this.skipRefresh)for(var s=0,l=this.skipRefresh;s<l.length;s++){delete a[l[s]]}if(this.prevProperties)for(var c=Object.keys(this.prevProperties),h=0;h<c.length;h++){var d=c[h];if(this.compareObjects(this.prevProperties[d],a[d]))delete a[d];else{var p={};p[d]=a[d],this.prevProperties=u(this.prevProperties,p)}}else this.prevProperties=u({},a,{},!0);this.setProperties(a,e)}}},t.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut),this.destroy()},t.prototype.validateChildren=function(e,t,i){for(var r=!1,o=0,a=n.Children.toArray(i.children);o<a.length;o++){var s=a[o],l=this.getChildType(s),c=t[l];if(l&&t){var h=this.getChildProps(n.Children.toArray(s.props.children),c);h.length&&(r=!0,e[s.type.propertyName||l]=h)}}return r?e:null},t.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},t.prototype.getChildProps=function(e,t){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n],a=!1,s=void 0;"string"===typeof t?(a=!0,s=t):s=Object.keys(t)[0];var l=o.props;if(this.getChildType(o)===s)if(a||!l.children){var c=u({},l,{},!0);this.processComplexTemplate(c,o.type),i.push(c)}else{var h=this.validateChildren(u({},l),t[s],l)||l;h.children&&delete h.children,this.processComplexTemplate(h,o.type),i.push(h)}}return i},t.prototype.getInjectedServices=function(){for(var e=0,t=n.Children.toArray(this.props.children);e<t.length;e++){var i=t[e];if(i.type.isService)return i.props.services}return[]}}(n.PureComponent);function Ni(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(i){e.prototype[i]=t.prototype[i]}))}))}var zi,Bi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bi(t,e),t.prototype.render=function(){return null},t.isDirective=!0,t}(n.PureComponent),_i=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}_i(t,e),t.prototype.render=function(){return null},t.isService=!0}(n.PureComponent),We.compile);zi={compile:function(e,t){return"string"===typeof e?Wi(e,t):function(t,i){var n=e,o=t;if("object"===typeof n&&(n=e.template,o=u({},t,e.data||{})),i&&i.isReactHybrid)return[{template:n,data:t}];var a=document.createElement("div");return document.body.appendChild(a),r.render(n(o),a),pt(a),a.children}}},We.compile=zi.compile;var Fi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Fi(t,e),t.moduleName="layer"}(Hi),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Fi(t,e),t.propertyName="layers",t.moduleName="layers"}(Hi),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Ui=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Vi(t,e),t.moduleName="customCursor"}(Hi),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Vi(t,e),t.propertyName="customCursor",t.moduleName="customCursors"}(Hi),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Yi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Ui(t,e),t.moduleName="connector"}(Hi),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Ui(t,e),t.propertyName="connectors",t.moduleName="connectors"}(Hi),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Xi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Yi(t,e),t.moduleName="connectorAnnotation"}(Hi),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Yi(t,e),t.propertyName="annotations",t.moduleName="connectorAnnotations"}(Hi),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Gi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Xi(t,e),t.moduleName="node"}(Hi),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Xi(t,e),t.propertyName="nodes",t.moduleName="nodes"}(Hi),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),qi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Gi(t,e),t.moduleName="nodeAnnotation"}(Hi),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Gi(t,e),t.propertyName="annotations",t.moduleName="nodeAnnotations"}(Hi),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Zi=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}qi(t,e),t.moduleName="port"}(Hi),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}qi(t,e),t.propertyName="ports",t.moduleName="ports"}(Hi),function(){function e(e,t){this.width=e,this.height=t}return e.prototype.isEmpty=function(){return 0===this.height&&0===this.width},e.prototype.clone=function(){return new e(this.width,this.height)},e}()),Ki=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$i=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Qi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.equals=function(e,t){return e===t||!(!e||!t)&&(!e||!t||e.x===t.x&&e.y===t.y)},t.isEmptyPoint=function(e){return!e.x||!e.y},t.transform=function(e,t,i){var n={x:0,y:0};return n.x=Math.round(100*(e.x+i*Math.cos(t*Math.PI/180)))/100,n.y=Math.round(100*(e.y+i*Math.sin(t*Math.PI/180)))/100,n},t.findLength=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.findAngle=function(e,t){var i=Math.atan2(t.y-e.y,t.x-e.x);return i=180*i/Math.PI,(i%=360)<0&&(i+=360),i},t.distancePoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.getLengthFromListOfPoints=function(e){for(var t=0,i=0;i<e.length-1;i++)t+=this.distancePoints(e[i],e[i+1]);return t},t.adjustPoint=function(e,t,i,n){var r,o=i?{x:e.x,y:e.y}:{x:t.x,y:t.y};return e.x===t.x?e.y<t.y&&i||e.y>t.y&&!i?o.y+=n:o.y-=n:e.y===t.y?e.x<t.x&&i||e.x>t.x&&!i?o.x+=n:o.x-=n:i?(r=this.findAngle(e,t),o=this.transform(e,r,n)):(r=this.findAngle(t,e),o=this.transform(t,r,n)),o},t.direction=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},t.prototype.getClassName=function(){return"Point"},$i([zt(0)],t.prototype,"x",void 0),$i([zt(0)],t.prototype,"y",void 0),t}(ii);function Ji(e){var t,i=[],n=function(e){var t=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],r={};t.lastIndex=0;var o=!1;r=t.exec(e);for(;r;){if("e"===r[1]){o=!0}else r[1]?("zm"===r[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[r[1].substring(1,2)]):(i.length&&n.push(i),i=[r[1]]),o=!1):(i.length||(i=[]),o||i.push(Number(r[2])),o=!1);r=t.exec(e)}i.length&&n.push(i);return n}(e);if(n.length>0)for(var r=0;r<n.length;r++){var o=n[r],a="";switch((a=o[0]).toLowerCase()){case"m":for(t=1;t<o.length;t++)i.push({command:a,x:o[t],y:o[t+1]}),t+=1,"m"===a?a="l":"M"===a&&(a="L");break;case"l":case"t":for(t=1;t<o.length;t++)i.push({command:a,x:o[t],y:o[t+1]}),t+=1;break;case"h":for(t=1;t<o.length;t++)i.push({command:a,x:o[t]});break;case"v":for(t=1;t<o.length;t++)i.push({command:a,y:o[t]});break;case"z":i.push({command:a});break;case"c":for(t=1;t<o.length;t++)i.push({command:a,x1:o[t],y1:o[t+1],x2:o[t+2],y2:o[t+3],x:o[t+4],y:o[t+5]}),t+=5;break;case"s":for(t=1;t<o.length;t++)i.push({command:a,x2:o[t],y2:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"q":for(t=1;t<o.length;t++)i.push({command:a,x1:o[t],y1:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"a":for(t=1;t<o.length;t++)i.push({command:a,r1:o[t],r2:o[t+1],angle:o[t+2],largeArc:o[t+3],sweep:o[t+4],x:o[t+5],y:o[t+6]}),t+=6}}return i}function en(e){var t,i,n="";for(n="M"+e[0].x+" "+e[0].y,i=1;i<e.length;i++)n+="L"+(t=e[i]).x+" "+t.y;return n+="Z"}function tn(e){var t,i,n,r,o,a,s,l,c,h,d=[];for(s=0,l=0,h=0,c=e.length;h<c;++h){var p,u=e[h];p=u.command,"y1"in u&&(r=u.y1),"y2"in u&&(a=u.y2),"x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"x"in u&&(s=u.x),"y"in u&&(l=u.y);var f=d[d.length-1];switch(p){case"M":d.push({command:"M",x:s,y:l});break;case"L":d.push({command:"L",x0:t,y0:i,x:s,y:l});break;case"H":d.push({command:"L",x0:t,y0:i,x:s,y:i});break;case"V":d.push({command:"L",x0:t,y0:i,x:t,y:l});break;case"C":d.push({command:"C",x0:t,y0:i,x1:n,y1:r,x2:o,y2:a,x:s,y:l});break;case"S":if(f){var g=void 0,m={x:2*t-(g="C"===f.command||"S"===f.command?{x:f.x2,y:f.y2}:{x:t,y:i}).x,y:2*i-g.y};d.push({command:"C",x0:t,y0:i,x1:m.x,y1:m.y,x2:o,y2:a,x:s,y:l})}break;case"Q":d.push({command:"Q",x0:t,y0:i,x1:n,y1:r,x:s,y:l});break;case"T":if(f){g=void 0,m={x:2*t-(g="Q"===f.command?{x:f.x1,y:f.y1}:{x:t,y:i}).x,y:2*i-g.y};d.push({command:"Q",x0:t,y0:i,x1:m.x,y1:m.y,x:s,y:l})}break;case"A":var y=u;y.command="A",d.push(y);break;case"Z":case"z":d.push({command:"Z"}),s=t,l=i}"M"!==p&&"m"!==p||(s,l),t=s,i=l}return d}function nn(e,t,i,n,r,o,a,s){var l,c,h,d,p,u,f,g,m;for(p=0,u=0,g=0,f=e.length;g<f;++g){var y=e[g],v=y.command;"x"in y&&(p=y.x),"y"in y&&(u=y.y),"y1"in y&&(c=y.y1),"y2"in y&&(d=y.y2),"x1"in y&&(l=y.x1),"x2"in y&&(h=y.x2),n?(void 0!==p&&(p=on(p,t,r,a)),void 0!==u&&(u=on(u,i,o,s)),void 0!==l&&(l=on(l,t,r,a)),void 0!==c&&(c=on(c,i,o,s)),void 0!==h&&(h=on(h,t,r,a)),void 0!==d&&(d=on(d,i,o,s))):(void 0!==p&&(p=Number((p+t).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))),void 0!==l&&(l=Number((l+t).toFixed(2))),void 0!==c&&(c=Number((c+i).toFixed(2))),void 0!==h&&(h=Number((h+t).toFixed(2))),void 0!==d&&(d=Number((d+i).toFixed(2)))),(m=rn(y,v,{x:p,y:u,x1:l,y1:c,x2:h,y2:d,r1:y.r1,r2:y.r2},n,t,i))&&(e[g]=m),"M"!==v&&"m"!==v||(p,u)}return sn(e)}function rn(e,t,i,n,r,o){switch(t){case"M":case"L":e.x=i.x,e.y=i.y;break;case"H":e.x=i.x;break;case"V":e.y=i.y;break;case"C":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1,e.x2=i.x2,e.y2=i.y2;break;case"S":e.x=i.x,e.y=i.y,e.x2=i.x2,e.y2=i.y2;break;case"Q":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1;break;case"T":e.x=i.x,e.y=i.y;break;case"A":var a=i.r1,s=i.r2;n&&(i.r1=a*=r,i.r2=s*=o),e.x=i.x,e.y=i.y,e.r1=i.r1,e.r2=i.r2;break;case"z":case"Z":e={command:"Z"}}return e}function on(e,t,i,n){return e!==i?e=n!==i?e*t-(Number(i)*t-Number(i))+(n-Number(i)):Number(e)*t-(Number(i)*t-Number(i)):n!==i&&(e=n),Number(e.toFixed(2))}function an(e){var t,i,n,r,o,a,s,l,c,h;for(s=0,l=0,h=0,c=e.length;h<c;++h){var d=e[h],p=d.command;if(/[MLHVCSQTA]/.test(p))"x"in d&&(d.x=s=d.x),"y"in d&&(d.y=l=d.y);else{"x1"in d&&(d.x1=n=s+d.x1),"x2"in d&&(d.x2=o=s+d.x2),"y1"in d&&(d.y1=r=l+d.y1),"y2"in d&&(d.y2=a=l+d.y2),"x"in d&&(d.x=s+=d.x),"y"in d&&(d.y=l+=d.y);var u=void 0;switch(p){case"m":case"M":u={command:"M",x:s,y:l};break;case"l":case"L":u={command:"L",x:s,y:l};break;case"h":case"H":u={command:"H",x:s};break;case"v":case"V":u={command:"V",y:l};break;case"c":case"C":u={command:"C",x:s,y:l,x1:n,y1:r,x2:o,y2:a};break;case"s":case"S":u={command:"S",x:s,y:l,x2:o,y2:a};break;case"q":case"Q":u={command:"Q",x:s,y:l,x1:n,y1:r};break;case"t":case"T":u={command:"T",x:s,y:l};break;case"a":case"A":(u={command:"A",x:s,y:l}).r1=d.r1,u.r2=d.r2,u.angle=d.angle,u.largeArc=d.largeArc,u.sweep=d.sweep;break;case"z":case"Z":u={command:"Z"},s=t,l=i,u=e[h]}u&&(e[h]=u)}"M"!==p&&"m"!==p||(t=s,i=l)}return e}function sn(e){var t,i="";for(t=0;t<e.length;t++)i+=0===t?ln(e[t]):" "+ln(e[t]);return i}function ln(e){var t="";switch(e.command){case"Z":case"z":t=e.command;break;case"M":case"m":case"L":case"l":t=e.command+" "+e.x+" "+e.y;break;case"C":case"c":t=e.command+" "+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"Q":case"q":t=e.command+" "+e.x1+" "+e.y1+" "+e.x+" "+e.y;break;case"A":case"a":var i=e.command,n=e.angle,r=e.largeArc?"1":"0",o=e.sweep?"1":"0";t=i+" "+e.r1+" "+e.r2+" "+n+" "+r+" "+o+" "+e.x+" "+e.y;break;case"H":case"h":t=e.command+" "+e.x;break;case"V":case"v":t=e.command+" "+e.y;break;case"S":case"s":t=e.command+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"T":case"t":t=e.command+" "+e.x+" "+e.y}return t}var cn,hn=function(){function e(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),e.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},e.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=i-this.y,this},e.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),i=Math.min(this.top,e.y),n=Math.max(this.right,e.x),r=Math.max(this.bottom,e.y);this.x=t,this.y=i,this.width=n-this.x,this.height=r-this.y},e.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},e.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},e.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},e.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},e.toBounds=function(t){for(var i=new e,n=0,r=t;n<r.length;n++){var o=r[n];i.unitePoint(o)}return i},e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}();!function(e){e[e.Identity=0]="Identity",e[e.Translation=1]="Translation",e[e.Scaling=2]="Scaling",e[e.Unknown=4]="Unknown"}(cn||(cn={}));var dn=function(e,t,i,n,r,o,a){this.m11=e,this.m12=t,this.m21=i,this.m22=n,this.offsetX=r,this.offsetY=o,this.type=a};function pn(){return new dn(1,0,0,1,0,0,cn.Identity)}function un(e,t){var i=function(e,t,i){switch(e.type){case cn.Identity:break;case cn.Translation:t+=e.offsetX,i+=e.offsetY;break;case cn.Scaling:t*=e.m11,i*=e.m22;break;case cn.Translation|cn.Scaling:t*=e.m11,t+=e.offsetX,i*=e.m22,i+=e.offsetY;break;default:var n=i*e.m21+e.offsetX,r=t*e.m12+e.offsetY;t*=e.m11,t+=n,i*=e.m22,i+=r}return{x:t,y:i}}(e,t.x,t.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function fn(e,t,i,n){yn(e,function(e,t,i){var n=pn(),r=Math.sin(e),o=Math.cos(e),a=t*(1-o)+i*r,s=i*(1-o)-t*r;return n.type=cn.Unknown,vn(n,o,r,-r,o,a,s),n}(.017453292519943295*(t%=360),i||0,n||0))}function gn(e,t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0),yn(e,function(e,t,i,n){var r=pn();return r.type=i||n?cn.Scaling|cn.Translation:cn.Scaling,vn(r,e,0,0,t,i-e*i,n-t*n),r}(t,i,n,r))}function mn(e,t,i){return e.type&cn.Identity?(e.type=cn.Translation,void vn(e,1,0,0,1,t,i)):e.type&cn.Unknown?(e.offsetX+=t,void(e.offsetY+=i)):(e.offsetX+=t,e.offsetY+=i,void(e.type|=cn.Translation))}function yn(e,t){var i=e.type,n=t.type;if(n!==cn.Identity){if(i===cn.Identity)return bn(e,t),void(e.type=t.type);if(n===cn.Translation)return e.offsetX+=t.offsetX,e.offsetY+=t.offsetY,void(i!==cn.Unknown&&(e.type|=cn.Translation));if(i!==cn.Translation){var r=i<<4|n;switch(r){case 34:return e.m11*=t.m11,void(e.m22*=t.m22);case 35:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,void(e.type=cn.Translation|cn.Scaling);case 36:break;default:switch(r){case 50:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX*=t.m11,void(e.offsetY*=t.m22);case 51:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.m11*e.offsetX+t.offsetX,void(e.offsetY=t.m22*e.offsetY+t.offsetY);case 52:break;default:switch(r){case 66:case 67:case 68:break;default:return}}}var o=pn();return vn(o,e.m11*t.m11+e.m12*t.m21,e.m11*t.m12+e.m12*t.m22,e.m21*t.m11+e.m22*t.m21,e.m21*t.m12+e.m22*t.m22,e.offsetX*t.m11+e.offsetY*t.m21+t.offsetX,e.offsetX*t.m12+e.offsetY*t.m22+t.offsetY),o.m21||o.m12?o.type=cn.Unknown:((o.m11&&1!==o.m11||o.m22&&1!==o.m22)&&(o.type=cn.Scaling),(o.offsetX||o.offsetY)&&(o.type|=cn.Translation),(o.type&(cn.Translation|cn.Scaling))===cn.Identity&&(o.type=cn.Identity),o.type=cn.Scaling|cn.Translation),bn(e,o),void(e.type=o.type)}var a=e.offsetX,s=e.offsetY;e.offsetX=a*t.m11+s*t.m21+t.offsetX,e.offsetY=a*t.m12+s*t.m22+t.offsetY,n!==cn.Unknown?e.type=cn.Translation|cn.Scaling:e.type=cn.Unknown}}function vn(e,t,i,n,r,o,a){e.m11=t,e.m12=i,e.m21=n,e.m22=r,e.offsetX=o,e.offsetY=a}function bn(e,t){e.m11=t.m11,e.m12=t.m12,e.m21=t.m21,e.m22=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.type=t.type}var wn,xn,Sn,Cn,Pn,On,En,Tn,In,kn,An,Mn,Dn,Ln,Rn,jn,Nn,zn,Bn,Hn,_n,Wn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fn=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Vn=function(e){if(e){if(w())return Zn;switch(e.type){case"Linear":return Kn;case"Radial":return $n;default:return Kn}}return Kn},Un=function(e,t,i,n){this.left=e,this.right=t,this.top=i,this.bottom=n},Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([zt(0)],t.prototype,"left",void 0),Fn([zt(0)],t.prototype,"right",void 0),Fn([zt(0)],t.prototype,"top",void 0),Fn([zt(0)],t.prototype,"bottom",void 0),t}(ii),Xn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([zt(45)],t.prototype,"angle",void 0),Fn([zt(5)],t.prototype,"distance",void 0),Fn([zt(.7)],t.prototype,"opacity",void 0),Fn([zt("lightgrey")],t.prototype,"color",void 0),t}(ii),Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),t.prototype.getClassName=function(){return"Stop"},Fn([zt("")],t.prototype,"color",void 0),Fn([zt(0)],t.prototype,"offset",void 0),Fn([zt(1)],t.prototype,"opacity",void 0),t}(ii),qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([_t([],Gn)],t.prototype,"stops",void 0),Fn([zt("None")],t.prototype,"type",void 0),Fn([zt("")],t.prototype,"id",void 0),t}(ii),Zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([zt(0)],t.prototype,"x1",void 0),Fn([zt(0)],t.prototype,"x2",void 0),Fn([zt(0)],t.prototype,"y1",void 0),Fn([zt(0)],t.prototype,"y2",void 0),Fn([zt(0)],t.prototype,"cx",void 0),Fn([zt(0)],t.prototype,"cy",void 0),Fn([zt(0)],t.prototype,"fx",void 0),Fn([zt(0)],t.prototype,"fy",void 0),Fn([zt(50)],t.prototype,"r",void 0),t}(qn),Kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([zt(0)],t.prototype,"x1",void 0),Fn([zt(0)],t.prototype,"x2",void 0),Fn([zt(0)],t.prototype,"y1",void 0),Fn([zt(0)],t.prototype,"y2",void 0),t}(qn),$n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([zt(0)],t.prototype,"cx",void 0),Fn([zt(0)],t.prototype,"cy",void 0),Fn([zt(0)],t.prototype,"fx",void 0),Fn([zt(0)],t.prototype,"fy",void 0),Fn([zt(50)],t.prototype,"r",void 0),t}(qn),Qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([zt("white")],t.prototype,"fill",void 0),Fn([zt("black")],t.prototype,"strokeColor",void 0),Fn([zt("")],t.prototype,"strokeDashArray",void 0),Fn([zt(1)],t.prototype,"strokeWidth",void 0),Fn([zt(1)],t.prototype,"opacity",void 0),Fn([Ht(Vn)],t.prototype,"gradient",void 0),t}(ii),Jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([zt("transparent")],t.prototype,"fill",void 0),t}(Qn),er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wn(t,e),Fn([zt("black")],t.prototype,"color",void 0),Fn([zt("Arial")],t.prototype,"fontFamily",void 0),Fn([zt(12)],t.prototype,"fontSize",void 0),Fn([zt(!1)],t.prototype,"italic",void 0),Fn([zt(!1)],t.prototype,"bold",void 0),Fn([zt("CollapseSpace")],t.prototype,"whiteSpace",void 0),Fn([zt("WrapWithOverflow")],t.prototype,"textWrapping",void 0),Fn([zt("Center")],t.prototype,"textAlign",void 0),Fn([zt("None")],t.prototype,"textDecoration",void 0),Fn([zt("Wrap")],t.prototype,"textOverflow",void 0),Fn([zt("transparent")],t.prototype,"fill",void 0),t}(Qn);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wn(t,e),Fn([zt("white")],t.prototype,"fill",void 0),Fn([zt("Wrap")],t.prototype,"textOverflow",void 0),Fn([zt(1)],t.prototype,"strokeWidth",void 0),Fn([Ht(Vn)],t.prototype,"gradient",void 0),Fn([zt(1)],t.prototype,"opacity",void 0),Fn([zt(!1)],t.prototype,"italic",void 0),Fn([zt("")],t.prototype,"strokeDashArray",void 0),Fn([zt("black")],t.prototype,"color",void 0),Fn([zt(12)],t.prototype,"fontSize",void 0),Fn([zt("Arial")],t.prototype,"fontFamily",void 0),Fn([zt("CollapseSpace")],t.prototype,"whiteSpace",void 0),Fn([zt("Center")],t.prototype,"textAlign",void 0),Fn([zt("None")],t.prototype,"textDecoration",void 0),Fn([zt(!1)],t.prototype,"bold",void 0),Fn([zt("black")],t.prototype,"strokeColor",void 0),Fn([zt("WrapWithOverflow")],t.prototype,"textWrapping",void 0)}(ii);!function(e){e[e.Default=0]="Default",e[e.expandNode=2]="expandNode",e[e.interaction=4]="interaction"}(wn||(wn={})),function(e){e[e.Visible=1]="Visible",e[e.Hidden=2]="Hidden",e[e.Hover=4]="Hover",e[e.Connect=8]="Connect"}(xn||(xn={})),function(e){e[e.None=0]="None",e[e.ShowHorizontalLines=1]="ShowHorizontalLines",e[e.ShowVerticalLines=2]="ShowVerticalLines",e[e.ShowLines=3]="ShowLines",e[e.SnapToHorizontalLines=4]="SnapToHorizontalLines",e[e.SnapToVerticalLines=8]="SnapToVerticalLines",e[e.SnapToLines=12]="SnapToLines",e[e.SnapToObject=16]="SnapToObject",e[e.All=31]="All"}(Sn||(Sn={})),function(e){e[e.None=1]="None",e[e.ConnectorSourceThumb=2]="ConnectorSourceThumb",e[e.ConnectorTargetThumb=4]="ConnectorTargetThumb",e[e.ResizeSouthEast=8]="ResizeSouthEast",e[e.ResizeSouthWest=16]="ResizeSouthWest",e[e.ResizeNorthEast=32]="ResizeNorthEast",e[e.ResizeNorthWest=64]="ResizeNorthWest",e[e.ResizeEast=128]="ResizeEast",e[e.ResizeWest=256]="ResizeWest",e[e.ResizeSouth=512]="ResizeSouth",e[e.ResizeNorth=1024]="ResizeNorth",e[e.Rotate=2048]="Rotate",e[e.UserHandle=4096]="UserHandle",e[e.ToolTip=8192]="ToolTip",e[e.ResizeAll=2046]="ResizeAll",e[e.All=16382]="All"}(Cn||(Cn={})),function(e){e[e.None=1]="None",e[e.Select=2]="Select",e[e.Delete=4]="Delete",e[e.Drag=8]="Drag",e[e.DragSourceEnd=16]="DragSourceEnd",e[e.DragTargetEnd=32]="DragTargetEnd",e[e.DragSegmentThumb=64]="DragSegmentThumb",e[e.AllowDrop=128]="AllowDrop",e[e.Bridging=256]="Bridging",e[e.BridgeObstacle=512]="BridgeObstacle",e[e.InheritBridging=1024]="InheritBridging",e[e.PointerEvents=2048]="PointerEvents",e[e.Tooltip=4096]="Tooltip",e[e.InheritTooltip=8192]="InheritTooltip",e[e.Interaction=4218]="Interaction",e[e.ReadOnly=16384]="ReadOnly",e[e.LineRouting=32768]="LineRouting",e[e.InheritLineRouting=65536]="InheritLineRouting",e[e.ConnectToNearByNode=131072]="ConnectToNearByNode",e[e.ConnectToNearByPort=262144]="ConnectToNearByPort",e[e.ConnectToNearByElement=393216]="ConnectToNearByElement",e[e.Default=470590]="Default"}(Pn||(Pn={})),function(e){e[e.ReadOnly=2]="ReadOnly",e[e.InheritReadOnly=4]="InheritReadOnly",e[e.Select=8]="Select",e[e.Drag=16]="Drag",e[e.Resize=32]="Resize",e[e.Rotate=64]="Rotate",e[e.Interaction=120]="Interaction",e[e.None=0]="None"}(On||(On={})),function(e){e[e.None=0]="None",e[e.Select=2]="Select",e[e.Drag=4]="Drag",e[e.Rotate=8]="Rotate",e[e.Shadow=16]="Shadow",e[e.PointerEvents=32]="PointerEvents",e[e.Delete=64]="Delete",e[e.InConnect=128]="InConnect",e[e.OutConnect=256]="OutConnect",e[e.Individual=512]="Individual",e[e.Expandable=1024]="Expandable",e[e.AllowDrop=2048]="AllowDrop",e[e.Inherit=78]="Inherit",e[e.ResizeNorthEast=4096]="ResizeNorthEast",e[e.ResizeEast=8192]="ResizeEast",e[e.ResizeSouthEast=16384]="ResizeSouthEast",e[e.ResizeSouth=32768]="ResizeSouth",e[e.ResizeSouthWest=65536]="ResizeSouthWest",e[e.ResizeWest=131072]="ResizeWest",e[e.ResizeNorthWest=262144]="ResizeNorthWest",e[e.ResizeNorth=524288]="ResizeNorth",e[e.Resize=1044480]="Resize",e[e.AspectRatio=1048576]="AspectRatio",e[e.Tooltip=2097152]="Tooltip",e[e.InheritTooltip=4194304]="InheritTooltip",e[e.ReadOnly=8388608]="ReadOnly",e[e.HideThumbs=16777216]="HideThumbs",e[e.AllowMovingOutsideLane=33554432]="AllowMovingOutsideLane",e[e.Default=5240814]="Default"}(En||(En={})),function(e){e[e.None=0]="None",e[e.ElementIsPort=2]="ElementIsPort",e[e.ElementIsGroup=4]="ElementIsGroup"}(Tn||(Tn={})),function(e){e[e.Rotate=2]="Rotate",e[e.ConnectorSource=4]="ConnectorSource",e[e.ConnectorTarget=8]="ConnectorTarget",e[e.ResizeNorthEast=16]="ResizeNorthEast",e[e.ResizeEast=32]="ResizeEast",e[e.ResizeSouthEast=64]="ResizeSouthEast",e[e.ResizeSouth=128]="ResizeSouth",e[e.ResizeSouthWest=256]="ResizeSouthWest",e[e.ResizeWest=512]="ResizeWest",e[e.ResizeNorthWest=1024]="ResizeNorthWest",e[e.ResizeNorth=2048]="ResizeNorth",e[e.Default=4094]="Default"}(In||(In={})),function(e){e[e.None=1]="None",e[e.Bridging=2]="Bridging",e[e.UndoRedo=4]="UndoRedo",e[e.Tooltip=8]="Tooltip",e[e.UserInteraction=16]="UserInteraction",e[e.ApiUpdate=32]="ApiUpdate",e[e.PageEditable=48]="PageEditable",e[e.Zoom=64]="Zoom",e[e.PanX=128]="PanX",e[e.PanY=256]="PanY",e[e.Pan=384]="Pan",e[e.ZoomTextEdit=512]="ZoomTextEdit",e[e.Virtualization=1024]="Virtualization",e[e.LineRouting=2048]="LineRouting",e[e.Default=500]="Default"}(kn||(kn={})),function(e){e[e.None=0]="None",e[e.SingleSelect=1]="SingleSelect",e[e.MultipleSelect=2]="MultipleSelect",e[e.ZoomPan=4]="ZoomPan",e[e.DrawOnce=8]="DrawOnce",e[e.ContinuousDraw=16]="ContinuousDraw",e[e.Default=3]="Default"}(An||(An={})),function(e){e[e.Self=1]="Self",e[e.Parent=2]="Parent"}(Mn||(Mn={})),function(e){e[e.Canvas=0]="Canvas",e[e.Svg=1]="Svg"}(Dn||(Dn={})),function(e){e[e.None=0]="None",e[e.Control=1]="Control",e[e.Meta=1]="Meta",e[e.Alt=2]="Alt",e[e.Shift=4]="Shift"}(Ln||(Ln={})),function(e){e[e.None=null]="None",e[e.Number0=0]="Number0",e[e.Number1=1]="Number1",e[e.Number2=2]="Number2",e[e.Number3=3]="Number3",e[e.Number4=4]="Number4",e[e.Number5=5]="Number5",e[e.Number6=6]="Number6",e[e.Number7=7]="Number7",e[e.Number8=8]="Number8",e[e.Number9=9]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Delete=46]="Delete",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.BackSpace=8]="BackSpace",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.Star=56]="Star",e[e.Plus=187]="Plus",e[e.Minus=189]="Minus"}(Rn||(Rn={})),function(e){e[e.Render=2]="Render",e[e.PublicMethod=4]="PublicMethod",e[e.ToolAction=8]="ToolAction",e[e.UndoRedo=16]="UndoRedo",e[e.TextEdit=32]="TextEdit",e[e.Group=64]="Group",e[e.Clear=128]="Clear",e[e.PreventClearSelection=256]="PreventClearSelection",e[e.Interactions=512]="Interactions",e[e.PreventHistory=1024]="PreventHistory",e[e.PreventIconsUpdate=2048]="PreventIconsUpdate",e[e.PreventCollectionChangeOnDragOver=4096]="PreventCollectionChangeOnDragOver",e[e.PreventZIndexOnDragging=8192]="PreventZIndexOnDragging",e[e.isGroupDragging=16384]="isGroupDragging",e[e.DragUsingMouse=32768]="DragUsingMouse",e[e.DecoratorPropertyChange=65536]="DecoratorPropertyChange"}(jn||(jn={})),function(e){e[e.None=2]="None",e[e.DrawSelectorBorder=4]="DrawSelectorBorder",e[e.PreventRenderSelector=8]="PreventRenderSelector"}(Nn||(Nn={})),function(e){e[e.None=0]="None",e[e.PreventDrag=2]="PreventDrag",e[e.PreventScale=4]="PreventScale",e[e.PreventDataInit=8]="PreventDataInit",e[e.hScrollbarMoved=16]="hScrollbarMoved",e[e.vScrollbarMoved=32]="vScrollbarMoved",e[e.AnimationClick=64]="AnimationClick",e[e.EnableGroupAction=128]="EnableGroupAction",e[e.PanInProgress=256]="PanInProgress",e[e.OverViewAction=512]="OverViewAction"}(zn||(zn={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five"}(Bn||(Bn={})),function(e){e[e.collectionChange=0]="collectionChange",e[e.rotateChange=1]="rotateChange",e[e.positionChange=2]="positionChange",e[e.propertyChange=3]="propertyChange",e[e.selectionChange=4]="selectionChange",e[e.sizeChange=5]="sizeChange",e[e.drop=6]="drop",e[e.sourcePointChange=7]="sourcePointChange",e[e.targetPointChange=8]="targetPointChange",e[e.connectionChange=9]="connectionChange",e[e.animationComplete=10]="animationComplete",e[e.click=11]="click",e[e.doubleClick=12]="doubleClick",e[e.scrollChange=13]="scrollChange",e[e.dragEnter=14]="dragEnter",e[e.dragLeave=15]="dragLeave",e[e.dragOver=16]="dragOver",e[e.textEdit=17]="textEdit",e[e.paletteSelectionChange=18]="paletteSelectionChange",e[e.historyChange=19]="historyChange",e[e.mouseEnter=20]="mouseEnter",e[e.mouseLeave=21]="mouseLeave",e[e.mouseOver=22]="mouseOver",e[e.expandStateChange=23]="expandStateChange",e[e.segmentCollectionChange=24]="segmentCollectionChange",e[e.commandExecute=25]="commandExecute",e[e.historyStateChange=26]="historyStateChange",e[e.onUserHandleMouseDown=27]="onUserHandleMouseDown",e[e.onUserHandleMouseUp=28]="onUserHandleMouseUp",e[e.onUserHandleMouseEnter=29]="onUserHandleMouseEnter",e[e.onUserHandleMouseLeave=30]="onUserHandleMouseLeave",e[e.onImageLoad=31]="onImageLoad",e[e.onDoBindingInit=32]="onDoBindingInit",e[e.keyUp=33]="keyUp",e[e.keyDown=34]="keyDown"}(Hn||(Hn={})),function(e){e[e.None=1]="None",e[e.Drag=2]="Drag",e[e.Draw=4]="Draw",e[e.InConnect=8]="InConnect",e[e.OutConnect=16]="OutConnect",e[e.Default=24]="Default"}(_n||(_n={}));var tr=function(){function e(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=Mn.Self|Mn.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new Zi,this.actualSize=new Zi,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new hn(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=Tn.None,this.inversedAlignment=!0,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return e.prototype.setOffsetWithRespectToBounds=function(e,t,i){this.unitMode=i,this.position={x:e,y:t}},e.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(e.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!0,configurable:!0}),e.prototype.measure=function(e,t,i){var n=void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,r=void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom;return this.desiredSize=new Zi(n,r),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},e.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},e.prototype.updateBounds=function(){this.bounds=wd(this)},e.prototype.validateDesiredSize=function(e,t){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(e.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new Zi).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},e}(),ir=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=new Un(0,0,0,0),t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return ir(t,e),t.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},t.prototype.measure=function(e,i,n){this.desiredBounds=void 0;var r,o,a=void 0;if(this.hasChildren()){for(var s=0;s<this.children.length;s++){"Stretch"!==(r=this.children[s]).horizontalAlignment||e.width||(e.width=r.bounds.width),"Stretch"!==r.verticalAlignment||e.height||(e.height=r.bounds.height);var l="Stretch"===r.horizontalAlignment||"Stretch"===r.verticalAlignment;(this.measureChildren||l||r instanceof t&&void 0!==r.measureChildren)&&r.measure(e,i,n),o=this.GetChildrenBounds(r),"Stretch"!==r.horizontalAlignment&&"Stretch"!==r.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=o:this.desiredBounds.uniteRect(o):!this.actualSize||this.actualSize.width||this.actualSize.height||r.preventContainer||"Stretch"!==r.horizontalAlignment||"Stretch"!==r.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=r.bounds:this.desiredBounds.uniteRect(r.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var c={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},h=Dd(this.rotateAngle,void 0,void 0,c);this.desiredBounds.x=h.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=h.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(a=new Zi(this.desiredBounds.width,this.desiredBounds.height))}return a=this.validateDesiredSize(a,e),this.stretchChildren(a),this.desiredSize=a,a},t.prototype.arrange=function(e){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var r=0;r<this.children.length;r++){var o=!1;"Stretch"===(i=this.children[r]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&Tn.ElementIsGroup&&(i.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-i.parentTransform:i.parentTransform),o=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,o=!0),(o||this.measureChildren||i instanceof t&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=e,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,e},t.prototype.stretchChildren=function(e){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var r=n[i];"Stretch"!==r.horizontalAlignment&&void 0!==r.desiredSize.width||(r.desiredSize.width=e.width-r.margin.left-r.margin.right),"Stretch"!==r.verticalAlignment&&void 0!==r.desiredSize.height||(r.desiredSize.height=e.height-r.margin.top-r.margin.bottom),r instanceof t&&r.stretchChildren(r.desiredSize)}},t.prototype.applyPadding=function(e){e.width+=this.padding.left+this.padding.right,e.height+=this.padding.top+this.padding.bottom},t.prototype.findChildOffsetFromCenter=function(e,t){var i=function(e,t){var i=e.x+t.desiredSize.width*t.pivot.x,n=e.y+t.desiredSize.height*t.pivot.y;return{x:i,y:n}}({x:t.x-e.desiredSize.width/2,y:t.y-e.desiredSize.height/2},e);i=Dd(e.rotateAngle,t.x,t.y,i),i=Dd(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,i),e.offsetX=i.x,e.offsetY=i.y},t.prototype.GetChildrenBounds=function(e){var t;t=e.desiredSize.clone();e.rotateAngle,this.rotateAngle;var i=e.offsetX,n=e.offsetY,r=i-t.width*e.pivot.x,o=n-t.height*e.pivot.y,a=r+t.width,s=o+t.height,l={x:r,y:o},c={x:a,y:o},h={x:r,y:s},d={x:a,y:s};return l=Dd(e.rotateAngle,e.offsetX,e.offsetY,l),c=Dd(e.rotateAngle,e.offsetX,e.offsetY,c),h=Dd(e.rotateAngle,e.offsetX,e.offsetY,h),d=Dd(e.rotateAngle,e.offsetX,e.offsetY,d),0!==this.rotateAngle&&(l=Dd(-this.rotateAngle,void 0,void 0,l),c=Dd(-this.rotateAngle,void 0,void 0,c),h=Dd(-this.rotateAngle,void 0,void 0,h),d=Dd(-this.rotateAngle,void 0,void 0,d)),hn.toBounds([l,c,h,d])},t}(tr),rr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),or=function(e){function t(){var t=e.call(this)||this;return t.textContent="",t.canMeasure=!0,t.isLaneOrientation=!1,t.canConsiderBounds=!0,t.hyperlink={color:"blue"},t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return rr(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.textContent},set:function(e){this.textContent!==e&&(this.textContent=e,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.textNodes},set:function(e){this.textNodes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(e){this.textWrapBounds=e},enumerable:!0,configurable:!0}),t.prototype.refreshTextElement=function(){this.isDirt=!0},t.prototype.measure=function(e){var t;return t=this.isDirt&&this.canMeasure?function(e,t,i,n,r){var o,a,s=new Zi(0,0),l=function(e,t){var i={fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray,opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,width:t||e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5};return i.fontSize=e.style.fontSize,i.fontFamily=e.style.fontFamily,i.textOverflow=e.style.textOverflow,i.textDecoration=e.style.textDecoration,i.doWrap=e.doWrap,i.whiteSpace=Ad(e.style.whiteSpace,e.style.textWrapping),i.content=e.content,i.textWrapping=e.style.textWrapping,i.breakWord=Ed(e.style.textWrapping),i.textAlign=Od(e.style.textAlign),i.color=e.style.color,i.italic=e.style.italic,i.bold=e.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}(e,n);e.childNodes=o=function(e,t,i){var n,r,o=[],a=0,s=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(n="",n+=s[0],a=0;a<s.length;a++)if((r=Td(n,e))>=e.width&&n.length>0)o[o.length]={text:n,x:0,dy:0,width:r},n="";else{(n+=s[a+1]||"").indexOf("\n")>-1&&(o[o.length]={text:n,x:0,dy:0,width:Td(n,e)},n="");var l=Td(n,e);Math.ceil(l)+2>=e.width&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n=""),a===s.length-1&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n="")}else o=function(e,t,i){var n,r,o,a,s=[],l="",c=0,h=0,d="nowrap"!==e.whiteSpace,p=(t||e.content).split("\n");for(c=0;c<p.length;c++)for("",n="NoWrap"!==e.textWrapping?p[c].split(" "):"NoWrap"===e.textWrapping?[p[c]]:p,h=0;h<n.length;h++){l+=((0!==h||1===n.length)&&d&&l.length>0?" ":"")+n[h];var u=Td(r=l+" "+(n[h+1]||""),e);Math.floor(u)>(i||e.width)-2&&l.length>0?(s[s.length]={text:l,x:0,dy:0,width:r===l?u:l===a?o:Td(l,e)},l=""):h===n.length-1&&(s[s.length]={text:l,x:0,dy:0,width:u},l=""),a=r,o=u}return s}(e,t,i);else o[o.length]={text:s,x:0,dy:0,width:Td(s,e)};return o}(l,r,e.isLaneOrientation?n:void 0),e.wrapBounds=a=function(e,t){var i,n,r={x:0,width:0},o=0;for(o=0;o<t.length;o++)i=t[o].width,n=i,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[o].dy=1.2*e.fontSize,t[o].x=i,r?(r.x=Math.min(r.x,i),r.width=Math.max(r.width,n)):r={x:i,width:n};return r}(l,o),s.width=a.width,e.wrapBounds.width>=n&&"Wrap"!==l.textOverflow&&(s.width=n);return s.height=o.length*e.style.fontSize*1.2,s}(this,this.style,this.content,this.isLaneOrientation?e.height:this.width||e.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new Zi(t.width,t.height):this.desiredSize=new Zi(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return(e.width!==this.actualSize.width||e.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=e,this.updateBounds(),this.isDirt=!1,this.actualSize},t}(tr),ar=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.measureChildren=void 0,t}return ar(t,e),t.prototype.measure=function(t,i,n){var r=void 0,o=void 0;if(this.hasChildren()){for(var a=0,s=this.children;a<s.length;a++){var l=s[a];l instanceof or?l.canMeasure&&(t.width=t.width||this.maxWidth||this.minWidth,l.measure(t)):l instanceof or||l.measure(t,i,n);var c=l.desiredSize.clone();0!==l.rotateAngle&&(c=Md(c,l.rotateAngle));var h=c.width+l.margin.right,d=c.height+l.margin.bottom,p=new hn(l.margin.left,l.margin.top,h,d);if(l.float)if(void 0!==l.getAbsolutePosition(c))continue;l instanceof or&&!(l instanceof or&&l.canConsiderBounds)||(void 0===o?o=p:o.uniteRect(p))}if(o){var u,f;u=Math.max(o.left,0),f=Math.max(o.top,0),r=new Zi(o.width+u,o.height+f)}}return r=e.prototype.validateDesiredSize.call(this,r,t),e.prototype.stretchChildren.call(this,r),r.width+=this.padding.left+this.padding.right,r.height+=this.padding.top+this.padding.bottom,this.desiredSize=r,r},t.prototype.arrange=function(t,i){if(this.outerBounds=new hn,this.hasChildren()){var n,r;n=this.offsetY-t.height*this.pivot.y+this.padding.top,r=this.offsetX-t.width*this.pivot.x+this.padding.left;for(var o=0,a=this.children;o<a.length;o++){var s=a[o];if(0!==(s.transform&Mn.Parent)){s.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&Tn.ElementIsGroup)&&(s.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-s.parentTransform:s.parentTransform);var l,c=s.desiredSize.clone(),h=void 0,d=r,p=n;if("Point"===s.relativeMode){var u=s.getAbsolutePosition(t);void 0!==u&&(d+=u.x,p+=u.y)}l={x:(h="Object"===s.relativeMode?this.alignChildBasedOnParent(s,c,t,d,p):this.alignChildBasedOnaPoint(s,d,p)).x+c.width/2,y:h.y+c.height/2},e.prototype.findChildOffsetFromCenter.call(this,s,l)}!i||"Stretch"!==s.horizontalAlignment&&"Stretch"!==s.verticalAlignment?s instanceof or&&s.canMeasure?(s.arrange(s.desiredSize),this.outerBounds.uniteRect(s.outerBounds)):s instanceof or||(s.arrange(s.desiredSize),this.outerBounds.uniteRect(s.outerBounds)):s.arrange(t)}}return this.actualSize=t,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),t},t.prototype.alignChildBasedOnParent=function(e,t,i,n,r){switch(e.horizontalAlignment){case"Auto":case"Left":n+=e.margin.left;break;case"Right":n+=i.width-t.width-e.margin.right;break;case"Stretch":case"Center":n+=i.width/2-t.width/2}switch(e.verticalAlignment){case"Auto":case"Top":r+=e.margin.top;break;case"Bottom":r+=i.height-t.height-e.margin.bottom;break;case"Stretch":case"Center":r+=i.height/2-t.height/2}return{x:n,y:r}},t.prototype.alignChildBasedOnaPoint=function(e,t,i){switch(t+=e.margin.left-e.margin.right,i+=e.margin.top-e.margin.bottom,e.horizontalAlignment){case"Auto":case"Left":t=e.inversedAlignment?t:t-e.desiredSize.width;break;case"Stretch":case"Center":t-=e.desiredSize.width*e.pivot.x;break;case"Right":t=e.inversedAlignment?t-e.desiredSize.width:t}switch(e.verticalAlignment){case"Auto":case"Top":i=e.inversedAlignment?i:i-e.desiredSize.height;break;case"Stretch":case"Center":i-=e.desiredSize.height*e.pivot.y;break;case"Bottom":i=e.inversedAlignment?i-e.desiredSize.height:i}return{x:t,y:i}},t}(nr);function lr(e){return cr[e.toString()]}var cr={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"},hr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dr=function(e){function t(){var t=e.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new hn,t}return hr(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.pathData},set:function(e){this.pathData!==e&&(this.pathData=e,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.getPoints=function(){var e=this;return this.pointTimer||(this.pointTimer=setTimeout((function(){e.points=null,e.pointTimer=null}),200)),this.points=this.points||function(e){var t,i,n=[];window.measureElement.style.visibility="visible";var r=_h(window.measureElement.children[2])[0];r.setAttributeNS(null,"d",e.data);var o=e.absoluteBounds,a=Vh(e,o,e);r.setAttributeNS(null,"d",a);var s=r.getTotalLength();for(i=0;i<=s;i+=10)t=r.getPointAtLength(i),n.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",n}(this),function(e,t){for(var i=[],n=0,r=t;n<r.length;n++){var o=r[n],a={x:e.offsetX-e.actualSize.width*e.pivot.x+o.x,y:e.offsetY-e.actualSize.height*e.pivot.y+o.y},s=void 0,l=e.rotateAngle+e.parentTransform;l&&fn(s=pn(),l,e.offsetX,e.offsetY),s&&(a=un(s,a)),i.push(a)}return i}(this,this.points)},t.prototype.measure=function(e){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new hn(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=Wh(this.data?this.data:"")),void 0===this.width?this.desiredSize=new Zi(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new Zi(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new Zi(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.canMeasurePath=!1,this.desiredSize},t.prototype.arrange=function(e){return(this.isDirt||this.actualSize.width!==e.width||this.actualSize.height!==e.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,e),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},t.prototype.updatePath=function(e,t,i){var n=!1,r="",o=-t.x,a=-t.y,s=[];return i.width===t.width&&i.height===t.height||(o=i.width/Number(t.width?t.width:1),a=i.height/Number(t.height?t.height:1),n=!0),s=an(s=Ji(e)),r=(n||this.isDirt)&&this.transformPath?nn(s,o,a,n,t.x,t.y,0,0):sn(s),n=!1,r},t}(tr),pr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ur=function(e){function t(){var t=e.call(this)||this;return t.imageSource="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return pr(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this.imageSource},set:function(e){this.imageSource=e,this.isDirt=!0},enumerable:!0,configurable:!0}),t.prototype.measure=function(e,t,i){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(e,t,i,n){window.measureElement.style.visibility="visible";var r=window.measureElement.children[1];r.setAttribute("src",e);var o=r.getBoundingClientRect(),a=o.width,s=o.height;t=new Zi(a,s),window.measureElement.style.visibility="hidden";var l=document.createElement("img");return l.setAttribute("src",e),pd(l,{id:i+"sf-imageNode",style:"display: none;"}),document.body.appendChild(l),l.onload=function(e){var t=e.currentTarget;n&&n(i,{width:t.width,height:t.height})},t}(this.source,this.contentSize,t,i),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new Zi(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new Zi(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(tr),fr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gr=function(e){function t(t,i){var n=e.call(this)||this;return n.data="",n.nodeId="",n.diagramId="",n.scale="Stretch",n.diagramId=i,n.nodeId=t,n}return fr(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.canReset||(this.canReset=!0,this.template=cd(this,!1),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){if(this.isDirt){var t=function(e){window.measureElement.style.visibility="visible";var t=window.measureElement.children[2];t.appendChild(e);var i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),r=i;return r.x=i.left-n.left,r.y=i.top-n.top,t.removeChild(e),window.measureElement.style.visibility="hidden",r}(this.template);this.contentSize=new Zi,this.contentSize.width=t.width,this.contentSize.height=t.height;var i=t.x,n=t.y;this.templatePosition={x:i,y:n},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var r=function(e){window.measureElement.style.visibility="visible";var t=window.measureElement.children[2];t.appendChild(e);var i=t.getBoundingClientRect();return t.removeChild(e),window.measureElement.style.visibility="hidden",i}(this.template);this.desiredSize=new Zi(r.width,r.height)}else this.desiredSize=new Zi(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new Zi(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(tr),mr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yr=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},vr=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.inEdges=[],o.outEdges=[],o}return mr(t,e),yr([zt("")],t.prototype,"id",void 0),yr([zt("Center")],t.prototype,"horizontalAlignment",void 0),yr([zt("Center")],t.prototype,"verticalAlignment",void 0),yr([Bt({},Yn)],t.prototype,"margin",void 0),yr([zt(12)],t.prototype,"width",void 0),yr([zt(12)],t.prototype,"height",void 0),yr([Bt({},Qn)],t.prototype,"style",void 0),yr([zt("Square")],t.prototype,"shape",void 0),yr([zt(xn.Connect)],t.prototype,"visibility",void 0),yr([zt("")],t.prototype,"pathData",void 0),yr([zt(_n.Default)],t.prototype,"constraints",void 0),yr([zt()],t.prototype,"addInfo",void 0),yr([zt()],t.prototype,"outEdges",void 0),yr([zt()],t.prototype,"inEdges",void 0),t}(ii),br=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return mr(t,e),t.prototype.getClassName=function(){return"PointPort"},yr([Bt({x:.5,y:.5},Qi)],t.prototype,"offset",void 0),t}(vr),wr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xr=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Sr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wr(t,e),xr([zt("blue")],t.prototype,"color",void 0),xr([zt("")],t.prototype,"content",void 0),xr([zt("")],t.prototype,"link",void 0),xr([zt("None")],t.prototype,"textDecoration",void 0),t}(ii),Cr=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return n.id||(t.parentObj&&t.parentObj.propName&&"phases"===t.parentObj.propName?o.id=t.parentObj.id:o.id=md()),o}return wr(t,e),xr([zt("")],t.prototype,"content",void 0),xr([zt(void 0)],t.prototype,"template",void 0),xr([zt("String")],t.prototype,"annotationType",void 0),xr([zt(!0)],t.prototype,"visibility",void 0),xr([zt(On.InheritReadOnly)],t.prototype,"constraints",void 0),xr([Bt(void 0,Sr)],t.prototype,"hyperlink",void 0),xr([zt("")],t.prototype,"id",void 0),xr([zt()],t.prototype,"width",void 0),xr([zt()],t.prototype,"height",void 0),xr([zt(0)],t.prototype,"rotateAngle",void 0),xr([Bt({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},er)],t.prototype,"style",void 0),xr([zt("Center")],t.prototype,"horizontalAlignment",void 0),xr([zt("Center")],t.prototype,"verticalAlignment",void 0),xr([Bt({},Yn)],t.prototype,"margin",void 0),xr([Bt({top:void 0,bottom:void 0,left:void 0,right:void 0},Yn)],t.prototype,"dragLimit",void 0),xr([zt("Shape")],t.prototype,"type",void 0),xr([zt()],t.prototype,"addInfo",void 0),t}(ii),Pr=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return wr(t,e),t.prototype.getClassName=function(){return"ShapeAnnotation"},xr([Bt({x:.5,y:.5},Qi)],t.prototype,"offset",void 0),t}(Cr),Or=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return wr(t,e),t.prototype.getClassName=function(){return"PathAnnotation"},xr([zt(.5)],t.prototype,"offset",void 0),xr([Bt({x:0,y:0},Qi)],t.prototype,"displacement",void 0),xr([zt("Center")],t.prototype,"alignment",void 0),xr([zt(!1)],t.prototype,"segmentAngle",void 0),t}(Cr);function Er(e){return Tr[e.toString()]}var Tr={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},Ir={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"};function kr(e){return Rr[e.toString()]}var Ar,Mr,Dr,Lr,Rr={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"};function jr(e,t){var i;return i=function(e,t,i,n){var r,o,a=e.sourceWrapper,s=e.targetWrapper,l=e.sourcePortWrapper,c=e.targetPortWrapper,h=[],d={corners:void 0,point:t,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}},p={corners:void 0,point:i,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}};void 0!==a&&void 0!==s&&(r=bd(a),o=bd(s),d.corners=a.corners,p.corners=s.corners);if(void 0!==l){var u={x:l.offsetX,y:l.offsetY};d.direction=mo(u,r,a.bounds,!1)}if(void 0!==c){var f={x:c.offsetX,y:c.offsetY};p.direction=mo(f,o,s.bounds,!1)}if(void 0!==a&&void 0!==s)return void 0!==d.direction&&void 0!==p.direction||(n?function(e,t,i){"LeftToRight"===i?(e.direction=e.direction?e.direction:"Right",t.direction=t.direction?t.direction:"Left"):"RightToLeft"===i?(e.direction=e.direction?e.direction:"Left",t.direction=t.direction?t.direction:"Right"):"TopToBottom"===i?(e.direction=e.direction?e.direction:"Bottom",t.direction=t.direction?t.direction:"Top"):"BottomToTop"===i&&(e.direction=e.direction?e.direction:"Top",t.direction=t.direction?t.direction:"Bottom")}(d,p,n):d.corners.top>p.corners.bottom&&Math.abs(d.corners.top-p.corners.bottom)>d.margin.top+d.margin.bottom?(d.direction=d.direction?d.direction:"Top",p.direction=p.direction?p.direction:"Bottom"):d.corners.bottom<p.corners.top&&Math.abs(d.corners.bottom-p.corners.top)>d.margin.bottom+d.margin.top?(d.direction=d.direction?d.direction:"Bottom",p.direction=p.direction?p.direction:"Top"):d.corners.right<p.corners.left&&Math.abs(d.corners.right-p.corners.left)>d.margin.right+d.margin.left||d.corners.right+13<p.corners.left||p.corners.right>=d.corners.left-13&&d.corners.left>p.corners.left?(d.direction=d.direction?d.direction:"Right",p.direction=p.direction?p.direction:"Left"):d.corners.left>p.corners.right&&Math.abs(d.corners.left-p.corners.right)>d.margin.left+d.margin.right||p.corners.right+13<d.corners.left||d.corners.right>=p.corners.left-13&&d.corners.left<p.corners.left?(d.direction=d.direction?d.direction:"Left",p.direction=p.direction?p.direction:"Right"):a.id!==s.id&&!r.equals(r,o)&&o.containsPoint(r.topCenter,d.margin.top)?(d.direction=d.direction?d.direction:"Bottom",p.direction=p.direction?p.direction:"Top"):(d.direction=d.direction?d.direction:"Top",p.direction=p.direction?p.direction:"Bottom")),function(e,t,i,n,r){var o,a=e.sourceWrapper,s=e.targetWrapper,l=e.sourcePortWrapper,c=e.targetPortWrapper,h=[],d=a.corners,p=s.corners,u=(p.center,{corners:d,point:n,direction:t,margin:{left:5,right:5,bottom:5,top:5}}),f={corners:p,point:r,direction:i,margin:{left:5,right:5,bottom:5,top:5}},g=Xr(a,d,e.sourceWrapper.bounds),m=Xr(s,p,e.targetWrapper.bounds),y=!1;e.sourceWrapper&&e.targetWrapper&&(y=function(e,t,i){for(var n=Ur(e,i.sourcePadding),r=Ur(t,i.targetPadding),o=0;o<n.length-1;o++)for(var a=n[o],s=0;s<r.length-1;s++){var l=r[s];if(Ql(a,l).enabled)return!0}return!1}(e.sourceWrapper,e.targetWrapper,e));if(void 0!==l){switch(u.point={x:l.offsetX,y:l.offsetY},u.direction){case"Bottom":case"Top":u.point.y=u.point.y;break;case"Left":case"Right":u.point.x=u.point.x}e.sourcePadding&&!y&&(c&&(f.point={x:c.offsetX,y:c.offsetY}),u.point=Vr(e,u,f,!1))}else"Orthogonal"===e.type?(e.segments&&e.segments.length>0&&e.segments[0].direction&&(u.direction=e.segments[0].direction),u.point=io(g,u.direction),o=io(g,vo(u.direction)),u.point=ro(e,a,u.point,o,!1)):u.point=a.corners.center;if(void 0!==c){switch(f.point={x:c.offsetX,y:c.offsetY},f.direction){case"Bottom":case"Top":f.point.y=f.point.y;break;case"Left":case"Right":f.point.x=f.point.x}e.targetPadding&&!y&&(f.point=Vr(e,u,f,!0))}else"Orthogonal"===e.type?(f.point=io(m,f.direction),o=io(m,vo(f.direction)),f.point=ro(e,s,f.point,o,!0)):f.point=s.corners.center;if("Orthogonal"!==e.type){var v=void 0,b=void 0;if(Zr(e),void 0===e.sourcePortWrapper){u.point=u.corners.center,e.segments&&e.segments.length>0&&(b=e.segments[0],v=Qi.isEmptyPoint(b.point)?void 0:b);var w=void 0!==v?v.point:f.point;if("Bezier"===e.type&&e.segments.length>0&&e.segments[0].vector1.angle&&e.segments[0].vector1.distance){var x=Math.max(u.corners.width,u.corners.height);w=Qi.transform(u.point,e.segments[0].vector1.angle,x/2)}u.point=y?e.sourceWrapper.bounds.center:ro(e,a,u.point,w,!1)}if(void 0===e.targetPortWrapper){f.point=f.corners.center,e.segments&&e.segments.length>1&&(b=e.segments[e.segments.length-2],v=Qi.isEmptyPoint(b.point)?void 0:b);var S=v?v.point:u.point;if("Bezier"===e.type&&e.segments.length>0&&e.segments[e.segments.length-1].vector2.angle&&e.segments[e.segments.length-1].vector2.distance){x=Math.max(u.corners.width,u.corners.height);S=Qi.transform(f.point,e.segments[0].vector2.angle,x/2)}f.point=y?e.targetWrapper.bounds.center:ro(e,s,S,f.point,!0)}h=Gr(e,u,f)}else if("Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].direction)h=function(e,t,i,n,r,o,a){var s,l,c,h;Zr(e);for(var d=0;d<e.segments.length;d++){if(l=e.segments[d],n&&t.direction===vo(l.direction)&&(l.direction=t.direction),d>0&&e.segments[d-1].direction===l.direction)d=Kr(e,d,t);else if(l.direction)t.point=Nr(t,e.segments[d]);else{var p=e.segments[d-1];t.point=p.points[p.points.length-1]}if(d===e.segments.length-1)if(Qr(e,t),Fr(s=void 0===r?$r(e,t,i):_r(e,t,i),e,t),l.points=[],s.length>=2)for(c=0;c<s.length;c++)l.points.push(s[c]);else h=d;if(void 0!==h&&(h===e.segments.length-1&&(e.segments[h-1].direction=null,e.segments[h-1].length=null),e.segments.splice(h,1)),n&&0===d){var u=Wr(e,n,o);u&&(t.point=u)}}return Jr(e,[])}(e,u,f,l,c,a);else{if(!e.segments[0]){v=new _a(e,"segments",{type:"Orthogonal"},!0);e.segments.push(v)}e.segments[0].points=h=function(e,t,i,n){var r,o;(r=function(e,t){var i=!1;switch(e){case"Left":switch(t){case"Right":case"Bottom":i=!0}break;case"Top":switch(t){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":switch(t){case"Right":i=!0}}return i}(t.direction,i.direction))&&go(t,i);"Right"===t.direction&&"Left"===i.direction?o=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=(e.targetPortWrapper,Math.round(Math.abs(t.point.y-i.point.y))),s=(Math.round(Math.abs(t.point.x-i.point.x)),{x:Math.max(t.point.x,t.corners.right),y:t.point.y}),l={x:Math.min(i.point.x,i.corners.left),y:i.point.y},c=10;if(n){var h;h=l,l=s,s=h}t.corners.bottom+c<i.corners.top-c||t.corners.top-c>i.corners.bottom+c||(c=0);t.margin={left:c,right:c,top:c,bottom:c},i.margin={left:c,right:c,top:c,bottom:c},r=0===a&&(t.corners.right<i.corners.left||n&&t.corners.right<i.corners.left)?Bn.One:t.point.x+t.margin.right<i.point.x-i.margin.left||e.sourceWrapper!==e.targetWrapper&&(bd(e.sourceWrapper).containsPoint(l)||bd(e.targetWrapper).containsPoint(s))?Bn.Three:(t.corners.bottom<=i.corners.top||t.corners.top>=i.corners.top||void 0!==o&&o.offsetY<=i.corners.top||void 0===o&&t.corners.right<=i.corners.top||void 0!==o&&o.offsetY>=i.corners.bottom||void 0===o&&(t.corners.right,i.corners.bottom),Bn.Five);return r}(e,t,i,r):"Right"===t.direction&&"Right"===i.direction?o=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=t.point.x-i.point.x,s=t.point.y-i.point.y;i.margin={left:10,right:10,top:10,bottom:10},t.margin={left:10,right:10,top:10,bottom:10},n=t.corners.right>=i.corners.right?void 0!==r&&(r.offsetY<i.corners.top||r.offsetY>i.corners.bottom)||void 0===r&&t.corners.middleRight.y<i.corners.top||void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom&&t.corners.top>i.corners.bottom||void 0===r&&t.corners.middleRight.y>i.corners.bottom||void 0!==r&&r.offsetY<i.corners.top&&t.corners.bottom>i.corners.top||void 0===r&&t.corners.middleRight.y>i.corners.bottom?Bn.Three:t.corners.right<i.corners.left||i.corners.right<t.corners.left?Bn.Five:0===a||0===s?Bn.One:Bn.Three:void 0!==o&&t.corners.bottom<o.offsetY||void 0===o&&t.corners.bottom<i.corners.middleRight.y||void 0!==o&&t.corners.top>o.offsetY||void 0===o&&t.corners.top>i.corners.middleRight.y||void 0!==o&&(void 0!==r&&r.offsetX<i.corners.left&&r.offsetX!==o.offsetX&&r.offsetY!==o.offsetY&&Math.abs(t.corners.right-i.corners.left)<=20||void 0===r&&t.corners.right<i.corners.left&&t.corners.center.x!==i.corners.center.x&&t.corners.center.y!==i.corners.center.y)?Bn.Three:t.corners.right<i.corners.left?Bn.Five:0===a||0===s?Bn.One:Bn.Three;return n}(e,t,i):"Right"===t.direction&&"Top"===i.direction?o=function(e,t,i,n){var r,o=e.targetPortWrapper,a=e.sourcePortWrapper,s={x:Math.max(t.point.x,t.corners.right),y:t.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(i.margin={left:5,right:5,top:5,bottom:5},t.margin={top:5,bottom:5,left:5,right:5},n){var c;c=a,a=o,o=c}r=void 0!==a&&a.offsetY<i.corners.top-i.margin.top||void 0===a&&t.corners.bottom<i.corners.top-i.margin.top?t.corners.bottom<i.corners.top?void 0!==o&&t.corners.right+t.margin.right<o.offsetX||void 0===o&&t.corners.right+t.margin.right<i.corners.topCenter.x?Bn.Two:Bn.Four:void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.topCenter.x?Bn.Four:Bn.Two:void 0!==a&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(a.offsetY-i.corners.top)<=25||void 0!==o&&Math.abs(o.offsetX-t.corners.topCenter.x)>=25&&t.corners.middleRight.y<o.offsetY?Bn.Two:t.corners.right<i.corners.left?Bn.Four:e.sourceWrapper!==e.targetWrapper&&(bd(e.sourceWrapper).containsPoint(l)||bd(e.targetWrapper).containsPoint(s))?Bn.Two:Bn.Four;return r}(e,t,i,r):"Right"===t.direction&&"Bottom"===i.direction?o=function(e,t,i,n){var r;t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var o=e.sourcePortWrapper,a=e.targetPortWrapper;Math.max(t.point.x,t.corners.right),t.point.y,i.point.x,Math.max(i.point.y,i.corners.bottom);if(n){var s;s=o,o=a,a=s}r=void 0!==o&&o.offsetY>i.corners.bottom+i.margin.bottom||void 0===o&&t.corners.middleRight.y>i.corners.bottom+i.margin.bottom?t.corners.top>i.corners.bottom?void 0!==a&&t.corners.right+t.margin.right<a.offsetX||void 0===a&&t.corners.right+t.margin.right<i.corners.bottomCenter.x?Bn.Two:Bn.Four:void 0!==a&&t.corners.left>a.offsetX||void 0===a&&t.corners.left>i.corners.bottomCenter.x?Bn.Four:Bn.Two:void 0!==o&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-i.corners.bottom)<=25?Bn.Two:(t.corners.right,i.corners.left,Bn.Four);return r}(e,t,i,r):"Bottom"===t.direction&&"Top"===i.direction?o=function(e,t){var i,n=e.point.x-t.point.x,r=(e.point.y,t.point.y,e.point.x,Math.max(e.point.y,e.corners.bottom),t.point.x,Math.min(t.point.y,t.corners.top),10);e.corners.right+r<t.corners.left-r||e.corners.left-r>t.corners.right+r||(r=0);e.margin={left:r,right:r,top:r,bottom:r},t.margin={left:r,right:r,top:r,bottom:r},i=0===n&&e.corners.bottom<t.corners.top?Bn.One:e.corners.bottom+e.margin.bottom<t.corners.top-t.margin.top?Bn.Three:(e.corners.right+e.margin.right<t.corners.left-t.margin.left||(e.corners.left,e.margin.left,t.corners.right,t.margin.right),Bn.Five);return i}(t,i):"Bottom"===t.direction&&"Bottom"===i.direction?(t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},o=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(i.point.y-i.point.y));n=t.corners.bottom<i.corners.bottom?void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&t.corners.bottomCenter.x<i.corners.left-i.margin.left||void 0!==r&&r.offsetX>i.corners.right+i.margin.right||void 0===r&&t.corners.bottomCenter.x>i.corners.right+i.margin.right?Bn.Three:t.corners.bottom<i.corners.top?Bn.Five:0===a||0===s?Bn.One:Bn.Three:void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.left||void 0!==o&&t.corners.right<o.offsetX||void 0===o&&t.corners.right<i.corners.right?Bn.Three:t.corners.top>i.corners.bottom?Bn.Five:0===a||0===s?Bn.One:Bn.Three;return n}(e,t,i)):"Bottom"===t.direction&&"Left"===i.direction?o=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=e.targetPortWrapper;t.point.x,Math.max(t.point.y,t.corners.bottom),Math.min(i.point.x,i.corners.left),i.point.y;if(n){var s;s=o,o=a,a=s}r=void 0!==o&&o.offsetX<i.corners.left-i.margin.left||void 0===o&&t.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?t.corners.right<i.corners.left?void 0!==a&&t.corners.bottom+t.margin.bottom<a.offsetY||void 0===a&&t.corners.bottom+t.margin.bottom<i.corners.middleLeft.y?Bn.Two:Bn.Four:void 0!==a&&t.corners.top>a.offsetY||void 0===a&&t.corners.top>i.corners.middleLeft.y?Bn.Four:Bn.Two:void 0!==a&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(a.offsetY-t.corners.bottom)<=25?Bn.Two:Bn.Four;return r}(e,t,i,r):"Left"===t.direction&&"Left"===i.direction?o=function(e,t,i){var n=e.sourcePortWrapper,r=e.targetPortWrapper;t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var o,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(t.point.y-i.point.y));o=t.corners.left<i.corners.left?void 0!==r&&t.corners.bottom+t.margin.bottom<r.offsetY||void 0===r&&t.corners.bottom+t.margin.bottom<i.corners.middleLeft.y||void 0!==r&&t.corners.top-t.margin.top>r.offsetY||void 0===r&&t.corners.top-t.margin.top>i.corners.middleLeft.y?Bn.Three:t.corners.right<i.corners.left||i.corners.right<t.corners.left?Bn.Five:0===a||0===s?Bn.One:Bn.Three:void 0!==n&&n.offsetY<i.corners.top-i.margin.top||void 0===n&&t.corners.middleLeft.y<i.corners.top||void 0!==n&&n.offsetY>i.corners.bottom+i.margin.bottom||void 0===n&&t.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?Bn.Three:t.corners.left>i.corners.right?Bn.Five:0===a||0===s?Bn.One:Bn.Three;return o}(e,t,i):"Left"===t.direction&&"Top"===i.direction?o=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=e.targetPortWrapper,s={x:Math.min(t.point.x,t.corners.left),y:t.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(n){var c;c=o,o=a,a=c}r=void 0!==o&&o.offsetY<i.corners.top-i.margin.top||void 0===o&&(t.corners.bottom<i.corners.top-i.margin.top||t.corners.middleLeft.y<i.corners.top-i.margin.top)?t.corners.bottom<i.corners.top?void 0!==a&&t.corners.left-t.margin.left>a.offsetX||void 0===a&&t.corners.left-t.margin.left>i.corners.topCenter.x?Bn.Two:Bn.Four:void 0!==a&&t.corners.right<a.offsetX||void 0===a&&t.corners.right<i.corners.topCenter.x?Bn.Four:Bn.Two:void 0!==o&&Math.abs(t.corners.left-i.corners.right)<=25&&Math.abs(o.offsetY-i.corners.top)<=25||e.sourceWrapper!==e.targetWrapper&&(bd(e.sourceWrapper).containsPoint(l)||bd(e.targetWrapper).containsPoint(s))?Bn.Two:(t.corners.left,i.corners.right,Bn.Four);return r}(e,t,i,r):"Top"===t.direction&&"Top"===i.direction&&(o=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(t.point.y-i.point.y));t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},n=t.corners.top<i.corners.top?void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.left||void 0!==o&&t.corners.right<o.offsetX||void 0===o&&t.corners.right<i.corners.right?Bn.Three:t.corners.bottom<i.corners.top?Bn.Five:0===a||0===s?Bn.One:Bn.Three:void 0!==r&&r.offsetX>i.corners.right||void 0===r&&t.corners.left>i.corners.right||void 0!==r&&r.offsetX<i.corners.left||void 0===r&&t.corners.bottomRight.x<i.corners.left?Bn.Three:t.corners.top>i.corners.bottom?Bn.Five:0===a||0===s?Bn.One:Bn.Three;return n}(e,t,i));r&&go(t,i);return function(e,t,i,n,r){var o,a=e.sourceWrapper,s=e.targetWrapper,l=(e.targetPortWrapper,a.corners),c=s.corners,h=20;if((i.direction!==n.direction||t===Bn.Five)&&(i.direction===vo(n.direction)||t===Bn.Three))switch(i.direction){case"Left":l.middleLeft.x>c.middleRight.x&&(h=Math.min(h,(l.middleLeft.x-c.middleRight.x)/2));break;case"Right":l.middleRight.x<c.middleLeft.x&&(h=Math.min(h,(c.middleLeft.x-l.middleRight.x)/2));break;case"Top":l.topCenter.y>c.bottomCenter.y&&(h=Math.min(h,(l.topCenter.y-c.bottomCenter.y)/2));break;case"Bottom":l.bottomCenter.y<c.topCenter.y&&(h=Math.min(h,(c.topCenter.y-l.bottomCenter.y)/2))}h=co(l,i,h),r&&(h=Math.max(h,r));t===Bn.One&&(o=[i.point,n.point]);t===Bn.Two&&(o=ho(i,n));t===Bn.Three&&(o=po(e,i,n,h));if(t===Bn.Four){o=uo(i,n,void 0,o,h)}t===Bn.Five&&(o=function(e,t,i){void 0===i&&(i=20);var n,r,o=i,a=e.corners.left-e.margin.left,s=e.corners.right+e.margin.right,l=e.corners.bottom+e.margin.bottom,c=e.corners.top-e.margin.top,h=t.corners.left-t.margin.left,d=t.corners.right+t.margin.right,p=t.corners.bottom+t.margin.bottom,u=t.corners.top-t.margin.top;switch(e.direction){case"Left":(c>u&&c<p||l<p&&l>u)&&a>h&&a<=d&&i>=20&&(o=e.point.x-t.corners.left+o),r=no(e.point,o,180);break;case"Top":(a>h&&a<d||s<d&&s>h)&&c>u&&c<=p&&i>=20&&(o=e.point.y-t.corners.top+o),r=no(e.point,o,270);break;case"Right":(c>u&&c<p||l<p&&l>u)&&s<d&&s>=h&&i>=20&&(o=t.corners.right-e.point.x+o),r=no(e.point,o,0);break;case"Bottom":(a>h&&a<d||s<d&&s>h)&&l<p&&l>=u&&i>=20&&(o=t.corners.bottom-e.point.y+o),r=no(e.point,o,90)}if(n=[e.point,r],"Top"===e.direction||"Bottom"===e.direction){var f=e.direction;e.direction=r.x>t.point.x?"Left":"Right",e.point=r,n=uo(e,t,f,n)}else{f=e.direction;e.direction=r.y>t.point.y?"Top":"Bottom",e.point=r,n=uo(e,t,f,n)}return n}(i,n,h));return o}(e,o,t,i,n)}(e,u,f)}return h}(e,d.direction,p.direction,d.point,p.point);Zr(e),(e.sourceWrapper||e.targetWrapper)&&function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=e.sourceWrapper,s=t.point,l={left:0,right:0,top:0,bottom:0},c={x:0,y:0},h="Top";a?(s=i.point,l=t.margin):(a=e.targetWrapper,l=i.margin);if("Orthogonal"===e.type)if(e.segments&&e.segments.length>0&&e.sourceWrapper&&e.segments[0].direction)t.direction=e.segments[0].direction,c=io(a.corners,t.direction),n=io(a.corners,vo(t.direction)),c=ro(e,a,c,n,!1);else{var d={corners:null,direction:null,point:null,margin:null};eo(a,{corners:null,direction:null,point:s,margin:l},d,e),c=d.point,h=d.direction}else{var p=void 0;e.segments&&e.segments.length>1&&(p=a===e.sourceWrapper?e.segments[0].point:e.segments[e.segments.length-2].point),c=ro(e,a,a.bounds.center,e.segments&&e.segments.length>1?p:s,a===e.targetWrapper)}a===e.sourceWrapper?(t.direction=t.direction||h,t.point=c,e.sourcePortWrapper&&(t.point={x:r.offsetX,y:r.offsetY},e.sourcePadding&&(t.point=Vr(e,t,i,!1)))):(i.direction=i.direction||h,i.point=c,e.targetPortWrapper&&(i.point={x:o.offsetX,y:o.offsetY},e.targetPadding&&(i.point=Vr(e,t,i,!0))))}(e,d,p);if("Straight"===e.type||"Bezier"===e.type)h=Gr(e,d,p);else if("Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].length&&null!==e.segments[0].direction)h=function(e,t,i,n,r,o,a){var s,l,c,h,d,p=[];if(Zr(e),e.segments.length>0){for(var u=0;u<e.segments.length;u++){var f=e.segments[u];if(0===u&&void 0!==e.sourcePortWrapper&&(h={x:o.offsetX,y:o.offsetY},c=mo(h,bd(n),n.bounds,!1),f.direction===vo(c)&&(f.direction=c)),u>0&&e.segments[u-1].direction===f.direction)u=Kr(e,u,t);else{var g=e.segments[u-1];t.point=f.direction?Nr(t,f):g.points[g.points.length-1]}if(u===e.segments.length-1&&(a||r?e.targetWrapper&&void 0===e.targetPortWrapper?(Qr(e,t),l=Br(e,t,i)):l=_r(e,t,i):l=zr(e,t,i),l))if(Fr(l,e,t),f.points=[],l.length>=2)for(s=0;s<l.length;s++)f.points.push(l[s]);else d=u;if(o&&0===u){var m=Wr(e,o,n);m&&(t.point=m)}}void 0!==d&&(d===e.segments.length-1&&(e.segments[d-1].direction=null,e.segments[d-1].length=null),e.segments.splice(d,1)),p=Jr(e,p)}return p}(e,d,p,a,s,l,c);else{var g=void 0;d.direction?g=co(a.bounds,d,20):d.direction=p.direction?void 0!==e.targetPortWrapper?p.direction:vo(p.direction):Qi.direction(d.point,p.point),e.segments[0].points=h=po(e,d,p,g)}return h}(e,"Straight"!==e.type&&e.sourceWrapper?e.sourceWrapper.corners.center:function(e){var t;if(e.sourcePortWrapper){var i=e.sourcePortWrapper,n=e.sourceWrapper,r={x:i.offsetX,y:i.offsetY};mo(r,bd(n),n.bounds,!1);t=r}else if(e.sourceID&&e.sourceWrapper)if(e.targetWrapper){var o=e.sourceWrapper.corners.center,a=e.targetWrapper.corners.center;t=ro(e,e.sourceWrapper,o,a,!1)}else t=e.sourcePoint;else t=e.sourcePoint;return t}(e),e.targetPoint,t),oo(e,i[0],!1),oo(e,i[i.length-1],!0),i}function Nr(e,t){var i,n,r;return e.direction=t.direction,t.points=[],t.points.push(e.point),r="Left"===t.direction||"Top"===t.direction?-t.length:t.length,n="Left"===t.direction||"Right"===t.direction?0:90,i=no(e.point,r,n),t.points.push(i),i}function zr(e,t,i){var n,r,o,a;(t.corners=e.sourceWrapper?e.sourceWrapper.corners:void 0,e.sourcePortWrapper)&&(o=mo({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},bd(e.sourceWrapper),e.sourceWrapper.bounds,!1),!t.corners||"Bottom"!==t.direction&&"Top"!==t.direction?!t.corners||"Left"!==t.direction&&"Right"!==t.direction||i.point.y>t.corners.top&&i.point.y<t.corners.bottom&&(r=t.point.x>i.point.x?"Left":"Right"):i.point.x>t.corners.left&&i.point.x<t.corners.right&&(r=t.point.y>i.point.y?"Top":"Bottom"));e.sourcePortWrapper&&o===vo(r)?(("Left"===o||"Right"===o)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.center.y&&i.point.y>=t.corners.top&&i.point.y<=t.corners.center.y?(t.direction="Top",a=t.point.y-t.corners.top+20):("Left"===o||"Right"===o)&&t.point.y>t.corners.center.y&&t.point.y<=t.corners.bottom&&i.point.y>t.corners.center.y&&i.point.y<=t.corners.bottom?(t.direction="Bottom",a=t.corners.bottom-t.point.y+20):("Top"===o||"Bottom"===o)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.center.x&&i.point.x>=t.corners.left&&i.point.x<=t.corners.center.x?(t.direction="Left",a=t.point.x-t.corners.left+20):("Top"===o||"Bottom"===o)&&t.point.x<=t.corners.right&&t.point.x>t.corners.center.x&&i.point.x<=t.corners.right&&i.point.x<t.corners.center.x&&(t.direction="Right",a=t.corners.right-t.point.x+20),t.direction&&a&&(n=po(e,t,i,a,!0))):(t.direction=r||qr(t.direction,t.point,i.point),n=ho(t,i));return n}function Br(e,t,i){var n;i.corners=e.targetWrapper.corners,eo(e.targetWrapper,t,i,e);var r=qr(i.direction,t.point,i.point);t.direction!==i.direction||"Left"!==t.direction&&"Right"!==t.direction?(t.direction=r,n=ho(t,i)):(t.direction=r,n=po(e,t,i,e.targetWrapper.width/2+20),t.point=n[1],eo(e.targetWrapper,t,i,e),n=po(e,t,i));return n}function Hr(e,t,i){var n,r,o;i.corners=e.targetWrapper.corners,"Left"!==t.direction&&"Right"!==t.direction?i.corners.center.y!==t.point.y||i.corners.left<=t.point.x&&t.point.x<=i.corners.right?i.corners.center.y===t.point.y&&"Bottom"===e.segments[e.segments.length-2].direction||i.corners.center.y>t.point.y&&t.point.y>=i.corners.top?(r="Top",o=t.point.y-i.corners.top+20):i.corners.center.y===t.point.y&&"Top"===e.segments[e.segments.length-2].direction||i.corners.center.y<t.point.y&&t.point.y<=i.corners.bottom?(r="Bottom",o=i.corners.bottom-t.point.y+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.top<=t.point.y&&t.point.y<=t.corners.bottom&&(r=t.direction,o=t.point.y>i.point.y?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):(r="Top",o=i.corners.height/2+20):i.corners.center.x!==t.point.x||i.corners.top<t.point.y&&t.point.y<=i.corners.bottom?i.corners.center.x===t.point.x&&"Right"===e.segments[e.segments.length-2].direction||i.corners.center.x>t.point.x&&t.point.x>=i.corners.left?(r="Left",o=t.point.x-i.corners.left+20):i.corners.center.x===t.point.x&&"Left"===e.segments[e.segments.length-2].direction||i.corners.center.x<=t.point.x&&t.point.x<=i.corners.right?(r="Right",o=i.corners.right-t.point.x+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.left<=t.point.x&&t.point.x<=t.corners.right&&(r=t.direction,o=t.point.x>i.point.x?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20):(r="Left",o=i.corners.width/2+20);var a="Left"===r||"Top"===r?-o:o,s="Left"===r||"Right"===r?0:90;n=t.point,t.point=no(t.point,a,s),t.direction=Qi.direction(t.point,i.point),void 0===e.sourcePortWrapper||void 0===e.targetPortWrapper||t.corners.center.x!==i.corners.center.x&&t.corners.center.y!==i.corners.center.y||(t.direction=i.direction);var l=po(e,t,i);return l.splice(0,0,n),l}function _r(e,t,i){var n,r;(i.corners=e.targetWrapper.corners,void 0!==e.sourcePortWrapper)&&(r=mo({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},bd(e.sourceWrapper),e.sourceWrapper.bounds,!1));var o=function(e,t,i,n){var r=!1;switch(i.direction){case"Left":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Right"===n&&t.point.x>i.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||("Bottom"===n&&t.point.y>i.point.y||"Top"===n&&t.point.y<i.point.y)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction="Right"===n?t.point.y>i.point.y?"Top":"Bottom":t.point.x<i.point.x?"Right":"Left",r=!0):t.point.x>i.point.x&&(t.point.y>i.point.y||t.point.y<i.point.y)&&!(i.corners.top>t.point.y&&i.corners.bottom<t.point.y)?t.direction="Left":t.point.x<i.point.x&&t.point.y>i.point.y||t.point.x>i.point.x&&t.point.y<=i.point.y&&i.corners.top<t.point.y&&i.corners.center.y>=t.point.y?t.direction="Top":t.point.x<i.point.x&&t.point.y<i.point.y||t.point.x>i.point.x&&t.point.y>i.point.y&&i.corners.bottom<t.point.y&&i.corners.center.y>t.point.y?t.direction="Bottom":t.point.y===i.point.y&&t.point.x<i.point.x&&(t.direction="Right");break;case"Right":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&("Bottom"===n&&t.point.y>i.point.y||"Top"===n&&t.point.y<i.point.y)&&t.point.x>i.point.x&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction=t.point.x>i.point.x?"Left":"Right",r=!0):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Left"===n&&t.point.x<i.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=t.point.y>i.point.y?"Top":"Bottom",r=!0):t.point.x<i.point.x&&i.corners.top<=t.point.y&&i.corners.bottom>=t.point.y&&t.point.y===i.point.y||t.point.y>i.point.y&&t.point.x>i.point.x?t.direction="Top":t.point.y<i.point.y&&t.point.x>i.point.x?t.direction="Bottom":t.point.x<i.point.x&&(t.point.y>i.point.y||t.point.y<i.point.y)?t.direction="Right":t.point.y===i.point.y&&t.point.x>i.point.x&&(t.direction="Left");break;case"Top":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Bottom"===n&&t.point.y>i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right||("Right"===n&&t.point.x>i.point.x||"Left"===n&&i.point.y>t.point.y&&i.point.x>t.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction="Bottom"===n?t.point.x>i.point.x?"Left":"Right":t.point.y<i.point.y?"Bottom":"Top",r=!0):t.point.x===i.point.x&&t.point.y<i.point.y?t.direction="Bottom":t.point.y>i.point.y&&t.point.x>i.corners.left&&t.point.x<i.corners.right?t.direction="Left":t.point.y>=i.point.y?t.direction="Top":t.point.y<i.point.y&&t.point.x>i.point.x?t.direction="Left":t.point.y<i.point.y&&t.point.x<i.point.x&&(t.direction="Right");break;case"Bottom":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&(("Right"===n||"Left"===n&&i.point.x>t.point.x)&&t.point.y>i.point.y&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Top"===n&&t.point.y<i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?(t.direction="Right"===n||"Left"===n?t.point.y>i.point.y?"Top":"Bottom":t.point.x>i.point.x?"Left":"Right",r=!0):t.point.y<i.point.y&&t.point.x>i.corners.left&&i.corners.right>t.point.x?t.point.y<i.point.y&&t.point.x>i.corners.left&&i.corners.center.x>=t.point.x?t.direction="Left":t.point.y<i.point.y&&t.point.x<i.corners.right&&i.corners.center.x<t.point.x&&(t.direction="Right"):t.point.y>i.point.y&&t.point.x>i.point.x?t.direction="Left":t.point.y>i.point.y&&t.point.x<i.point.x?t.direction="Right":t.point.y<=i.point.y&&(t.point.x>i.point.x||i.point.x>t.point.x)&&(t.direction="Bottom")}return r}(e,t,i,r);return void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&i.direction===vo(r)&&(("Left"===i.direction&&t.point.x>i.point.x||"Right"===i.direction&&t.point.x<i.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Bottom"===i.direction&&t.point.y<i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?n=Hr(e,t,i):t.direction===i.direction?n=po(e,t,i):("Left"===i.direction&&t.point.x>i.point.x||"Right"===i.direction&&t.point.x<i.point.x)&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.y<=i.point.y&&i.corners.top<=t.point.y&&i.corners.bottom>=t.point.y||"Top"===i.direction&&t.point.y>i.point.y||"Bottom"===i.direction&&t.point.y<i.point.y&&i.corners.left<=t.point.x&&i.corners.right>=t.point.x?n=Hr(e,t,i):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Left"===t.direction||"Right"===t.direction)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom&&("Top"===i.direction||"Bottom"===i.direction)&&i.corners.center.x===t.corners.center.x?(t.direction="Top"===i.direction?"Bottom":"Top",n=po(e,t,i,"Top"===i.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20)):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&("Left"===i.direction||"Right"===i.direction)&&i.corners.center.y===t.corners.center.y?(t.direction="Left"===i.direction?"Right":"Left",n=po(e,t,i,"Left"===i.direction?t.corners.right-t.point.x+20:t.point.x-t.corners.left+20)):n=o?po(e,t,i,"Left"===t.direction||"Right"===t.direction?"Left"===t.direction?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20:"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):ho(t,i),n}function Wr(e,t,i){var n,r={x:t.offsetX,y:t.offsetY},o=bd(i),a=mo(r,o,i.bounds,!1),s=e.segments[0];return s.direction!==a&&(!function(e,t,i,n,r,o){var a,s,l=[];l.push(n),n.y===r.y&&("Left"===t&&r.x<n.x||"Right"===t&&r.x>n.x)||n.x===r.x&&("Top"===t&&r.y<n.y||"Bottom"===t&&r.y>n.y)||("Top"===t||"Bottom"===t?"Top"===t&&r.y<n.y&&r.y>n.y-13||"Bottom"===t&&r.y>n.y&&r.y<n.y+13?(s="Top"===t?i.top-13:i.bottom+13,l.push({x:n.x,y:s}),l.push({x:n.x+(r.x-n.x)/2,y:s}),l.push({x:n.x+(r.x-n.x)/2,y:r.y})):Math.abs(n.x-r.x)>13&&("Top"===t&&r.y<n.y||"Bottom"===t&&r.y>n.y)?l.push({x:n.x,y:r.y}):(s="Top"===t?i.top-13:i.bottom+13,a=r.x<n.x?i.left-13:i.right+13,l.push({x:n.x,y:s}),l.push({x:r.x,y:s})):"Left"===t&&r.x<n.x&&r.x>n.x-13||"right"===t&&r.x>n.x&&r.x<n.x+13?(a="Left"===t?i.left-13:i.right+13,l.push({x:a,y:n.y}),l.push({x:a,y:n.y+(r.y-n.y)/2}),l.push({x:r.x,y:n.y+(r.y-n.y)/2})):Math.abs(n.y-r.y)>13&&("Left"===t&&r.x<n.x||"Right"===t&&r.x>n.x)?l.push({x:r.x,y:n.y}):(a="Left"===t?i.left-13:i.right+13,l.push({x:a,y:n.y}),l.push({x:a,y:r.y})),o&&(l.push(e.points[0]),l.reverse()),e.points=l)}(s,a,o,s.points[0],s.points[s.points.length-1],!1),n=s.points[s.points.length-1],s.direction=Qi.direction(s.points[s.points.length-2],s.points[s.points.length-1])),n}function Fr(e,t,i){var n,r=t.segments[t.segments.length-2],o=r.points[r.points.length-1];("Top"!==r.direction&&"Bottom"!==r.direction||o.x!==e[1].x)&&("Left"!==r.direction&&"Right"!==r.direction||o.y!==e[1].y)||(r.points[r.points.length-1]=e[1],n=Qi.direction(r.points[0],r.points[r.points.length-1]),void 0!==t.sourceWrapper&&void 0===t.sourcePortWrapper&&n===vo(r.direction)&&("Left"===r.direction||"Right"===r.direction?r.points[0].x="Right"===r.direction?r.points[0].x-t.sourceWrapper.corners.width:r.points[0].x+t.sourceWrapper.corners.width:r.points[0].y="Bottom"===r.direction?r.points[0].y-t.sourceWrapper.corners.height:r.points[0].y+t.sourceWrapper.corners.height),r.direction=n,r.length=Qi.distancePoints(r.points[0],r.points[r.points.length-1]),e.splice(0,1))}function Vr(e,t,i,n){var r=e.sourcePortWrapper,o=e.targetPortWrapper,a=n?e.targetPadding:e.sourcePadding,s=n?o:r,l=new hn(s.bounds.x-a,s.bounds.y-a,s.actualSize.width+2*a,s.actualSize.height+2*a),c=[l.topLeft,l.topRight,l.bottomRight,l.bottomLeft];c[c.length]=c[0];c.length;var h={x1:t.point.x,y1:t.point.y,x2:i.point.x,y2:i.point.y},d=n?i.point:t.point;return ao(h,c,!0,d)||d}function Ur(e,t){var i=[],n=tc(e,e.corners,t);n.push(n[0]);for(var r=0;r<n.length-1;r++)i.push(Yr(n[r],n[r+1]));return i}function Yr(e,t){return{x1:e.x,y1:e.y,x2:t.x,y2:t.y}}function Xr(e,t,i){var n,r=e.rotateAngle+e.parentTransform;if(r){if(r<45)return t;if(r<=135)n={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.middleLeft,topRight:t.topLeft,middleLeft:t.bottomCenter,center:i.center,middleRight:t.topCenter,bottomLeft:t.bottomRight,bottomCenter:t.middleRight,bottomRight:t.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else if(r<=225)n={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.bottomCenter,topRight:t.bottomRight,middleLeft:t.middleRight,center:i.center,middleRight:t.middleLeft,bottomLeft:t.topLeft,bottomCenter:t.topCenter,bottomRight:t.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else{if(!(r<=315))return t;n={width:t.width,height:t.height,topLeft:t.topRight,topCenter:t.middleRight,topRight:t.bottomRight,middleLeft:t.topCenter,center:i.center,middleRight:t.bottomCenter,bottomLeft:t.topLeft,bottomCenter:t.middleLeft,bottomRight:t.bottomLeft,left:i.left,right:i.right,top:i.top,bottom:i.bottom}}return n}return t}function Gr(e,t,i){var n=[];if(e.segments&&e.segments.length>0){var r=void 0,o=[],a=t.point;for(r=0;r<e.segments.length;r++){var s=e.segments[r];if((o=[]).push(a),r!==e.segments.length-1?(o.push(s.point),a=s.point):o.push(i.point),e.segments[r].points=o,e.segments.length>1&&Qi.equals(s.points[0],s.points[1])&&e.segments.splice(r,1),s)for(var l=0;l<s.points.length;l++)(l>0||0===r)&&n.push(s.points[l])}}return n}function qr(e,t,i){return"Top"===e||"Bottom"===e?i.x>t.x?"Right":"Left":i.y>t.y?"Bottom":"Top"}function Zr(e){if("Straight"===e.type||"Bezier"===e.type){if(0===e.segments.length||e.segments.length>0&&!Qi.isEmptyPoint(e.segments[e.segments.length-1].point)){var t=void 0;t="Bezier"===e.type?new Ha(e,"segments",{type:"Bezier"},!0):new Ba(e,"segments",{type:"Straight"},!0),e.segments.push(t)}}else if(0===e.segments.length||e.segments[e.segments.length-1].direction){t=new _a(e,"segments",{type:"Orthogonal"},!0);e.segments.push(t)}}function Kr(e,t,i){var n=e.segments[t],r="Left"===n.direction||"Top"===n.direction?-n.length:n.length,o="Left"===n.direction||"Right"===n.direction?0:90,a=no(i.point,r,o);return e.segments[t-1].length+=n.length,e.segments[t-1].points[1]=i.point=a,e.segments.splice(t,1),--t}function $r(e,t,i){var n,r;e.sourcePortWrapper&&(r=mo({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},bd(e.sourceWrapper),e.sourceWrapper.bounds,!1));eo(e.targetWrapper,t,i,e);var o=qr(i.direction,t.point,i.point);if(void 0===e.sourcePortWrapper||t.direction!==i.direction||("Top"!==t.direction&&"Bottom"!==t.direction||t.corners.center.x!==i.corners.center.x)&&("Left"!==t.direction&&"Right"!==t.direction||t.corners.center.y!==i.corners.center.y))if(i.point.x>=t.corners.left&&i.point.x<=t.corners.right&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom){t.direction=i.point.y>t.point.y?"Bottom":"Top",n=po(e,t,i,"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20)}else if(e.sourcePortWrapper&&r===vo(o)){var a;("Left"===r||"Right"===r)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=i.point.y>t.point.y?"Bottom":"Top",a=t.corners.height/2+20):("Top"===r||"Bottom"===r)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&(t.direction=i.point.x>t.point.x?"Right":"Left",a=t.corners.width/2+20),t.direction&&a?n=po(e,t,i,a,!0):(t.direction=o,n=ho(t,i))}else if(!e.sourcePortWrapper||r!==i.direction||"Top"!==r&&"Bottom"!==r||t.corners.center.x!==i.corners.center.x)t.direction=o,n=ho(t,i);else{t.direction=i.point.y>t.point.y?"Bottom":"Top",n=po(e,t,i,"Bottom"===t.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20)}else t.direction=o,n=po(e,t,i,"Top"===o||"Bottom"===o?e.sourceWrapper.height/2+20:e.sourceWrapper.width/2+20),t.point=n[1],"Left"===o||"Right"===o?(i.direction=o,i.point="Left"===o?i.corners.middleLeft:i.corners.middleRight):eo(e.targetWrapper,t,i,e),n=po(e,t,i);return n}function Qr(e,t){if(void 0!==e.targetWrapper&&void 0===e.targetPortWrapper&&bd(e.targetWrapper).containsPoint(t.point)){var i=e.targetWrapper,n=e.segments[e.segments.length-2],r=n.points[n.points.length-1],o=vo(n.direction);"Bottom"===o?r.y<i.corners.bottom&&(n.points[n.points.length-1].y=i.corners.bottom+20,n.length=Qi.distancePoints(n.points[0],n.points[n.points.length-1])):"Top"===o?r.y>i.corners.top&&(n.points[n.points.length-1].y=i.corners.top-20,n.length=Qi.distancePoints(n.points[0],n.points[n.points.length-1])):"Left"===o?r.x>i.corners.left&&(n.points[n.points.length-1].x=i.corners.left-20,n.length=Qi.distancePoints(n.points[0],n.points[n.points.length-1])):"Right"===o&&r.x<i.corners.right&&(n.points[n.points.length-1].x=i.corners.right+20,n.length=Qi.distancePoints(n.points[0],n.points[n.points.length-1])),t.point=n.points[n.points.length-1]}}function Jr(e,t){for(var i=0;i<e.segments.length;i++)for(var n=e.segments[i],r=0;r<n.points.length;r++)(r>0||0===i)&&t.push(n.points[r]);return t}function eo(e,t,i,n){var r,o={x:0,y:0},a=Xr(e,e.corners,e.bounds),s=t.margin,l=t.point;if(a.bottomCenter.y+s.bottom<l.y)r="Bottom",o=a.bottomCenter;else if(a.topCenter.y-s.top>l.y)r="Top",o=a.topCenter;else if(a.middleLeft.x-s.left>l.x)r="Left",o=a.middleLeft;else if(a.middleRight.x+s.right<l.x)r="Right",o=a.middleRight;else{var c=Math.abs(l.y-a.topCenter.y),h=Math.abs(l.x-a.middleRight.x),d=Math.abs(l.y-a.bottomCenter.y),p=Math.abs(l.x-a.middleLeft.x),u=Number.MAX_VALUE;u=c,r="Top",o=a.topCenter,u>h&&(u=h,r="Right",o=a.middleRight),u>d&&(u=d,r="Bottom",o=a.bottomCenter),u>p&&(r="Left",o=a.middleLeft)}i.point=o,i.direction=r;var f=io(a,vo(i.direction));i.point=ro(n,e,i.point,f,e===n.targetWrapper)}function to(e,t){var i={x:t.x,y:e.y},n=(Qi.findLength(e,i),Qi.findLength(i,t)),r=Qi.findLength(t,e),o=Math.asin(n/r);return o=180*o/Math.PI,e.x<t.x?e.y>t.y&&(o=360-o):o=e.y<t.y?180-o:180+o,o}function io(e,t){var i;switch(t){case"Left":i=e.middleLeft;break;case"Top":i=e.topCenter;break;case"Right":i=e.middleRight;break;case"Bottom":i=e.bottomCenter}return i}function no(e,t,i){return Qi.transform(e,i,t)}function ro(e,t,i,n,r){i={x:i.x,y:i.y},n={x:n.x,y:n.y};var o,a,s,l=Qi.findAngle(n,i),c=r?e.targetWrapper:e.sourceWrapper,h=r?e.targetPadding:e.sourcePadding,d=r||"Orthogonal"===e.type?i:n;Qi.transform(i,l,Math.max(c.actualSize.height/2,c.actualSize.width/2));o=c;var p=Dd(-c.parentTransform,c.offsetX,c.offsetY,i),u=Dd(-c.parentTransform,c.offsetX,c.offsetY,n);if("Orthogonal"===e.type){p.x===u.x&&(p.y<u.y?p.y-=5:p.y+=5),p.y===u.y&&(p.x<u.x?p.x-=5:p.x+=5),i=Dd(c.parentTransform,c.offsetX,c.offsetY,p)}else{r?Qi.findAngle(i,n):Qi.findAngle(n,i);if(r){var f=Qi.findAngle(i,n);n=Qi.transform({x:n.x,y:n.y},f,Math.max(c.actualSize.width,c.actualSize.height))}else{var g=Qi.findAngle(n,i);i=Qi.transform({x:i.x,y:i.y},g,Math.max(c.actualSize.width,c.actualSize.height))}}(e.sourcePadding||e.targetPadding)&&(a=new hn(c.bounds.x-h,c.bounds.y-h,c.actualSize.width+2*h,c.actualSize.height+2*h)),c instanceof dr&&c.data?(s=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:o.getPoints(),o.data.split("m").length-1+(o.data.split("M").length-1)===1&&(s[s.length]=s[0])):(s=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:tc(c,c.corners))[s.length]=s[0];s.length;return ao({x1:i.x,y1:i.y,x2:n.x,y2:n.y},s,!0,d)||i}function oo(e,t,i){return t.x=Math.round(100*t.x)/100,t.y=Math.round(100*t.y)/100,i?e.targetPoint=t:e.sourcePoint=t,t}function ao(e,t,i,n){var r,o=t.length,a={x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y},s=so(e,a);if(s&&(r=Qi.distancePoints(s,n)),isNaN(r)||r>0)for(var l=1;l<o-1;l++){var c=so(e,a={x1:t[l].x,y1:t[l].y,x2:t[l+1].x,y2:t[l+1].y});if(c){var h=Qi.distancePoints(c,n);if((isNaN(r)||r>h)&&(r=h,s=c),r>=0&&r<=1)break}}return s}function so(e,t){var i,n,r,o,a,s,l,c,h,d,p,u,f,g=e.x1,m=e.y1,y=e.x2,v=e.y2,b=t.x1,w=t.y1,x=t.x2,S=t.y2;return d=(i=v-m)*x+(r=g-y)*S+(a=y*m-g*v),0!==(h=i*b+r*w+a)&&0!==d&&lo(h,d)?null:(c=(n=S-w)*y+(o=b-x)*v+(s=x*w-b*S),0!==(l=n*g+o*m+s)&&0!==c&&lo(l,c)||0===(p=i*o-n*r)?null:(u=p<0?-p/2:p/2,u=0,{x:(f=r*s-o*a)<0?(f-u)/p:(f+u)/p,y:(f=n*a-i*s)<0?(f-u)/p:(f+u)/p}))}function lo(e,t){return e*t>=0}function co(e,t,i){switch(t.direction){case"Left":t.point.x>e.left&&(i=t.point.x-e.left>i?t.point.x-e.left+i:i);break;case"Right":t.point.x<e.right&&(i=e.right-t.point.x>i?e.right-t.point.x+i:i);break;case"Top":t.point.y>e.top&&(i=t.point.y-e.top>i?t.point.y-e.top+i:i);break;case"Bottom":t.point.y<e.bottom&&(i=e.bottom-t.point.y>i?e.bottom-t.point.y+i:i)}return i}function ho(e,t){var i;switch(e.direction){case"Left":case"Right":var n={x:t.point.x,y:e.point.y};i=Qi.equals(e.point,n)||Qi.equals(t.point,n)?[e.point,t.point]:[e.point,n,t.point];break;case"Top":case"Bottom":var r={x:e.point.x,y:t.point.y};i=Qi.equals(e.point,r)||Qi.equals(t.point,r)?[e.point,t.point]:[e.point,r,t.point]}return i}function po(e,t,i,n,r){n||(n=20);var o,a,s,l=e.sourcePortWrapper,c=i.point.x-t.point.x,h=i.point.y-t.point.y;if(!r&&(Math.abs(c)<.001||Math.abs(h)<.001)&&void 0===i.direction)return[t.point,i.point];if(void 0===e.targetWrapper&&Math.abs(c)<=31&&Math.abs(h)<=31){if("Left"===t.direction||"Right"===t.direction?Math.abs(h)<12&&(t.direction=t.point.y>i.point.y?"Top":"Bottom"):Math.abs(c)<12&&(t.direction=t.point.x>i.point.x?"Left":"Right"),Math.abs(c)>12||Math.abs(h)>12)return ho(t,i);n+=5}return"Left"===t.direction||"Right"===t.direction?("Right"===t.direction?(void 0!==i.direction&&"Right"===i.direction&&(n=Math.max(t.point.x,i.point.x)-t.point.x+n),t.point.x>i.point.x&&void 0===l&&(n=-n)):(void 0!==i.direction&&"Left"===i.direction&&(n=t.point.x-Math.min(t.point.x,i.point.x)+n),(t.point.x>i.point.x||void 0!==l||"Left"===t.direction)&&(n=-n)),s=i.point.y-t.point.y,o=no(t.point,n,0),0!==(s=i.point.y-o.y)&&(a=no(o,i.point.y-o.y,90))):"Top"!==t.direction&&"Bottom"!==t.direction||("Bottom"===t.direction?void 0!==i.direction&&"Bottom"===i.direction&&(n=Math.max(t.point.y,i.point.y)-t.point.y+n):(void 0!==i.direction&&"Top"===i.direction&&(n=t.point.y-Math.min(t.point.y,i.point.y)+n),(t.point.y>i.point.y||void 0!==l||"Top"===t.direction)&&(n=-n)),s=i.point.x-t.point.x,o=(t.direction,no(t.point,n,90)),0!==(s=i.point.x-o.x)&&(a=no(o,i.point.x-o.x,0))),0===s?[t.point,i.point]:[t.point,o,a,i.point]}function uo(e,t,i,n,r){var o;switch(void 0===r&&(r=20),void 0===i?(e.margin={left:2,right:2,top:2,bottom:2},t.margin={left:0,right:5,top:0,bottom:5}):"Bottom"===e.direction?t.corners.top>e.corners.bottom&&t.corners.top-e.corners.bottom<20&&(r=(t.corners.top-e.corners.bottom)/2):"Top"===e.direction?t.corners.bottom<e.corners.top&&e.corners.top-t.corners.bottom<20&&(r=(e.corners.top-t.corners.bottom)/2):"Right"===e.direction?t.corners.left>e.corners.right&&t.corners.left-e.corners.right<20&&(r=(t.corners.left-e.corners.right)/2):"Left"===e.direction&&t.corners.right<e.corners.left&&e.corners.left-t.corners.right<20&&(r=(e.corners.left-t.corners.right)/2),e.direction){case"Left":r=function(e,t,i,n){e.corners.left-e.margin.left>t.corners.left-t.margin.left&&e.corners.left-e.margin.left<=t.corners.right+t.margin.right?(("Bottom"===t.direction&&e.point.y<t.point.y||"Top"===t.direction&&e.point.y>t.point.y)&&(n+=e.corners.left-t.corners.left),n+=e.point.x-e.corners.left):void 0!==i&&"Top"!==i&&"Bottom"===t.direction&&e.point.y<t.point.y||void 0!==i&&"Bottom"!==i&&"Top"===t.direction&&t.point.y<e.point.y?n+=Math.abs(e.point.x-t.corners.right):n+=e.point.x-e.corners.left;return n}(e,t,i,r),o=no(e.point,r,180);break;case"Right":r=function(e,t,i,n){e.corners.right+e.margin.right<t.corners.right+t.margin.right&&e.corners.right+e.margin.right>=t.corners.left-t.margin.left?(("Bottom"===t.direction&&e.point.y<t.point.y||"Top"===t.direction&&e.point.y>t.point.y)&&(i+=t.corners.right-e.corners.right),i+=e.corners.right-e.point.x):void 0!==n&&"Top"!==n&&"Bottom"===t.direction&&e.point.y<t.point.y||void 0!==n&&"Bottom"!==n&&"Top"===t.direction&&t.point.y<e.point.y?i+=Math.abs(e.point.x-t.corners.right):i+=e.corners.right-e.point.x;return i}(e,t,r,i),o=no(e.point,r,0);break;case"Top":r=function(e,t,i,n){e.corners.top-e.margin.top>t.corners.top+t.margin.top&&e.corners.top-e.margin.top<=t.corners.bottom+t.margin.bottom?(("Right"===t.direction&&e.point.x<t.point.x||"Left"===t.direction&&e.point.x>t.point.x)&&(n+=e.corners.top-t.corners.top),n+=e.point.y-e.corners.top):void 0!==i&&"Left"!==i&&"Right"===t.direction&&e.point.x<t.point.x||void 0!==i&&"Right"!==i&&"Left"===t.direction&&t.point.x<e.point.x?n+=Math.abs(e.point.y-t.corners.bottom):n+=e.point.y-e.corners.top;return n}(e,t,i,r),o=no(e.point,r,270);break;case"Bottom":r=function(e,t,i,n){e.corners.bottom+e.margin.bottom<t.corners.bottom+t.margin.bottom&&e.corners.bottom+e.margin.bottom>=t.corners.top-t.margin.top?(("Right"===t.direction&&e.point.x<t.point.x||"Left"===t.direction&&e.point.x>t.point.x)&&(i+=t.corners.bottom-e.corners.bottom),i+=e.corners.bottom-e.point.y):void 0!==n&&"Left"!==n&&"Right"===t.direction&&e.point.x<t.point.x||void 0!==n&&"Right"!==n&&"Left"===t.direction&&t.point.x<e.point.x?i+=Math.abs(e.point.y-t.corners.bottom):i+=e.corners.bottom-e.point.y;return i}(e,t,r,i),o=no(e.point,r,90)}return void 0!==n?n.push(o):n=[e.point,o],"Top"===e.direction||"Bottom"===e.direction?fo(o,"horizontal",e,t,n):"Right"!==e.direction&&"Left"!==e.direction||fo(o,"vertical",e,t,n),n}function fo(e,t,i,n,r){var o,a,s;"horizontal"===t?(i.margin={left:0,right:10,top:0,bottom:10},n.margin={left:0,right:10,top:0,bottom:10}):"vertical"===t&&(i.margin={left:10,right:0,top:10,bottom:0},n.margin={left:10,right:0,top:10,bottom:0});var l=20;if("horizontal"===t){switch(n.direction){case"Left":if(i.corners.right+i.margin.right<n.corners.left-n.margin.left&&(n.corners.left-i.corners.right>l||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){var c=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20);l=i.corners.right-e.x+c}else l="Top"===i.direction&&e.y>n.point.y||"Bottom"===i.direction&&e.y<n.point.y?Math.min(n.corners.left,e.x)-e.x-20:e.x>=i.corners.left-i.margin.left&&e.x<=i.corners.right+i.margin.right?Math.min(n.corners.left,i.corners.left)-e.x-20:n.corners.left-e.x-20;break;case"Right":if(i.corners.left-i.margin.left>n.corners.right+n.margin.right&&(i.corners.left-n.corners.right>l||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){c=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);l=i.corners.left-e.x-c}else l="Top"===i.direction&&e.y>n.point.y||"Bottom"===i.direction&&e.y<n.point.y?Math.max(n.corners.right,e.x)-e.x+20:e.x>=i.corners.left-i.margin.left&&e.x<=i.corners.right+i.margin.right?Math.max(n.corners.right,i.corners.right)-e.x+20:n.corners.right-e.x+20}o=no(e,l,0),a=no(o,n.point.y-e.y,90),s=n.point}else if("vertical"===t){switch(n.direction){case"Top":if(i.corners.bottom+i.margin.bottom<n.corners.top-n.margin.top&&(n.corners.top-i.corners.bottom>l||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){c=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20);l=i.corners.bottom-e.y+c}else l="Left"===i.direction&&e.x>n.point.x||"Right"===i.direction&&e.x<n.point.x?Math.min(n.corners.top,e.y)-e.y-20:e.y>=i.corners.top-i.margin.top&&e.y<=i.corners.bottom+i.margin.bottom?Math.min(n.corners.top,i.corners.top)-e.y-20:n.corners.top-e.y-20;break;case"Bottom":if(i.corners.top-i.margin.top>n.corners.bottom+n.margin.bottom&&(i.corners.top-n.corners.bottom>l||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){c=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20);l=i.corners.top-e.y-c}else l="Left"===i.direction&&e.x>n.point.x||"Right"===i.direction&&e.x<n.point.x?Math.max(n.corners.bottom,e.y)-e.y+20:e.y>=i.corners.top-i.margin.top&&e.y<=i.corners.bottom+i.margin.bottom?Math.max(n.corners.bottom,i.corners.bottom)-e.y+20:n.corners.bottom-e.y+20}o=no(e,l,90),a=no(o,n.point.x-e.x,0),s=n.point}r.push(o),r.push(a),r.push(s)}function go(e,t){var i=e.direction;e.direction=t.direction,t.direction=i;var n=e.point;e.point=t.point,t.point=n;var r=e.corners;e.corners=t.corners,t.corners=r}function mo(e,t,i,n){var r=void 0===t?i:t,o=r.topLeft,a=r.topRight,s=r.bottomRight,l=r.bottomLeft,c=r.center,h=to(c,e),d=to(c,s),p=to(c,l),u=to(c,o),f=to(c,a);return h>u&&h<f?"Top":h>=d&&h<p?"Bottom":h>=p&&h<=u?"Left":"Right"}function yo(e){var t;return t=e.wrapper.children[0].bounds,"None"!==e.sourceDecorator.shape&&t.uniteRect(e.wrapper.children[1].bounds),"None"!==e.targetDecorator.shape&&t.uniteRect(e.wrapper.children[2].bounds),t}function vo(e){switch(e){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}var bo,wo,xo=!1;function So(e,t,i,n,r){if(Mr=i+t==="topright"?void 0:r,Mr=r,xo=!!n,!e)return{left:0,top:0};t||(t="left"),i||(i="top"),Lr=e.ownerDocument,Dr=e;return function(e,t,i){switch(Ar=Dr.getBoundingClientRect(),t+e){case"topcenter":Co(Do(),i),Po(ko(),i);break;case"topright":Co(Mo(),i),Po(ko(),i);break;case"centercenter":Co(Do(),i),Po(Io(),i);break;case"centerright":Co(Mo(),i),Po(Io(),i);break;case"centerleft":Co(Ao(),i),Po(Io(),i);break;case"bottomcenter":Co(Do(),i),Po(To(),i);break;case"bottomright":Co(Mo(),i),Po(To(),i);break;case"bottomleft":Co(Ao(),i),Po(To(),i);break;default:case"topleft":Co(Ao(),i),Po(ko(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function Co(e,t){t.left=e}function Po(e,t){t.top=e}function Oo(){return Lr.documentElement.scrollTop||Lr.body.scrollTop}function Eo(){return Lr.documentElement.scrollLeft||Lr.body.scrollLeft}function To(){return xo?Ar.bottom:Ar.bottom+Oo()}function Io(){return ko()+Ar.height/2}function ko(){return xo?Ar.top:Ar.top+Oo()}function Ao(){return Ar.left+Eo()}function Mo(){return Ar.right+Eo()-(Mr?Mr.width:0)}function Do(){return Ao()+Ar.width/2}function Lo(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=e.getBoundingClientRect();if(wo=t,bo=e.ownerDocument,n||(n=So(e,"left","top")),i.X){var o=wo?Ho():Ko(),a=Uo(),s=Yo(),l=a-n.left,c=n.left+r.width-s;r.width>o?n.left=l>0&&c<=0?s-r.width:c>0&&l<=0?a:l>c?s-r.width:a:l>0?n.left+=l:c>0&&(n.left-=c)}if(i.Y){var h=wo?_o():Zo(),d=Vo(),p=Xo(),u=d-n.top,f=n.top+r.height-p;r.height>h?n.top=u>0&&f<=0?p-r.height:f>0&&u<=0?d:u>f?p-r.height:d:u>0?n.top+=u:f>0&&(n.top-=f)}return n}function Ro(e,t,i,n){void 0===t&&(t=null);var r=So(e,"left","top");i&&(r.left=i),n&&(r.top=n);var o=[];wo=t,bo=e.ownerDocument;var a=e.getBoundingClientRect(),s=r.top,l=r.left,c=r.left+a.width,h=Bo(s,r.top+a.height),d=zo(l,c);return h.topSide&&o.push("top"),d.rightSide&&o.push("right"),d.leftSide&&o.push("left"),h.bottomSide&&o.push("bottom"),o}function jo(e,t,i,n,r,o,a,s,l){if(void 0===a&&(a=null),void 0===s&&(s={X:!0,Y:!0}),t&&e&&r&&o&&(s.X||s.Y)){var c={TL:null,TR:null,BL:null,BR:null},h={TL:null,TR:null,BL:null,BR:null},d=e.getBoundingClientRect(),p={posX:r,posY:o,offsetX:i,offsetY:n,position:{left:0,top:0}};wo=a,bo=t.ownerDocument,function(e,t,i,n,r){i.position=So(e,i.posX,i.posY,n,r),t.TL=So(e,"left","top",n,r),t.TR=So(e,"right","top",n,r),t.BR=So(e,"left","bottom",n,r),t.BL=So(e,"right","bottom",n,r)}(t,c,p,l,d),No(h,p,d),s.X&&function e(t,i,n,r,o,a){var s=zo(i.TL.left,i.TR.left);n.TL.left-qo()<=Uo()&&(s.leftSide=!1);n.TR.left>=Yo()&&(s.rightSide=!1);(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&("right"===r.posX?r.posX="left":r.posX="right",r.offsetX=r.offsetX+o.width,r.offsetX=-1*r.offsetX,r.position=So(t,r.posX,r.posY,!1),No(i,r,o),a&&e(t,i,n,r,o,!1))}(t,h,c,p,d,!0),s.Y&&c.TL.top>-1&&function e(t,i,n,r,o,a){var s=Bo(i.TL.top,i.BL.top);n.TL.top-Go()<=Vo()&&(s.topSide=!1);n.BL.top>=Xo()&&(s.bottomSide=!1);(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&("top"===r.posY?r.posY="bottom":r.posY="top",r.offsetY=r.offsetY+o.height,r.offsetY=-1*r.offsetY,r.position=So(t,r.posX,r.posY,!1,o),No(i,r,o),a&&e(t,i,n,r,o,!1))}(t,h,c,p,d,!0),function(e,t,i){var n=0,r=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=So(e.offsetParent,"left","top",!1,i);n=o.left,r=o.top}e.style.top=t.position.top+t.offsetY-r+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,p,d)}}function No(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function zo(e,t){var i=!1,n=!1;return e-qo()<Uo()&&(i=!0),t>Yo()&&(n=!0),{leftSide:i,rightSide:n}}function Bo(e,t){var i=!1,n=!1;return e-Go()<Vo()&&(i=!0),t>Xo()&&(n=!0),{topSide:i,bottomSide:n}}function Ho(){return wo.getBoundingClientRect().width}function _o(){return wo.getBoundingClientRect().height}function Wo(){return wo.getBoundingClientRect().left}function Fo(){return wo.getBoundingClientRect().top}function Vo(){return wo?Fo():0}function Uo(){return wo?Wo():0}function Yo(){return wo?qo()+Wo()+Ho():qo()+Ko()}function Xo(){return wo?Go()+Fo()+_o():Go()+Zo()}function Go(){return bo.documentElement.scrollTop||bo.body.scrollTop}function qo(){return bo.documentElement.scrollLeft||bo.body.scrollLeft}function Zo(){return window.innerHeight}function Ko(){var e=window.innerWidth;return e-(e-(f(document.documentElement)?0:document.documentElement.offsetWidth))}var $o=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qo=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Jo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $o(t,e),Qo([zt("left")],t.prototype,"X",void 0),Qo([zt("top")],t.prototype,"Y",void 0),t}(ii),ea="e-popup",ta="e-rtl",ia="e-popup-open",na="e-popup-close",ra=function(e){function t(t,i){return e.call(this,i,t)||this}return $o(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":vt(this.element,{width:b(e.width)});break;case"height":vt(this.element,{height:b(e.height)});break;case"zIndex":vt(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var o=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.remove(ea,ta,ia,na),this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(ea);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=b(this.width)),"auto"!==this.height&&(e.height=b(this.height)),vt(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){le.isDevice&&ce.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];ce.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){le.isDevice&&ce.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];ce.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||f(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"===typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(f(this.checkGetBoundingClientRect(t))){var n=window,r={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},o=So(e),a={top:o.top,left:o.left,right:o.left+i.width,bottom:o.top+i.height},s={top:r.bottom-a.top,left:r.right-a.left,bottom:a.bottom-r.top,right:a.right-r.left};return s.top>0&&s.left>0&&s.right>0&&s.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top)&&!(i.bottom>l.bottom)&&!(i.right>l.right)&&!(i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(ta):this.element.classList.remove(ta)},t.prototype.setContent=function(){f(this.content)||(this.element.innerHTML="","string"===typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},t.prototype.orientationOnChange=function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)},t.prototype.refreshPosition=function(e,t){f(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"===typeof this.position.X&&"number"===typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"===typeof this.position.X&&"number"===typeof this.position.Y||"number"===typeof this.position.X&&"string"===typeof this.position.Y){var n=this.element.style.display,r=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"===typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else if(i){n=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=n}else e={left:0,top:0};f(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return null}},t.prototype.getAnchorPosition=function(e,t,i,n,r){var o=this.checkGetBoundingClientRect(t),a=this.checkGetBoundingClientRect(e);if(f(o)||f(a))return null;var s=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=So(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==s.tagName&&(t=t.parentElement),l=function(e,t){var i=!1,n={left:0,top:0},r=e;if(!e||!t)return n;for(f(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=r;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(s,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?l.left+=a.width/2-o.width/2:l.left+=a.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:"container"===this.targetType?l.left+=a.width-o.width:l.left+=a.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?l.top+=a.height/2-o.height/2:l.top+=a.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:"container"===this.targetType?l.top+=a.height-o.height:l.top+=a.height}return l.left+=n,l.top+=r,l},t.prototype.callFlip=function(e){var t=this.getRelateToElement();jo(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==Ro(this.element,this.viewPortElement).length)if(f(this.viewPortElement)){var t=Lo(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(f(i)||f(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var i=this;if(this.wireEvents(),1e3===this.zIndex||!f(t)){var n=f(t)?this.element:t;this.zIndex=aa(n),vt(this.element,{zIndex:this.zIndex})}e=f(e)||"object"!==typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(at([this.element],na),ot([this.element],ia),this.checkCollision(),at([this.element],ia),ot([this.element],na)),f(e)?(at([this.element],na),ot([this.element],ia),this.trigger("open")):(e.begin=function(){i.isDestroyed||(at([i.element],na),ot([i.element],ia))},e.end=function(){i.isDestroyed||i.trigger("open")},new Gt(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=f(e)||"object"!==typeof e?this.hideAnimation:e,f(e)?(at([this.element],ia),ot([this.element],na),this.trigger("close")):(e.end=function(){t.isDestroyed||(at([t.element],ia),ot([t.element],na),t.trigger("close"))},new Gt(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),oa(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,f(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},Qo([zt("auto")],t.prototype,"height",void 0),Qo([zt("auto")],t.prototype,"width",void 0),Qo([zt(null)],t.prototype,"content",void 0),Qo([zt("container")],t.prototype,"targetType",void 0),Qo([zt(null)],t.prototype,"viewPortElement",void 0),Qo([zt({X:"none",Y:"none"})],t.prototype,"collision",void 0),Qo([zt("")],t.prototype,"relateTo",void 0),Qo([Bt({},Jo)],t.prototype,"position",void 0),Qo([zt(0)],t.prototype,"offsetX",void 0),Qo([zt(0)],t.prototype,"offsetY",void 0),Qo([zt(1e3)],t.prototype,"zIndex",void 0),Qo([zt(!1)],t.prototype,"enableRtl",void 0),Qo([zt("reposition")],t.prototype,"actionOnScroll",void 0),Qo([zt(null)],t.prototype,"showAnimation",void 0),Qo([zt(null)],t.prototype,"hideAnimation",void 0),Qo([Ft()],t.prototype,"open",void 0),Qo([Ft()],t.prototype,"close",void 0),Qo([Ft()],t.prototype,"targetExitViewport",void 0),t=Qo([Vt],t)}(si);function oa(e,t){for(var i=getComputedStyle(e),n=[],r=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var a=getComputedStyle(o);"absolute"===i.position&&"static"===a.position||!r.test(a.overflow+a.overflowY+a.overflowX)||n.push(o),o=o.parentElement}return t||n.push(document),n}function aa(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==r&&i.push(n),t=t.parentElement}for(var o=[],a=0;a<document.body.children.length;a++)if(!e.isEqualNode(document.body.children[a])){n=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&o.push(n)}o.push("999");var s=[];if(!f(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(a=0;a<l.length;a++){n=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&s.push(n)}}var c=i.concat(o,s),h=Math.max.apply(Math,c)+1;return h>2147483647?2147483647:h}var sa=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),la=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ca="e-tooltip",ha=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sa(t,e),la([zt({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),la([zt({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(ii),da=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isBlazorTooltip=!1,n.contentTargetValue=null,n.contentEvent=null,n.contentAnimation=null,n}return sa(t,e),t.prototype.initialize=function(){this.formatPosition(),this.isServerRender()||ot([this.element],ca)},t.prototype.isServerRender=function(){return w()&&this.isServerRendered},t.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},t.prototype.renderArrow=function(){var e;(this.setTipClass(this.position),this.isServerRender())?(ot([(e=this.tooltipEle.querySelector(".e-arrow-tip")).querySelector(".e-arrow-tip-outer")],this.tipClass),ot([e.querySelector(".e-arrow-tip-inner")],this.tipClass),this.tooltipEle.appendChild(e)):((e=this.createElement("div",{className:"e-arrow-tip "+this.tipClass})).appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(this.createElement("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(e))},t.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass="e-tip-left":0===e.indexOf("Bottom")?this.tipClass="e-tip-top":0===e.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass="e-tip-bottom"},t.prototype.renderPopup=function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new ra(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var t=So(e,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),n=this.collisionFlipFit(e,t.left+i.left,t.top+i.top);return this.tooltipEle.style.display="",n},t.prototype.reposition=function(e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){He(this.element.id+"content"),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector(".e-arrow-tip"),o=r?r.offsetWidth:0,a=r?r.offsetHeight:0,s=this.showTipPointer?0:8,l=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(s+=2),e){case"RightTop":t.left+=o+s,t.top-=n-l;break;case"RightCenter":t.left+=o+s,t.top-=n/2;break;case"RightBottom":t.left+=o+s,t.top-=l;break;case"BottomRight":t.top+=a+s,t.left-=c;break;case"BottomCenter":t.top+=a+s,t.left-=i/2;break;case"BottomLeft":t.top+=a+s,t.left-=i-c;break;case"LeftBottom":t.left-=o+i+s,t.top-=l;break;case"LeftCenter":t.left-=o+i+s,t.top-=n/2;break;case"LeftTop":t.left-=o+i+s,t.top-=n-l;break;case"TopLeft":t.top-=n+a+s,t.left-=i-c;break;case"TopRight":t.top-=n+a+s,t.left-=c;break;default:t.top-=n+a+s,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},t.prototype.updateTipPosition=function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");at(t,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(e),ot(t,this.tipClass)},t.prototype.adjustArrow=function(e,t,i,n){if(!1!==this.showTipPointer){var r,o;this.updateTipPosition(t),this.tooltipEle.style.display="block";var a,s=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,c=this.tooltipEle.querySelector(".e-arrow-tip"),h=this.tooltipEle.querySelector(".e-arrow-tip-inner"),d=c.offsetWidth,p=c.offsetHeight;if(this.tooltipEle.style.display="","e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if("e-tip-bottom"===this.tipClass?(o="99.9%",h.style.top="-"+(p-2)+"px"):(o=-(p-1)+"px",h.style.top="-"+(p-6)+"px"),e)r=(a="Center"!==i||s>e.offsetWidth||this.mouseTrail)&&"Left"===i||!a&&"End"===this.tipPointerPosition?s-d-2+"px":a&&"Right"===i||!a&&"Start"===this.tipPointerPosition?"2px":s/2-d/2+"px"}else"e-tip-right"===this.tipClass?(r="99.9%",h.style.left="-"+(d-2)+"px"):(r=-(d-1)+"px",h.style.left=d-2-d+"px"),o=(a="Center"!==n||l>e.offsetHeight||this.mouseTrail)&&"Top"===n||!a&&"End"===this.tipPointerPosition?l-p-2+"px":a&&"Bottom"===n||!a&&"Start"===this.tipPointerPosition?"2px":l/2-p/2+"px";c.style.top=o,c.style.left=r}},t.prototype.renderContent=function(e){var t=this.tooltipEle.querySelector(".e-tip-content");if(this.cssClass&&ot([this.tooltipEle],this.cssClass.split(" ")),e&&!f(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),f(this.content))e&&!f(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(this.isBlazorTooltip||!this.isServerRender())if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"===typeof this.content&&this.content.indexOf("<div>Blazor")<0)this.enableHtmlSanitizer&&this.setProperties({content:Ai.sanitize(this.content)},!0),t.innerHTML=this.content;else{ht(ze(this.content)({},null,null,this.element.id+"content"),t),"string"===typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,Be(this.element.id+"content","Content",this))}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),ce.add(e,le.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,t){var i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),ft(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},t.prototype.removeDescribedBy=function(e){var t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");var r=i.join(" ").trim();r?e.setAttribute("aria-describedby",r):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var t=this;if(!this.isSticky){this.autoCloseTimer=setTimeout((function(){t.close()}),1500)}},t.prototype.targetClick=function(e){var t;f(t=this.target?yt(e.target,this.target):this.element)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))},t.prototype.targetHover=function(e){var t;if(!f(t=this.target?yt(e.target,this.target):this.element)&&null===t.getAttribute("data-tooltip-id")){for(var i=0,n=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));i<n.length;i++){var r=n[i];this.restoreElement(r)}this.showTooltip(t,this.animation.open,e)}},t.prototype.showTooltip=function(e,t,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!f(i)};this.trigger("beforeRender",this.tooltipEventArgs,function(r){n.beforeRenderCallback(r,e,i,t)}.bind(this))},t.prototype.beforeRenderCallback=function(e,t,i,n){var r=!1;if(e.cancel)this.isHidden=!0,this.clear();else if(this.isHidden=!1,f(this.tooltipEle)){if(this.isServerRender()){this.contentTargetValue=t,this.contentEvent=i,this.contentAnimation=n;this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"true"}),r=!0}else this.ctrlId=this.element.getAttribute("id")?m(this.element.getAttribute("id")):m("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+b(this.width)+";height:"+b(this.height)+";position:absolute;"}),this.beforeRenderBlazor(t,this);r||this.afterRenderBlazor(t,i,n,this)}else this.isServerRender()&&(ot([this.tooltipEle],"e-popup-open"),document.body.appendChild(this.tooltipEle),this.renderCloseIcon(),this.renderPopup(t)),t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),Gt.stop(this.tooltipEle),this.reposition(t),this.afterRenderBlazor(t,i,n,this))},t.prototype.contentUpdated=function(e){f(this.tooltipEle)&&this.isServerRender()&&(this.ctrlId=this.element.id,this.tooltipEle=document.querySelector("#"+this.ctrlId+"_content"),this.tooltipEle&&(this.tooltipEle.setAttribute("style","width:"+b(this.width)+";height:"+b(this.height)+";position:absolute;"),this.beforeRenderBlazor(this.contentTargetValue,this),this.afterRenderBlazor(this.contentTargetValue,this.contentEvent,this.contentAnimation,this),this.contentTargetValue=this.contentEvent=this.contentAnimation=null))},t.prototype.beforeRenderBlazor=function(e,t){e&&(le.isDevice&&ot([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=b(t.width)),this.isServerRender()||t.tooltipEle.appendChild(t.createElement("div",{className:"e-tip-content"})),document.body.appendChild(t.tooltipEle),at([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),ot([t.tooltipEle],"e-popup-open"),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),Gt.stop(t.tooltipEle),t.reposition(e))},t.prototype.afterRenderBlazor=function(e,t,i,n){if(e){at([n.tooltipEle],"e-popup-open"),ot([n.tooltipEle],"e-popup-close"),n.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:n.tooltipEle,isInteracted:!f(t)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none");n.trigger("beforeOpen",n.tooltipEventArgs,function(r){n.beforeOpenCallback(r,e,i,t)}.bind(n))}},t.prototype.beforeOpenCallback=function(e,t,i,n){var r=this;if(e.cancel)this.isHidden=!0,this.clear(),this.restoreElement(t);else{var o={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if("None"===i.effect&&(o=void 0),this.openDelay>0){this.showTimer=setTimeout((function(){r.popupObj&&r.popupObj.show(o,t)}),this.openDelay)}else this.popupObj&&this.popupObj.show(o,t)}n&&this.wireMouseEvents(n,t)},t.prototype.needTemplateReposition=function(){return!f(this.viewContainerRef)&&"string"!==typeof this.viewContainerRef||this.isServerRender()&&this.isBlazorTemplate},t.prototype.checkCollision=function(e,t,i){var n={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=Ro(this.tooltipEle,this.target?this.element:null,t,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.collisionFlipFit=function(e,t,i){var n=this.checkCollision(e,t,i),r=n.position;if(this.tooltipPositionY!==n.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs),n.position!==r){var o=So(e,n.horizontal,n.vertical);this.adjustArrow(e,r,n.horizontal,n.vertical);var a=this.calculateTooltipOffset(r);a.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,a.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=r,n.left=o.left+a.left,n.top=o.top+a.top}else this.adjustArrow(e,r,n.horizontal,n.vertical);var s={left:n.left,top:n.top},l=Lo(this.tooltipEle,this.target?this.element:null,{X:!0,Y:!1},s).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var c=this.tooltipEle.querySelector(".e-arrow-tip"),h=parseInt(c.style.left,10)-(l-n.left);h<0?h=0:h+c.offsetWidth>this.tooltipEle.clientWidth&&(h=this.tooltipEle.clientWidth-c.offsetWidth),c.style.left=h.toString()+"px"}return this.tooltipEle.style.display="",s.left=l,s},t.prototype.hideTooltip=function(e,t,i){var n,r=this;n=t?this.target?i||t.target:this.element:document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:n,event:t||null,element:this.tooltipEle,isInteracted:!f(t)},this.trigger("beforeClose",this.tooltipEventArgs,(function(t){t.cancel?r.isHidden=!1:r.isServerRender()?r.blazorHide(e,n):r.popupHide(e,n)}))},t.prototype.blazorHide=function(e,t){var i=this;this.popupObj?this.popupHide(e,t):setTimeout((function(){i.popupHide(e,t)}),200)},t.prototype.popupHide=function(e,t){var i=this;this.clearTemplate(),t&&this.restoreElement(t),this.isHidden=!0;var n={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};if("None"===e.effect&&(n=void 0),this.closeDelay>0){this.hideTimer=setTimeout((function(){i.popupObj&&i.popupObj.hide(n)}),this.closeDelay)}else this.popupObj&&this.popupObj.hide(n)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),f(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){if(this.tooltipEle&&(at([this.tooltipEle],"e-popup-close"),ot([this.tooltipEle],"e-popup-open")),this.isHidden){if(this.popupObj&&this.popupObj.destroy(),this.isServerRender()&&this.tooltipEle){this.tooltipEle.style.display="none";this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"false"}),ut(this.tooltipEle)}else this.tooltipEle&&ut(this.tooltipEle);this.tooltipEle=null,this.popupObj=null}},t.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(t&&!this.mouseTrail){var i=yt(t,".e-tooltip-wrap.e-lib.e-popup");i?(ce.add(i,"mouseleave",this.tooltipElementMouseOut,this),this.unwireMouseEvents(e.target)):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),ce.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),Gt.stop(this.tooltipEle),at([this.tooltipEle],"e-popup-close"),ot([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.position),r=t+n.left+this.offsetX,o=i+n.top+this.offsetY,a=this.checkCollision(e.target,r,o);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){var s=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=s,this.adjustArrow(e.target,a.position,a.horizontal,a.vertical);var l=this.calculateTooltipOffset(a.position);a.left=t+l.left-this.offsetX,a.top=i+l.top-this.offsetY}this.tooltipEle.style.left=a.left+"px",this.tooltipEle.style.top=a.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===yt(e.target,"."+ca)&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&(yt(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var n=i[t];if("Custom"===n)return;"Focus"===n&&this.wireFocusEvents(),"Click"===n&&ce.add(this.element,le.touchStartEvent,this.targetClick,this),"Hover"===n&&(le.isDevice?(this.touchModule=new Ei(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),ce.add(this.element,le.touchEndEvent,this.touchEndHandler,this)):(ce.add(this.element,"mouseover",this.targetHover,this),this.isServerRender()&&!this.isSticky&&ce.add(this.element,"mouseleave",this.onMouseOut,this)))}ce.add(document,"touchend",this.touchEnd,this),ce.add(document,"scroll wheel",this.scrollHandler,this),ce.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=le.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(f(this.target))ce.add(this.element,"focus",this.targetHover,this);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++){var i=t[e];ce.add(i,"focus",this.targetHover,this)}},t.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&ce.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&(this.isServerRender()||ce.add(t,"mouseleave",this.onMouseOut,this))),this.mouseTrail&&ce.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var n=i[t];if("Custom"===n)return;"Focus"===n&&this.unwireFocusEvents(),"Click"===n&&ce.remove(this.element,le.touchStartEvent,this.targetClick),"Hover"===n&&(le.isDevice?(this.touchModule&&this.touchModule.destroy(),ce.remove(this.element,le.touchEndEvent,this.touchEndHandler)):(ce.remove(this.element,"mouseover",this.targetHover),this.isServerRender()&&!this.isSticky&&ce.remove(this.element,"mouseleave",this.onMouseOut)))}ce.remove(document,"touchend",this.touchEnd),ce.remove(document,"scroll wheel",this.scrollHandler),ce.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(f(this.target))ce.remove(this.element,"focus",this.targetHover);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++){var i=t[e];ce.remove(i,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky)for(var t=0,i=this.getTriggerList(this.opensOn);t<i.length;t++){var n=i[t];"Focus"===n&&ce.remove(e,"blur",this.onMouseOut),"Hover"!==n||le.isDevice||this.isServerRender()||ce.remove(e,"mouseleave",this.onMouseOut)}this.mouseTrail&&ce.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.findTarget(),n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=b(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=b(e.height),this.reposition(i));break;case"content":if(this.tooltipEle)this.isServerRender()&&(this.isBlazorTooltip=!0),this.renderContent();else if(this.isServerRender()){var o={content:e.content};this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",o)}break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var a=this.tooltipEle.querySelector(".e-arrow-tip-inner");a.style.top=a.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var s=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+s).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var l=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+l).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&at([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&ot([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?ot([this.tooltipEle],"e-rtl"):at([this.tooltipEle],"e-rtl"))}}},t.prototype.open=function(e,t){f(t)&&(t=this.animation.open),f(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){if(this.isServerRender()||(e.prototype.destroy.call(this),this.tooltipEle&&ut(this.tooltipEle)),this.isServerRender()&&this.tooltipEle){var t=document.querySelector("#"+this.ctrlId+"_content_placeholder");t&&t.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),at([this.element],ca),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},la([zt("auto")],t.prototype,"width",void 0),la([zt("auto")],t.prototype,"height",void 0),la([zt()],t.prototype,"content",void 0),la([zt()],t.prototype,"target",void 0),la([zt("TopCenter")],t.prototype,"position",void 0),la([zt(0)],t.prototype,"offsetX",void 0),la([zt(0)],t.prototype,"offsetY",void 0),la([zt(!0)],t.prototype,"showTipPointer",void 0),la([zt("Auto")],t.prototype,"tipPointerPosition",void 0),la([zt("Auto")],t.prototype,"opensOn",void 0),la([zt(!1)],t.prototype,"mouseTrail",void 0),la([zt(!1)],t.prototype,"isSticky",void 0),la([Bt({},ha)],t.prototype,"animation",void 0),la([zt(0)],t.prototype,"openDelay",void 0),la([zt(0)],t.prototype,"closeDelay",void 0),la([zt()],t.prototype,"cssClass",void 0),la([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),la([Ft()],t.prototype,"beforeRender",void 0),la([Ft()],t.prototype,"beforeOpen",void 0),la([Ft()],t.prototype,"afterOpen",void 0),la([Ft()],t.prototype,"beforeClose",void 0),la([Ft()],t.prototype,"afterClose",void 0),la([Ft()],t.prototype,"beforeCollision",void 0),la([Ft()],t.prototype,"created",void 0),la([Ft()],t.prototype,"destroyed",void 0),t=la([Vt],t)}(si),pa=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ua=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},fa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pa(t,e),ua([zt("")],t.prototype,"content",void 0),ua([zt("TopLeft")],t.prototype,"position",void 0),ua([zt("Mouse")],t.prototype,"relativeMode",void 0),ua([zt(!0)],t.prototype,"showTipPointer",void 0),ua([zt("auto")],t.prototype,"width",void 0),ua([zt("auto")],t.prototype,"height",void 0),ua([zt("Auto")],t.prototype,"openOn",void 0),ua([zt()],t.prototype,"animation",void 0),t}(ii);function ga(e){var t=new da;t=va(e.tooltip,t);var i=new da(t);return i.beforeCollision=ya,i.beforeOpen=ma,i.cssClass="e-diagram-tooltip",i.opensOn="custom",i.appendTo("#"+e.element.id),i.close(),i}function ma(e){""!==this.content&&void 0!==this.content||(e.element.style.display="none")}function ya(e){e.collidedPosition&&e.collidedPosition!==this.position&&(e.element.style.display="none")}function va(e,t){return e.content?(t.content=e.content,t.position=e.position,t.showTipPointer=e.showTipPointer,t.width=e.width,t.height=e.height,e.animation?t.animation=e.animation:t.animation={close:{effect:"None"}}):t.close(),t}var ba=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wa=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},xa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ba(t,e),wa([zt()],t.prototype,"width",void 0),wa([zt()],t.prototype,"height",void 0),t}(ii),Sa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ba(t,e),wa([zt()],t.prototype,"width",void 0),wa([zt()],t.prototype,"height",void 0),wa([zt()],t.prototype,"fit",void 0),wa([zt()],t.prototype,"description",void 0),wa([zt()],t.prototype,"template",void 0),wa([zt()],t.prototype,"tooltip",void 0),t}(ii),Ca=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pa=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Oa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ca(t,e),Pa([zt("")],t.prototype,"id",void 0),Pa([zt(-1)],t.prototype,"zIndex",void 0),Pa([Bt({},Yn)],t.prototype,"margin",void 0),Pa([zt(!0)],t.prototype,"visible",void 0),Pa([Bt({},fa)],t.prototype,"tooltip",void 0),Pa([zt(!1)],t.prototype,"excludeFromLayout",void 0),Pa([zt()],t.prototype,"addInfo",void 0),Pa([zt("None")],t.prototype,"flip",void 0),Pa([Bt({},Sa)],t.prototype,"symbolInfo",void 0),t}(ii),Ea=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ta=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o.data="",o.nodeId="",o.annotationId="",o.diagramId="",o.diagramId=i,o.nodeId=t,o.annotationId=n,o.templateFn=vd(r),o}return Ea(t,e),t.prototype.getNodeTemplate=function(){return this.templateFn},Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.isTemplate||(this.template=cd(this,!0)),this.isDirt=!0},enumerable:!0,configurable:!0}),t}(tr),Ia=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ka=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Aa=function(e){if(w())return Ka;if(e)switch(e.type){case"Bpmn":return Na;case"UmlActivity":return ja;case"UmlClassifier":return Za;default:return Ra}return Ra},Ma=function(e){if(e){if(w())return Wa;switch(e.type){case"Straight":return Ba;case"Bezier":return Ha;case"Orthogonal":return _a;default:return Ba}}},Da=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt(10)],t.prototype,"width",void 0),ka([zt(10)],t.prototype,"height",void 0),ka([zt("Arrow")],t.prototype,"shape",void 0),ka([Bt({fill:"black",strokeColor:"black",strokeWidth:1},Qn)],t.prototype,"style",void 0),ka([Bt({x:0,y:.5},Qi)],t.prototype,"pivot",void 0),ka([zt("")],t.prototype,"pathData",void 0),t}(ii),La=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt(0)],t.prototype,"angle",void 0),ka([zt(0)],t.prototype,"distance",void 0),t}(ii),Ra=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt("None")],t.prototype,"type",void 0),t}(ii),ja=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt("Object")],t.prototype,"flow",void 0),ka([zt(30)],t.prototype,"exceptionFlowHeight",void 0),t}(Ra),Na=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt("Sequence")],t.prototype,"flow",void 0),ka([zt("Normal")],t.prototype,"sequence",void 0),ka([zt("Default")],t.prototype,"message",void 0),ka([zt("Default")],t.prototype,"association",void 0),t}(Ra),za=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.points=[],o}return Ia(t,e),ka([zt("Straight")],t.prototype,"type",void 0),ka([zt(!0)],t.prototype,"allowDrag",void 0),t}(ii),Ba=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),t.prototype.getClassName=function(){return"StraightSegment"},ka([Bt({x:0,y:0},Qi)],t.prototype,"point",void 0),t}(za),Ha=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),t.prototype.getClassName=function(){return"BezierSegment"},ka([Bt({x:0,y:0},Qi)],t.prototype,"point1",void 0),ka([Bt({x:0,y:0},Qi)],t.prototype,"point2",void 0),ka([Bt({angle:0,distance:0},La)],t.prototype,"vector1",void 0),ka([Bt({angle:0,distance:0},La)],t.prototype,"vector2",void 0),t}(Ba),_a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),t.prototype.getClassName=function(){return"OrthogonalSegment"},ka([zt(null)],t.prototype,"length",void 0),ka([zt(null)],t.prototype,"direction",void 0),t}(za),Wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),t.prototype.getClassName=function(){return"DiagramConnectorSegment"},ka([zt("Straight")],t.prototype,"type",void 0),ka([zt(!0)],t.prototype,"allowDrag",void 0),ka([Bt({x:0,y:0},Qi)],t.prototype,"point",void 0),ka([Bt({x:0,y:0},Qi)],t.prototype,"point1",void 0),ka([Bt({x:0,y:0},Qi)],t.prototype,"point2",void 0),ka([Bt({angle:0,distance:0},La)],t.prototype,"vector1",void 0),ka([Bt({angle:0,distance:0},La)],t.prototype,"vector2",void 0),ka([zt(null)],t.prototype,"length",void 0),ka([zt(null)],t.prototype,"direction",void 0),t}(ii);function Fa(e,t,i){var n=e.center,r=i?45:180/(2+2/(e.height/e.width)),o=r,a=180-r,s=a+2*r,l=360-r,c=to(t,n);return c>o&&c<a?"top":c>a&&c<s?"right":c>s&&c<l?"bottom":"left"}function Va(e){return!e.distance&&!e.angle}function Ua(e,t,i){var n=60,r={x:0,y:0};switch(i||(i=Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"right":"left":e.y<t.y?"bottom":"top"),i){case"bottom":case"top":n=Math.min(.45*Math.abs(e.y-t.y),n),r={x:e.x,y:e.y+("bottom"===i?n:-n)};break;case"right":case"left":n=Math.min(.45*Math.abs(e.x-t.x),n),r={x:e.x+("right"===i?n:-n),y:e.y}}return r}function Ya(e,t,i,n,r){var o=0,a=0,s=0,l=0,c=Number((r.distance(t,e)+r.distance(i,t)+r.distance(n,i))/3);if(0!==c)for(var h=0;h<=c;h++){var d=h/c,p=(1-d)*(1-d)*(1-d)*e.x+3*d*(1-d)*(1-d)*t.x+3*d*d*(1-d)*i.x+d*d*d*n.x,u=(1-d)*(1-d)*(1-d)*e.y+3*d*(1-d)*(1-d)*t.y+3*d*d*(1-d)*i.y+d*d*d*n.y;0===h?(o=s=p,a=l=u):(o=Math.min(p,o),a=Math.min(u,a),s=Math.max(p,s),l=Math.max(u,l))}return{x:o,y:a,width:s-o,height:l-a,left:o,top:a,right:o+(s-o),bottom:a+(l-a),center:{x:(o+(s-o))/2,y:(a+(l-a))/2}}}function Xa(e,t,i,n,r,o,a){var s={x:0,y:0},l=o/a,c=(1-l)*(1-l)*(1-l)*t.x+3*l*(1-l)*(1-l)*i.x+3*l*l*(1-l)*n.x+l*l*l*r.x;s.x=c;var h=(1-l)*(1-l)*(1-l)*t.y+3*l*(1-l)*(1-l)*i.y+3*l*l*(1-l)*n.y+l*l*l*r.y;return s.y=h,s}var Ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt(!0)],t.prototype,"optional",void 0),ka([zt(void 0)],t.prototype,"lowerBounds",void 0),ka([zt(void 0)],t.prototype,"upperBounds",void 0),t}(ii),qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt("OneToOne")],t.prototype,"type",void 0),ka([Bt({},Ga)],t.prototype,"target",void 0),ka([Bt({},Ga)],t.prototype,"source",void 0),t}(ii),Za=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt("UmlClassifier")],t.prototype,"type",void 0),ka([zt("Aggregation")],t.prototype,"relationship",void 0),ka([zt("Directional")],t.prototype,"associationType",void 0),ka([Bt({},qa)],t.prototype,"multiplicity",void 0),t}(Ra),Ka=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),ka([zt("None")],t.prototype,"type",void 0),ka([zt("Directional")],t.prototype,"associationType",void 0),ka([zt("Aggregation")],t.prototype,"relationship",void 0),ka([Bt({},qa)],t.prototype,"multiplicity",void 0),ka([zt("Sequence")],t.prototype,"bpmnFlow",void 0),ka([zt("Default")],t.prototype,"message",void 0),ka([zt("Normal")],t.prototype,"sequence",void 0),ka([zt("Default")],t.prototype,"association",void 0),ka([zt("Object")],t.prototype,"umlActivityFlow",void 0),ka([zt(30)],t.prototype,"exceptionFlowHeight",void 0),t}(ii),$a=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.parentId="",o.bridges=[],o.status="None",o.shape&&"UmlActivity"===o.shape.type&&Xl(n,o),n&&n.shape&&"None"!==n.shape.type&&Gl(n,o),o}return Ia(t,e),t.prototype.setPortID=function(e,t){if(this.targetID&&this.sourceID)for(var i=e.nameTable[this.targetID],n=e.nameTable[this.sourceID],r=t?i&&i.ports:n&&n.ports,o=void 0,a=0;r&&a<r.length;a++)o=r[a],this.targetPortID===o.id&&t?!(o.constraints&_n.None)&&o.constraints&_n.InConnect||(this.targetPortID=""):this.sourcePortID!==o.id||t||!(o.constraints&_n.None)&&o.constraints&_n.OutConnect||(this.sourcePortID="")},t.prototype.init=function(e){var t;this.id||(this.id=md()),this.sourcePortID&&this.setPortID(e),this.targetPortID&&this.setPortID(e,!0);var i=new sr,n=new dr;n.id=this.id+"_path";var r,o=new dr,a=new dr;n=this.getSegmentElement(this,n);var s=[];switch(s=this.getConnectorPoints(this.type),s=this.clipDecorators(this,s),r=hn.toBounds(s),i.width=r.width,i.height=r.height,i.offsetX=r.x+i.pivot.x*r.width,i.offsetY=r.y+i.pivot.y*r.height,this.shape.type){case"Bpmn":switch(w()?this.shape.bpmnFlow:this.shape.flow){case"Sequence":t=this.getBpmnSequenceFlow();break;case"Association":(t=new dr).visible=!1,this.getBpmnAssociationFlow();break;case"Message":t=this.getBpmnMessageFlow(),n=this.getSegmentElement(this,n),this.updateShapePosition(this,t)}break;case"UmlActivity":switch(w()?this.shape.umlActivityFlow:this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(n)}break;case"UmlClassifier":this.getConnectorRelation()}var l=this.intermediatePoints;if("Bezier"===this.type){var c=this.segments[0],h=this.segments[this.segments.length-1];l=[Qi.isEmptyPoint(h.point2)?h.bezierPoint2:h.point2,Qi.isEmptyPoint(c.point1)?c.bezierPoint1:c.point1]}var d=e.getDescription;this.sourceWrapper&&this.sourceWrapper.style.strokeWidth;if(o=this.getDecoratorElement(s[0],l[1],this.sourceDecorator,!0,d),a=this.getDecoratorElement(s[s.length-1],l[l.length-2],this.targetDecorator,!1,d),o.id=this.id+"_srcDec",a.id=this.id+"_tarDec",n.style=this.style,n.style.fill="transparent",void 0!==d){var p=d(this,e);n.description=p||this.id}i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.children=[n,o,a],i.id=this.id,void 0!==t&&i.children.push(t),i.offsetX=n.offsetX,i.offsetY=n.offsetY,i.width=n.width,i.height=n.height;for(var u=0;this.annotations,u<this.annotations.length;u++)i.children.push(this.getAnnotationElement(this.annotations[u],this.intermediatePoints,r,d,e.element.id,e.annotationTemplate));return this.wrapper=i,i},t.prototype.getConnectorRelation=function(){var e=this.shape;"Association"===e.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===e.relationship||"Aggregation"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===e.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===e.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var t,i,n,r,o="",a="";e.multiplicity.source&&(e.multiplicity.source.lowerBounds=e.multiplicity.source.lowerBounds,e.multiplicity.source.upperBounds=e.multiplicity.source.upperBounds),e.multiplicity.target&&(e.multiplicity.target.lowerBounds=e.multiplicity.target.lowerBounds,e.multiplicity.target.upperBounds=e.multiplicity.target.upperBounds),i=e.multiplicity.source,n=e.multiplicity.target,r=i.upperBounds?i.lowerBounds+"..."+i.upperBounds:i.lowerBounds,t=n.upperBounds?n.lowerBounds+"..."+n.upperBounds:n.lowerBounds,"ManyToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,o=r||"*",a="1"),"OneToMany"===e.multiplicity.type&&(e.multiplicity.source.optional=!1,a=t||"*",o="1"),"ManyToOne"===e.multiplicity.type&&(o=r||"*",a=t||"*"),"OneToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,e.multiplicity.source.optional=!1,o="1",a="1"),this.annotations=[{id:this.id+"sourcelabel",content:o,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:a,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},t.prototype.getBpmnSequenceFlow=function(){var e=new dr,t=new dr;if("Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence){e=this.getSegmentElement(this,e);var i=this.intermediatePoints;t=Hc(i,this),this.targetDecorator.shape="Arrow"}return"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",t.id=this.id+this.shape.type),t},t.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var e=0;e<this.annotations.length;e++)this.annotations[e].content="["+this.annotations[e].content+"]"},t.prototype.getUMLExceptionFlow=function(e){this.type="Straight";var t=this.shape.exceptionFlowHeight/2,i={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=i.x-this.sourcePoint.x,r=i.y-this.sourcePoint.y,o=t/Math.sqrt(n*n+r*r),a={x:i.x-n*o,y:i.y-r*o},s={x:i.x+n*o,y:i.y+r*o},l=pn();fn(l,315,i.x,i.y),this.segments=[];var c=new Ba(this,"segments",{type:"Straight",point:un(l,s)},!0);this.segments.push(c),c=new Ba(this,"segments",{type:"Straight",point:un(l,a)},!0),this.segments.push(c),e=this.getSegmentElement(this,e)},t.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"Directional"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Arrow")},t.prototype.getBpmnMessageFlow=function(){var e=new dr;return this.targetDecorator.shape="Arrow",this.targetDecorator.width=5,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(e.id=this.id+"_"+this.shape.message,e.width=25,e.height=15,e.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.horizontalAlignment="Center",e.verticalAlignment="Center",e.transform=Mn.Self,e.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),e},t.prototype.distance=function(e,t){return Fc(e,t)},t.prototype.findPath=function(e,t){return Wc(e,t)},t.prototype.getAnnotationElement=function(e,t,i,n,r,o){var a,s;e.id=e.id||md(),w()&&"Template"===e.annotationType&&(e.template=e.template?e.template:""),r&&(e.template||"Template"===e.annotationType||o&&""===e.content)?a=gd(a=new Ta(this.id,r,e.id,o),e,o):((a=new or).content=e.content,a.style.textOverflow="Wrap"),a.constraints=e.constraints,a.visible=e.visibility,a.rotateAngle=e.rotateAngle,a.horizontalAlignment=e.horizontalAlignment,a.verticalAlignment=e.verticalAlignment,a.width=e.width,a.height=e.height,void 0===i.width||e.template||(a.width=(e.width||i.width)-e.margin.left-e.margin.right),a.margin=e.margin,a.id=this.id+"_"+e.id,0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),a.style=e.style;var l=Ld(n);return l&&(s=l(e,this)),a.description=s||a.id,this.updateAnnotation(e,t,i,a),a},t.prototype.updateAnnotation=function(e,t,i,n,r){var o,a,s,l,c,h,d,p,u={x:0,y:0};n instanceof Ta||r||n.refreshTextElement(),n.width=e.width||i.width,a=(o=rc(t,e,i)).point,e.segmentAngle&&(n.rotateAngle=e.rotateAngle+o.angle,n.rotateAngle=(n.rotateAngle+360)%360),0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),h={x:(a.x-i.x)/i.width,y:(a.y-i.y)/i.height},u.x=i.width*h.x,u.y=i.height*h.y,s=function(e,t,i){t%=360;var n,r;switch(e.alignment){case"Before":t>=45&&t<=135?(r="right",n=.5===e.offset?"center":"top"):t>=225&&t<=315?(r="left",n=.5===e.offset?"center":"bottom"):t>45&&t<225?(n="top",r=.5===e.offset?"center":"right"):(n="bottom",r=.5===e.offset?"center":"left");break;case"After":t>=45&&t<=135?(r="left",n=.5===e.offset?"center":"top"):t>=225&&t<=315?(r="right",n=.5===e.offset?"center":"bottom"):t>45&&t<225?(n="bottom",r=.5===e.offset?"center":"right"):(n="top",r=.5===e.offset?"center":"left");break;case"Center":r="center",n="center"}if(0===e.offset||1===e.offset){switch(o=i[0],a=i[1],Math.abs(a.x-o.x)>Math.abs(a.y-o.y)?o.x<a.x?"right":"left":o.y<a.y?"bottom":"top"){case"left":r=0===e.offset?"right":"left";break;case"right":r=0===e.offset?"left":"right";break;case"bottom":n=0===e.offset?"top":"bottom";break;case"top":n=0===e.offset?"bottom":"top"}}var o,a;return{hAlign:r,vAlign:n}}(e,o.angle,t),l=s.hAlign,c=s.vAlign,"left"===l?(d="Left",u.x+=e.displacement.x):"right"===l?(d="Right",u.x-=e.displacement.x):"center"===l&&(d="Center"),"top"===c?(p="Top",u.y+=e.displacement.y):"bottom"===c?(p="Bottom",u.y-=e.displacement.y):"center"===c&&(p="Center"),n.horizontalAlignment=d,n.verticalAlignment=p,n.setOffsetWithRespectToBounds(u.x,u.y,"Absolute"),n.relativeMode="Point"},t.prototype.getConnectorPoints=function(e,t,i){Math.abs(this.sourcePoint.x-this.targetPoint.x),Math.abs(this.sourcePoint.y-this.targetPoint.y);var n=jr(this,i).slice(0);return n&&n.length>0&&(this.sourcePoint=n[0],this.targetPoint=n[n.length-1]),n},t.prototype.clipDecorator=function(e,t,i,n){var r,o,a={x:0,y:0},s=t.length;r=i?t[0]:t[s-1],o=i?t[1]:t[s-2];var l=Qi.distancePoints(r,o);l=0===l?1:l;var c=1,h=i?e.sourceWrapper:e.targetWrapper;h&&(c=h.style.strokeWidth,n&&n&jn.DecoratorPropertyChange&&(c=1));var d=c-1;return a.x=Math.round(r.x+d*(o.x-r.x)/l),a.y=Math.round(r.y+d*(o.y-r.y)/l),(i&&"None"!==e.sourceDecorator.shape||!i&&"None"!==e.targetDecorator.shape)&&(a=Qi.adjustPoint(a,o,!0,n&jn.DecoratorPropertyChange?0:c/2)),a},t.prototype.clipDecorators=function(e,t,i){return"None"!==e.sourceDecorator.shape&&(t[0]=this.clipDecorator(e,t,!0,i)),"None"!==e.targetDecorator.shape&&(t[t.length-1]=this.clipDecorator(e,t,!1,i)),t},t.prototype.updateSegmentElement=function(e,t,i,n){var r,o=new hn;if(r=this.getSegmentPath(e,t,n),"Bezier"===e.type){if(this.segments.length>0)for(var a=0;a<this.segments.length;a++){var s=this.segments[a],l=e.segments[a],c=Qi.isEmptyPoint(s.point1)?l.bezierPoint1:l.point1,h=Qi.isEmptyPoint(s.point2)?l.bezierPoint2:l.point2;o.uniteRect(Ya(s.points[0],c,h,s.points[1],e))}}else o=hn.toBounds(t);return i.width=o.width,i.height=o.height,i.offsetX=o.x+i.width/2,i.offsetY=o.y+i.height/2,i.data=r,e.wrapper&&(e.wrapper.offsetX=i.offsetX,e.wrapper.offsetY=i.offsetY,e.wrapper.width=o.width,e.wrapper.height=o.height),i},t.prototype.getSegmentElement=function(e,t,i,n){var r;return jc(e),r=this.getConnectorPoints(e.type,void 0,i),this.intermediatePoints=r,t.staticSize=!0,t=this.updateSegmentElement(e,r,t,n)},t.prototype.getDecoratorElement=function(e,t,i,n,r){var o=new dr;if(o.transform=Mn.Self,this.updateDecoratorElement(o,e,t,i),void 0!==r){var a=r(i,this);o.description=a||"source"}return o},t.prototype.bridgePath=function(e,t,i){var n=t;if(e.bridges.length>0)if("Straight"===e.type&&e.segments.length<2)for(var r=0;r<e.bridges.length;r++){(o=e.bridges[r]).rendered||(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0)}else if("Orthogonal"===e.type||"Straight"===e.type&&e.segments.length>1)for(r=0;r<e.bridges.length;r++){var o;(o=e.bridges[r]).segmentPointIndex===i&&(o.rendered||o.segmentPointIndex===i&&(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0))}return n},t.prototype.updateDecoratorElement=function(e,t,i,n){var r,o;e.offsetX=t.x,e.offsetY=t.y,o=Qi.findAngle(t,i),r=function(e,t){return"Custom"===e?t.pathData:Ir[e]}(n.shape,n);var a=new Zi(n.width,n.height);e.pivot.x=n.pivot.x,e.pivot.y=n.pivot.y,e.style=n.style,e.rotateAngle=o,e.data=r,e.canMeasurePath=!0,e.width=a.width,e.height=a.height},t.prototype.getSegmentPath=function(e,t,i){for(var n,r,o,a="",s=[],l=0;l<t.length;)s.push({x:t[l].x,y:t[l].y}),l++;for(var c=0;c<e.bridges.length;c++){e.bridges[c].rendered=!1}if(s=this.clipDecorators(e,s,i),this.cornerRadius>0&&"Bezier"!==this.type)for(var h=0;h<s.length-1;h++){n=s[h],0===h&&(a="M"+n.x+" "+n.y);var d=Qi.distancePoints(s[h],s[h+1]);d>0&&(r=h<s.length-2?d<2*this.cornerRadius?Qi.adjustPoint(s[h],s[h+1],!1,d/2):Qi.adjustPoint(s[h],s[h+1],!1,this.cornerRadius):s[h+1],h>0&&(d<2*this.cornerRadius?(o=Qi.adjustPoint(s[h],s[h+1],!0,d/2),h<s.length-2&&(r=null)):o=Qi.adjustPoint(s[h],s[h+1],!0,this.cornerRadius)),o&&(a+="Q"+n.x+" "+n.y+" "+o.x+" "+o.y),r&&(e.bridges.length>0&&(a=this.bridgePath(e,a,h),"Orthogonal"===e.type&&(a=this.bridgePath(e,a,h+1))),a+=" L"+r.x+" "+r.y))}else if("Bezier"===this.type){for(var p=void 0,u=this.segments,f=0;f<u.length;f++)s.length>2&&(u[f].bezierPoint1={x:0,y:0},u[f].bezierPoint2={x:0,y:0}),!Qi.isEmptyPoint(u[f].point1)||u[f].vector1.angle||u[f].vector1.distance?u[f].vector1.angle||u[f].vector1.distance?u[f].bezierPoint1=Qi.transform(s[f],u[f].vector1.angle,u[f].vector1.distance):u[f].bezierPoint1={x:u[f].point1.x||u[f].bezierPoint1.x,y:u[f].point1.y||u[f].bezierPoint1.y}:((e.sourceID||this.sourcePortID)&&this.sourceWrapper&&(p=Fa(this.sourceWrapper.bounds,s[f],!0)),u[f].bezierPoint1=Ua(s[f],s[f+1],p)),!Qi.isEmptyPoint(u[f].point2)||u[f].vector2.angle||u[f].vector2.distance?u[f].vector2.angle||u[f].vector2.distance?u[f].bezierPoint2=Qi.transform(s[f+1],u[f].vector2.angle,u[f].vector2.distance):u[f].bezierPoint2={x:u[f].point2.x||u[f].bezierPoint2.x,y:u[f].point2.y||u[f].bezierPoint2.y}:((e.targetID||this.targetPortID)&&this.targetWrapper&&(p=Fa(this.targetWrapper.bounds,s[f+1],!0)),u[f].bezierPoint2=Ua(s[f+1],s[f],p));s.splice(1,0,{x:u[0].bezierPoint1.x,y:u[0].bezierPoint1.y}),s.splice(s.length-1,0,{x:u[u.length-1].bezierPoint2.x,y:u[u.length-1].bezierPoint2.y}),s=this.clipDecorators(e,s,i);for(var g=0;g<u.length;g++){0===g&&(a="M"+s[0].x+" "+s[0].y);var m=g===u.length-1?s[s.length-1].x+" "+s[s.length-1].y:u[g].points[u[g].points.length-1].x+" "+u[g].points[u[g].points.length-1].y;a+="C"+u[g].bezierPoint1.x+" "+u[g].bezierPoint1.y+" "+u[g].bezierPoint2.x+" "+u[g].bezierPoint2.y+" "+m}}else for(var y=0;y<s.length;y++)n=s[y],0===y&&(a="M"+n.x+" "+n.y),y>0&&(a=this.bridgePath(e,a,y),a+=" L"+n.x+" "+n.y);return a},t.prototype.updateShapeElement=function(e){var t;switch(e.shape.type){case"Bpmn":e.wrapper.children[3]instanceof dr&&(t=e.wrapper.children[3]),("Message"===e.shape.flow||w()&&"Message"===e.shape.bpmnFlow)&&this.updateShapePosition(e,t);break;case"UmlActivity":("Exception"===e.shape.flow||w()&&"Exception"===e.shape.umlActivityFlow)&&this.getUMLExceptionFlow(e.wrapper.children[0])}},t.prototype.updateShapePosition=function(e,t){for(var i,n,r=0,o=this.intermediatePoints,a=0;a<o.length-1;a++){var s=.5*(r+=this.distance(o[a],o[a+1]));r>=s&&(i=to(o[a],o[a+1]),n=Qi.transform(o[a],i,s))}t.offsetX=n.x,t.offsetY=n.y},t.prototype.scale=function(e,t,i,n,r){var o=0,a=0;if(this.wrapper&&this.wrapper.outerBounds){var s=yo(this),l=(this.wrapper.bounds.width||this.style.strokeWidth||1)-2,c=(this.wrapper.bounds.height||this.style.strokeWidth||1)-2;o=s.width-l,a=s.height-c,e=(i-Math.max(o,a))/l,t=(n-Math.max(o,a))/c,o=a=Math.min(o,a)}e=t=Math.min(e,t);var h=pn();fn(h,-(r=r||this.wrapper).rotateAngle,r.offsetX,r.offsetY),gn(h,e,t,r.offsetX,r.offsetY),fn(h,r.rotateAngle,r.offsetX,r.offsetY);var d=function(e,t){for(var i=[],n=0,r=t;n<r.length;n++){var o=r[n];i.push(un(e,o))}return i}(h,this.intermediatePoints);return this.sourcePoint=d[0],this.targetPoint=d[d.length-1],bc(this,d=this.intermediatePoints=jr(this)),{x:o,y:a}},t.prototype.getClassName=function(){return"Connector"},ka([Ht(Aa)],t.prototype,"shape",void 0),ka([zt(Pn.Default)],t.prototype,"constraints",void 0),ka([zt(10)],t.prototype,"bridgeSpace",void 0),ka([_t([],Or)],t.prototype,"annotations",void 0),ka([Bt({},Qi)],t.prototype,"sourcePoint",void 0),ka([Bt({},Qi)],t.prototype,"targetPoint",void 0),ka([Wt(Ma)],t.prototype,"segments",void 0),ka([zt("")],t.prototype,"sourceID",void 0),ka([zt("")],t.prototype,"targetID",void 0),ka([zt(10)],t.prototype,"hitPadding",void 0),ka([zt(0)],t.prototype,"connectionPadding",void 0),ka([zt("Straight")],t.prototype,"type",void 0),ka([zt(0)],t.prototype,"cornerRadius",void 0),ka([Bt({shape:"None"},Da)],t.prototype,"sourceDecorator",void 0),ka([Bt({shape:"Arrow"},Da)],t.prototype,"targetDecorator",void 0),ka([Bt({},fa)],t.prototype,"tooltip",void 0),ka([zt("")],t.prototype,"sourcePortID",void 0),ka([zt("")],t.prototype,"targetPortID",void 0),ka([zt(0)],t.prototype,"sourcePadding",void 0),ka([Bt({},xa)],t.prototype,"previewSize",void 0),ka([Bt({},xa)],t.prototype,"dragSize",void 0),ka([zt(0)],t.prototype,"targetPadding",void 0),ka([Bt({strokeWidth:1,strokeColor:"black"},Jn)],t.prototype,"style",void 0),ka([zt(null)],t.prototype,"wrapper",void 0),t}(Oa),Qa=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ja=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},es=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.offset=0,n.scale=1,n}return Qa(t,e),t.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},t.prototype.getModuleName=function(){return"Ruler"},t.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}}},t.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},t.prototype.renderRulerSpace=function(){var e=this.getRulerGeometry(),t=document.getElementById(this.element.id+"_ruler_space");return t||(t=nd("div",{id:this.element.id+"_ruler_space",style:"height:"+e.height+"px;width:"+e.width+"px;cssFloat:left;"}),this.element.appendChild(t)),t},t.prototype.updateRuler=function(){var e=this.getRulerSize(),t=this.getRulerGeometry(),i=0,n=0,r=new Zi,o=this.getRulerSVG(t);if(o&&(i=this.length,r.height=e,n=this.offset,i&&i!==1/0)){var a=i+this.segmentWidth,s=n;this.updateSegments(s,a+Math.abs(s),o,e)}},t.prototype.updateSegments=function(e,t,i,n){for(var r=e,o={trans:0};r<t;){var a=this.getNewSegment(r,i);a&&(i.appendChild(a.segment),r=this.updateSegment(e,t,a,r,o,n))}},t.prototype.updateSegment=function(e,t,i,n,r,o){var a=this.updateSegmentWidth(this.scale);n===e?(this.startValue=Math.floor(e/a)*a/this.scale,this.startValue=this.startValue%1!==0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString(),this.defStartValue=n=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=e-n:this.vRulerOffset=e-n):(this.startValue=n/this.scale,this.startValue=this.startValue%1!==0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString()),this.updateTickLabel(i,o);var s="Horizontal"===this.orientation?r.trans+.5+",0.5":"0.5,"+(r.trans+.5);return i.segment.setAttribute("transform","translate("+s+")"),r.trans+=a,n+=a},t.prototype.updateTickLabel=function(e,t){var i=e.segment.lastChild.getBBox(),n="Horizontal"===this.orientation,r="RightOrBottom"===this.tickAlignment,o=n?2:0,a=n?r?t/2+5.5-5.5:t/2+5.5:i.height,s=r?-(i.width+2)+","+(t/2-i.height):-(i.width+2)+","+(t/2-i.height/2),l=n?{x:o,y:a}:{x:o,y:a,transform:"rotate(270)translate("+s+")"};hd(e.segment.lastChild,l)},t.prototype.getNewSegment=function(e,t){var i=this.createNewTicks(e,t);return{segment:i,label:this.createTickLabel(t,i)}},t.prototype.createNewTicks=function(e,t){var i,n,r,o=this.updateSegmentWidth(this.scale);r=rd("g",{class:"e-ruler-segment"});for(var a=0;a<this.interval;a++)n=o/this.interval,i=this.createTick(t,n,a+1,e),r.appendChild(i);return r},t.prototype.getLinePoint=function(e,t,i){var n=this.updateSegmentWidth(this.scale),r=this.getRulerSize();return i=(t*=i-1)%n===0?r:.3*r},t.prototype.createTick=function(e,t,i,n){var r,o,a=this.getLinePoint(e,t,i),s=this.getRulerSize(),l="Horizontal"===this.orientation,c="RightOrBottom"===this.tickAlignment,h=Ld(this.arrangeTick);o={ruler:void 0,tickLength:a,tickInterval:this.segmentWidth/this.interval*(i-1)},h&&h(o),a=o.tickLength;var d=t*(i-1);return(r=rd("line",{x1:l?d:c?s:0,y1:l?c?s:s-(s-a):d,x2:l?d:c?s-a:s-(s-a),y2:l?c?s-a:0:d,"stroke-width":"1",stroke:"black"})).setAttribute("class","e-ruler-tick"),r},t.prototype.createTickLabel=function(e,t){var i;if(t){i=rd("text",{class:"e-ruler-tick-label"}),t.appendChild(i)}return i},t.prototype.updateSegmentWidth=function(e){if(100!==this.segmentWidth)return this.segmentWidth;var t,i=1;for(t=100,t=100/Math.pow(2,Math.round(Math.log(e)/Math.log(2)));t>100;)i/=10,t/=10;for(;t<25;)i*=10,t*=10;return t>=25&&t%25!==0&&(t=25*Math.round(t/25)),t*e/i},t.prototype.createMarkerLine=function(e,t,i){var n;return t&&((n=e.getElementById(t.id+"_marker"))&&n.parentNode.removeChild(n),n=rd("line",i)),n},t.prototype.drawRulerMarker=function(e,t,i){var n,r,o,a,s,l,c,h="Horizontal"===this.orientation,d=e.getElementsByTagName("svg");for(s=0;s<d.length;s++){d[s]&&(n=d[s]);break}if(n){r=this.getRulerSize(),l={id:e.id+"_marker",x1:0,y1:0,x2:h?0:r,y2:h?r:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"},c=this.createMarkerLine(n,e,l),o=this.scale,a=this.offset-this.defStartValue;var p=(h?t.x:t.y)*o+i+a;c.setAttribute("transform","translate("+(h?p+.5+" 0.5":"0.5 "+(p+.5))+")"),n.appendChild(c)}},t.prototype.getRulerGeometry=function(){return new Zi(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},t.prototype.getRulerSize=function(){return this.thickness},t.prototype.getRulerSVG=function(e){var t,i,n=this.getRulerSize();if(this.element&&(t=document.getElementById(this.element.id+"_ruler_space"))){if(i=rd("svg",{id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?e.width+200:n+"px",height:"Horizontal"===this.orientation?n:e.height+200+"px",style:"position:inherit;"}),t.childNodes.length>0)for(var r=t.childNodes.length-1;r>=0;r--)t.childNodes[r].parentNode.removeChild(t.childNodes[r]);t.appendChild(i)}return i},t.prototype.wireEvents=function(){},t.prototype.unWireEvents=function(){},Ja([zt(5)],t.prototype,"interval",void 0),Ja([zt(100)],t.prototype,"segmentWidth",void 0),Ja([zt("Horizontal")],t.prototype,"orientation",void 0),Ja([zt("RightOrBottom")],t.prototype,"tickAlignment",void 0),Ja([zt("red")],t.prototype,"markerColor",void 0),Ja([zt(25)],t.prototype,"thickness",void 0),Ja([zt(null)],t.prototype,"arrangeTick",void 0),Ja([zt(400)],t.prototype,"length",void 0),t}(si);function ts(e,t){var i=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler")),n=rs(e),r=os(e),o=t?"margin-left:"+n.width+"px;":"margin-top:"+n.height+"px;";if(!i){var a="height:"+(t?n.height:r.height+100)+"px;overflow:hidden;width:"+(t?r.width+100:n.width)+"px;position:absolute;font-size:11px;"+o;i=nd("div",{id:e.element.id+(t?"_hRuler":"_vRuler"),style:a})}e.element.insertBefore(i,e.element.firstChild);var s=t?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler,l=new es(s);l.orientation=t?"Horizontal":"Vertical",l.length=(t?r.width:r.height)+s.segmentWidth,l.appendTo("#"+e.element.id+(t?"_hRuler":"_vRuler")),t?e.hRuler=l:e.vRuler=l;var c=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler"));t?e.hRuler.element=c:e.vRuler.element=c}function is(e){var t=-e.scroller.horizontalOffset,i=-e.scroller.verticalOffset;e&&e.rulerSettings.showRulers?(e.hRuler.length=0,e.vRuler.length=0,void 0!==t&&e.hRuler.element&&as(e,e.hRuler,t,!0),void 0!==i&&e.vRuler.element&&as(e,e.vRuler,i,!1)):ns(e)}function ns(e){ld(e.element.id+"_hRuler"),ld(e.element.id+"_vRuler"),ld(e.element.id+"_overlapRuler")}function rs(e){var t=0,i=0;return e.rulerSettings.showRulers&&(t=e.rulerSettings.horizontalRuler.thickness,i=e.rulerSettings.verticalRuler.thickness),new Zi(i,t)}function os(e){var t=rs(e),i=e.scroller.viewPortHeight,n=e.scroller.viewPortWidth;return n<e.element.clientWidth-t.width&&(n=e.element.clientWidth-t.width),i<e.element.clientHeight-t.height&&(i=e.element.clientHeight-t.height),e.hRuler&&e.hRuler.length&&(n=e.hRuler.length),e.vRuler&&e.vRuler.length&&(i=e.vRuler.length),new Zi(n,i)}function as(e,t,i,n){var r=rs(e),o=os(e),a=n?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler;!function(e,t,i){var n=document.getElementById(e.element.id+(i?"_hRuler":"_vRuler")),r=i?e.hRuler:e.vRuler;n&&e&&t&&(n.style.width=(i?t.width+r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:t.height+r.segmentWidth)+"px",(n=document.getElementById(e.element.id+"_overlapRuler"))&&(i?n.style.height=r.thickness+"px":n.style.width=r.thickness+"px"))}(e,o,n),function(e,t,i){var n=document.getElementById(e.element.id+(i?"_hRuler_ruler_space":"_vRuler_ruler_space")),r=i?e.hRuler:e.vRuler;n&&e&&t&&(n.style.width=(i?t.width+2*r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:t.height+2*r.segmentWidth)+"px")}(e,o,n),t.offset=i,t.scale=e.scroller.currentZoom,t.length=(n?o.width:o.height)+100,t.arrangeTick=Ld(a.arrangeTick),t.dataBind();var s=n?e.hRuler.element:e.vRuler.element;n?s.style.marginLeft=r.width-t.hRulerOffset+"px":s.style.marginTop=r.height-t.vRulerOffset+"px"}function ss(e){if(e){return e instanceof Pr||e instanceof Or?e.constraints&On.Select:e instanceof $a?e.constraints&Pn.Select:e.constraints&En.Select}return 1}function ls(e){if(e){return e instanceof Pr||e instanceof Or?e.constraints&On.Drag:e instanceof $a?e.constraints&Pn.Drag:e instanceof Hh?1:e.constraints&En.Drag}return 1}function cs(e){return e.constraints&Pn.DragSourceEnd}function hs(e){return e.constraints&Pn.DragTargetEnd}function ds(e){return e.constraints&Pn.DragSegmentThumb}function ps(e){return e instanceof Pr||e instanceof Or?e.constraints&On.Rotate:e.constraints&En.Rotate}function us(e){return e.constraints&En.Shadow}function fs(e){return e instanceof Lh&&e.constraints&En.InConnect?e.constraints&En.InConnect:0}function gs(e){return e&&e.constraints&&!(e.constraints&_n.None)&&e.constraints&_n.InConnect?e.constraints&_n.InConnect:0}function ms(e){return e instanceof Lh&&e.constraints&En.OutConnect?e.constraints&En.OutConnect:0}function ys(e){return e&&e.constraints&&!(e.constraints&_n.None)&&e.constraints&_n.OutConnect?e.constraints&_n.OutConnect:0}function vs(e,t){var i=0;return e instanceof Pr||e instanceof Or?i=e.constraints&On.Resize:e&&("SouthEast"===t?i=e.constraints&En.ResizeSouthEast:"East"===t?i=e.constraints&En.ResizeEast:"NorthEast"===t?i=e.constraints&En.ResizeNorthEast:"South"===t?i=e.constraints&En.ResizeSouth:"North"===t?i=e.constraints&En.ResizeNorth:"SouthWest"===t?i=e.constraints&En.ResizeSouthWest:"West"===t?i=e.constraints&En.ResizeWest:"NorthWest"===t&&(i=e.constraints&En.ResizeNorthWest)),i}function bs(e){return e instanceof $a?e.constraints&Pn.AllowDrop:e.constraints&En.AllowDrop}function ws(e){return e.constraints&kn.Virtualization}function xs(e){return e.tool&An.SingleSelect}function Ss(e){return e.tool&An.MultipleSelect}function Cs(e){return e.tool&An.ZoomPan}function Ps(e){return e.tool&An.ContinuousDraw}function Os(e){return e.tool&An.DrawOnce}function Es(e){return e.tool&An.SingleSelect||e.tool&An.MultipleSelect}function Ts(e){return e.constraints&kn.UserInteraction}function Is(e){return e.constraints&kn.ZoomTextEdit}function ks(e){return function(e){return e.constraints&kn.ApiUpdate}(e)||e.diagramActions&jn.ToolAction}function As(e,t){return e.constraints&_n.Draw}function Ms(e,t){return e.constraints&_n.Drag}function Ds(e){return!(e&Nn.DrawSelectorBorder)}function Ls(e){return!!(e&Nn.PreventRenderSelector)}var Rs=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),js=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ns=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rs(t,e),t.prototype.getClassName=function(){return"UserHandle"},js([zt("")],t.prototype,"name",void 0),js([zt("")],t.prototype,"pathData",void 0),js([zt("")],t.prototype,"content",void 0),js([zt("")],t.prototype,"source",void 0),js([zt("#000000")],t.prototype,"backgroundColor",void 0),js([zt("Top")],t.prototype,"side",void 0),js([zt("")],t.prototype,"borderColor",void 0),js([zt(.5)],t.prototype,"borderWidth",void 0),js([zt(25)],t.prototype,"size",void 0),js([zt("white")],t.prototype,"pathColor",void 0),js([zt(10)],t.prototype,"displacement",void 0),js([zt(!0)],t.prototype,"visible",void 0),js([zt(0)],t.prototype,"offset",void 0),js([Bt({},Yn)],t.prototype,"margin",void 0),js([zt("Center")],t.prototype,"horizontalAlignment",void 0),js([zt("Center")],t.prototype,"verticalAlignment",void 0),js([zt(!1)],t.prototype,"disableNodes",void 0),js([zt(!1)],t.prototype,"disableConnectors",void 0),js([zt("")],t.prototype,"template",void 0),t}(ii);function zs(e){return Bs[e.toString()]}var Bs={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},Hs=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_s=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ws=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hs(t,e),_s([zt()],t.prototype,"key",void 0),_s([zt()],t.prototype,"keyModifiers",void 0),t}(ii),Fs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hs(t,e),t.prototype.getClassName=function(){return"Command"},_s([zt("")],t.prototype,"name",void 0),_s([zt()],t.prototype,"canExecute",void 0),_s([zt()],t.prototype,"execute",void 0),_s([Bt({},Ws)],t.prototype,"gesture",void 0),_s([zt("")],t.prototype,"parameter",void 0),t}(ii),Vs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hs(t,e),_s([_t([],Fs)],t.prototype,"commands",void 0),t}(ii),Us=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hs(t,e),_s([zt()],t.prototype,"show",void 0),_s([zt()],t.prototype,"showCustomMenuOnly",void 0),_s([zt()],t.prototype,"items",void 0),t}(ii),Ys=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childTable=[],t.cellStyle={},t.desiredRowHeight=[],t.desiredCellWidth=[],t}return Ys(t,e),t.prototype.rowDefinitions=function(){return this.rowDefns},t.prototype.columnDefinitions=function(){return this.colDefns},t.prototype.addObject=function(e,t,i,n,r){if(this.rows.length>=t){var o=this.rows[t];if(o.cells.length>i){r=r||1,n=n||1;var a=o.cells[i];a.columnSpan=Math.max(r,a.columnSpan),a.rowSpan=Math.max(n,a.rowSpan);var s=new $s;(s=e).rowId=t,s.columnId=i,s.columnSpan=r,this.childTable[s.id]=s,this.addObjectToCell(s,a)}}},t.prototype.addObjectToCell=function(e,t){t.children||(t.children=[]),e.style.strokeColor="black",e.style.strokeWidth=1,e.style.fill="white",t.children.push(e)},t.prototype.updateProperties=function(e,t,i,n){this.offsetX=e,this.offsetY=t,this.width=i,this.height=n},t.prototype.setDefinitions=function(e,t){this.rowDefns=e,this.colDefns=t,this.children=[],this.rows=this.rows||[];for(var i=0;i<e.length;i++){var n=e[i],r=new Zs;r.cells=[];var o=new qs;o.width=this.width;var a=this.colDefns;(void 0===a||a.length<1)&&(a=[o]),this.addCellInRow(a,n,r),this.rows.push(r)}},t.prototype.addCellInRow=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n],o=new Ks;o.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",o.id=md(),o.style=this.cellStyle,o.desiredCellWidth=o.minWidth=r.width,o.desiredCellHeight=o.minHeight=t.height,i.cells.push(o),this.children.push(o)}},t.prototype.calculateSize=function(){for(var e=this.rows||[],t=0,i=0,n=0;n<e.length;n++){var r=this.rows[n];i=0;for(var o=0;o<r.cells.length;o++)if(i+=r.cells[o].desiredCellWidth,o===r.cells.length-1&&(this.width&&this.width!==i&&(r.cells[o].desiredCellWidth+=this.width-i,r.cells[o].minWidth=r.cells[o].desiredCellWidth,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].width=r.cells[o].desiredCellWidth),this.colDefns[o].width=r.cells[o].desiredCellWidth),t+=r.cells[o].desiredCellHeight,n===e.length-1&&this.height&&this.height!==t)){var a=this.height-t;if(a>0){for(var s=0;s<r.cells.length;s++)r.cells[s].desiredCellHeight+=a,r.cells[s].minHeight=r.cells[s].desiredCellHeight=r.cells[s].desiredCellHeight,r.cells[s].children&&r.cells[s].children.length&&(r.cells[s].children[0].height=r.cells[s].desiredCellHeight);this.rowDefns[n].height+=a}}}},t.prototype.updateRowHeight=function(e,t,i,n){var r=this.rows[e];this.rowDefns[e].height=t,void 0!==this.height&&(this.height+=t-r.cells[0].desiredCellHeight);for(var o=0;o<r.cells.length;o++)r.cells[o].desiredCellHeight=r.cells[o].minHeight=t,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].height=t,this.setTextRefresh(r.cells[o].children[0]));if(this.desiredRowHeight[e]=t,this.measure(new Zi(this.width,this.height)),this.arrange(this.desiredSize),i){var a=void 0!==n?this.calculateCellHeightBasedOnChildren(e,n):this.calculateCellHeight(e);a>t&&this.updateRowHeight(e,a,!1)}},t.prototype.setTextRefresh=function(e){if(e.children&&e.children.length)for(var t=e.children,i=0;i<t.length;i++)t[i]instanceof or&&t[i].refreshTextElement(),t[i]instanceof sr&&this.setTextRefresh(t[i])},t.prototype.updateColumnWidth=function(e,t,i,n){this.colDefns[e].width=t,void 0!==this.width&&(this.width+=t-this.rows[this.rows.length-1].cells[e].desiredCellWidth);for(var r=0;r<this.rows.length;r++)this.setTextRefresh(this.rows[r].cells[0]),this.rows[r].cells[e].desiredCellWidth=this.rows[r].cells[e].minWidth=t,this.rows[r].cells[e].children&&this.rows[r].cells[e].children.length&&(this.rows[r].cells[e].children[0].width=t);if(this.desiredCellWidth[e]=t,this.measure(new Zi(this.width,this.height)),this.arrange(this.desiredSize),i){var o=void 0!==n?this.calculateCellWidthBasedOnChildren(e,n):this.calculateCellWidth(e);o>t&&this.updateColumnWidth(e,o,!1)}},t.prototype.calculateCellWidth=function(e){for(var t,i,n,r=0;r<this.rows.length;r++)1===(n=this.rows[r].cells[e]).columnSpan&&(i=n.outerBounds.width>n.bounds.width&&(0===n.children.length||void 0===n.children[0].maxWidth)?n.outerBounds.width:n.bounds.width,t=t?t<i?i:t:i);return t},t.prototype.calculateCellHeight=function(e){for(var t,i,n,r=this.rows[e],o=0;o<r.cells.length;o++)i=(n=r.cells[o]).outerBounds.height>n.bounds.height?n.outerBounds.height:n.bounds.height,t=t?t<i?i:t:i;return t},t.prototype.calculateCellSizeBasedOnChildren=function(e,t,i,n){var r,o;if((o=e&&e.children.length>0?e.children[0]:void 0)&&1===e.columnSpan){r="Width"===t?o.bounds.right:o.bounds.bottom,n||(n="Width"===t?o.bounds.width:o.bounds.height);for(var a=0;a<o.children.length;a++){var s=o.children[a];if(s instanceof sr&&-1===s.id.indexOf("header")){var l=("Width"===t?s.bounds.right:s.bounds.bottom)+i;if(l>r){var c=l-r+("Width"===t?o.bounds.width:o.bounds.height);n&&(n=n<c?c:n)}}}}return n},t.prototype.calculateCellWidthBasedOnChildren=function(e,t){for(var i,n,r=0;r<this.rows.length;r++)n=this.rows[r].cells[e],i=this.calculateCellSizeBasedOnChildren(n,"Width",t,i);return i},t.prototype.calculateCellHeightBasedOnChildren=function(e,t){for(var i,n,r=this.rows[e],o=0;o<r.cells.length;o++)n=r.cells[o],i=this.calculateCellSizeBasedOnChildren(n,"Height",t,i);return i},t.prototype.addRow=function(e,t,i){this.rowDefns.length>0?this.rowDefns.splice(e,0,t):this.rowDefns.push(t);var n=new Zs;n.cells=[],(new qs).width=this.width;var r=this.colDefns;this.addCellInRow(r,t,n),e>this.rows.length-1?this.rows.push(n):this.rows.splice(e,0,n),i&&(this.measure(new Zi(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.addColumn=function(e,t,i){var n,r,o,a,s=this.rows;this.colDefns.length>0?this.colDefns.splice(e,0,t):this.colDefns.push(t),void 0!==this.width&&(this.width+=t.width);for(var l=0;l<s.length;l++)n=s[l],r=this.rowDefns[l],o=t,(a=new Ks).style=this.cellStyle,a.desiredCellWidth=a.minWidth=o.width,a.desiredCellHeight=a.minHeight=r.height,a.children=[],e>n.cells.length-1?n.cells.push(a):n.cells.splice(e,0,a),this.children.push(a);i&&(this.measure(new Zi(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.removeRow=function(e){var t,i,n=this.rows[e];this.height-=this.rowDefns[e].height;for(var r=0;r<n.cells.length;r++)t=n.cells[r],this.children.splice(this.children.indexOf(t),1),(i=document.getElementById(t.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i);this.rows.splice(e,1),this.rowDefns.splice(e,1),this.measure(new Zi(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.removeColumn=function(e){var t,i,n=this.rows;this.width-=this.colDefns[e].width;for(var r=0;r<n.length;r++)t=n[r].cells[e],this.children.splice(this.children.indexOf(t),1),(i=document.getElementById(t.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i),n[r].cells.splice(e,1);this.colDefns.splice(e,1),this.measure(new Zi(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateRowIndex=function(e,t){this.rows;var i=this.rows[e];this.rows.splice(e,1),this.rows.splice(t,0,i);var n=this.rowDefns[e];this.rowDefns.splice(e,1),this.rowDefns.splice(t,0,n),this.measure(new Zi(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateColumnIndex=function(e,t,i){for(var n,r,o,a=e;a<this.rows.length;a++)n=this.rows[a],r=this.rows[a].cells[t],n.cells.splice(t,1),n.cells.splice(i,0,r);var s=this.colDefns[t];this.colDefns.splice(t,1),this.colDefns.splice(i,0,s),o=this.desiredCellWidth[t],this.desiredCellWidth.splice(t,1),this.desiredCellWidth.splice(i,0,o),this.measure(new Zi(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.measure=function(t){var i=void 0;if(void 0!==this.rows&&this.rows.length>0){var n=0,r=0;i=new Zi(0,0),this.calculateSize();for(var o=0,a=this.rows;o<a.length;o++){r=0;for(var s=0,l=(u=a[o]).cells;s<l.length;s++){var c=(y=l[s]).measure(new Zi(y.desiredCellWidth,y.desiredCellHeight));1===y.rowSpan&&(0===r||void 0===this.desiredRowHeight[n]?this.desiredRowHeight[n]=c.height:this.desiredRowHeight[n]=Math.max(c.height,this.desiredRowHeight[n])),1===y.columnSpan&&(0===n||void 0===this.desiredCellWidth[r]?this.desiredCellWidth[r]=c.width:this.desiredCellWidth[r]=Math.max(c.width,this.desiredCellWidth[r]),n===this.rows.length-1&&(i.width+=this.desiredCellWidth[r])),r++}i.height+=this.desiredRowHeight[n],n++}n=r=0;for(var h=0,d=0,p=this.rows;d<p.length;d++){var u;r=0;for(var f=0,g=0,m=(u=p[d]).cells;g<m.length;g++){var y;if(1!==(y=m[g]).columnSpan){y.desiredSize.width=0;for(var v=0;v<y.columnSpan;v++)v+r<u.cells.length&&(y.desiredSize.width+=this.desiredCellWidth[v+r],y.minWidth=y.desiredSize.width,y.measure(y.desiredSize));r++}else y.desiredSize.width=this.desiredCellWidth[f],y.measure(y.desiredSize);if(1!==y.rowSpan){y.desiredSize.height=0;for(v=0;v<y.rowSpan;v++)v+h<this.rows.length&&(y.desiredSize.height+=this.desiredRowHeight[v+h],y.minHeight=y.desiredSize.height,y.measure(y.desiredSize))}else y.desiredSize.height=this.desiredRowHeight[h],y.measure(y.desiredSize);n++,f++}h++}}return void 0===i&&(i=e.prototype.validateDesiredSize.call(this,i,t)),e.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},t.prototype.arrange=function(e,t){var i=0,n=0;if(void 0!==this.rows&&this.rows.length>0){for(var r=this.offsetX-e.width*this.pivot.x,o=this.offsetY-e.height*this.pivot.y,a=r,s=0,l=this.rows;s<l.length;s++){a=r,i=0;for(var c=0,h=(f=l[s]).cells;c<h.length;c++){var d=h[c],p=Math.max(this.desiredCellWidth[i],d.desiredSize.width),u=Math.max(this.desiredRowHeight[n],d.desiredSize.height);d.offsetX=a+p*d.pivot.x,d.offsetY=o+u*d.pivot.y,a+=this.desiredCellWidth[i],d.arrange(new Zi(p,u)),i++}o+=this.desiredRowHeight[n],n++}if(t){d=void 0;var f=void 0,g=void 0,m=void 0,y=void 0;for(n=0;n<this.rows.length;n++)for(f=this.rows[n],i=0;i<f.cells.length;i++)if((d=f.cells[i]).columnSpan>1&&this.children.splice(this.children.indexOf(d)+1,d.columnSpan-1),d.rowSpan>1)for(g=n,m=0;g+d.rowSpan-1<this.rows.length&&m<d.rowSpan-1;g++,m++)y=this.rows[g+1].cells[i],this.children.splice(this.children.indexOf(y),1)}}return this.actualSize=e,this.updateBounds(),e},t}(nr),Gs=function(){this.height=void 0},qs=function(){this.width=void 0},Zs=function(){this.cells=null},Ks=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columnSpan=1,t.rowSpan=1,t}return Ys(t,e),t}(sr),$s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowId=0,t.columnId=0,t.rowSpan=1,t.columnSpan=1,t}return Ys(t,e),t}(tr);function Qs(e,t,i,n){var r;if(el(e,t,!0)){var o=e.isProtectedOnChange;e.protectPropertyChange(!0);var a=(r=e.nameTable[t.parentId]).wrapper;if(r&&"Canvas"===r.container.type&&!n&&!(a.bounds.x<=i.x&&a.bounds.right>=i.x&&a.bounds.y<=i.y&&a.bounds.bottom>=i.y)&&!(t.constraints&En.AllowMovingOutsideLane)){var s=xd(t);e.clearSelection(),il(e,t),t.parentId="";var l={type:"ChildCollectionChanged",category:"Internal",undoObject:s,redoObject:xd(t)};e.addHistoryEntry(l),e.commandHandler.isContainer&&(e.commandHandler.isContainer=!1,e.endGroupAction()),rl(t,e)}e.protectPropertyChange(o)}}function Js(e,t){var i,n,r;if(e.enableServerDataBinding(!1),!w()||w()&&e.diagramActions&jn.ToolAction)if(e.selectedObject.helperObject)r=e.selectedObject.helperObject;else if(e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0){if(t instanceof Hh&&t.nodes.length+t.connectors.length===1?(i=t.nodes.length>0?t.nodes[0]:t.connectors[0],n=e.selectedItems.wrapper.children[0]):(i=t,n=w()?t===e.selectedItems.nodes[0]?e.selectedItems.wrapper:t.wrapper:e.selectedItems.wrapper),e.selectedObject.actualObject=i,!e.currentSymbol&&(i.isLane&&Wl(i,e)&&el(e,i)||!i.isLane&&el(e,i)||e.constraints&kn.LineRouting&&e.selectedItems.nodes.length>0))r=function(e,t){for(var i,n={},r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];n[a]=t[a]}return Rc(t)===Lh&&((i=new Lh(e,"nodes",n,!0)).id=t.id,e.initObject(i)),e.updateDiagramObject(i),i}(e,{id:"helper",rotateAngle:n.rotateAngle,offsetX:n.offsetX,offsetY:n.offsetY,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.actualSize.width,height:n.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}}),e.selectedObject.helperObject=r}return e.enableServerDataBinding(!0),r}function el(e,t,i){var n=i?e.nameTable[t.parentId]:e.nameTable[t.parentId]||t;return!(!n||!n.container)}function tl(e,t){var i=e.nameTable[t.parentId];"Canvas"===i.container.type&&(t.margin.left=t.offsetX-i.wrapper.bounds.x-t.width/2,t.margin.top=t.offsetY-i.wrapper.bounds.y-t.height/2),e.nodePropertyChange(t,{},{width:t.width,height:t.height,offsetX:t.offsetX,offsetY:t.offsetY,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},rotateAngle:t.rotateAngle}),i.isLane||(i.wrapper.measure(new Zi),i.wrapper.arrange(i.wrapper.desiredSize))}function il(e,t){if(t.parentId&&""!==t.parentId){var i=e.nameTable[t.parentId];if(i.isLane&&i.parentId)for(var n=e.nameTable[i.parentId],r=i.id.slice(n.id.length),o=r.substring(0,r.length-1),a=n.shape.lanes,s=void 0,l=0;l<a.length;l++)if(o===(s=a[l]).id)for(var c=0;c<s.children.length;c++)s.children[c].id===t.id&&(s.children.splice(c,1),c--);e.deleteChild(t)}}function nl(e,t,i,n,r){if(!e.currentSymbol){e.protectPropertyChange(!0);var o=e.nameTable[t.parentId];i=e.getObject(i.id)||i;var a=-1!==e.nodes.indexOf(i)?i.id:i;if("Canvas"!==t.container.type||r){if(o){var s=o.wrapper.bounds,l=t.wrapper.bounds;if("Horizontal"===o.shape.orientation)i.margin.left-=l.x-s.x;else{var c=t.parentId+o.shape.lanes[0].id+"_0_header";i.margin.top-=l.y-s.y-e.nameTable[c].wrapper.bounds.height}}}else{var h=i.wrapper.offsetX-i.wrapper.actualSize.width/2-(t.wrapper.offsetX-t.wrapper.actualSize.width/2),d=i.wrapper.offsetY-i.wrapper.actualSize.height/2-(t.wrapper.offsetY-t.wrapper.actualSize.height/2);i.margin.left=h,i.margin.top=d}var p=e.nameTable[t.id];if(p.children||(p.children=[]),-1===p.children.indexOf(i.id)){il(e,i),e.getObject(i.id)&&e.removeElements(i);var u=xd(i);if(e.addChild(p,a),i=e.getObject(i.id),p.isLane&&p.parentId)for(var f=(o=e.nameTable[p.parentId]).shape.lanes,g=p.id.slice(o.id.length),m=g.substring(0,g.length-1),y=0;y<f.length;y++)p.isLane&&m===f[y].id&&(i.parentObj instanceof cu||(i.parentObj=f[y]),f[y].children.push(i));if(e.updateDiagramObject(i),rl(i,e),p.parentId?n||ol(p,o,i,e):e.updateDiagramObject(p),!(e.diagramActions&jn.UndoRedo)){var v={type:"ChildCollectionChanged",category:"Internal",undoObject:u,redoObject:xd(i),historyAction:r?"AddNodeToLane":void 0};e.addHistoryEntry(v)}}e.protectPropertyChange(!1)}}function rl(e,t){var i=Yh(e.id+"_groupElement",t.element.id),n=Yh(e.parentId?e.parentId+"_groupElement":t.element.id+"_diagramLayer",t.element.id);i&&n&&n.appendChild(i)}function ol(e,t,i,n,r){var o,a=xd(e),s=!1,l=t.shape.padding,c=e.wrapper.bounds,h=e.wrapper.outerBounds,d=i.wrapper.bounds;if(t&&"SwimLane"===t.shape.type&&(c.right<d.right+l||c.bottom<d.bottom+l)){var p=t.wrapper.children[0],u=p.bounds.x,f=p.bounds.y,g=void 0;if(c.right<d.right+l&&h.x<=c.x&&(g=d.right-c.right,o=!1,p.updateColumnWidth(e.columnIndex,c.width+g,!0,l)),c.bottom<d.bottom+l&&h.y<=c.y&&(g=d.bottom-c.bottom,o=!0,p.updateRowHeight(e.rowIndex,c.height+g,!0,l)),!(n.diagramActions&jn.UndoRedo)&&(r&&(n.startGroupAction(),s=!0),void 0!==o)){var m={category:"Internal",type:o?"RowHeightChanged":"ColumnWidthChanged",undoObject:a,redoObject:xd(e)};n.addHistoryEntry(m)}t.width=t.wrapper.width=p.width,t.height=t.wrapper.height=p.height,fl(t),"Horizontal"===t.shape.orientation&&Ol(t,n,e.wrapper,e.columnIndex),El(n,t),n.drag(t,u-p.bounds.x,f-p.bounds.y),bl(t,n),vl(t)}return function(e,t,i){var n=e.nameTable[t.parentId];if(n&&n.isLane){var r=e.nameTable[n.parentId],o=r.wrapper.children[0];r.wrapper.bounds.x,r.wrapper.bounds.y;o.updateColumnWidth(n.columnIndex,o.columnDefinitions()[n.columnIndex].width,!0,i),o.updateRowHeight(n.rowIndex,o.rowDefinitions()[n.rowIndex].height,!0,i);var a=n.wrapper,s=void 0;t.margin.left<i&&(t.margin.left=i),t.margin.top<i&&(t.margin.top=i);for(var l=0;l<a.children.length;l++){var c=a.children[l];if(c instanceof sr){var h=e.nameTable[c.id];if(h.isLane){s=h.wrapper,!0;break}}}s&&("Horizontal"===r.shape.orientation?t.margin.left<i+s.actualSize.width&&(t.margin.left=i+s.actualSize.width):t.margin.top<i+s.actualSize.height&&(t.margin.top=i+s.actualSize.height)),r.wrapper.measure(new Zi(r.width,r.height)),r.wrapper.arrange(r.wrapper.desiredSize),t.offsetX=t.wrapper.offsetX,t.offsetY=t.wrapper.offsetY,e.nodePropertyChange(t,{},{margin:{left:t.margin.left,top:t.margin.top}}),o.measure(new Zi(o.width,o.height)),o.arrange(o.desiredSize),r.width=r.wrapper.width=r.wrapper.children[0].actualSize.width,r.height=r.wrapper.height=r.wrapper.children[0].actualSize.height}}(n,i,l),n.updateDiagramElementQuad(),s}function al(e,t,i,n,r,o){var a=Gh(n.element.id);n.diagramRenderer.renderStackHighlighter(e,a,n.scroller.transform,t,i,r,o)}function sl(e,t,i){i.width||0!==i.shape.phases.length||(i.width=100);var n=[],r=[],o=0,a=i.shape,s="Horizontal"===a.orientation;if(a.header&&a.hasHeader&&dl(n,a.header.height),function(e,t,i){var n,r=0,o=i.shape;if(e.length>0)for(var a=0;a<e.length;a++)r+=e[a].height;if(t){if(o.phases.length>0&&o.phaseSize&&(r+=o.phaseSize,dl(e,o.phaseSize)),o.lanes.length>0)for(a=0;a<o.lanes.length;a++)n=o.lanes[a].height,r+=n,a===o.lanes.length-1&&r<i.height&&(n+=i.height-r),dl(e,n)}else if(o.phases.length>0){var s=0;for(a=0;a<o.phases.length;a++){var l=o.phases[a].offset;s+=0===a?l:l-=s,r+=n=l,a===o.phases.length-1&&r<i.height&&(n+=i.height-r),dl(e,n)}}else dl(e,i.height)}(n,s,i),function(e,t,i){var n,r,o,a,s=0,l=i.shape;if(l.phases.length>0&&"Horizontal"===l.orientation)for(a=0;a<l.phases.length;a++)n=l.phases[a].offset,s+=0===a?n:n-=s,r=pl(n),a===l.phases.length-1&&s<i.width&&(r.width+=i.width-s),e.push(r);else if(t)r=pl(i.width),e.push(r);else{for(l.phaseSize&&l.phases.length>0?l.lanes.length+1:l.lanes.length,l.phaseSize&&l.phases.length>0&&(s+=l.phaseSize,r=pl(l.phaseSize),e.push(r)),o=0;o<l.lanes.length;o++)s+=l.lanes[o].width,r=pl(l.lanes[o].width),o===l.lanes.length-1&&s<i.width&&(r.width+=i.width-s),e.push(r);0===l.phases.length&&0===l.lanes.length&&(r=pl(i.width),e.push(r))}}(r,s,i),e.setDefinitions(n,r),a.header&&a.hasHeader&&(!function(e,t,i){for(var n=0,r=e.columnDefinitions(),o=i.shape,a=0;a<r.length;a++)n+=r[a].width;o.header.id=o.header.id||md();var s={id:i.id+o.header.id,annotations:[xd(o.header.annotation)],style:o.header.style?o.header.style:void 0,offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:0,columnIndex:0,maxWidth:n,container:{type:"Canvas",orientation:"Horizontal"}};ss(i)||(s.constraints&=~En.Select);var l=ll(t,e,i,s,!0);e.addObject(l,0,0,1,e.columnDefinitions().length)}(e,t,i),o++),a.phases.length>0&&a.phaseSize){for(var l=0;l<a.phases.length;l++)""===a.phases[l].id&&(a.phases[l].id=md()),cl(e,t,i,o,s,l);o++}if(a.lanes.length>0)for(l=0;l<a.lanes.length;l++)""===a.lanes[l].id&&(a.lanes[l].id=md()),hl(e,t,i,o,l,s),o++}function ll(e,t,i,n,r,o,a,s){var l=new Lh(e,"nodes",n,!0);if(l.parentId=i.id,l.isHeader=!!r,l.isPhase=!!o,l.isLane=!!a,s&&(l[o?"PhaseHeaderParent":"LaneHeaderParent"]=s),l.constraints&=~(En.InConnect|En.OutConnect),l.constraints|=En.HideThumbs,e.initObject(l),e.nodes.push(l),l.wrapper.children.length>0){for(var c=0;c<l.wrapper.children.length;c++){var h=l.wrapper.children[c];h instanceof tr&&(h.isCalculateDesiredSize=!1),h instanceof or&&(h.canConsiderBounds=!1,(!r&&"Vertical"===i.shape.orientation&&o||"Vertical"!==i.shape.orientation&&a)&&(h.isLaneOrientation=!0,h.refreshTextElement()))}l.wrapper.measure(new Zi(void 0,void 0)),l.wrapper.arrange(l.wrapper.desiredSize)}return l.wrapper}function cl(e,t,i,n,r,o){var a,s=0,l=0,c=i.shape;r?(l=o,s=n,a=e.columnDefinitions()[o].width):s=c.header&&c.hasHeader?o+1:o;var h={annotations:[xd(c.phases[o].header.annotation)],maxWidth:a,id:i.id+c.phases[o].id+"_header",offsetX:i.offsetX,offsetY:i.offsetY,style:c.phases[o].style,rowIndex:s,columnIndex:l,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}};h.annotations[0].rotateAngle=r?0:270,ss(i)||(h.constraints&=~En.Select),c.phases[o].header.id=h.id;var d=ll(t,0,i,h,!1,!0,!1,c.phases[o].id);e.addObject(d,s,l)}function hl(e,t,i,n,r,o){for(var a,s,l,c,h,d=i.shape,p=d.phases.length||1,u=d.header&&d.hasHeader?1:0,f=0,g=o?n:u,m=d.phaseSize&&d.phases.length>0?1:0,y=0;y<p;y++)f=o?y:r+m,l=e.rows[g].cells[f],c={id:i.id+d.lanes[r].id+y,rowIndex:g,columnIndex:f,width:l.minWidth,height:l.minHeight,offsetX:i.offsetX,offsetY:i.offsetY,style:d.lanes[r].style,constraints:En.Default|En.ReadOnly|En.AllowDrop,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}},ss(i)||(c.constraints&=~En.Select),(s=ll(t,0,i,c,!1,!1,!0)).children[0].isCalculateDesiredSize=!1,0===y&&((a={id:i.id+d.lanes[r].id+"_"+y+"_header",style:d.lanes[r].header.style,annotations:[xd(d.lanes[r].header.annotation)],offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:g,columnIndex:f,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}}).annotations[0].rotateAngle=o?270:0,d.lanes[r].header.id=a.id,o?a.width=d.lanes[r].header.width:a.height=d.lanes[r].header.height,ss(i)||(a.constraints&=~En.Select),h=ll(t,0,i,a,!1,!1,!0,d.lanes[r].id),s.children.push(h)),e.addObject(s,g,f),o||g++,f=o?y:r+1}function dl(e,t){var i=new Gs;i.height=t,e.push(i)}function pl(e){var t=new qs;return t.width=e,t}function ul(e,t,i,n){for(var r,o,a,s,l,c,h,d=[],p=0,u=t.rowDefinitions().length,f=0;f<u;f++)for(c=t.rows[f],s=0;s<c.cells.length;s++)if((l=c.cells[s].children[0])&&l.children&&l.children.length)for(a=1;a<l.children.length;a++)if(r=l.children[a],(o=e.getObject(r.id))&&(o.inEdges.length>0||o.outEdges.length>0))for(h=o.inEdges.concat(o.outEdges),p=0;p<h.length;p++)-1===d.indexOf(h[p])&&d.push(h[p]);return d}function fl(e){var t=e.wrapper;if(t.measure(new Zi(e.width,e.height)),t.children[0]instanceof Xs){var i=t.children[0],n=!1;i.width&&i.width<i.desiredSize.width&&(n=!0,i.width=i.desiredSize.width),i.height&&i.height<i.desiredSize.height&&(n=!0,i.height=i.desiredSize.height),n&&i.measure(new Zi(i.width,i.height))}t.arrange(t.desiredSize)}function gl(e,t,i){var n,r,o,a,s,l,c,h,d=t.wrapper.children[0];for(n=i;n<d.rows.length;n++)for(l=d.rows[n],r=0;r<l.cells.length;r++)if((c=l.cells[r]).children&&c.children.length>0)for(o=0;o<c.children.length;o++)h=c.children[o],(a=e.nameTable[h.id]).isLane&&h.children.length>1&&(s=e.nameTable[h.children[1].id])&&s.isLane&&(s.rowIndex=n,s.columnIndex=r),a.rowIndex=n,a.columnIndex=r}function ml(e,t){var i,n,r,o,a,s,l,c,h=t.wrapper.children[0],d=t.shape,p=d.padding,u=d.lanes,f=h.bounds.y,g=d.phaseSize>0?d.phases.length:0,m="Horizontal"===d.orientation,y=m?d.phases.length||1:u.length+1,v=m?(d.header&&d.hasHeader?1:0)+(d.phases.length>0?1:0)+d.lanes.length:(d.header&&d.hasHeader?1:0)+d.phases.length;if(0===g&&!m&&d.lanes.length&&(v+=1),m?(i=(d.header&&d.hasHeader?1:0)+(g>0?1:0),n=0):(i=d.header&&d.hasHeader?1:0,n=g>0?1:0),u.length>0)for(f+=d.header&&d.hasHeader?d.header.height:0,s=0;s<u.length;s++){for(l=0;l<u[s].children.length;l++)if((r=u[s].children[l]).offsetX=u[s].width,r.offsetY=u[s].height,e.initObject(r),e.nodes.push(r),o=r.wrapper,m){for(c=n;c<y;c++)if(a=h.rows[i].cells[c],o.margin.left<a.bounds.right-h.bounds.x){r.parentId=a.children[0].id,c>n?o.margin.left=o.margin.left-(a.bounds.left-h.bounds.left):a.children[0].children[1].actualSize.width+p>=o.margin.left&&(o.margin.left=a.children[0].children[1].actualSize.width+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),yl(o,r,e);break}}else for(var b=i;b<v;b++)if(a=h.rows[b].cells[n],o.margin.top<a.bounds.bottom-f){r.parentId=a.children[0].id,b>i?o.margin.top=o.margin.top-(a.bounds.top-f):a.children[0].children[1].actualSize.height+p>=o.margin.top&&(o.margin.top=a.children[0].children[1].actualSize.height+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),yl(o,r,e);break}m?i++:n++}h.measure(new Zi(t.width,t.height)),h.arrange(h.desiredSize),function(e,t){var i,n,r,o,a,s,l=e.columnDefinitions(),c=e.rowDefinitions(),h=Pl(t);"Vertical"===t.shape.orientation&&0===h&&(h=t.shape.header&&t.shape.hasHeader?1:0);var d=t.shape.padding;for(i=0;i<l.length;i++)e.updateColumnWidth(i,l[i].width,!0,d);for(i=h;i<c.length;i++)e.updateRowHeight(i,c[i].height,!0,d);for(n=0;n<c.length;n++)for(s=e.rows[n],i=0;i<l.length;i++)if((o=s.cells[i]).children&&o.children.length>0)for(r=0;r<o.children.length;r++)(a=o.children[r]).maxWidth&&(a.maxWidth=o.actualSize.width),a.maxHeight&&(a.maxHeight=o.actualSize.height)}(h,t),t.width=t.wrapper.width=h.width,t.height=t.wrapper.height=h.height,El(e,t),t.wrapper.measure(new Zi(t.width,t.height)),t.wrapper.arrange(h.desiredSize),function(e){if("SwimLane"===e.shape.type)for(var t=e.shape.lanes,i=void 0,n=void 0,r=0;r<t.length;r++){i=t[r];for(var o=0;o<i.children.length;o++)(n=i.children[o]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(t),bl(t,e),vl(t)}function yl(e,t,i){e.measure(new Zi(t.width,t.height)),e.arrange(e.desiredSize);var n=i.getObject(t.parentId);i.addChild(n,t.id)}function vl(e){if("SwimLane"===e.shape.type&&!e.shape.isLane&&!e.shape.isPhase){var t=void 0,i=void 0,n=void 0,r=e.shape.lanes,o=Pl(e),a=e.wrapper.children[0].rowDefinitions();for(i=0;i<r.length;i++,o++)t=r[i],"Horizontal"===e.shape.orientation?(n=a[o].height,t.height!==n&&(t.height=n)):(n=e.wrapper.children[0].columnDefinitions()[o].width,t.width!==n&&(t.width=n))}}function bl(e,t){var i,n,r,o,a=e.shape,s=a.phases,l=a.header&&a.hasHeader?1:0,c=e.wrapper.children[0],h=c.bounds.y+(a.header&&a.hasHeader?a.header.height:0);if("SwimLane"===e.shape.type&&(e=t.getObject(e.id)||e,s.length>0))if(c=e.wrapper.children[0],"Horizontal"===a.orientation)for(r=a.header&&a.hasHeader?c.rows[1]:c.rows[0],i=0;i<s.length;i++)n=(o=r.cells[i].children[0]).bounds.right-c.bounds.x,s[i].offset!==n&&(s[i].offset=n),t.nameTable[o.id].maxWidth=o.maxWidth;else for(i=0;i<s.length;i++)n=(o=c.rows[l+i].cells[0].children[0]).bounds.bottom-h,s[i].offset!==n&&(s[i].offset=n),t.nameTable[o.id].maxWidth=o.maxWidth}function wl(e,t){if(e&&e.length>0){var i=void 0;t.lineRoutingModule&&t.constraints&kn.LineRouting&&t.lineRoutingModule.renderVirtualRegion(t,!0);for(var n=0;n<e.length;n++)i=t.getObject(e[n]),t.lineRoutingModule&&t.constraints&kn.LineRouting&&"Orthogonal"===i.type?t.lineRoutingModule.refreshConnectorSegments(t,i,!0):t.connectorPropertyChange(i,{},{sourceID:i.sourceID,targetID:i.targetID})}}function xl(e,t,i,n){var r,o,a,s,l,c,h,d,p=e.getObject(t.parentId),u=p.shape,f=p.wrapper.children[0],g=u.lanes,m=ul(e,f,t.rowIndex);if("Horizontal"===u.orientation&&t.rowIndex!==i.rowIndex||"Vertical"===u.orientation&&t.columnIndex!==i.columnIndex){if("Horizontal"===u.orientation)s=t.rowIndex,l=i.rowIndex,r=(u.header&&u.hasHeader?1:0)+(u.phases.length&&u.phaseSize?1:0),h=t.rowIndex-r,d=i.rowIndex-r,g[h].canMove&&(h<d?n&&i.wrapper.offsetY>n.y&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetY<n.y&&(l+=1,d+=1),s!==l&&f.updateRowIndex(s,l));else if(s=t.columnIndex,l=i.columnIndex,r=u.phases.length&&u.phaseSize?1:0,h=t.columnIndex-r,d=i.columnIndex-r,u.header&&u.hasHeader?1:0,g[h].canMove&&(h<d?n&&i.wrapper.offsetX>n.x&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetX<n.x&&(l+=1,d+=1),s!==l)){if((0===u.phaseSize||0===u.phases.length)&&(0===l||0===s)&&u.header&&u.hasHeader){var y=0===l?s:l;f.rows[0].cells[y].children=f.rows[0].cells[0].children,f.rows[0].cells[y].columnSpan=f.rows[0].cells[0].columnSpan,f.rows[0].cells[0].children=[]}f.updateColumnIndex(0,s,l)}s!==l&&(c=g[h]).canMove&&(o={target:xd(i),source:xd(t)},c=g[h],g.splice(h,1),g.splice(d,0,c),a={type:"LanePositionChanged",redoObject:{target:xd(o.source),source:xd(o.target)},undoObject:o,category:"Internal"},e.diagramActions&jn.UndoRedo||e.commandHandler.addHistoryEntry(a),gl(e,p,0),wl(m,e),function(e,t){for(var i,n,r=0;r<e.length;r++){i=e[r];for(var o=0;o<i.children.length;o++)(n=t.nameTable[i.children[o].id]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(g,e),p.wrapper.measure(new Zi(p.width,p.height)),p.wrapper.arrange(p.wrapper.desiredSize),e.updateDiagramObject(p))}e.updateDiagramElementQuad()}function Sl(e,t,i,n){var r=e.getObject(i.id),o=r.shape,a=o.header&&o.hasHeader?1:0,s=o.lanes,l=o.phases,c=n.wrapper.actualSize.width,h=n.wrapper.actualSize.height,d=t.wrapper.actualSize.width,p=t.wrapper.actualSize.height;"SwimLane"===r.shape.type&&("Horizontal"===o.orientation?t.isPhase?l[t.columnIndex].offset+=c-d:(a=o.phaseSize&&o.phases.length>0?a+1:a,s[t.rowIndex-a].height+=h-p):t.isPhase?l[t.rowIndex-a].offset+=h-p:(a=o.phaseSize&&o.phases.length>0?1:0,s[t.columnIndex-a].width+=c-d))}function Cl(e,t){var i,n=e.shape,r=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?(r+=n.phases.length>0?1:0,i=t.rowIndex-r):i=t.columnIndex-(n.phaseSize&&n.phases.length>0?1:0),i}function Pl(e){var t=0,i=e.shape;return"Horizontal"===i.orientation&&(t=i.header&&i.hasHeader?1:0),i.phases.length>0&&i.phaseSize&&(t+=1),t}function Ol(e,t,i,n){var r=e.shape;if(r.phases.length>0){var o=t.nameTable[r.phases[n].header.id];o&&o.maxWidth<i.outerBounds.width&&(o.maxWidth=i.outerBounds.width,o.wrapper.maxWidth=i.outerBounds.width)}}function El(e,t){if(t.shape.header&&t.shape.hasHeader){var i=t.wrapper.children[0].rows[0].cells[0].children[0].id,n=e.nameTable[i];n&&n.isHeader&&n.maxWidth<t.width&&(n.maxWidth=t.width,n.wrapper.maxWidth=t.width)}}function Tl(e,t,i,n){var r,o=e.nameTable[t.id];if("SwimLane"===o.shape.type){e.protectPropertyChange(!0);var a,s,l=o.wrapper.children[0],c=l.bounds,h=o.shape,d=void 0,p=!1,u=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,b=void 0,w=void 0,x=void 0;if(g=new jh(h,"lanes",i,!0),f=h.header&&h.hasHeader?1:0,"Horizontal"===h.orientation&&(p=!0,f=h.phases.length>0?f+1:f),a=ul(e,l),f+=s=void 0!==n?n:h.lanes.length,r={element:g,cause:e.diagramActions,state:"Changing",type:"Addition",cancel:!1,laneIndex:s},e.triggerEvent(Hn.collectionChange,r),!r.cancel){if(p){var S=new Gs;S.height=i.height,l.addRow(f,S,!1),o.height=void 0!==o.height?o.height+i.height:o.height,o.wrapper.height=l.height=o.height}else{var C=new qs;C.width=i.width,l.addColumn(s+1,C,!1),o.width&&(o.width+=i.width,o.wrapper.width=l.width=o.width),e.diagramActions&jn.UndoRedo||(l.rows[0].cells[0].columnSpan+=1)}if(e.diagramActions&jn.UndoRedo||(g.id+=md()),void 0!==n?h.lanes.splice(n,0,g):h.lanes.push(g),r={element:g,cause:e.diagramActions,state:"Changed",type:"Addition",cancel:!1,laneIndex:s},e.triggerEvent(Hn.collectionChange,r),hl(l,e,o,f,s,p),d="Horizontal"===h.orientation?e.nameTable[l.rows[f].cells[0].children[0].id]:h.header&&h.hasHeader?e.nameTable[l.rows[1].cells[f].children[0].id]:e.nameTable[l.rows[0].cells[f].children[0].id],e.diagramActions&jn.UndoRedo||(u={type:"LaneCollectionChanged",changeType:"Insert",undoObject:xd(g),redoObject:xd(d),category:"Internal"},e.addHistoryEntry(u)),gl(e,o,"Horizontal"===h.orientation?f:h.header&&h.hasHeader?1:0),fl(o),El(e,o),(m=i.children)&&m.length>0)for(y=0;y<m.length;y++)if(x={x:(w=m[y]).wrapper.offsetX,y:w.wrapper.offsetY},"Horizontal"===h.orientation)for(l.rows[f].cells[v],v=0;v<l.rows[f].cells.length;v++)Il(e,l.rows[f].cells[v],x,w);else for(b=0;b<l.rows.length;b++)Il(e,l.rows[b].cells[f],x,w);wl(a,e),e.drag(o,c.x-l.bounds.x,c.y-l.bounds.y)}e.protectPropertyChange(!1)}}function Il(e,t,i,n){if(t.children&&t.children.length>0){var r=t.children[0],o=e.nameTable[r.id];r.bounds.containsPoint(i)&&e.addChild(o,n)}}function kl(e,t,i){if("SwimLane"===t.shape.type){var n,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,h=void 0,d=t.wrapper.bounds.x,p=t.wrapper.bounds.y,u=t.shape,f=u.padding,g=u.phases,m=void 0,y=t.wrapper.children[0],v="Horizontal"===u.orientation;if(r=u.header&&u.hasHeader?0:-1,u.phases.length>0&&(r+=1,0),n=v?u.lanes[0].header.width:u.lanes[0].header.height,i.offset>n){for(h=0;h<g.length;h++)if(a=g[h],s=h>0?g[h-1]:a,a.offset>i.offset){if(m=h>0?i.offset-s.offset:i.offset,v){var b=y.columnDefinitions()[h];b.width-=m,(l=e.nameTable[u.phases[h].header.id]).maxWidth=l.wrapper.maxWidth=b.width,y.updateColumnWidth(h,b.width,!1);var w=new qs;w.width=m,c=h,y.addColumn(h,w,!1);break}var x=y.rowDefinitions()[h+r];x.height-=m,l=e.nameTable[u.phases[h].header.id],y.updateRowHeight(h+r,x.height,!1);var S=new Gs;S.height=m,c=h,y.addRow(h+r,S,!1);break}if(e.diagramActions&jn.UndoRedo&&void 0===c)(A=e.historyManager.currentEntry.next).isLastPhase&&function(e,t,i,n,r,o){var a=t.shape.phases[e-2],s=i.previousPhase.offset;if(r){var l=n.columnDefinitions()[e-1],c=new qs;e>1?(c.width=l.width-(s-a.offset),l.width=s-a.offset):(c.width=l.width-s,l.width=s),n.updateColumnWidth(e-1,l.width,!1),n.addColumn(e,c,!1)}else{l=n.rowDefinitions()[e];var h=new Gs;e>1?(h.height=i.undoObject.offset-s,l.height=s-a.offset):(h.height=l.height-s,l.height=s),n.updateRowHeight(e,l.height,!1),n.addRow(1+e,h,!1)}}(c=g.length,t,A,y,v);var C=new Nh(t.shape,"phases",i,!0);if(e.diagramActions&jn.UndoRedo||(C.id+=md()),u.phases.splice(c,0,C),cl(y,e,t,r,v,c),v){if(o=e.nameTable[y.rows[r].cells[c].children[0].id],0===c&&u.header&&u.hasHeader){y.rows[0].cells[0].children=y.rows[0].cells[1].children,y.rows[0].cells[1].children=[];for(var P=y.rows[0],O=0;O<P.cells.length;O++)P.cells[O].minWidth=void 0,P.cells[O].columnSpan=0===O?y.rows[0].cells.length:1}!function(e,t,i,n,r){var o,a,s,l,c,h=t.shape,d=Pl(t);h.header&&h.hasHeader&&(i.rows[0].cells[0].columnSpan=i.rows[0].cells.length);for(a=d;a<i.rows.length;a++)c=i.rows[a],s=c.cells[n-1],l=c.cells[n],o=c.cells[n+1],Al(e,t,s,l,o,a,n);gl(e,t,1)}(e,t,y,c);var E=y.columnDefinitions();if(y.updateColumnWidth(c,E[c].width,!0,f),o.maxWidth=o.wrapper.maxWidth=E[c].width,E.length>c+1){var T=e.nameTable[y.rows[r].cells[c+1].children[0].id];y.updateColumnWidth(c+1,E[c+1].width,!0,f),T.maxWidth=T.wrapper.maxWidth=E[c+1].width}t.width=t.wrapper.width=t.wrapper.children[0].width=y.width}else{o=e.nameTable[y.rows[r+c].cells[0].children[0].id];var I=y.rowDefinitions(),k=I[r+c].height;!function(e,t,i,n,r){for(var o,a,s,l=i.rows[n],c=i.rows[n+1],h=i.rows[n-1],d=1;d<l.cells.length;d++)a=l.cells[d],s=c?c.cells[d]:void 0,o=h.cells[d],Al(e,t,o,a,s,n,d);gl(e,t,1)}(e,t,y,r+c),y.updateRowHeight(r+c,k,!0,f),I.length>r+c+1&&(k=I[r+c+1].height,y.updateRowHeight(r+c+1,k,!0,f)),t.height=t.wrapper.height=t.wrapper.children[0].height=y.actualSize.height}if(fl(t),t.width=t.wrapper.actualSize.width,El(e,t),e.drag(t,d-t.wrapper.bounds.x,p-t.wrapper.bounds.y),bl(t,e),!(e.diagramActions&jn.UndoRedo)){var A={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:xd(C),redoObject:xd(o),category:"Internal"};e.addHistoryEntry(A)}e.updateDiagramObject(t)}}}function Al(e,t,i,n,r,o,a){var s,l,c,h,d,p=t.shape,u="Horizontal"===p.orientation,f=t.wrapper.children[0],g=n.desiredCellWidth,m=n.desiredCellHeight,y=u?o:a;if(i?(s=u?i.bounds.x+i.bounds.width:i.bounds.x,l=u?i.bounds.y:i.bounds.y+i.bounds.height):(s=f.bounds.x,l=r.bounds.y),c=new hn(s,l,g,m),(h=ll(e,0,t,{id:t.id+(u?p.lanes[y-2]:p.lanes[y-1]).id+md()[0],rowIndex:o,columnIndex:a,width:n.minWidth,height:n.minHeight,style:(u?p.lanes[y-2]:p.lanes[y-1]).style,constraints:En.Default|En.AllowDrop,container:{type:"Canvas",orientation:u?"Horizontal":"Vertical"}},!1,!1,!0)).children[0].isCalculateDesiredSize=!1,f.addObject(h,o,a),r&&r.children&&r.children.length)for(d=0;d<r.children.length;d++)u?e.nameTable[r.children[d].id].columnIndex+=1:e.nameTable[r.children[d].id].rowIndex+=1;!function(e,t,i,n,r,o,a){var s,l,c,h=e.nameTable[r.id],d=t||a,p=e.nameTable[h.parentId].shape.padding;if(d.children&&d.children[0].children.length>1)for(var u=1;u<d.children[0].children.length;u++)s=d.children[0].children[u],c=e.nameTable[s.id],l=o?{x:s.bounds.x,y:s.bounds.center.y}:{x:s.bounds.center.x,y:s.bounds.top},n.containsPoint(l)?(i.children[0].children.push(s),d.children[0].children.splice(u,1),u--,e.deleteChild(c),c.isLane||(c.parentId=r.id),h.children||(h.children=[]),t||(o?c.margin.left=c.wrapper.bounds.x-d.children[0].bounds.right:c.margin.top=c.wrapper.bounds.y-d.children[0].bounds.bottom),h.children.push(s.id),c.zIndex=h.zIndex+1,e.removeElements(c)):t&&(o?(c.margin.left-=i.desiredCellWidth,p>c.margin.left&&(c.margin.left=p)):(c.margin.top-=i.desiredCellHeight,p>c.margin.top&&(c.margin.top=p)))}(e,r,n,c,h,u,i)}function Ml(e,t,i){if("SwimLane"===t.shape.type&&("ResizeSouth"===i||"ResizeEast"===i)){var n=t.shape,r=t.wrapper.children[0],o=void 0,a=void 0;"ResizeSouth"===i?"Vertical"===n.orientation?o=r.rows[r.rows.length-1].cells[0]:(a=r.rows.length-1,o=r.rows[a].cells[r.rows[a].cells.length-1]):(a=n.header&&n.hasHeader?1:0,o=r.rows[a].cells[r.rows[a].cells.length-1]),e.commandHandler.select(e.nameTable[o.children[0].id])}}function Dl(e,t,i,n,r,o){var a,s,l,c,h,d,p,u,f=md(),g=e.shape,m=g.phases,y=e.offsetX-e.wrapper.actualSize.width/2,v=e.offsetY-e.wrapper.actualSize.height/2;if("Vertical"===g.orientation&&(v+=g.header&&g.hasHeader?g.header.height:0),!o)for(r||(e.id+=f,g&&g.header&&g.hasHeader?g.header.id+=f:g.header=void 0),a=0;m&&a<m.length;a++)m[a].id+=f;for(u=r?[i.childTable[n.id]]:g.lanes,a=0;u&&a<u.length;a++)for(l=u[a],o||(l.id+=f),s=0;l.children&&s<l.children.length;s++)d=(c=l.children[s]).wrapper.offsetX-c.width/2,p=c.wrapper.offsetY-c.height/2,c.zIndex=-1,c.inEdges=c.outEdges=[],(o||i&&(1===i.pasteIndex||0===i.pasteIndex))&&("Vertical"===g.orientation?c.margin.top=p-v:c.margin.left=d-y),o||(c.id+=f);if(!o){if(r)h={shape:{lanes:u,phases:m,phaseSize:g.phaseSize,type:"SwimLane",orientation:g.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===g.orientation?(h.width=e.wrapper.actualSize.width,h.height=n.wrapper.actualSize.height+g.header.height+g.phaseSize,h.offsetX=e.wrapper.offsetX+10*i.pasteIndex,h.offsetY=n.wrapper.offsetY+10*i.pasteIndex):(h.width=n.wrapper.actualSize.width,h.height=e.wrapper.actualSize.height,h.offsetX=n.wrapper.offsetX+10*i.pasteIndex,h.offsetY=e.wrapper.offsetY+10*i.pasteIndex),e=h;if(0!==i.pasteIndex&&(e.offsetX+=10,e.offsetY+=10),e.zIndex=-1,e=t.add(e),!r)for(var b=0,w=Object.keys(i.childTable);b<w.length;b++){var x=w[b],S=i.childTable[x];S.id+=f,S.sourceID+=f,S.targetID+=f,S.zIndex=-1,t.add(S)}"SVG"!==t.mode&&t.refreshDiagramLayer(),t.select([e])}return e}function Ll(e,t,i,n){var r,o=t.nodes[0];if(n||el(e,o,!0)){var a,s,l=void 0,c=void 0,h=void 0,d=new tr;i&&(h=e.nameTable[i].parentId,l=o=e.nameTable[i]),a=i?l.wrapper:o.wrapper,(s=e.nameTable[h||o.parentId])&&"Grid"===s.container.type&&((r=new sr).children=[],!n&&o.isHeader||("Horizontal"===s.container.orientation&&o.isPhase||"Vertical"===s.container.orientation&&(o.rowIndex>0&&o.columnIndex>0||o.isLane)?(c=function(e,t,i){for(var n=new hn,r="SwimLane"===e.shape.type?e.wrapper.children[0].rows:e.wrapper.rows,o=i?1:0;o<r.length;o++)n.uniteRect(r[o].cells[t].bounds);return n}(s,l?l.columnIndex:o.columnIndex,!(!s.shape.header||!s.shape.hasHeader)),r.offsetX=c.center.x,r.offsetY=c.center.y,d.width=c.width,d.height=c.height):(r.offsetX=s.offsetX,r.offsetY=a.offsetY,d.width=s.wrapper.actualSize.width,d.height=a.actualSize.height)),r.children.push(d),r.measure(new Zi),r.arrange(r.desiredSize))}return r}function Rl(e,t,i,n,r){r=void 0!==r?r:Cl(t,i);for(var o=!1,a=t.shape.lanes[r],s=a.children.length-1;s>=0;s--)n?n.id===a.children[s].id&&a.children.splice(s,1):(e.removeDependentConnector(a.children[s]),e.diagramActions&jn.UndoRedo||(e.diagramActions=e.diagramActions|jn.UndoRedo,o=!0),e.remove(a.children[s]),a.children.splice(s,1),o&&(e.diagramActions=e.diagramActions&~jn.UndoRedo))}function jl(e){return e.children[0]}function Nl(e,t){e.nodes.splice(e.nodes.indexOf(t),1),e.removeFromAQuad(t),e.removeObjectsFromLayer(t),delete e.nameTable[t.id],e.removeElements(t)}function zl(e,t,i,n){var r;if("SwimLane"===i.shape.type){var o=i.shape,a=void 0;if(1===o.lanes.length)e.remove(i);else{var s=i.wrapper.bounds.x,l=i.wrapper.bounds.y,c=void 0,h=void 0,d=void 0,p=void 0,u=i.wrapper.children[0];if(a=n?o.lanes.indexOf(n):Cl(i,t),r={element:t,cause:e.diagramActions,state:"Changing",type:"Removal",cancel:!1,laneIndex:a},e.triggerEvent(Hn.collectionChange,r),!r.cancel){var f=xd(o.lanes[a]);if(Rl(e,i,t,void 0,a),!(e.diagramActions&jn.UndoRedo)){var g={type:"LaneCollectionChanged",changeType:"Remove",undoObject:f,redoObject:xd(t),category:"Internal"};e.addHistoryEntry(g)}o.lanes.splice(a,1);var m=t?"Horizontal"===o.orientation?t.rowIndex:t.columnIndex:Pl(i)+a;if("Horizontal"===o.orientation){for(c=u.rows[m],h=0;h<c.cells.length;h++)if((d=c.cells[h])&&d.children.length>0)for(p=0;p<d.children.length;p++)Bl(e,d.children[p]);u.removeRow(m)}else{for(i.width=void 0!==i.width?i.width-u.rows[0].cells[m].actualSize.width:i.width,h=0;h<u.rows.length;h++)if((d=u.rows[h].cells[m])&&d.children.length>0)for(p=0;p<d.children.length;p++)Bl(e,d.children[p]);u.removeColumn(m)}r={element:t,cause:e.diagramActions,state:"Changed",type:"Removal",cancel:!1,laneIndex:a},e.triggerEvent(Hn.collectionChange,r),i.width=i.wrapper.width=u.width,i.height=i.wrapper.height=u.height,fl(i),"Vertical"===i.shape.orientation&&(m=0),gl(e,i,m),e.drag(i,s-i.wrapper.bounds.x,l-i.wrapper.bounds.y),e.updateDiagramObject(i)}}}}function Bl(e,t){var i,n;if(t instanceof sr){if(t.children.length>0)for(i=0;i<t.children.length;i++)t.children[i]instanceof sr&&Bl(e,t.children[i]);n=e.getObject(t.id),Nl(e,n)}}function Hl(e,t,i,n){e.protectPropertyChange(!0);i.wrapper.bounds.x,i.wrapper.bounds.y;var r,o=!1,a=i.shape,s=i.wrapper.children[0],l=n?a.phases.indexOf(n):function(e,t){var i=t.shape,n=i.header&&i.hasHeader?1:0;return"Horizontal"===i.orientation?e.columnIndex:e.rowIndex-n}(t,i),c=a.phases.length;if(a.phases.length>1){l===c-1&&(o=!0,r=xd(a.phases[l-1]));var h=xd(a.phases[l]);if(a.phases.splice(l,1),!(e.diagramActions&jn.UndoRedo)){var d={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:h,previousPhase:r,redoObject:xd(t),category:"Internal",isLastPhase:o};e.addHistoryEntry(d)}"Horizontal"===a.orientation?function(e,t,i,n){var r,o,a,s,l,c,h,d,p,u,f,g;for(n=void 0!==n?n:i.columnIndex,h=0;h<t.rows.length;h++)if((r=t.rows[h]).cells.length>1&&(o=r.cells[n],a=r.cells.length-1===n?r.cells[n-1]:r.cells[n+1],l=a.children[0],o.children.length>0))if(s=o.children[0],f=e.nameTable[s.id],0===a.children.length&&o.children.length>0)a.children=o.children,a.columnSpan=o.columnSpan-1;else{for(d=0;d<s.children.length;d++){if((u=s.children[d])instanceof sr){if((g=e.nameTable[u.id]).isLane||(g.parentId=l.id),r.cells.length-1===n&&(g.margin.left=g.wrapper.bounds.x-l.bounds.x,u.margin.left=g.wrapper.bounds.x-l.bounds.x),l.children.push(u),e.nameTable[l.id]){var m=e.nameTable[l.id];m.children||(m.children=[]),m.children.push(u.id)}s.children.splice(d,1),d--,f&&f.children&&-1!==f.children.indexOf(g.id)&&f.children.splice(f.children.indexOf(g.id),1)}if(r.cells.length-1!==n)for(p=0;p<l.children.length;p++){var y=l.children[p];if(y instanceof sr){var v=e.nameTable[y.id];v.margin.left=v.wrapper.bounds.x-s.bounds.x,y.margin.left=v.wrapper.bounds.x-s.bounds.x}}}if(f&&f.isPhase){var b=e.nameTable[l.id];b&&(l.maxWidth=b.wrapper.maxWidth=b.wrapper.maxWidth+=f.wrapper.maxWidth)}Nl(e,f)}var w=t.columnDefinitions()[n].width;t.removeColumn(n),n<t.columnDefinitions().length?(c=t.columnDefinitions()[n].width,c+=w,t.updateColumnWidth(n,c,!0)):(c=t.columnDefinitions()[n-1].width,c+=w,t.updateColumnWidth(n-1,c,!0))}(e,s,t,l):function(e,t,i,n,r){var o,a,s,l,c,h,d,p,u,f,g,m=r.shape,y=void 0!==n?m.header?n+1:n:i.rowIndex;o=t.rows[y];var v=r.wrapper.bounds.y,b=m.phases.length;void 0!==m.header&&m.hasHeader&&(v+=t.rowDefinitions()[0].height);for(s=n===b?t.rows[y-1]:t.rows[y+1],c=0;c<o.cells.length;c++)if(a=o.cells[c],p=s.cells[c],u=p.children[0],a.children.length>0){var w=a.children[0],x=e.nameTable[w.id];if(n<b)for(d=0;d<u.children.length;d++)(f=u.children[d])instanceof sr&&((g=e.nameTable[f.id]).margin.top=g.wrapper.bounds.y-(0===n?v:w.bounds.y),f.margin.top=g.wrapper.bounds.y-(0===n?v:w.bounds.y));for(h=0;h<w.children.length;h++)(f=w.children[h])instanceof sr&&((g=e.nameTable[f.id]).parentId=u.id,n===b&&(g.margin.top=g.wrapper.bounds.y-(0===n?v:u.bounds.y),f.margin.top=g.wrapper.bounds.y-(0===n?v:u.bounds.y)),u.children.push(f),w.children.splice(h,1),h--,x.children&&-1!==x.children.indexOf(g.id)&&x.children.splice(x.children.indexOf(g.id),1));Nl(e,x)}var S=t.rowDefinitions()[y].height;t.removeRow(y),y<t.rowDefinitions().length?(l=t.rowDefinitions()[y].height,l+=S,t.updateRowHeight(y,l,!0)):(l=t.rowDefinitions()[y-1].height,l+=S,t.updateRowHeight(y-1,l,!0))}(e,s,t,l,i),El(e,i),gl(e,i,1),bl(i,e),e.protectPropertyChange(!1),e.updateDiagramObject(i)}}function _l(e,t){var i;if(e.isLane){var n=t.getObject(e.parentId);if(n&&"SwimLane"===n.shape.type&&e.isLane){var r=Cl(n,e);i=n.shape.lanes[r]}}return i}function Wl(e,t){if(e.isLane&&_l(e,t).canMove)return!0;return!1}function Fl(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return!0;return!1}function Vl(e,t){t instanceof Lh&&(e.shape.header||(t.shape.hasHeader=!1))}function Ul(e,t,i,n){return n=t?n:void 0!==e[i-1]?e[i-1]+n:0}function Yl(e,t){var i=[];if(t)i=e;else{for(var n=0;n<e.length;n++)i.push(e[n]);i.push(e[i.length-2]),i.push(e[i.length-2])}return i}function Xl(e,t){if(t instanceof Lh)switch(w()?e.shape.umlActivityShape:e.shape.shape){case"JoinNode":e.width||(t.width=20),e.height||(t.height=90),e.style&&e.style.fill||(t.style.fill="black");break;case"ForkNode":e.width||(t.width=90),e.height||(t.height=20),e.style&&e.style.fill||(t.style.fill="black");break;case"InitialNode":case"FinalNode":e.style&&e.style.fill||(t.style.fill="black")}else switch(w()?e.shape.umlActivityFlow:e.shape.flow){case"Object":e.style&&e.style.strokeDashArray||(t.style.strokeDashArray="8 4"),e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow");break;case"Control":e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow"),e.sourceDecorator&&e.sourceDecorator.shape||(t.sourceDecorator.shape="None")}}function Gl(e,t){switch(e.shape.type){case"Bpmn":switch(w()?e.shape.bpmnFlow:e.shape.flow){case"Sequence":("Normal"===e.shape.sequence&&"Bezier"!==e.type||"Default"===e.shape.sequence||"Conditional"===e.shape.sequence)&&(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"black"),"Conditional"===e.shape.sequence&&t.sourceDecorator&&(t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),t.sourceDecorator.width=e.sourceDecorator&&e.sourceDecorator.width||20,t.sourceDecorator.height=e.sourceDecorator&&e.sourceDecorator.width||10));break;case"Association":"Default"!==e.shape.association&&"Directional"!==e.shape.association&&"BiDirectional"!==e.shape.association||(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"black"),"BiDirectional"===e.shape.association&&t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white",t.sourceDecorator.width=e.sourceDecorator&&e.sourceDecorator.width||5,t.sourceDecorator.height=e.sourceDecorator&&e.sourceDecorator.height||10));break;case"Message":t.style&&!t.style.strokeDashArray&&(t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"4 4")}break;case"UmlActivity":switch(w()?e.shape.umlActivityFlow:e.shape.flow){case"Exception":"Directional"!==e.shape.association&&"BiDirectional"!==e.shape.association||(t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"2 2")}break;case"UmlClassifier":var i=!1;"Association"===e.shape.relationship?i=!0:"Inheritance"===e.shape.relationship?(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"white"),t.style&&(i=!0,t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"4 4")):"Composition"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"black"),i=!0):"Aggregation"===e.shape.relationship||void 0===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0):"Dependency"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0,t.style.strokeDashArray="4 4"):"Realization"===e.shape.relationship&&(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0),i&&(t.style.strokeWidth=e.style&&e.style.strokeWidth||2)}}function ql(e,t,i){var n;n=Qi.findLength(t,e)>Qi.findLength(i,e)?i:t;var r=Qi.findAngle(t,i),o=Qi.findAngle(n,e),a=Qi.findLength(n,e),s=o+2*(r-o);return{x:n.x+a*Math.cos(s*Math.PI/180),y:n.y+a*Math.sin(s*Math.PI/180)}}function Zl(e,t,i){if(e&&e.children&&e.children.length>0)for(var n=void 0,r=0;r<e.children.length;r++)return(n=i[e.children[r]]).shape.type===t||Zl(n,t,i);return!1}function Kl(e,t,i,n,r){if(i&&(e instanceof $a||e&&(e.shape&&"SwimLane"!==e.shape.type||void 0===e.shape)))for(var o=void 0,a=0,s=Object.keys(i);a<s.length;a++){var l=s[a];if(o=i[l],"shape"===l&&o.type&&(e.shape={type:o.type}),o)if(Array.isArray(o)&&o.length&&o.length>0&&"annotations"!==r&&"ports"!==r)if(e[l].length>0)for(var c=0;c<=e[l].length;c++)Kl(e[l],t?t[l]:void 0,i[l],"annotations"===l||"ports"===l?e:void 0,l);else Kl(e[l],t?t[l]:void 0,i[l],"annotations"===l||"ports"===l?e:void 0,l);else if(o instanceof Object&&t&&"annotations"!==r&&"ports"!==r)Kl(e[l],t[l],i[l]);else if("annotations"!==r&&"ports"!==r&&t&&!t[l]||!t&&e&&(e[l]||void 0!==e[l]))e[l]=i[l];else{var h=void 0;"annotations"!==r&&"ports"!==r||("annotations"===r?(e[l]&&Kl(e[l],t[l],i[l]),e[l]||(Rc(n)===$a?(h=new Or(n,"annotations",i[l]),n.annotations.push(h)):(h=new Pr(n,"annotations",i[l]),n.annotations.push(h)))):e[l]?Kl(e[l],t[l],i[l]):(h=new br(n,"ports",i[l]),n.ports.push(h)))}}}function $l(e,t){var i;i="Bezier"===e.type?function(e){var t=[];if("Bezier"===e.type)for(var i=0,n=0;n<e.segments.length;n++)for(var r=e.segments[n],o=Qi.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,a=Qi.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,s=Number((e.distance(o,r.points[0])+e.distance(a,o)+e.distance(r.points[1],a))/1.5),l=0;l<s-1;l+=10)t[i]=Xa(0,r.points[0],Qi.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,Qi.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,r.points[1],l,s),i++;return t}(e):e.intermediatePoints;for(var n=0;n<i.length-1;n++){var r=i[n],o=i[n+1],a=hn.toBounds([r,o]);if(a.Inflate(e.hitPadding),a.containsPoint(t)){var s=ql(t,r,o),l=Ql({x1:r.x,x2:o.x,y1:r.y,y2:o.y},{x1:t.x,x2:s.x,y1:t.y,y2:s.y});if(l.enabled){var c=Qi.findLength(t,l.intersectPt);if(Math.abs(c)<e.hitPadding)return!0}else{var h=hn.toBounds([t,t]);if(h.Inflate(3),h.containsPoint(r)||h.containsPoint(o))return!0}if(Qi.equals(t,s))return!0}}if(e.annotations.length>0){var d=e.wrapper.children;for(n=3;n<d.length;n++){if(d[n].bounds.containsPoint(t))return!0}}return!1}function Ql(e,t){var i={x:0,y:0},n=e,r=t,o=(r.y2-r.y1)*(n.x2-n.x1)-(r.x2-r.x1)*(n.y2-n.y1),a=(r.x2-r.x1)*(n.y1-r.y1)-(r.y2-r.y1)*(n.x1-r.x1),s=(n.x2-n.x1)*(n.y1-r.y1)-(n.y2-n.y1)*(n.x1-r.x1);if(0===o)return{enabled:!1,intersectPt:i};var l=a/o,c=s/o;return l>=0&&l<=1&&c>=0&&c<=1?(i.x=n.x1+l*(n.x2-n.x1),i.y=n.y1+l*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function Jl(e,t,i,n){var r=Ql(ec(e.x,e.y,t.x,t.y),ec(i.x,i.y,n.x,n.y));return r.enabled?r.intersectPt:{x:0,y:0}}function ec(e,t,i,n){return{x1:Number(e)||0,y1:Number(t)||0,x2:Number(i)||0,y2:Number(n)||0}}function tc(e,t,i){var n=[];i=i||0;var r={x:t.topLeft.x-i,y:t.topLeft.y},o={x:t.topRight.x+i,y:t.topRight.y},a={x:t.bottomRight.x,y:t.bottomRight.y-i},s={x:t.bottomLeft.x,y:t.bottomLeft.y+i};return n.push(r),n.push(o),n.push(a),n.push(s),n}function ic(e,t,i){var n,r=i instanceof Lh?i.constraints&En.InheritTooltip:i.constraints&Pn.InheritTooltip,o=i instanceof Lh?i.constraints&En.Tooltip:i.constraints&Pn.Tooltip;n=function(e,t,i,n){var r={},o=(i.scroller.transform.scale,document.getElementById(i.element.id)),a=e.wrapper.bounds,s=o.getBoundingClientRect();i.scroller.horizontalOffset,i.scroller.verticalOffset;switch(i.tooltipObject.position){case"BottomCenter":r=nc(t,a.bottomCenter,i,n,s.width/2,s.height);break;case"BottomLeft":case"LeftBottom":r=nc(t,a.bottomLeft,i,n,0,s.height);break;case"BottomRight":case"RightBottom":r=nc(t,a.bottomRight,i,n,s.width,s.height);break;case"LeftCenter":r=nc(t,a.middleLeft,i,n,0,s.height/2);break;case"LeftTop":case"TopLeft":r=nc(t,a.topLeft,i,n,0,0);break;case"RightCenter":r=nc(t,a.middleRight,i,n,s.width,s.height/2);break;case"RightTop":case"TopRight":r=nc(t,a.topRight,i,n,s.width,0);break;case"TopCenter":r=nc(t,a.topCenter,i,n,s.width/2,0)}return r}(i,t,e,"Mouse"===(!r&&o?i.tooltip.relativeMode:e.tooltip.relativeMode));var a=rs(e);return{x:n.x+a.width,y:n.y+a.height}}function nc(e,t,i,n,r,o){var a={},s=i.scroller.transform.scale,l=i.scroller.horizontalOffset,c=i.scroller.verticalOffset;return a.x=(n?e.x:t.x)*s+l-r,a.y=(n?e.y:t.y)*s+c-o,a}function rc(e,t,i){var n,r,o;r=oc(e,t,i),n=Qi.findAngle(e[r.index],e[r.index+1]);var a=function(e){var t=void 0===e.content?10:0,i=0;switch(e.alignment){case"Center":i=0;break;case"Before":i=-(0+t);break;case"After":i=0+t}return i}(t);return o=Qi.transform(r.point,n+45,a),r.point=o,r.angle=n,r}function oc(e,t,i){for(var n,r,o,a,s,l=0,c=t.offset,h=[],d=0;d<e.length-1;d++)l+=Qi.distancePoints(e[d],e[d+1]),h.push(l);o=c*l;for(var p=0;p<h.length;p++){if(h[p]>=o)return r=Qi.findAngle(e[p],e[p+1]),{point:n=Qi.transform(e[p],r,o-(a||0)),index:s=p};a=h[p]}return{point:n,index:s}}function ac(e,t){if(e instanceof Lh&&e.children)for(var i=0;i<e.children.length;i++)t.nameTable[e.children[i]].children&&ac(e,t),t.removeFromAQuad(t.nameTable[e.children[i]]),t.removeObjectsFromLayer(t.nameTable[e.children[i]]),delete t.nameTable[e.children[i]]}function sc(e,t){if(e&&e.children&&e.children.length>0)for(var i=0;i<e.children.length;i++){var n=e.children[i];n instanceof sr&&sc(n,t)}return-1===t.indexOf(e.id)&&t.push(e.id),t}function lc(e){var t=function(e){for(var t,i,n=[],r=0;r<e.length;r++)if("SwimLane"===(t=e[r]).shape.type){i=t.wrapper.children[0].childTable;for(var o=0,a=Object.keys(i);o<a.length;o++){n=sc(i[a[o]],n)}}return n}(e.nodes),i=xd(e,e.getCustomProperty);return i.selectedItems.nodes=[],i.selectedItems.connectors=[],i.selectedItems.wrapper=null,e.serializationSettings.preventDefaults&&(i=cc(i,e)),function(e,t){var i=t.nodes;if(i)for(var n=0;n<i.length;n++)-1!==e.indexOf(i[n].id)&&(i.splice(n,1),n--)}(t,i),JSON.stringify(i)}function cc(e,t,i,n){i=function(e,t){var i,n=[],r=new cu;if(e.getClassName)switch(e.getClassName()){case"Diagram":i=new cu;break;case"Node":i=new Lh(r,"",n);break;case"Path":i=new ah(r,"",n);break;case"Native":i=new sh(r,"",n);break;case"Html":i=new lh(r,"",n);break;case"Image":i=new ch(r,"",n);break;case"Text":i=new hh(r,"",n);break;case"BasicShape":i=new dh(r,"",n);break;case"FlowShape":i=new ph(r,"",n);break;case"BpmnShape":i=new Sh(r,"",n);break;case"UmlActivityShape":i=new Ch(r,"",n);break;case"UmlClassifierShape":i=new Mh(r,"",n);break;case"SwimLane":i=new zh(r,"",n),e.header&&(i.header=new Rh(r,"",n),i.header.style.fill="");break;case"ShapeAnnotation":i=new Pr(r,"",n);break;case"PointPort":i=new br(r,"",n);break;case"BpmnGateway":i=new uh(r,"",n);break;case"BpmnDataObject":i=new fh(r,"",n);break;case"BpmnEvent":i=new mh(r,"",n);break;case"BpmnSubEvent":i=new yh(r,"",n);break;case"BpmnActivity":i=new wh(r,"",n);break;case"BpmnAnnotation":i=new xh(r,"",n);break;case"MethodArguments":i=new Ph(r,"",n);break;case"UmlClassAttribute":i=new Oh(r,"",n);break;case"UmlClassMethod":i=new Eh(r,"",n);break;case"UmlClass":i=new Th(r,"",n);break;case"UmlInterface":i=new Ih(r,"",n);break;case"UmlEnumerationMember":i=new kh(r,"",n);break;case"UmlEnumeration":i=new Ah(r,"",n);break;case"Lane":i=new jh(r,"",n);break;case"Phase":i=new Nh(r,"",n);break;case"ChildContainer":i=new Bh;break;case"Connector":i=new $a(r,"",n);break;case"StraightSegment":i=new Ba(r,"",n);break;case"BezierSegment":i=new Ha(r,"",n);break;case"OrthogonalSegment":i=new _a(r,"",n);break;case"PathAnnotation":i=new Or(r,"",n);break;case"Stop":i=new Gn(r,"",n);break;case"Point":i=t||new Qi(r,"",n);break;case"UserHandle":i=new Ns(r,"",n);break;case"Command":i=new Fs(r,"",n)}else i=t;return i}(t,i);for(var r=[],o=0,a=r=r.concat(Object.keys(e));o<a.length;o++){var s=a[o];t instanceof Lh&&(n="shape"===s),e[s]instanceof Array?hc(e,i,t,s):e[s]instanceof Object&&i&&i[s]?"wrapper"!==s&&(e[s]=cc(e[s],t[s],i[s],n)):(i&&e[s]===i[s]||void 0===e[s])&&(n&&"type"===s||t instanceof zh&&"orientation"===s||delete e[s]),"[]"!==JSON.stringify(e[s])&&"{}"!==JSON.stringify(e[s])&&void 0!==e[s]||delete e[s]}return e}function hc(e,t,i,n){if(0===e[n].length)delete e[n];else if(e[n].every((function(e){return"number"===typeof e}))){var r=void 0,o=!0;for(r=0;r<e[n].length;r++)o=!(!o||e[n][r]!==t[n][r]);o&&delete e[n]}else{r=void 0;if("layers"===n&&(e[n].splice(0,1),0===e[n].length&&delete e[n]),e[n])for(r=e[n].length-1;r>=0;r--)"nodes"!==n&&"connectors"!==n||(e[n][r].wrapper=null),"dataManager"!==n&&(e[n][r]=cc(e[n][r],i[n][r],void 0!==t[n]?t[n][r]:void 0),"[]"!==JSON.stringify(e[n][r])&&"{}"!==JSON.stringify(e[n][r])&&void 0!==e[n][r]||e[n].splice(r,1))}}function dc(e,t){t.enableServerDataBinding(!1),t.clear(),t.protectPropertyChange(!0);for(var i=t.dataSourceSettings.doBinding,n=t.setNodeTemplate,r=t.getDescription,o=t.getCustomProperty,a={},s=0,l=t.commandManager.commands;s<l.length;s++){var c=l[s];a[c.name]={execute:c.execute,canExecute:c.canExecute}}var h=t.rulerSettings.horizontalRuler.arrangeTick,d=t.rulerSettings.verticalRuler.arrangeTick,p=t.layout.getLayoutInfo,u=t.layout.getBranch,f=t.getNodeDefaults,g=t.getConnectorDefaults,m=JSON.parse(e);m=function(e){if(e&&(void 0===e.version||e.version<17.1)&&e.nodes)for(var t=e.nodes,i=0,n=t;i<n.length;i++){var r=n[i];if(r&&r.ports&&r.ports.length>0)for(var o=0,a=r.ports;o<a.length;o++){var s=a[o];s&&s.constraints&&s.constraints===_n.None&&(s.constraints=_n.Default)}}return e}(m),t.contextMenuSettings=m.contextMenuSettings||{},t.constraints=m.constraints||kn.Default,t.tool=m.tool||An.Default,t.bridgeDirection=m.bridgeDirection||"Top",t.pageSettings=m.pageSettings||{},t.drawingObject=m.drawingObject||void 0,t.tooltip=m.tooltip||{},t.addInfo=m.addInfo||void 0,t.getDescription=r,t.scrollSettings=m.scrollSettings||{},t.commandManager=m.commandManager||{},t.layers=m.layers||[],t.rulerSettings.horizontalRuler.arrangeTick=h,t.rulerSettings.verticalRuler.arrangeTick=d;for(var y=0,v=t.commandManager.commands;y<v.length;y++){var b=v[y];a[b.name]&&(b.execute=a[b.name].execute,b.canExecute=a[b.name].canExecute)}if(t.backgroundColor=m.backgroundColor||"transparent",t.basicElements=m.basicElements||[],t.connectors=m.connectors||[],t.dataSourceSettings=m.dataSourceSettings||{},t.dataSourceSettings.doBinding=i,t.height=m.height||"100%",t.setNodeTemplate=n,t.getConnectorDefaults=g,t.getNodeDefaults=f,t.getCustomProperty=o,t.mode=m.mode||"SVG",m.nodes)for(var w=0;w<m.nodes.length;w++)m.nodes[w].shape&&"SwimLane"===m.nodes[w].shape.type&&Dl(m.nodes[w],void 0,void 0,void 0,void 0,!0);t.nodes=m.nodes||[],t.rulerSettings=m.rulerSettings||{},t.snapSettings=m.snapSettings||{},t.width=m.width||"100%",t.layout=m.layout||{},t.layout.getLayoutInfo=Ld(p),t.layout.getBranch=Ld(u),t.diagramActions=0,t.isLoading=!0,t.protectPropertyChange(!1);var x;for(w=0;w<t.views.length;w++)(x=t.views[t.views[w]]).refresh(),x instanceof cu&&t.element.classList.add("e-diagram");return m.selectedItems&&(m.selectedItems.nodes=[],m.selectedItems.connectors=[]),t.selectedItems=m.selectedItems,t.enableServerDataBinding(!0),m}function pc(e,t){var i=t.style,n=t;t.canApplyStyle=!0;for(var r=0,o=Object.keys(e);r<o.length;r++){switch(o[r]){case"fill":i.fill=e.fill,i instanceof Jn&&(i.fill="transparent");break;case"textOverflow":i.textOverflow=e.textOverflow;break;case"opacity":i.opacity=e.opacity;break;case"strokeColor":i.strokeColor=e.strokeColor;break;case"strokeDashArray":i.strokeDashArray=e.strokeDashArray;break;case"strokeWidth":i.strokeWidth=e.strokeWidth;break;case"bold":i.bold=e.bold;break;case"color":i.color=e.color;break;case"textWrapping":i.textWrapping=e.textWrapping;break;case"fontFamily":i.fontFamily=e.fontFamily;break;case"fontSize":i.fontSize=e.fontSize;break;case"italic":i.italic=e.italic;break;case"textAlign":i.textAlign=e.textAlign;break;case"whiteSpace":i.whiteSpace=e.whiteSpace;break;case"textDecoration":i.textDecoration=e.textDecoration;break;case"gradient":if(i.gradient){uc(e.gradient,i.gradient);break}}}t instanceof or&&n.refreshTextElement()}function uc(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"type":t.type=e.type;break;case"x1":t.x1=e.x1;break;case"x2":t.x2=e.x2;break;case"y1":t.y1=e.y1;break;case"y2":t.y2=e.y2;break;case"cx":t.cx=e.cx;break;case"cy":t.cy=e.cy;break;case"fx":t.fx=e.fx;break;case"fy":t.fy=e.fy;break;case"r":t.r=e.r;break;case"stops":t.stops=e.stops}}}function fc(e,t,i){e.width=t.width,e.height=t.height,e.minHeight=t.minHeight,e.maxHeight=t.maxHeight,e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.horizontalAlignment=t.wrapper.children[0].horizontalAlignment,e.verticalAlignment=t.wrapper.children[0].verticalAlignment,e.relativeMode=t.wrapper.children[0].relativeMode,e.visible=t.wrapper.children[0].visible,t.shape instanceof hh&&(e.margin=t.shape.margin),e.id=t.wrapper.children[0].id,e.style=t.style;for(var n=0,r=i.views;n<r.length;n++){var o=r[n];ld(t.id+"_groupElement",o),ld(t.id+"_content_groupElement",o),ld(t.id+"_html_element",o)}t.wrapper.children.splice(0,1),t.wrapper.children.splice(0,0,e)}function gc(e,t,i,n){var r=new tr;switch(e.shape.type){case"Path":var o=new dr;o.data=t.shape.data,fc(r=o,t,n);break;case"Image":var a=new ur;a.source=t.shape.source,a.imageAlign=t.shape.align,a.imageScale=t.shape.scale,fc(r=a,t,n);break;case"Text":fc(r=new or,t,n);break;case"Basic":var s=void 0;s=(w()?"Rectangle"===t.shape.basicShape:"Rectangle"===t.shape.shape)?new tr:new dr,!w()&&"Polygon"===t.shape.shape||w()&&"Polygon"===t.shape.basicShape?s.data=en(t.shape.points):s.data=lr(w()?t.shape.basicShape:t.shape.shape),fc(r,t,n),(!w()&&"Rectangle"===t.shape.shape||w()&&"Rectangle"===t.shape.basicShape)&&(s.cornerRadius=t.shape.cornerRadius),r=s;break;case"Flow":var l=new dr,c=w()?t.shape.flowShape:t.shape.shape;l.data=kr(c),fc(r=l,t,n);break;case"Native":var h=new gr(e.id,n.element.id);h.content=t.shape.content,h.scale=t.shape.scale,fc(r=h,t,n);break;case"HTML":var d=new Ta(t.id,n.element.id);d.content=t.shape.content,fc(r=d,t,n)}void 0===e.shape.type||e.shape.type===i.shape.type?function(e,t,i){if(Object.keys(e.shape).length>0)if("Path"===t.shape.type&&void 0!==e.shape.data)t.wrapper.children[0].data=e.shape.data;else if("Text"===t.shape.type&&void 0!==e.shape.content)t.wrapper.children[0].content=e.shape.content;else if("Image"===t.shape.type&&void 0!==e.shape.source)t.wrapper.children[0].source=e.shape.source;else if("Native"===t.shape.type){for(var n=void 0,r=0;r<i.views.length;r++)n=Yh(t.wrapper.children[0].id+"_native_element",i.views[r]),void 0!==e.shape.content&&n&&(n.removeChild(n.children[0]),t.wrapper.children[0].content=e.shape.content,n.appendChild(cd(t.wrapper.children[0],!1)));t.wrapper.children[0].scale=e.shape.scale?e.shape.scale:t.wrapper.children[0].scale}else if("HTML"===t.shape.type){var o=void 0;for(r=0;r<i.views.length;r++)(o=Yh(t.wrapper.children[0].id+"_html_element",i.views[r]))&&(o.removeChild(o.children[0]),t.wrapper.children[0].content=e.shape.content,o.appendChild(cd(t.wrapper.children[0],!0)))}else if("Flow"===t.shape.type&&(w()&&void 0!==e.shape.flowShape||void 0!==e.shape.shape)){t.shape.shape=w()?e.shape.flowShape:e.shape.shape;var a=kr(t.shape.shape.toString());t.wrapper.children[0].data=a}else if("UmlActivity"===t.shape.type&&(w()&&void 0!==e.shape.umlActivityShape||!w()&&void 0!==e.shape.shape))!function(e,t){w()?e.shape.umlActivityShape=t.shape.umlActivityShape:e.shape.shape=t.shape.shape;var i=zs((w()?e.shape.umlActivityShape:e.shape.shape).toString());w()&&"InitialNode"===e.shape.umlActivityShape||!w()&&"InitialNode"===e.shape.shape||!w()&&("ForkNode"===e.shape.shape||"JoinNode"===e.shape.shape)||w()&&("ForkNode"===e.shape.umlActivityShape||"JoinNode"===e.shape.umlActivityShape)?e.wrapper.children[0].style.fill="black":(!w()&&"FinalNode"===e.shape.shape||w()&&"FinalNode"===e.shape.umlActivityShape)&&(e instanceof Lh&&(e.wrapper=mc(e)),e.wrapper.children[0].data=i)}(t,e);else if(void 0!==e.shape.cornerRadius)t.wrapper.children[0].cornerRadius=e.shape.cornerRadius;else if(w()&&void 0!==e.shape.basicShape||void 0!==e.shape.shape){t.shape.shape=w()?e.shape.basicShape:e.shape.shape;var s=lr(t.shape.shape.toString());t.wrapper.children[0].data=s}t.wrapper.children[0].canMeasurePath=!0}(e,t,n):(r.width=t.wrapper.children[0].width,r.height=t.wrapper.children[0].height,t.shape instanceof hh&&(r.margin=t.shape.margin),r.style=t.style,t.wrapper.children[0]=r)}function mc(e){var t=new sr;t.style.fill="transparent";var i="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",n=new dr;n.data=i,n.id=e.id+"_0_finalNode",n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.style.strokeColor=e.style.strokeColor,n.style.strokeWidth=e.style.strokeWidth;var r=new dr;return r.data=i,r.id=e.id+"_1_finalNode",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.relativeMode="Object",r.style.fill=e.style.fill,r.style.strokeColor=e.style.strokeColor,r.style.strokeWidth=e.style.strokeWidth,t.children=[n,r],t.children[0].width=e.width,t.children[0].height=e.height,t.children[1].height=e.height/1.5,t.children[1].width=e.width/1.5,t.style.strokeWidth=0,t.style.strokeColor="transparent",t}function yc(e){ld(e+"_linear"),ld(e+"_radial")}function vc(e,t){var i=e.indexOf(t);i>=0&&e.splice(i,1)}function bc(e,t,i){var n,r,o;if(e.intermediatePoints=t,e.updateSegmentElement(e,t,e.wrapper.children[0],i),e.sourcePoint,r=e.sourceDecorator,"Bezier"===e.type){var a=e.segments[0],s=e.segments[e.segments.length-1];n=[Qi.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,Qi.isEmptyPoint(a.point1)?a.bezierPoint1:a.point1]}else n=e.intermediatePoints;t=e.clipDecorators(e,t,i);var l=e.wrapper.children[0];l.canMeasurePath=!0,l=e.wrapper.children[1],e.updateDecoratorElement(l,t[0],n[1],r),e.targetPoint,o=e.targetDecorator,l=e.wrapper.children[2],e.updateDecoratorElement(l,t[t.length-1],n[n.length-2],o),e.updateShapeElement(e)}function wc(e,t,i){var n,r=e.wrapper,o=r.bounds,a=t.offset,s=t.size/i.scale,l=t.margin,c=r.offsetX-r.actualSize.width*r.pivot.x,h=r.offsetY-r.actualSize.height*r.pivot.y;if(n={x:0,y:0},e.nodes.length>0){switch(t.side){case"Top":n.x+=c+o.width*a,n.y+=h-(s/2+12.5);break;case"Bottom":n.x+=c+a*o.width,n.y+=h+r.actualSize.height+(s/2+12.5);break;case"Left":n.x+=c-(s/2+12.5),n.y+=h+a*o.height;break;case"Right":n.x+=c+r.actualSize.width+(s/2+12.5),n.y+=h+a*o.height}n.x+=(l.left-l.right)/i.scale+s/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),n.y+=(l.top-l.bottom)/i.scale+s/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1)}else if(e.connectors.length>0){var d=e.connectors[0],p={offset:a},u=oc(d.intermediatePoints,p),f=u.index;n=u.point;var g,m=rc(d.intermediatePoints,p,o),y=(d.intermediatePoints,m.angle);fn(g=pn(),-y,d.intermediatePoints[f].x,d.intermediatePoints[f].y),(n=un(g,n)).x+=l.left-l.right+s/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),n.y+=l.top-l.bottom+s/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1),fn(g=pn(),y,d.intermediatePoints[f].x,d.intermediatePoints[f].y),n=un(g,n)}0===r.rotateAngle&&0===r.parentTransform||(fn(g=pn(),r.rotateAngle+r.parentTransform,r.offsetX,r.offsetY),n=un(g,n));return n}function xc(e,t,i,n){if(n.annotation){if(vs(n.annotation))return!0}else if(Cn[t]&e&&In[t]&i)return!0;return!1}function Sc(e,t){return!!(Cn[t]&e)}function Cc(e,t){return e.visibility&t}function Pc(e,t){var i;if("Text"===e.shape.type)i=e.shape;else{var n=t.split("_");t=n[n.length-1];for(var r=0;r<e.annotations.length;r++)t===e.annotations[r].id&&(i=e.annotations[r])}return i}function Oc(e,t){var i=t.split("_");if(t=i[i.length-1],e){e=e;for(var n=0;n<e.ports.length;n++)if(t===e.ports[n].id)return e.ports[n]}}function Ec(e,t){var i={},n=0;if(e.ports){var r=e.ports;for(n=0;n<r.length;n++)t?r[n].constraints&_n.InConnect&&(i=r[n]):r[n].constraints&_n.OutConnect&&(i=r[n])}return i}function Tc(e,t,i){for(var n=i?e.annotations:e.ports,r=0;r<n.length;r++)if(n[r].id===t)return r.toString();return null}function Ic(e,t){var i;for(i=0;i<e.length;i++)if(t===e[i].id)return!0;return!1}function kc(e,t,i,n,r,o){for(var a,s=e.children,l=0;l<s.length;l++)if(a=n[s[l]])if(a.children)kc(a,t,i,n,r,o);else if(a.offsetX-=t,a.offsetY-=i,!r){var c,h=void 0;n[a.id]=a,(h=a.initContainer()).children||(h.children=[]),c=a.init(o),h.children.push(c),h.measure(new Zi(a.width,a.height)),h.arrange(h.desiredSize)}}function Ac(e,t,i){if(0===i.length)i.push(e);else if(1===i.length)i[0][t]>e[t]?i.splice(0,0,e):i.push(e);else if(i.length>1){for(var n=0,r=i.length-1,o=Math.floor((n+r)/2);o!==n;)i[o][t]<e[t]?(n=o,o=Math.floor((n+r)/2)):i[o][t]>e[t]&&(r=o,o=Math.floor((n+r)/2));i[r][t]<e[t]?i.push(e):i[n][t]>e[t]?i.splice(n,0,e):i[n][t]<e[t]&&i[r][t]>e[t]&&i.splice(r,0,e)}}function Mc(e){var t=document.getElementById(e.diagramId),i="ej2_instances",n=t[i][0].nodes;void 0===n&&(n=function(e){for(var t=[],i=0;i<e.palettes.length;i++)for(var n=e.palettes[i].symbols,r=0;r<n.length;r++)n[r]instanceof Lh&&t.push(n[r]);return t}(t[i][0]));for(var r=0;n&&r<n.length;r++)if(n[r].id===e.nodeId)return Dc(n[r],e);var o=t[i][0].connectors;for(r=0;o&&r<o.length;r++)if(o[r].id===e.nodeId)return Dc(o[r],e);var a=t[i][0].enterObject;return a&&(a.id===e.nodeId||a.children)?a.children&&Zl(a,"HTML",t[i][0].enterTable)?t[i][0].enterTable[e.nodeId]:a:null}function Dc(e,t){var i,n=e.annotations;for(i=0;n&&i<n.length;i++)if(t.annotationId&&n[i].id===t.annotationId)return n[i];return e}function Lc(e,t,i,n){return w()&&(e={cause:e.cause,state:i,type:n,cancel:!1,element:Rc(t)===$a?{connector:Vc(t)}:{node:Vc(t)}}),e}var Rc=function(e){return e&&(e=void 0!==e.sourceID||void 0!==e.sourcePoint||void 0!==e.targetID||void 0!==e.targetPoint||void 0!==e.type?$a:Lh),e},jc=function(e){if(!e.sourceID&&!e.targetID){var t={x:e.sourcePoint.x,y:e.sourcePoint.y},i={x:e.targetPoint.x,y:e.targetPoint.y};"Horizontal"===e.flip?(e.sourcePoint.x=i.x,e.targetPoint.x=t.x):"Vertical"===e.flip?(e.sourcePoint.y=i.y,e.targetPoint.y=t.y):"Both"===e.flip&&(e.sourcePoint=i,e.targetPoint=t)}},Nc=function(e,t,i){var n=i.offset.x,r=i.offset.y;return"Horizontal"===t?(n=1-i.offset.x,r=i.offset.y):"Vertical"===t?(n=i.offset.x,r=1-i.offset.y):"Both"===t&&(n=1-i.offset.x,r=1-i.offset.y),e.setOffsetWithRespectToBounds(n,r,"Fraction"),e},zc=function e(t,i,n,r,o){if(t.hasChildren())for(var a=0,s=t.children;a<s.length;a++){var l=s[a],c=i-l.offsetX+i,h=n-l.offsetY+n;"Horizontal"!==o&&"Both"!==o||(l.offsetX=c,l.flipOffset.x=c-l.desiredSize.width/2),"Vertical"!==o&&"Both"!==o||(l.offsetY=h,l.flipOffset.y=h-l.desiredSize.height/2),(l instanceof sr||l instanceof nr)&&e(l,i,n,r,o),l.measure(new Zi(l.bounds.width,l.bounds.height)),l.arrange(l.desiredSize);var d=r.nameTable[l.id];d&&r.updateConnectorEdges(d)}},Bc=function(e){var t=e.selectedItems.nodes,i=e.selectedItems.connectors;e.protectPropertyChange(!0);var n=e.allowServerDataBinding;e.allowServerDataBinding=!1,e.selectedItems.nodes=[],e.selectedItems.connectors=[],e.allowServerDataBinding=n,e.protectPropertyChange(!1);for(var r=xd(e.selectedItems),o=0;o<t.length;o++)e.selectedItems.nodes.push(e.nameTable[t[o].id]);for(o=0;o<i.length;o++)e.selectedItems.connectors.push(e.nameTable[i[o].id]);return r},Hc=function(e,t){for(var i,n=new dr,r=0;r<e.length-1;r++)i=Wc(e[r],e[r+1]),n.data=i[0],n.id=t.id+"_"+t.shape.sequence,n.offsetX=i[1].x,n.offsetY=i[1].y,n.rotateAngle=45,n.transform=Mn.Self;return n},_c=function(e,t){for(var i=0;i<e.ports.length;i++)if(e.ports[i].id===t.id.split("_")[1])return!0;return!1},Wc=function(e,t){var i={x:e.x,y:e.y},n=Fc(e,t);n=Math.min(30,n/2);var r=to(e,t),o=Qi.transform({x:i.x,y:i.y},r,n),a=Qi.transform({x:o.x,y:o.y},r,-12),s=Qi.transform({x:a.x,y:a.y},r,24);return["M"+a.x+" "+a.y+" L"+s.x+" "+s.y,o]},Fc=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function Vc(e){return w()&&(e=xd(e)),e}function Uc(){return(navigator.platform.indexOf("Mac")>=0||navigator.platform.indexOf("iPad")>=0||navigator.platform.indexOf("iPhone")>=0||navigator.platform.indexOf("MacIntel")>=0)&&("safari"===le.info.name||"webkit"===le.info.name)}var Yc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xc=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yc(t,e),Xc([zt("None")],t.prototype,"shape",void 0),Xc([zt("white")],t.prototype,"fill",void 0),Xc([zt("Auto")],t.prototype,"horizontalAlignment",void 0),Xc([zt("Auto")],t.prototype,"verticalAlignment",void 0),Xc([zt(10)],t.prototype,"width",void 0),Xc([zt(10)],t.prototype,"height",void 0),Xc([Bt({x:.5,y:1},Qi)],t.prototype,"offset",void 0),Xc([zt("#1a1a1a")],t.prototype,"borderColor",void 0),Xc([zt(1)],t.prototype,"borderWidth",void 0),Xc([Bt({},Yn)],t.prototype,"margin",void 0),Xc([zt("")],t.prototype,"pathData",void 0),Xc([zt("")],t.prototype,"content",void 0),Xc([zt(0)],t.prototype,"cornerRadius",void 0),Xc([Bt({left:2,right:2,top:2,bottom:2},Yn)],t.prototype,"padding",void 0),t}(ii),qc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.orientation="Vertical",t.measureChildren=void 0,t.considerPadding=!0,t}return qc(t,e),t.prototype.measure=function(e){var t="Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack;return this.desiredSize=this.measureStackPanel(e,t),this.desiredSize},t.prototype.arrange=function(e){var t="Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack;return this.actualSize=this.arrangeStackPanel(e,t),this.updateBounds(),this.actualSize},t.prototype.measureStackPanel=function(t,i){var n=void 0;if(void 0!==this.children&&this.children.length>0)for(var r=0,o=this.children;r<o.length;r++){var a=o[r];a.parentTransform=this.rotateAngle+this.parentTransform,this.measureChildren?a.measure(a.desiredSize):a.measure(t);var s=a.desiredSize.clone();this.applyChildMargin(a,s),0!==a.rotateAngle&&(s=Md(s,a.rotateAngle)),void 0===n?n=s:a.preventContainer||i(s,n)}return n=e.prototype.validateDesiredSize.call(this,n,t),this.stretchChildren(n),this.considerPadding&&this.applyPadding(n),n},t.prototype.arrangeStackPanel=function(t,i){if(void 0!==this.children&&this.children.length>0){var n=void 0,r=void 0;n=this.offsetX-t.width*this.pivot.x+this.padding.left,r=this.offsetY-t.height*this.pivot.y+this.padding.top;for(var o=0,a=this.children;o<a.length;o++){var s=a[o],l=s.desiredSize.clone(),c=l;"Vertical"===this.orientation?r+=s.margin.top:n+=s.margin.left,0!==s.rotateAngle&&(c=Md(l,s.rotateAngle));var h=i(n,r,s,this,t,c);e.prototype.findChildOffsetFromCenter.call(this,s,h),s.arrange(l,!0),"Vertical"===this.orientation?r+=c.height+s.margin.bottom:n+=c.width+s.margin.right}}return t},t.prototype.updateHorizontalStack=function(e,t){t.height=Math.max(e.height,t.height),t.width+=e.width},t.prototype.updateVerticalStack=function(e,t){t.width=Math.max(e.width,t.width),t.height+=e.height},t.prototype.arrangeHorizontalStack=function(e,t,i,n,r,o){var a=0;if("Top"===i.verticalAlignment)a=t+i.margin.top+o.height/2;else if("Bottom"===i.verticalAlignment){a=n.offsetY+r.height*(1-n.pivot.y)-n.padding.bottom-i.margin.bottom-o.height/2}else a=n.offsetY-r.height*n.pivot.y+r.height/2,i.margin.top&&(a=t+i.margin.top+o.height/2);return{x:e+o.width/2,y:a}},t.prototype.arrangeVerticalStack=function(e,t,i,n,r,o){var a=0;if("Left"===i.horizontalAlignment)a=e+i.margin.left+o.width/2;else if("Right"===i.horizontalAlignment){a=n.offsetX+r.width*(1-n.pivot.x)-n.padding.right-i.margin.right-o.width/2}else a=n.offsetX-r.width*n.pivot.x+r.width/2,i.margin.left&&(a=e+i.margin.left+o.width/2);return{x:a,y:t+o.height/2}},t.prototype.stretchChildren=function(e){if(void 0!==this.children&&this.children.length>0)for(var t=0,i=this.children;t<i.length;t++){var n=i[t];"Vertical"===this.orientation?"Stretch"===n.horizontalAlignment&&(n.desiredSize.width=e.width-(n.margin.left+n.margin.right)):"Stretch"===n.verticalAlignment&&(n.desiredSize.height=e.height-(n.margin.top+n.margin.bottom))}},t.prototype.applyChildMargin=function(e,t){t.height+=e.margin.top+e.margin.bottom,t.width+=e.margin.left+e.margin.right},t}(nr);function Kc(e,t,i){var n,r="NoWrap";"Class"===t.shape.classifier?n=t.shape.classShape:"Enumeration"===t.shape.classifier?n=t.shape.enumerationShape:"Interface"===t.shape.classifier&&(n=t.shape.interfaceShape);t.container={type:"Stack",orientation:"Vertical"},t.constraints=(En.Default|En.HideThumbs)&~(En.Rotate|En.Resize),t.style={fill:t.style.fill,strokeColor:t.style.strokeColor,strokeWidth:1.5},t.children=[],t.maxWidth&&(r="Wrap");var o=new Lh(i,"nodes",{id:t.id+"_umlClass_header",annotations:[{id:"name",content:n.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:n.style.color,fill:n.style.fill,textWrapping:r}},{content:"<<"+t.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:n.style.fontSize,color:n.style.color,fill:n.style.fill,textWrapping:r},offset:{x:.5,y:.3},constraints:On.ReadOnly}],constraints:(En.Default|En.HideThumbs)&~(En.Rotate|En.Drag|En.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor}},!0);return i.initObject(o),i.nodes.push(o),i.UpdateBlazorDiagramModel(o,"Node"),t.children.push(o.id),function(e,t,i,n){if("Enumeration"===e.shape.classifier){var r=i.members;if(r&&r.length){$c(e,t);for(var o="",a=0;a<r.length;a++){var s=r[a];if(""!==s.name&&(o+=s.name),a!==r.length){var l=Qc(e,s),c=new Lh(t,"nodes",{id:md()+"_umlMember",annotations:[{id:"name",content:o,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor,textWrapping:n},constraints:(En.Default|En.HideThumbs)&~(En.Rotate|En.Drag|En.Resize),minHeight:25},!0);t.initObject(c),t.nodes.push(c),t.UpdateBlazorDiagramModel(c,"Node"),e.children.push(c.id),o="",s.isSeparator&&a!==r.length-1&&$c(e,t)}}}}else{var h=i.attributes;if(h.length){var d="";$c(e,t);for(a=0;a<h.length;a++){var p=void 0,u=h[a];if(p=u.scope&&"Public"===u.scope?" +":u.scope&&"Private"===u.scope?"-":u.scope&&"Protected"===u.scope?"#":"~",""!==u.name&&p&&(d+=p+" "+u.name+" : "+u.type),a!==h.length){l=Qc(e,u),c=new Lh(t,"nodes",{id:md()+"_umlProperty",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},annotations:[{id:"name",content:d,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(En.Default|En.HideThumbs)&~(En.Rotate|En.Drag|En.Resize),minHeight:25},!0);t.initObject(c),t.nodes.push(c),t.UpdateBlazorDiagramModel(c,"Node"),e.children.push(c.id),d="",u.isSeparator&&a!==h.length-1&&$c(e,t)}}}}}(t,i,n,r),function(e,t,i,n){if(i.methods&&i.methods.length){var r=i.methods;$c(e,t);for(var o="",a="",s=void 0,l=0;l<r.length;l++){var c=r[l];if(s=c.scope&&"Public"===c.scope?" +":c.scope&&"Private"===c.scope?"-":c.scope&&"Protected"===c.scope?"#":"~",c.parameters)for(var h=0;h<c.parameters.length;h++)c.parameters[h].type?o+=c.parameters[h].name+":"+c.parameters[h].type:o+=c.parameters[h].name,h!==c.parameters.length-1&&(o+=",");if(""!==c.name&&s&&(a+=s+" "+c.name+"("+o+") : "+c.type),l!==r.length){var d=Qc(e,c),p=new Lh(t,"nodes",{id:md()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:a,offset:{x:0,y:.5},style:{bold:!0,fontSize:d.fontSize,color:d.color,fill:d.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},minHeight:25,constraints:(En.Default|En.HideThumbs)&~(En.Rotate|En.Drag|En.Resize)},!0);t.initObject(p),t.nodes.push(p),t.UpdateBlazorDiagramModel(p,"Node"),e.children.push(p.id),a="",c.isSeparator&&l!==r.length-1&&$c(e,t)}}}}(t,i,n,r),t.offsetX=t.offsetX,t.offsetY=t.offsetY,t.style.fill=t.style.fill,t.borderColor=t.borderColor,i.initObject(t),e}function $c(e,t){var i=new Lh(t,"nodes",{id:md()+"_path",height:1,constraints:En.Default&~En.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor}},!0);t.initObject(i),t.nodes.push(i),e.children.push(i.id)}function Qc(e,t){var i={},n=t.style;return i.fill="transparent"!==n.fill?n.fill:e.style.fill,i.color=n.color,i.fontSize=12!==n.fontSize?n.fontSize:e.style.fontSize,i.strokeColor="black"!==n.strokeColor?n.strokeColor:e.style.strokeColor,i.strokeWidth=1!==n.strokeWidth?n.strokeWidth:e.style.strokeWidth,i}var Jc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eh=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},th=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jc(t,e),eh([zt("Horizontal")],t.prototype,"orientation",void 0),eh([zt("Center")],t.prototype,"type",void 0),eh([zt(void 0)],t.prototype,"offset",void 0),eh([zt(!1)],t.prototype,"enableRouting",void 0),eh([zt([])],t.prototype,"children",void 0),eh([zt("")],t.prototype,"assistants",void 0),eh([zt("")],t.prototype,"level",void 0),eh([zt("")],t.prototype,"hasSubTree",void 0),eh([zt("")],t.prototype,"rows",void 0),t}(ii),ih=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nh=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},rh=function(e){if(e){if(w())return Dh;switch(e.type){case"Basic":return dh;case"Flow":return ph;case"Path":return ah;case"Image":return ch;case"Text":return hh;case"Bpmn":return Sh;case"Native":return sh;case"HTML":return lh;case"UmlActivity":return Ch;case"UmlClassifier":return Mh;case"SwimLane":return zh;default:return dh}}return w()?Dh:dh},oh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),nh([zt("Basic")],t.prototype,"type",void 0),t}(ii),ah=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"Path"},nh([zt("Path")],t.prototype,"type",void 0),nh([zt("")],t.prototype,"data",void 0),t}(oh),sh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"Native"},nh([zt("Native")],t.prototype,"type",void 0),nh([zt("")],t.prototype,"content",void 0),nh([zt("Stretch")],t.prototype,"scale",void 0),t}(oh),lh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"Html"},nh([zt("HTML")],t.prototype,"type",void 0),nh([zt("")],t.prototype,"content",void 0),t}(oh),ch=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"Image"},nh([zt("Image")],t.prototype,"type",void 0),nh([zt("")],t.prototype,"source",void 0),nh([zt("None")],t.prototype,"scale",void 0),nh([zt("None")],t.prototype,"align",void 0),t}(oh),hh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"Text"},nh([zt("Text")],t.prototype,"type",void 0),nh([zt("")],t.prototype,"content",void 0),nh([Bt({},Yn)],t.prototype,"margin",void 0),t}(oh),dh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"BasicShape"},nh([zt("Basic")],t.prototype,"type",void 0),nh([zt("Rectangle")],t.prototype,"shape",void 0),nh([zt(0)],t.prototype,"cornerRadius",void 0),nh([_t([],Qi)],t.prototype,"points",void 0),t}(oh),ph=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"FlowShape"},nh([zt("Flow")],t.prototype,"type",void 0),nh([zt("Terminator")],t.prototype,"shape",void 0),t}(oh),uh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"BpmnGateway"},nh([zt("None")],t.prototype,"type",void 0),t}(ii),fh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"BpmnDataObject"},nh([zt("None")],t.prototype,"type",void 0),nh([zt(!1)],t.prototype,"collection",void 0),t}(ii),gh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),nh([zt("None")],t.prototype,"type",void 0),nh([zt("None")],t.prototype,"loop",void 0),nh([zt(!1)],t.prototype,"call",void 0),nh([zt(!1)],t.prototype,"compensation",void 0),t}(ii),mh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"BpmnEvent"},nh([zt("Start")],t.prototype,"event",void 0),nh([zt("None")],t.prototype,"trigger",void 0),t}(ii),yh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"BpmnSubEvent"},nh([zt("None")],t.prototype,"trigger",void 0),nh([zt("Start")],t.prototype,"event",void 0),nh([zt("")],t.prototype,"id",void 0),nh([Bt({},Qi)],t.prototype,"offset",void 0),nh([_t([],Pr)],t.prototype,"annotations",void 0),nh([_t([],br)],t.prototype,"ports",void 0),nh([zt()],t.prototype,"width",void 0),nh([zt()],t.prototype,"height",void 0),nh([Bt({},Yn)],t.prototype,"margin",void 0),nh([zt("Center")],t.prototype,"horizontalAlignment",void 0),nh([zt("Center")],t.prototype,"verticalAlignment",void 0),nh([zt(!0)],t.prototype,"visible",void 0),t}(ii),vh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),nh([Bt({id:"success",event:"End",offset:{x:1,y:.5}},yh)],t.prototype,"success",void 0),nh([Bt({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},yh)],t.prototype,"failure",void 0),nh([Bt({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},yh)],t.prototype,"cancel",void 0),t}(ii),bh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),nh([zt("None")],t.prototype,"type",void 0),nh([zt(!1)],t.prototype,"adhoc",void 0),nh([zt("Default")],t.prototype,"boundary",void 0),nh([zt(!1)],t.prototype,"compensation",void 0),nh([zt("None")],t.prototype,"loop",void 0),nh([zt(!0)],t.prototype,"collapsed",void 0),nh([_t([],yh)],t.prototype,"events",void 0),nh([Bt({},vh)],t.prototype,"transaction",void 0),nh([zt(void 0)],t.prototype,"processes",void 0),t}(ii),wh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"BpmnActivity"},nh([zt("Task")],t.prototype,"activity",void 0),nh([Bt({},gh)],t.prototype,"task",void 0),nh([Bt({},bh)],t.prototype,"subProcess",void 0),t}(ii),xh=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return ih(t,e),t.prototype.getClassName=function(){return"BpmnAnnotation"},nh([zt("")],t.prototype,"text",void 0),nh([zt("")],t.prototype,"id",void 0),nh([zt(0)],t.prototype,"angle",void 0),nh([zt()],t.prototype,"height",void 0),nh([zt()],t.prototype,"width",void 0),nh([zt(0)],t.prototype,"length",void 0),t}(ii),Sh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"BpmnShape"},nh([zt("Bpmn")],t.prototype,"type",void 0),nh([zt("Event")],t.prototype,"shape",void 0),nh([Bt({},mh)],t.prototype,"event",void 0),nh([Bt({},uh)],t.prototype,"gateway",void 0),nh([Bt({},fh)],t.prototype,"dataObject",void 0),nh([Bt({},wh)],t.prototype,"activity",void 0),nh([Bt({},xh)],t.prototype,"annotation",void 0),nh([_t([],xh)],t.prototype,"annotations",void 0),t}(oh),Ch=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"UmlActivityShape"},nh([zt("UmlActivity")],t.prototype,"type",void 0),nh([zt("Action")],t.prototype,"shape",void 0),t}(oh),Ph=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"MethodArguments"},nh([zt("")],t.prototype,"name",void 0),nh([zt("")],t.prototype,"type",void 0),nh([Bt({},er)],t.prototype,"style",void 0),t}(ii),Oh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"UmlClassAttribute"},nh([zt("Public")],t.prototype,"scope",void 0),nh([zt(!1)],t.prototype,"isSeparator",void 0),t}(Ph),Eh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"UmlClassMethod"},nh([_t([],Ph)],t.prototype,"parameters",void 0),t}(Oh),Th=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"UmlClass"},nh([zt("")],t.prototype,"name",void 0),nh([_t([],Oh)],t.prototype,"attributes",void 0),nh([_t([],Eh)],t.prototype,"methods",void 0),nh([Bt({},er)],t.prototype,"style",void 0),t}(ii),Ih=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"UmlInterface"},nh([zt(!1)],t.prototype,"isSeparator",void 0),t}(Th),kh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"UmlEnumerationMember"},nh([zt("")],t.prototype,"name",void 0),nh([zt("")],t.prototype,"value",void 0),nh([zt(!1)],t.prototype,"isSeparator",void 0),nh([Bt({},er)],t.prototype,"style",void 0),t}(ii),Ah=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"UmlEnumeration"},nh([zt("")],t.prototype,"name",void 0),nh([_t([],kh)],t.prototype,"members",void 0),nh([Bt({},er)],t.prototype,"style",void 0),t}(ii),Mh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"UmlClassifierShape"},nh([zt("UmlClassifier")],t.prototype,"type",void 0),nh([Bt({},Th)],t.prototype,"classShape",void 0),nh([Bt({},Ih)],t.prototype,"interfaceShape",void 0),nh([Bt({},Ah)],t.prototype,"enumerationShape",void 0),nh([zt("Class")],t.prototype,"classifier",void 0),t}(oh),Dh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"DiagramShape"},nh([zt("Basic")],t.prototype,"type",void 0),nh([zt("Rectangle")],t.prototype,"basicShape",void 0),nh([zt("Terminator")],t.prototype,"flowShape",void 0),nh([zt("Event")],t.prototype,"bpmnShape",void 0),nh([zt("Action")],t.prototype,"umlActivityShape",void 0),nh([zt("")],t.prototype,"data",void 0),nh([zt("")],t.prototype,"content",void 0),nh([zt("")],t.prototype,"textContent",void 0),nh([zt("Stretch")],t.prototype,"scale",void 0),nh([zt("")],t.prototype,"source",void 0),nh([zt("None")],t.prototype,"align",void 0),nh([Bt({},Yn)],t.prototype,"margin",void 0),nh([zt(0)],t.prototype,"cornerRadius",void 0),nh([_t([],Qi)],t.prototype,"points",void 0),nh([Bt({},fh)],t.prototype,"dataObject",void 0),nh([Bt({},mh)],t.prototype,"event",void 0),nh([Bt({},uh)],t.prototype,"gateway",void 0),nh([_t([],xh)],t.prototype,"annotations",void 0),nh([Bt({},wh)],t.prototype,"activity",void 0),nh([Bt({},xh)],t.prototype,"annotation",void 0),nh([Bt({},Ah)],t.prototype,"enumerationShape",void 0),nh([zt("Class")],t.prototype,"classifier",void 0),nh([Bt({},Th)],t.prototype,"classShape",void 0),nh([Bt({},Ih)],t.prototype,"interfaceShape",void 0),t}(ii),Lh=function(e){function t(t,i,n,r){var o,a=e.call(this,t,i,n,r)||this;return a.isCanvasUpdate=!1,a.status="None",a.parentId="",a.processId="",a.umlIndex=-1,a.outEdges=[],a.inEdges=[],a.isHeader=!1,a.isLane=!1,a.isPhase=!1,a.children&&a.children.length>0&&((o=n).style&&o.style.fill||(a.style.fill="transparent"),o.style&&o.style.strokeColor||(a.style.strokeColor="transparent")),a.shape&&"UmlActivity"===a.shape.type&&Xl(n,a),a.shape&&"SwimLane"===a.shape.type&&Vl(n,a),a}return ih(t,e),Object.defineProperty(t.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new Zi(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t,i;t="SwimLane"!=this.shape.type?new tr:new Xs;switch(this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":var n=new dr;n.data=this.shape.data,t=n;break;case"Image":var r=new ur;r.source=this.shape.source,r.imageAlign=this.shape.align,r.imageScale=this.shape.scale,t=r;break;case"Text":var o=new or;o.content=w()?this.shape.textContent:this.shape.content,t=o,i=this.style,t.style=i;break;case"Basic":if(!w()&&"Rectangle"===this.shape.shape||w()&&"Rectangle"===this.shape.basicShape)(t=s=new tr).cornerRadius=this.shape.cornerRadius;else if(!w()&&"Polygon"===this.shape.shape||w()&&"Polygon"===this.shape.basicShape){var a=new dr;a.data=en(this.shape.points),t=a}else{var s=new dr,l=lr(w()?this.shape.basicShape:this.shape.shape);s.data=l,t=s}break;case"Flow":var c=new dr,h=kr(w()?this.shape.flowShape:this.shape.shape);c.data=h,t=c;break;case"UmlActivity":t=function(e,t,i){var n=w()?i.shape.umlActivityShape:i.shape.shape,r=zs(n);switch(e.data=r,t=e,n){case"StructuredNode":if(i.annotations)for(var o=0;o<i.annotations.length;o++)i.annotations[o].content="<<"+i.annotations[o].content+">>";t=e;break;case"FinalNode":t=mc(i)}return t}(new dr,t,this);break;case"Bpmn":if(e.bpmnModule){t=e.bpmnModule.initBPMNContent(t,this,e),this.wrapper.elementActions=this.wrapper.elementActions|Tn.ElementIsGroup;var d=this.shape.activity.subProcess;if(d.processes&&d.processes.length)for(var p=0,u=this.shape.activity.subProcess.processes;p<u.length;p++){var f=u[p];!e.nameTable[f]||e.nameTable[f].processId&&e.nameTable[f].processId!==this.id||(e.nameTable[f].processId=this.id,d.collapsed&&e.updateElementVisibility(e.nameTable[f].wrapper,e.nameTable[f],!d.collapsed),t.children.push(e.nameTable[f].wrapper))}}break;case"Native":var g=new gr(this.id,e.element.id);g.content=this.shape.content,g.scale=this.shape.scale,t=g;break;case"HTML":var m=new Ta(this.id,e.element.id,void 0,e.nodeTemplate);this.shape.content?m.content=this.shape.content:e.nodeTemplate&&(m.isTemplate=!0,m.template=m.content=cd(m,!0,this)),t=m;break;case"UmlClassifier":t=Kc(t,this,e);break;case"SwimLane":this.annotations=[],this.ports=[],t.cellStyle.fill="none",t.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},t.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=En.HideThumbs,sl(t,e,this)}return t.id=this.id+"_content",t.relativeMode="Object",void 0!==this.width&&(t.width=this.width),t.horizontalAlignment="Stretch",void 0!==this.height&&(t.height=this.height),void 0!==this.minHeight&&(t.minHeight=this.minHeight),void 0!==this.maxHeight&&(t.maxHeight=this.maxHeight),void 0!==this.minWidth&&(t.minWidth=this.minWidth),void 0!==this.maxWidth&&(t.maxWidth=this.maxWidth),(!w()&&"Rectangle"===this.shape.shape&&!this.shape.cornerRadius||w()&&"Rectangle"===this.shape.basicShape&&"Basic"===this.shape.type&&!this.shape.cornerRadius)&&(t.isRectElement=!0),t.verticalAlignment="Stretch",(this.shape instanceof hh||w()&&"Text"===this.shape.type)&&(t.margin=this.shape.margin),us(this)&&0!==(this.constraints&En.Shadow)&&(t.shadow=this.shadow),("Bpmn"!==this.shape.type||!w()&&"Message"===this.shape.shape||w()&&"Message"===this.shape.bpmnShape||!w()&&"DataSource"===this.shape.shape||w()&&"DataSource"===this.shape.bpmnShape)&&("UmlActivity"!==this.shape.type||!w()&&"FinalNode"!==this.shape.shape||w()&&"FinalNode"!==this.shape.umlActivityShape)&&"Text"!==this.shape.type&&(t.style=this.style),(this.wrapper.elementActions&Tn.ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(t.flip=this.flip),t},t.prototype.initContainer=function(){var e;if(this.id||(this.id=md()),!this.container||this.shape instanceof zh)e=this.children?new nr:new sr;else switch(this.container.type){case"Canvas":e=new sr;break;case"Stack":e=new Zc;break;case"Grid":(e=new Xs).setDefinitions(this.rows,this.columns)}return e.id=this.id,e.offsetX=this.offsetX,e.offsetY=this.offsetY,e.visible=this.visible,e.horizontalAlignment=this.horizontalAlignment,e.verticalAlignment=this.verticalAlignment,this.container&&(e.width=this.width,e.height=this.height,"Stack"===this.container.type&&(e.orientation=this.container.orientation)),e.style.fill=this.backgroundColor,e.style.strokeColor=this.borderColor,e.style.strokeWidth=this.borderWidth,e.rotateAngle=this.rotateAngle,e.minHeight=this.minHeight,e.minWidth=this.minWidth,e.maxHeight=this.maxHeight,e.maxWidth=this.maxWidth,e.pivot=this.pivot,e.margin=this.margin,e.flip=this.flip,this.wrapper=e,e},t.prototype.initPorts=function(e,t){for(var i,n=this.wrapper,r=0;this.ports,r<this.ports.length;r++){i=this.initPortWrapper(this.ports[r]);var o=void 0,a=Ld(e);a&&(o=a(i,this)),i.description=o||i.id,i.inversedAlignment=n.inversedAlignment,i.elementActions=i.elementActions|Tn.ElementIsPort,t.children.push(i)}},t.prototype.getIconOffet=function(e,t){var i,n;return"BottomToTop"===e.orientation?(i=t.offset.x,n=1-t.offset.y):"LeftToRight"===e.orientation?(i=t.offset.y,n=t.offset.x):"RightToLeft"===e.orientation?(i=1-t.offset.y,n=t.offset.x):(i=t.offset.x,n=t.offset.y),{x:i,y:n}},t.prototype.initIcons=function(e,t,i,n){var r,o=this.wrapper,a=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==a.shape){var s=new sr;s.float=!0;s.id=this.id+"_icon_content",s.children=[],s.height=a.height,s.width=a.width,s.style.strokeColor="transparent",s.margin=a.margin,s.horizontalAlignment="Center",s.verticalAlignment="Center",s.visible=this.visible,r=this.getIconOffet(t,a),s.setOffsetWithRespectToBounds(r.x,r.y,"Fraction"),s.relativeMode="Point",this.initIconSymbol(a,s,e,n);var l=void 0,c=Ld(e);c&&(l=c(a,this)),s.description=l||s.id,s.inversedAlignment=o.inversedAlignment,i.children.push(s)}},t.prototype.initAnnotations=function(e,t,i,n,r){for(var o,a=0;this.annotations,a<this.annotations.length;a++){o=this.initAnnotationWrapper(this.annotations[a],i,n,a,r);var s=void 0,l=Ld(e);l&&(s=l(o,this)),o.description=s||o.id,o.inversedAlignment=t.inversedAlignment,t.children.push(o)}},t.prototype.initPortWrapper=function(e){e.id=e.id||md();var t=new dr;t.height=e.height,t.width=e.width;var i="Custom"===e.shape?e.pathData:Er(e.shape);t.id=this.id+"_"+e.id,t.margin=e.margin,t.data=i;var n=e.style;return t.style={fill:n.fill,strokeColor:n.strokeColor,gradient:null,opacity:n.opacity,strokeDashArray:n.strokeDashArray,strokeWidth:n.strokeWidth},t.horizontalAlignment=e.horizontalAlignment,t.verticalAlignment=e.verticalAlignment,t=Nc(t,this.flip,e),void 0===this.width&&void 0===this.height||(t.float=!0),t.relativeMode="Point",t.visible=!(!Cc(e,xn.Visible)||Cc(e,xn.Hover)||Cc(e,xn.Connect)),t.elementActions=t.elementActions|Tn.ElementIsPort,t},t.prototype.initAnnotationWrapper=function(e,t,i,n,r){e.id=e.id||n+"annotation"||md();var o,a=e;if(w()&&"Template"===e.annotationType&&(e.template=e.template?e.template:""),t&&(e.template||"Template"===e.annotationType||r&&""===e.content))o=gd(o=new Ta(this.id,t,e.id,r),e,r);else{(o=new or).canMeasure=!i;var s=e.style,l=e.hyperlink.link?e.hyperlink:void 0;o.style={fill:s.fill,strokeColor:s.strokeColor,strokeWidth:s.strokeWidth,bold:s.bold,textWrapping:s.textWrapping,color:l?l.color||o.hyperlink.color:s.color,whiteSpace:s.whiteSpace,fontFamily:s.fontFamily,fontSize:s.fontSize,italic:s.italic,gradient:null,opacity:s.opacity,strokeDashArray:s.strokeDashArray,textAlign:s.textAlign,textOverflow:e.style.textOverflow,textDecoration:l?l.textDecoration||o.hyperlink.textDecoration:s.textDecoration},o.hyperlink.link=e.hyperlink.link||void 0,o.hyperlink.content=e.hyperlink.content||void 0,o.hyperlink.textDecoration=e.hyperlink.textDecoration||void 0,o.content=l?l.content||o.hyperlink.link:e.content}return o.constraints=e.constraints,o.height=e.height,o.width=e.width,o.visible=e.visibility,o.rotateAngle=e.rotateAngle,o.id=this.id+"_"+e.id,void 0===this.width||e.template||(void 0===e.width||e.width>this.width&&("Wrap"===e.style.textWrapping||"WrapWithOverflow"===e.style.textWrapping))&&(o.width=this.width),o.margin=e.margin,o.horizontalAlignment=e.horizontalAlignment,o.verticalAlignment=e.verticalAlignment,o.setOffsetWithRespectToBounds(a.offset.x,a.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(o.float=!0),o.relativeMode="Point",o},t.prototype.initIconContainer=function(e,t){var i=new tr;return i.id=t.id+"_rect",i.height=e.height,i.width=e.width,i.visible=t.visible,i.margin=e.margin,i.cornerRadius=e.cornerRadius,i.style={fill:e.fill,strokeColor:e.borderColor,strokeWidth:e.borderWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.description=i.description||"Click here to expand or collapse",i},t.prototype.initIconSymbol=function(e,t,i,n){var r;if(t.children.push(this.initIconContainer(e,t)),"Template"===e.shape)(r=new gr(this.id,n)).content=e.content,r.height=10,r.width=10;else{(r=new dr).data=function(e){var t;switch(e.shape){case"Minus":t="M0,50 L100,50";break;case"Plus":t="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":t="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":t="M0,0 L50,100 L100,0 Z";break;case"Path":t=e.pathData}return t}(e);var o=Wh(r.data);r.height=o.height<10?o.height:10-(e.padding.bottom+e.padding.top),r.width=o.width<10?o.width:10-(e.padding.left+e.padding.right)}r.id=t.id+"_shape",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.visible=t.visible,r.visible=t.visible,r.style={fill:"black",strokeColor:e.borderColor,strokeWidth:e.borderWidth},r.setOffsetWithRespectToBounds(.5,.5,"Fraction"),r.relativeMode="Object",r.description=t.description||"Click here to expand or collapse",t.children.push(r)},t.prototype.getClassName=function(){return"Node"},nh([_t([],Pr)],t.prototype,"annotations",void 0),nh([zt(0)],t.prototype,"offsetX",void 0),nh([Bt({},th)],t.prototype,"layoutInfo",void 0),nh([zt(0)],t.prototype,"offsetY",void 0),nh([_t([],br)],t.prototype,"ports",void 0),nh([zt(!0)],t.prototype,"isExpanded",void 0),nh([Bt({},Gc)],t.prototype,"expandIcon",void 0),nh([Bt({},Gc)],t.prototype,"collapseIcon",void 0),nh([Bt({x:.5,y:.5},Qi)],t.prototype,"pivot",void 0),nh([zt()],t.prototype,"width",void 0),nh([zt()],t.prototype,"height",void 0),nh([zt()],t.prototype,"minWidth",void 0),nh([zt()],t.prototype,"minHeight",void 0),nh([zt()],t.prototype,"maxWidth",void 0),nh([zt()],t.prototype,"maxHeight",void 0),nh([zt(0)],t.prototype,"rotateAngle",void 0),nh([Bt({fill:"white"},er)],t.prototype,"style",void 0),nh([zt("transparent")],t.prototype,"backgroundColor",void 0),nh([zt("none")],t.prototype,"borderColor",void 0),nh([zt(0)],t.prototype,"borderWidth",void 0),nh([zt()],t.prototype,"data",void 0),nh([Ht(rh)],t.prototype,"shape",void 0),nh([Bt({},xa)],t.prototype,"previewSize",void 0),nh([Bt({},xa)],t.prototype,"dragSize",void 0),nh([zt(null)],t.prototype,"wrapper",void 0),nh([zt(En.Default)],t.prototype,"constraints",void 0),nh([Bt({},Xn)],t.prototype,"shadow",void 0),nh([zt()],t.prototype,"children",void 0),nh([zt(null)],t.prototype,"container",void 0),nh([zt("Left")],t.prototype,"horizontalAlignment",void 0),nh([zt("Top")],t.prototype,"verticalAlignment",void 0),nh([zt()],t.prototype,"rows",void 0),nh([zt()],t.prototype,"columns",void 0),nh([zt()],t.prototype,"rowIndex",void 0),nh([zt()],t.prototype,"columnIndex",void 0),nh([zt()],t.prototype,"rowSpan",void 0),nh([zt()],t.prototype,"columnSpan",void 0),nh([zt("")],t.prototype,"branch",void 0),t}(Oa),Rh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),nh([zt("")],t.prototype,"id",void 0),nh([Bt({},Cr)],t.prototype,"annotation",void 0),nh([Bt({fill:"#E7F4FF",strokeColor:"#CCCCCC"},Qn)],t.prototype,"style",void 0),nh([zt(50)],t.prototype,"height",void 0),nh([zt(50)],t.prototype,"width",void 0),t}(ii),jh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"Lane"},nh([zt("")],t.prototype,"id",void 0),nh([Bt({fill:"#F9F9F9",strokeColor:"#CCCCCC"},Qn)],t.prototype,"style",void 0),nh([_t([],Lh)],t.prototype,"children",void 0),nh([zt(100)],t.prototype,"height",void 0),nh([zt(100)],t.prototype,"width",void 0),nh([Bt({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Rh)],t.prototype,"header",void 0),nh([zt(!0)],t.prototype,"canMove",void 0),t}(ii),Nh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.getClassName=function(){return"Phase"},nh([zt("")],t.prototype,"id",void 0),nh([Bt({strokeColor:"#CCCCCC"},Qn)],t.prototype,"style",void 0),nh([Bt({annotation:{content:"Phase"}},Rh)],t.prototype,"header",void 0),nh([zt(100)],t.prototype,"offset",void 0),t}(ii),zh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=20,t.hasHeader=!0,t}return ih(t,e),t.prototype.getClassName=function(){return"SwimLane"},nh([zt("SwimLane")],t.prototype,"type",void 0),nh([zt(20)],t.prototype,"phaseSize",void 0),nh([_t([],Nh)],t.prototype,"phases",void 0),nh([zt("Horizontal")],t.prototype,"orientation",void 0),nh([_t([],jh)],t.prototype,"lanes",void 0),nh([Bt({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Rh)],t.prototype,"header",void 0),nh([zt(!1)],t.prototype,"isLane",void 0),nh([zt(!1)],t.prototype,"isPhase",void 0),t}(oh),Bh=function(){function e(){}return e.prototype.getClassName=function(){return"ChildContainer"},nh([zt("Canvas")],e.prototype,"type",void 0),nh([zt("Vertical")],e.prototype,"orientation",void 0),e}(),Hh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ih(t,e),t.prototype.init=function(e){var t=new nr;t.measureChildren=!1;new Zi;if(t.children=[],this.annotation){var i=this.nodes.length>0?e.nameTable[this.nodes[0].id].wrapper:e.nameTable[this.connectors[0].id].wrapper,n=e.getWrapper(i,this.annotation.id);t.children.push(n)}else if(this.nodes||this.connectors){for(var r=0;r<this.nodes.length;r++){n=e.nameTable[this.nodes[r].id].wrapper;t.children.push(n)}for(var o=0;o<this.connectors.length;o++){n=e.nameTable[this.connectors[o].id].wrapper;t.children.push(n)}}return this.wrapper=t,t},nh([zt(null)],t.prototype,"wrapper",void 0),nh([_t([],Lh)],t.prototype,"nodes",void 0),nh([_t([],$a)],t.prototype,"connectors",void 0),nh([zt()],t.prototype,"width",void 0),nh([zt()],t.prototype,"height",void 0),nh([zt(0)],t.prototype,"rotateAngle",void 0),nh([zt(0)],t.prototype,"offsetX",void 0),nh([zt(0)],t.prototype,"offsetY",void 0),nh([Bt({x:.5,y:.5},Qi)],t.prototype,"pivot",void 0),nh([zt("CompleteIntersect")],t.prototype,"rubberBandSelectionMode",void 0),nh([_t([],Ns)],t.prototype,"userHandles",void 0),nh([zt(Cn.All)],t.prototype,"constraints",void 0),nh([zt()],t.prototype,"setTooltipTemplate",void 0),t}(ii);function _h(e){var t,i=[];if("msie"===le.info.name||"edge"===le.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i}function Wh(e){if(e){window.measureElement.style.visibility="visible";var t=_h(window.measureElement.children[2])[0];t.setAttribute("d",e);var i=t.getBBox(),n=new hn(i.x,i.y,i.width,i.height);return window.measureElement.style.visibility="hidden",n}return new hn(0,0,0,0)}function Fh(e,t,i,n,r){var o=new Zi,a=nd("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(a.style.fontWeight="bold"),e.italic&&(a.style.fontStyle="italic"),void 0!==i&&(a.style.width=i.toString()+"px"),void 0!==n&&(a.style.height=n.toString()+"px"),void 0!==r&&(a.style.maxWidth=r.toString()+"px"),a.style.fontFamily=e.fontFamily,a.style.fontSize=e.fontSize+"px",a.style.color=e.color,a.textContent=t,a.style.whiteSpace=Ad(e.whiteSpace,e.textWrapping),a.style.wordBreak=void 0!==r?"break-word":Ed(e.textWrapping),document.body.appendChild(a),o.width=a.offsetWidth,o.height=a.offsetHeight,document.body.removeChild(a),o}function Vh(e,t,i,n){var r,o,a=0,s=0,l=!1;return 0===(r=t).x&&0===r.y||(a=0-Number(r.x),s=0-Number(r.y)),(e.actualSize.width!==r.width||e.actualSize.height!==r.height||n)&&(a=(n&&n.width||e.actualSize.width)/Number(r.width?r.width:1),s=(n&&n.height||e.actualSize.height)/Number(r.height?r.height:1),l=!0),o=nn(an(Ji(e.data)),a,s,l,r.x,r.y,0,0),l=!1,o}function Uh(e){return Yh(e).getElementsByClassName("e-diagram-layer")[0]}function Yh(e,t){var i;return t&&(i=document.getElementById(t)),"msie"===le.info.name||"edge"===le.info.name?i?i.querySelector("#"+e):document.getElementById(e):i?i.querySelector("#"+CSS.escape(e)):document.getElementById(e)}function Xh(e,t,i){var n,r,o=void 0,a="";"native"===i?(n=td(e),a="_content_groupElement"):"html"===i?(n=id(e).childNodes[0],a="_html_element"):(n=function(e){var t=Uh(e);return t.getElementById(e+"_diagramLayer")}(e),a="_groupElement");for(var s=0;n.childNodes&&s<n.childNodes.length;s++)if((r=n.childNodes[s])&&r.id===t+a){o=s;break}return o}function Gh(e){return Yh(e).getElementsByClassName("e-adorner-layer")[0]}function qh(e){return Gh(e).getElementById(e+"_SelectorElement")}function Zh(e){return Gh(e).getElementById(e+"_diagramAdorner")}function Kh(e){return Yh(e).getElementsByClassName("e-userHandle-layer")[0]}function $h(e){return Yh(e).getElementsByClassName("e-native-layer")[0]}function Qh(e){return Yh(e).getElementsByClassName("e-grid-layer")[0]}function Jh(e){return Yh(e).getElementsByClassName("e-background-layer")[0].parentNode}function ed(e){return Yh(e).getElementsByClassName("e-background-layer")[0]}function td(e){return $h(e).getElementById(e+"_nativeLayer")}function id(e){var t=null;if(window.domTable[e+"html_layer"])t=window.domTable[e+"html_layer"];else{t=Yh(e).getElementsByClassName("e-html-layer")[0],window.domTable[e+"html_layer"]=t}return t}function nd(e,t){var i=rt(e);return pd(i,t),i}function rd(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);return hd(i,t),i}function od(e,t,i){for(var n=e;n&&!(i?n.id===t:ad(n,t));)n=n.parentNode;return n}function ad(e,t){return(" "+("object"===typeof e.className?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}function sd(e,t,i){e=[];for(var n=0,r=i.length;n<r;n++)e.push({pageX:i[n].clientX,pageY:i[n].clientY,pointerId:null});return e}function ld(e,t){var i=Yh(e,t);i&&i.parentNode.removeChild(i)}function cd(e,t,i){var n;if(t){n=nd("div",{style:"height: 100%; width: 100%"})}else n=document.createElementNS("http://www.w3.org/2000/svg","g");var r,o=Mc(e),a="",s={};if(o instanceof Lh){if(s=o,"Native"===o.shape.type){!0;var l,c=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(c),c.innerHTML=o.shape.content,l=c.getElementsByTagName("svg").length>0?c.getElementsByTagName("svg")[0].outerHTML:c.getElementsByTagName("g")[0].outerHTML,o.shape.content=l,e.content=l,c.parentElement.removeChild(c)}w()&&(a="diagramsf_node_template",s=Vc(o))}else s=o,w()&&(s=Vc(o),a="diagramsf_annotation_template");if("string"!==typeof e.content||e.isTemplate&&!w())if(e.isTemplate){p=void 0;p=e.getNodeTemplate()(xd(i),void 0,"template",void 0,void 0,!1);for(var h=0;h<p.length;h++)n.appendChild(p[h])}else n.appendChild(e.content);else{var d=document.getElementById(e.content);if(d)n.appendChild(d);else for(var p=void 0,u=0,f=(p=ze(e.content))(s,null,null,a);u<f.length;u++)r=f[u],n.appendChild(r)}return e.isTemplate?n:n.cloneNode(!0)}function hd(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):dd(e,t[i[n]])}function dd(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var r=i[n].split(":");2===r.length&&(e.style[r[0].trim()]=r[1].trim())}}function pd(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):dd(e,t[i[n]])}function ud(){if(window.measureElement)window.measureElement.usageCount+=1;else{var e=nd("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=nd("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t);var i;i=nd("img",{}),e.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(n);var r=document.createElementNS("http://www.w3.org/2000/svg","path");n.appendChild(r);document.createTextNode("");var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.appendChild(o),window.measureElement=e,window.measureElement.usageCount=1,document.body.appendChild(e);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}}function fd(e,t,i,n){return!(t.length>1&&0===e.x)||"Clip"!==n.textOverflow&&"Ellipsis"!==n.textOverflow||"Wrap"!==n.textWrapping&&"WrapWithOverflow"!==n.textWrapping||(e.x=t[i-1]?t[i-1].x:-e.width/2),e.x}function gd(e,t,i){return i&&!t.template?(e.isTemplate=!0,e.template=e.content=cd(e,!0,t)):e.content=t.template,e}function md(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("crypto"in window&&"getRandomValues"in crypto){var r=new Uint16Array(1);e=(window.msCrypto||window.crypto).getRandomValues(r)[0]%(t.length-1)}else e=Math.floor(Math.random()*t.length);0===n&&e<10?n--:i+=t.substring(e,e+1)}return i}function yd(e,t){if(e.nodes&&e.nodes.length>0)for(var i=0;i<e.nodes.length;i++)if(e.nodes[i].id===t)return i;if(e.connectors&&e.connectors.length>0)for(i=0;i<e.connectors.length;i++)if(e.connectors[i].id===t)return i;return null}function vd(e){if(e){try{if(document.querySelectorAll(e).length)return ze(document.querySelector(e).innerHTML.trim())}catch(t){return ze(e)}}}function bd(e){new hn;var t=e.offsetY-e.actualSize.height*e.pivot.y,i=e.offsetY+e.actualSize.height*(1-e.pivot.y),n=e.offsetX-e.actualSize.width*e.pivot.x,r=e.offsetX+e.actualSize.width*(1-e.pivot.x),o={x:n,y:t},a={x:r,y:t},s={x:n,y:i},l={x:r,y:i};return hn.toBounds([o,a,s,l])}function wd(e){var t,i=new hn,n=(t=bd(e)).middleLeft,r=t.topCenter,o=t.bottomCenter,a=t.middleRight,s=t.topLeft,l=t.topRight,c=t.bottomLeft,h=t.bottomRight;if(e.corners={topLeft:s,topCenter:r,topRight:l,middleLeft:n,middleRight:a,bottomLeft:c,bottomCenter:o,bottomRight:h},0!==e.rotateAngle||0!==e.parentTransform){var d=pn();fn(d,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=s=un(d,s),e.corners.topCenter=r=un(d,r),e.corners.topRight=l=un(d,l),e.corners.middleLeft=n=un(d,n),e.corners.middleRight=a=un(d,a),e.corners.bottomLeft=c=un(d,c),e.corners.bottomCenter=o=un(d,o),e.corners.bottomRight=h=un(d,h)}return i=hn.toBounds([s,l,c,h]),e.corners.left=i.left,e.corners.right=i.right,e.corners.top=i.top,e.corners.bottom=i.bottom,e.corners.center=i.center,e.corners.width=i.width,e.corners.height=i.height,i}function xd(e,t,i,n){var r={},o="properties";if(e){i=e.propName;var a=e[o]||e,s=[],l=[];if((s=s.concat(Object.keys(a))).push("version"),i){var c=Ld(t);l=c?c(i):[],s=s.concat(l)}var h=function(e){switch(e){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}(i);s=s.concat(h),n&&(s=function(e,t){var i=[];return t instanceof Lh?i=["width","height","offsetX","offsetY","container","visible","horizontalAlignment","verticalAlignment","backgroundColor","borderColor","borderWidth","rotateAngle","minHeight","minWidth","maxHeight","maxWidth","pivot","margin","flip","wrapper","constraints","style","annotations","ports","isExpanded","expandIcon"]:t instanceof $a?i=["constraints","sourcePadding","targetPadding","cornerRadius","flip","type","targetDecorator","sourceDecorator","sourceID","shape","bridgeSpace","annotations","segments","hitPadding","tooltip","previewSize","dragSize","style","sourcePortID","targetID","targetPortID","visible"]:t instanceof Da?i=["height","width","shape","style","pivot","pathData"]:t instanceof oh||t instanceof Gc?(i.push("shape"),t instanceof dh?i.push("cornerRadius"):t instanceof Text?i.push("margin"):t instanceof Image?(i.push("align"),i.push("scale")):t instanceof sh?i.push("scale"):t instanceof Sh?(i.push("activity"),i.push("annotations")):t instanceof Gc&&(i.push("borderColor"),i.push("borderWidth"),i.push("cornerRadius"),i.push("fill"))):t instanceof wh?i.push("subProcess"):t instanceof gh?(i.push("call"),i.push("compensation"),i.push("loop")):t instanceof bh?(i.push("adhoc"),i.push("boundary"),i.push("compensation"),i.push("loop"),i.push("processes")):t instanceof vr?(i.push("height"),i.push("width"),i.push("visibility"),i.push("horizontalAlignment"),i.push("verticalAlignment"),i.push("shape")):t instanceof Cr?(i.push("constraints"),i.push("height"),i.push("horizontalAlignment"),i.push("rotateAngle"),i.push("template"),i.push("verticalAlignment"),i.push("visibility"),i.push("width"),i.push("margin")):t instanceof Yn?(i.push("left"),i.push("right"),i.push("top"),i.push("bottom")):t instanceof er&&(i=["strokeWidth","strokeDashArray","opacity","gradient","fontSize","fontFamily","textOverflow","textDecoration","whiteSpace","textWrapping","textAlign","italic","bold"]),t instanceof Qn&&(i.push("strokeColor"),i.push("color")),e=e.concat(i)}(s,e));for(var d=0,p=s;d<p.length;d++){var u=p[d];if("historyManager"!==u)if("wrapper"!==u){!(!e[u]||!e.hasOwnProperty("observers"))||(e[u]instanceof Array?r[u]=Sd(-1===h.indexOf(u)&&e[o]?e[o][u]:e[u],t,u,n):e[u]instanceof Array===!1&&e[u]instanceof HTMLElement?r[u]=e[u].cloneNode(!0).innerHtml:e[u]instanceof Array===!1&&e[u]instanceof Object?r[u]=xd(-1===h.indexOf(u)&&e[o]?e[o][u]:e[u],void 0,void 0,n):r[u]=e[u])}else e[u]&&(r[u]={actualSize:{width:e[u].actualSize.width,height:e[u].actualSize.height},offsetX:e[u].offsetX,offsetY:e[u].offsetY})}}return r}function Sd(e,t,i,n){var r;if(e){r=[];for(var o=0;o<e.length;o++)e[o]instanceof Array?r.push(e[o]):e[o]instanceof Object?r.push(xd(e[o],t,i,n)):r.push(e[o])}return r}function Cd(e,t){if(e){t||(t={properties:{}});for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(e[r]instanceof Array){var o=Pd(e[r],t.properties[r]);t.properties[r]&&t.properties[r].length||(t[r]=o)}else if(e[r]instanceof Array===!1&&e[r]instanceof HTMLElement)t[r]=e[r].cloneNode(!0).innerHtml;else if(e[r]instanceof Array===!1&&e[r]instanceof Object){var a=Cd(e[r],t.properties[r]);a.properties&&!Object.keys(a.properties).length&&delete a.properties,t[r]=a}else t[r]=void 0!==t.properties[r]?t[r]:e[r]}}return t}function Pd(e,t){var i=[],n=!1;t||(t=[]),t.length||(n=!0);for(var r=0;r<e.length;r++)if(e[r]instanceof Array){Pd(e[r],t[r]);n&&i.push(Pd)}else if(e[r]instanceof Object){var o=Cd(e[r],t[r]);n&&i.push(o)}else i.push(e[r]);return i}function Od(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t}function Ed(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t}function Td(e,t){window.measureElement.style.visibility="visible";var i=_h(window.measureElement.children[2])[1];i.textContent=e,dd(i,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var n=i.getBBox().width;return window.measureElement.style.visibility="hidden",n}function Id(e,t){return(e+t)/2}function kd(e,t){var i,n=0,r=0,o=0,a="";i=e.length;var s=0;do{o>0&&(n=r),r=Math.floor(Id(n,i)),o=Td(a+=e.substr(n,r),t)}while(o<=t.width);for(a=a.substr(0,n),s=n;s<i;s++)if((o=Td(a+=e[s],t))>=t.width){e=e.substr(0,a.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e}function Ad(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function Md(e,t){var i=pn();fn(i,t,0,0);var n=un(i,{x:0,y:0}),r=un(i,{x:e.width,y:0}),o=un(i,{x:0,y:e.height}),a=un(i,{x:e.width,y:e.height}),s=Math.min(n.x,r.x,o.x,a.x),l=Math.min(n.y,r.y,o.y,a.y),c=Math.max(n.x,r.x,o.x,a.x),h=Math.max(n.y,r.y,o.y,a.y);return new Zi(c-s,h-l)}function Dd(e,t,i,n){if(0!==e){var r=pn();return fn(r,e,t,i),un(r,n)}return n}function Ld(e){return void 0!==e&&"string"===typeof e&&(e=c(e,window)),e}var Rd=function(){function e(){}return e.getContext=function(e){return e.getContext("2d")},e.setCanvasSize=function(e,t,i){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",i.toString()))},e.prototype.renderGradient=function(e,t,i,n){var r,o,a;if("None"!==e.gradient.type){for(var s=0;s<e.gradient.stops.length;s++)r=void 0!==r?e.gradient.stops[s].offset:Math.max(r,e.gradient.stops[s].offset),o=void 0!==o?e.gradient.stops[s].offset:Math.min(o,e.gradient.stops[s].offset);if("Linear"===e.gradient.type){var l=e.gradient;a=t.createLinearGradient(i+l.x1,n+l.y1,i+l.x2,n+l.y2)}else{var c=e.gradient;a=t.createRadialGradient(i+c.fx,n+c.fy,0,i+c.cx,n+c.cy,c.r)}for(s=0;s<e.gradient.stops.length;s++){var h=e.gradient.stops[s],d=o<0?(r+h.offset)/(2*r):h.offset/r;a.addColorStop(d,h.color)}t.fillStyle=a}return t},e.prototype.renderShadow=function(t,i,n){void 0===n&&(n=null);var r=e.getContext(i);r.save(),r.beginPath(),r.strokeStyle=r.fillStyle=t.shadow.color,r.globalAlpha=t.shadow.opacity;var o=Qi.transform({x:0,y:0},t.shadow.angle,t.shadow.distance),a=t.x+o.x,s=t.y+o.y,l=a+t.width*t.pivotX,c=s+t.height*t.pivotY;this.rotateContext(i,t.angle,l,c),n?(r.translate(a,s),this.renderPath(i,t,n),r.translate(-a,-s)):(r.rect(a,s,t.width,t.height),r.fillRect(a,s,t.width,t.height)),r.fill(),r.stroke(),r.closePath(),r.restore()},e.createCanvas=function(e,t,i){var n=nd("canvas",{id:e});return this.setCanvasSize(n,t,i),n},e.prototype.setStyle=function(t,i){var n=e.getContext(t);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var r=[];i.dashArray&&(r=this.parseDashArray(i.dashArray)),n.setLineDash(r),i.gradient&&"None"!==i.gradient.type?this.renderGradient(i,n,0,0):n.fillStyle=i.fill},e.prototype.rotateContext=function(t,i,n,r){var o=e.getContext(t);o.translate(n,r),o.rotate(i*Math.PI/180),o.translate(-n,-r)},e.prototype.setFontStyle=function(t,i){var n=e.getContext(t),r="";i.italic&&(r+="italic "),i.bold&&(r+="bold "),r+=i.fontSize+"px ",r+=i.fontFamily,n.font=r},e.prototype.parseDashArray=function(e){for(var t=[],i=-1!==e.indexOf(" ")?" ":",",n=0,r=e.split(i);n<r.length;n++){var o=r[n];t.push(Number(o))}return t},e.prototype.drawRectangle=function(t,i){if(!0===i.visible)if(i.cornerRadius)i.data=function(e,t,i){var n,r,o,a="",s=[{x:0+e,y:0},{x:0+i-e,y:0},{x:0+i,y:0+e},{x:0+i,y:0+t-e},{x:0+i-e,y:0+t},{x:0+e,y:0+t},{x:0,y:0+t-e},{x:0,y:0+e}],l=[{x:0+i,y:0},{x:0+i,y:0+t},{x:0,y:0+t},{x:0,y:0}],c=0;for(a="M"+s[0].x+" "+s[0].y,o=0;o<s.length;o+=2)a+="L"+(n=s[o+1]).x+" "+n.y,r=s[o+2]||s[0],a+="Q"+l[c].x+" "+l[c].y+" "+r.x+" "+r.y,c++;return a}(i.cornerRadius,i.height,i.width),this.drawPath(t,i);else{var n=e.getContext(t);i.shadow&&this.renderShadow(i,t),n.save(),n.beginPath();i.cornerRadius;var r=i.x+i.width*i.pivotX,o=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,r,o),this.setStyle(t,i),n.rect(i.x,i.y,i.width,i.height),n.fillRect(i.x,i.y,i.width,i.height),n.fill(),n.stroke(),n.closePath(),n.restore()}},e.prototype.drawPath=function(t,i){var n=[];n=tn(n=Ji(i.data)),i.shadow&&this.renderShadow(i,t,n);var r=e.getContext(t);r.save(),r.beginPath();var o=i.y+i.height*i.pivotY,a=i.x+i.width*i.pivotX;"Horizontal"===i.flip||"Vertical"===i.flip?(r.translate(i.x+i.width/2,i.y+i.height/2),r.rotate(-i.angle*Math.PI/180),r.translate(-i.x-i.width/2,-i.y-i.height/2)):this.rotateContext(t,i.angle,a,o),this.setStyle(t,i),r.translate(i.x,i.y),"Horizontal"===i.flip?(r.scale(-1,1),r.translate(-1*i.width,0)):"Vertical"===i.flip?(r.scale(1,-1),r.translate(0,-1*i.height)):"Both"===i.flip&&(r.scale(-1,-1),r.translate(-1*i.width,-1*i.height)),this.renderPath(t,i,n),r.fill(),r.translate(-i.x,-i.y),r.stroke(),r.restore()},e.prototype.renderPath=function(t,i,n){if(!0===i.visible){var r,o=e.getContext(t),a=void 0,s=void 0,l=void 0,c=void 0,h=void 0,d=void 0,p=void 0,u=void 0,f=void 0,g=n;for(p=0,u=0,f=0,r=g.length;f<r;++f){var m=g[f],y=m.command;switch("x1"in m&&(l=m.x1),"x2"in m&&(h=m.x2),"y1"in m&&(c=m.y1),"y2"in m&&(d=m.y2),"x"in m&&(p=m.x),"y"in m&&(u=m.y),y){case"M":o.moveTo(p,u),m.x=p,m.y=u;break;case"L":o.lineTo(p,u),m.x=p,m.y=u;break;case"C":o.bezierCurveTo(l,c,h,d,p,u),m.x=p,m.y=u,m.x1=l,m.y1=c,m.x2=h,m.y2=d;break;case"Q":o.quadraticCurveTo(l,c,p,u),m.x=p,m.y=u,m.x1=l,m.y1=c;break;case"A":var v={x:a,y:s},b=m.r1,w=m.r2,x=m.angle*(Math.PI/180),S=m.largeArc,C=m.sweep,P={x:p,y:u},O={x:Math.cos(x)*(v.x-P.x)/2+Math.sin(x)*(v.y-P.y)/2,y:-Math.sin(x)*(v.x-P.x)/2+Math.cos(x)*(v.y-P.y)/2},E=Math.pow(O.x,2)/Math.pow(b,2)+Math.pow(O.y,2)/Math.pow(w,2);E>1&&(b*=Math.sqrt(E),w*=Math.sqrt(E));var T=Math.pow(w,2)*Math.pow(O.x,2),I=(S===C?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(w,2)-Math.pow(b,2)*Math.pow(O.y,2)-T)/(Math.pow(b,2)*Math.pow(O.y,2)+Math.pow(w,2)*Math.pow(O.x,2)));isNaN(I)&&(I=0);var k={x:I*b*O.y/w,y:I*-w*O.x/b},A={x:(v.x+P.x)/2+Math.cos(x)*k.x-Math.sin(x)*k.y,y:(v.y+P.y)/2+Math.sin(x)*k.x+Math.cos(x)*k.y},M=this.a([1,0],[(O.x-k.x)/b,(O.y-k.y)/w]),D=[(O.x-k.x)/b,(O.y-k.y)/w],L=[(-O.x-k.x)/b,(-O.y-k.y)/w],R=this.a(D,L);this.r(D,L)<=-1&&(R=Math.PI),this.r(D,L)>=1&&(R=0);var j=M+(C?1:-1)*(R/2);Math.cos(j),Math.sin(j);if(m.centp=A,m.xAxisRotation=x,m.rx=b,m.ry=w,m.a1=M,m.ad=R,m.sweep=C,null!=o){var N=b>w?b:w,z=b>w?1:b/w,B=b>w?w/b:1;o.save(),o.translate(A.x,A.y),o.rotate(x),o.scale(z,B),o.arc(0,0,N,M,M+R,!C),o.scale(1/z,1/B),o.rotate(-x),o.translate(-A.x,-A.y),o.restore()}break;case"Z":case"z":o.closePath(),p=a,u=s}a=p,s=u}}},e.prototype.drawText=function(t,i,n,r,o,a,s){if(i.content&&!0===i.visible){var l=e.getContext(t);l.save(),this.setStyle(t,i),a&&(i.fontSize*=a);var c=i.x+i.width*i.pivotX,h=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,c,h),this.setFontStyle(t,i);var d,p=0;d=i.childNodes;var u=i.wrapBounds;if(l.fillStyle=i.color,u){var f=this.labelAlign(i,u,d);for(p=0;p<d.length;p++){var g=d[p];g.x=fd(g,d,p,i);var m=f.x+(a?g.x*a:g.x)-u.x,y=f.y+(a?g.dy*a:g.dy)*p+.8*i.fontSize;if(u.width>i.width&&"Wrap"!==i.textOverflow&&"NoWrap"===i.textWrapping&&(g.text=kd(g.text,i)),"Clip"!==i.textOverflow&&"Ellipsis"!==i.textOverflow||"Wrap"!==i.textWrapping)l.fillText(g.text,m,y);else if(y<s.actualSize.height+s.bounds.y){if("Ellipsis"===i.textOverflow&&d[p+1]){var v=d[p+1];f.y+v.dy*(p+1)+.8*i.fontSize>s.actualSize.height+s.bounds.y&&(g.text=g.text.slice(0,g.text.length-3),g.text=g.text.concat("..."))}l.fillText(g.text,m,y)}if("Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var b=m,w=void 0,x=m+l.measureText(g.text).width,S=void 0;switch(i.textDecoration){case"Underline":w=y+2,S=y+2;break;case"Overline":w=f.y+g.dy*p,S=f.y+g.dy*p;break;case"LineThrough":w=(y+f.y+g.dy*p)/2+2,S=(y+f.y+g.dy*p)/2+2}l.beginPath(),l.moveTo(b,w),l.lineTo(x,S),l.strokeStyle=i.color,l.lineWidth=.08*i.fontSize,l.globalAlpha=i.opacity,l.stroke()}}}l.restore()}},e.prototype.loadImage=function(e,t,i,n,r){this.rotateContext(i,t.angle,n,r);var o=new Image;o.src=t.source,this.image(e,o,t.x,t.y,t.width,t.height,t)},e.prototype.drawImage=function(t,i,n,r){var o=this;if(i.visible){var a=e.getContext(t);a.save();var s=i.x+i.width*i.pivotX,l=i.y+i.height*i.pivotY,c=new Image;c.src=i.source;var h=a.canvas.id.split("_");h[h.length-1];r?c.onload=function(){o.loadImage(a,i,t,s,l)}:this.loadImage(a,i,t,s,l),a.restore()}},e.prototype.image=function(e,t,i,n,r,o,a){e.beginPath();var s=t.width,l=t.height,c=r,h=o,d=0,p=0;if(a&&"None"!==a.alignment){var u=a.alignment.toLowerCase().substr(1,3),f=a.alignment.toLowerCase().substr(5,3);if("Slice"===a.scale){var g=function(){d=c,p=l*c/s},m=function(){d=s*h/l,p=h};c>h?(g(),h>p&&m()):c===h?s>l?m():g():(m(),c>d&&g());var y=this.getSliceOffset(u,d,c,s),v=this.getSliceOffset(f,p,h,l),b=s-y,w=l-v,x=d-y*(d/s),S=p-v*(p/l),C=nd("canvas",{width:r.toString(),height:o.toString()});C.getContext("2d").drawImage(t,y,v,b,w,0,0,x,S),e.drawImage(C,i,n,r,o)}else if("Meet"===a.scale){var P=l/s,O=h/c;d=O>P?c:h/P,p=O>P?c*P:h,i+=this.getMeetOffset(u,d,c),n+=this.getMeetOffset(f,p,h),e.drawImage(t,0,0,s,l,i,n,d,p)}else e.drawImage(t,i,n,r,o)}else if("None"!==a.flip){var E=1,T=1;"Horizontal"!==a.flip&&"Both"!==a.flip||(i=-i,r=-r,E=-1),"Vertical"!==a.flip&&"Both"!==a.flip||(n=-n,o=-o,T=-1),e.scale(E,T),e.drawImage(t,i,n,r,o)}else e.drawImage(t,i,n,r,o);e.closePath()},e.prototype.getSliceOffset=function(e,t,i,n){switch(e){case"min":return 0;case"mid":return(t-i)/2*n/t;case"max":return(t-i)*n/t;default:return 0}},e.prototype.getMeetOffset=function(e,t,i){var n=Math.max(t,i),r=Math.min(t,i);switch(e){case"min":return 0;case"mid":return(n-r)/2;case"max":return n-r;default:return 0}},e.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},e.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},e.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},e.prototype.labelAlign=function(e,t,i){var n=new Zi(t.width,i.length*(1.2*e.fontSize)),r={x:0,y:0},o=e.x,a=e.y,s=.5*e.width,l=.5*e.height;return"left"===e.textAlign?s=0:"center"===e.textAlign?s=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)&&"NoWrap"===e.textWrapping?0:.5*e.width:"right"===e.textAlign&&(s=1*e.width),r.x=o+s+(t?t.x:0),r.y=a+l-n.height/2,r},e}(),jd=function(){function e(){}return e.prototype.renderShadow=function(e,t,i,n){void 0===i&&(i=null);var r,o,a=Qi.transform({x:0,y:0},e.shadow.angle,e.shadow.distance),s=e.x+a.x,l=e.y+a.y;e.width,e.pivotX,e.height,e.pivotY;n&&(o=n.getElementById(t.id+"_shadow")),o||(r=i?"path":"rect",o=document.createElementNS("http://www.w3.org/2000/svg",r),t.appendChild(o));var c={id:t.id+"_shadow",fill:e.shadow.color,stroke:e.shadow.color,opacity:e.shadow.opacity.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+(e.x+a.x)+","+(e.y+a.y)+")"};if(n){var h=n.getElementById(t.id);h&&h.insertBefore(o,h.firstChild)}hd(o,c),i?i&&this.renderPath(o,e,i):hd(o,{width:e.width,height:e.height})},e.prototype.parseDashArray=function(e){return[]},e.prototype.drawRectangle=function(e,t,i,n,r,o,a){var s,l,c;t.shadow&&!n&&this.renderShadow(t,e,void 0,o),s=t.id===e.id?t.id+"_container":t.id,o&&(l=o.getElementById(s)),l&&!r||(l=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(l)),o&&!t.shadow&&(c=o.getElementById(t.id+"_groupElement_shadow"))&&c.parentNode.removeChild(c);var h={id:s,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":a||""};t.class&&(h.class=t.class);a||(h["pointer-events"]="none"),hd(l,h),this.setSvgStyle(l,t,i)},e.prototype.updateSelectionRegion=function(e,t){var i,n;i=e.parentNode.getElementById(t.id),n={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(i)),this.setSvgStyle(i,t),hd(i,n)},e.prototype.createGElement=function(e,t){return rd(e,t)},e.prototype.drawLine=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,t);var n=t.x+t.width*t.pivotX,r=t.y+t.height*t.pivotY,o={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+n+" "+r+")",visibility:t.visible?"visible":"hidden"};t.class&&(o.class=t.class),hd(i,o),e.appendChild(i)},e.prototype.drawCircle=function(e,t,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(r,t);var o=t.class||"";i||(o+=" e-disabled");var a={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:o,"aria-label":n?n["aria-label"]:""};r.style.display=t.visible?"block":"none",hd(r,a),e.appendChild(r)},e.prototype.drawPath=function(e,t,i,n,r,o){var a=Math.floor(10*Math.random()+1);e.id,a.toString();var s,l,c=[];c=tn(c=Ji(t.data)),t.shadow&&this.renderShadow(t,e,c,r),r&&!t.shadow&&(s=r.getElementById(t.id+"_groupElement_shadow"))&&s.parentNode.removeChild(s),r&&(l=r.getElementById(t.id)),l&&!n||(l=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(l)),this.renderPath(l,t,c);var h={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":o||""};t.class&&(h.class=t.class),hd(l,h),this.setSvgStyle(l,t,i)},e.prototype.renderPath=function(e,t,i){var n,r,o,a,s,l,c,h,d=i,p="";for(s=0,l=0,h=0,c=d.length;h<c;++h){var u=d[h],f=u.command;switch("x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"y1"in u&&(r=u.y1),"y2"in u&&(a=u.y2),"x"in u&&(s=u.x),"y"in u&&(l=u.y),f){case"M":p=p+"M"+s.toString()+","+l.toString()+" ";break;case"L":p=p+"L"+s.toString()+","+l.toString()+" ";break;case"C":p=p+"C"+n.toString()+","+r.toString()+","+o.toString()+","+a.toString()+",",p+=s.toString()+","+l.toString()+" ";break;case"Q":p=p+"Q"+n.toString()+","+r.toString()+","+s.toString()+","+l.toString()+" ";break;case"A":p=p+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",p+=u.largeArc.toString()+","+u.sweep+","+s.toString()+","+l.toString()+" ";break;case"Z":case"z":p+="Z "}}e.setAttribute("d",p)},e.prototype.setSvgFontStyle=function(e,t){e.style.fontStyle=t.italic?"italic":"normal",e.style.fontWeight=t.bold?"bold":"normal",e.style.fontSize=t.fontSize.toString()+"px",e.style.fontFamily=t.fontFamily},e.prototype.drawText=function(e,t,i,n,r,o,a){if(void 0!==t.content){var s=void 0,l=void 0,c=void 0,h=void 0,d=void 0,p=void 0,u=0,f=0,g=0,m=void 0;if(i&&(m=i.getElementById(t.id+"_text")),m){if(t.doWrap)for(;m.firstChild;)m.removeChild(m.firstChild)}else t.doWrap=!0,m=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===t.whiteSpace&&m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.appendChild(m);var y=t.x+t.width*t.pivotX,v=t.y+t.height*t.pivotY,b=0;if(t.doWrap||"Wrap"!==t.textOverflow){var w=document.getElementById(t.id+"_text");for(w&&(w.innerHTML=""),this.setSvgStyle(m,t,r),this.setSvgFontStyle(m,t),s=document.createTextNode(t.content),l=t.childNodes,c=t.wrapBounds,h=this.svgLabelAlign(t,c,l),c.width>t.width&&"Wrap"!==t.textOverflow&&"NoWrap"===t.textWrapping&&(l[0].text=kd(t.content,t)),g=0;g<l.length;g++)if(p=document.createElementNS("http://www.w3.org/2000/svg","tspan"),s=document.createTextNode(l[g].text),(d=l[g]).x=fd(d,l,g,t),u=h.x+d.x-c.x,f=h.y+d.dy*g+.8*t.fontSize,"Clip"!==t.textOverflow&&"Ellipsis"!==t.textOverflow||"WrapWithOverflow"!==t.textWrapping&&"Wrap"!==t.textWrapping||!a)this.setText(m,p,d,s,u,f);else{var x=t.isHorizontalLane?a.actualSize.width:a.actualSize.height;if(!(f<x))break;if("Ellipsis"===t.textOverflow&&l[g+1]){var S=l[g+1];h.y+S.dy*(g+1)+.8*t.fontSize>x&&(d.text=d.text.slice(0,d.text.length-3),d.text=d.text.concat("..."),s.data=d.text)}this.setText(m,p,d,s,u,f),b+=d.dy}}b&&t.isHorizontalLane&&(y=t.parentOffsetX+t.pivotX,v=t.parentOffsetY+t.pivotY,t.y=t.parentOffsetY-b*t.pivotY+.5),t.textDecoration&&"LineThrough"===t.textDecoration&&(t.textDecoration=Ed(t.textDecoration)),hd(m,{id:t.id+"_text",fill:t.color,visibility:t.visible?"visible":"hidden","text-decoration":t.textDecoration,transform:"rotate("+t.angle+","+y+","+v+")translate("+t.x+","+t.y+")",opacity:t.opacity,"aria-label":n||""})}},e.prototype.setText=function(e,t,i,n,r,o){hd(t,{x:r.toString(),y:o.toString()}),e.setAttribute("fill",i.text),t.appendChild(n),e.appendChild(t)},e.prototype.drawImage=function(e,t,i,n){var r;t.id;i&&(r=i.getElementById(t.id+"image")),r||(r=document.createElementNS("http://www.w3.org/2000/svg","image"),e.appendChild(r));var o=new Image;o.src=t.source;var a="None"!==t.scale?t.scale:"";w()&&"None"===t.alignment&&"Stretch"===a&&(a="");var s=t.alignment,l=s.charAt(0).toLowerCase()+s.slice(1);a&&(l+=" "+a.charAt(0).toLowerCase()+a.slice(1)),hd(r,{id:t.id+"image",x:t.x.toString(),y:t.y.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",width:t.width.toString(),visibility:t.visible?"visible":"hidden",height:t.height.toString(),preserveAspectRatio:l,opacity:(t.opacity||1).toString()}),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o.src.toString())},e.prototype.drawHTMLContent=function(e,t,i,n,r){var o,a;if(t){var s=void 0,l=void 0,c=void 0;for(s=0;s<t.childNodes.length;s++)for(c=t.childNodes[s],l=0;l<c.childNodes.length;l++)if(c.childNodes[l].id===e.id+"_html_element"){o=c.childNodes[l];break}}if(!o){if(!(a=t.querySelector("#"+e.id+"_html_element")||t.querySelector("#"+e.nodeId+"_html_element")))a=nd("div",{id:e.nodeId+"_html_element",class:"foreign-object"});o=nd("div",{id:e.id+"_html_element",class:"foreign-object"}),e.isTemplate?o.appendChild(e.template):o.appendChild(e.template.cloneNode(!0)),void 0!==r&&t.childNodes.length>r&&t.insertBefore(o,t.childNodes[r]),a.appendChild(o),t.appendChild(a)}var h=bd(e).topLeft;o.setAttribute("style","height:"+e.actualSize.height+"px; width:"+e.actualSize.width+"px;left:"+h.x+"px; top:"+h.y+"px;position:absolute;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(n?"all":"none")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";")},e.prototype.drawNativeContent=function(e,t,i,n,r){var o,a;r&&(o=r.getElementById(e.id+"_native_element"),a=r.getElementById(e.id+"_clip")),o||((o=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id",e.id+"_native_element"),o.appendChild(e.template.cloneNode(!0)),t.appendChild(o)),a&&o.removeChild(a),o.setAttribute("style","visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";"),this.setNativTransform(e,o,i,n),"Slice"===e.scale&&this.drawClipPath(e,o,i,n,r),hd(o,e.description?{"aria-label":e.description}:{})},e.prototype.setNativTransform=function(e,t,i,n){var r=0!==e.contentSize.width?e.contentSize.width:1,o=0!==e.contentSize.height?e.contentSize.height:1,a=e.templatePosition.x*n/r,s=e.templatePosition.y*i/o;t.setAttribute("transform","rotate("+e.parentTransform+","+e.offsetX+","+e.offsetY+") translate("+(e.offsetX-a-n*e.pivot.x)+","+(e.offsetY-s-i*e.pivot.y)+") scale("+n/r+","+i/o+")")},e.prototype.drawClipPath=function(e,t,i,n,r){var o=e.contentSize.width,a=e.contentSize.height,s=(e.actualSize.width,e.actualSize.height,e.width/(n/o)),l=e.height/(i/a),c=e.templatePosition.x+(e.width>=e.height?0:(o-s)/2),h=e.templatePosition.y+(e.height>=e.width?0:(a-l)/2),d=r.getElementById(e.id+"_clip");(d=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",e.id+"_clip"),t.appendChild(d);var p=r.getElementById(e.id+"_clip_rect");return p=document.createElementNS("http://www.w3.org/2000/svg","rect"),d.appendChild(p),hd(p,{id:e.id+"_clip_rect",width:s.toString(),height:l.toString(),x:c.toString(),y:h.toString()}),Uc()?t.setAttribute("clip-path","url("+location.protocol+"//"+location.host+location.pathname+"#"+e.id+"_clip)"):t.setAttribute("clip-path","url(#"+e.id+"_clip)"),t},e.prototype.renderGradient=function(e,t,i){var n,r,o,a,s,l=Jh(i),c=l.getElementById(i+"gradient_pattern");if(c||(c=rd("defs",{id:i+"gradient_pattern"}),l.insertBefore(c,l.firstChild)),yc(t.id),"None"!==e.gradient.type){for(var h=0;h<e.gradient.stops.length;h++)n=n?Math.max(n,e.gradient.stops[h].offset):e.gradient.stops[h].offset,r=r?Math.min(r,e.gradient.stops[h].offset):e.gradient.stops[h].offset;"Linear"===e.gradient.type?((s=e.gradient).id=t.id+"_linear",o=this.createLinearGradient(s),c.appendChild(o)):((a=e.gradient).id=t.id+"_radial",o=this.createRadialGradient(a),c.appendChild(o));for(h=0;h<e.gradient.stops.length;h++){var d=e.gradient.stops[h],p=r<0?(n+d.offset)/(2*n):d.offset/n,u=document.createElementNS("http://www.w3.org/2000/svg","stop");hd(u,{offset:p.toString(),style:"stop-color:"+d.color}),o.appendChild(u)}}return o},e.prototype.createLinearGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return hd(t,{id:e.id,x1:e.x1+"%",y1:e.y1+"%",x2:e.x2+"%",y2:e.y2+"%"}),t},e.prototype.createRadialGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return hd(t,{id:e.id,cx:e.cx+"%",cy:e.cy+"%",r:e.r+"%",fx:e.fx+"%",fy:e.fy+"%"}),t},e.prototype.setSvgStyle=function(e,t,i){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var n=[],r=void 0;if(t.dashArray)n=(new Rd).parseDashArray(t.dashArray);if(t.gradient&&"None"!==t.gradient.type){var o=this.renderGradient(t,e,i);r=Uc()?"url("+location.protocol+"//"+location.host+location.pathname+"#"+o.id+")":"url(#"+o.id+")"}else r=t.fill;t.stroke&&e.setAttribute("stroke",t.stroke),void 0!==t.strokeWidth&&null!==t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),n&&e.setAttribute("stroke-dasharray",n.toString()||"none"),r&&e.setAttribute("fill",r)}},e.prototype.svgLabelAlign=function(e,t,i){var n=new Zi(t.width,i.length*(1.2*e.fontSize)),r={x:0,y:0},o=.5*e.width,a=.5*e.height;return"left"===e.textAlign?o=0:"center"===e.textAlign?o=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)&&"NoWrap"===e.textWrapping?0:.5*e.width:"right"===e.textAlign&&(o=1*e.width),r.x=0+o+(t?t.x:0),r.y=1.2+a-n.height/2,r},e}(),Nd=function(){function e(e,t,i){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=e,this.element=Yh(this.diagramId),this.svgRenderer=t,this.isSvgMode=i,this.renderer=i?new jd:new Rd}return e.prototype.setCursor=function(e,t){e.style.cursor=t},e.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},e.prototype.getAdornerLayer=function(){return Zh(this.diagramId)},e.prototype.getParentSvg=function(e,t,i){return this.diagramId&&e&&e.id?e.id.split("_icon_content").length>1||e.id.split("_nodeport").length>1||e.elementActions&Tn.ElementIsPort?this.iconSvgLayer:t&&"selector"===t?this.adornerSvgLayer:e instanceof gr?this.nativeSvgLayer:this.diagramSvgLayer:i},e.prototype.getParentElement=function(e,t,i,n){var r=t;if(i&&this.diagramId&&e&&e.id){e.id.split("_icon_content").length>1?(r=i.getElementById(this.diagramId+"_diagramExpander"),t=null):e.id.split("_nodeport").length>1?r=i.getElementById(this.diagramId+"_diagramPorts"):e instanceof gr?(r=i.getElementById(this.diagramId+"_nativeLayer"),t=null):e.elementActions&Tn.ElementIsPort?(r=i.getElementById(this.diagramId+"_diagramPorts"),t=null):r=i.getElementById(this.diagramId+"_diagramLayer");var o=this.getGroupElement(e,t||r,n);r=o.g,o.svg&&(i=o.svg)}return{g:r,svg:i}},e.prototype.getGroupElement=function(e,t,i){var n,r,o=this.getParentSvg(e);if(t&&o){if(o&&!(n=o.getElementById(e.id+"_groupElement"))&&o!==this.nativeSvgLayer){var a=this.nativeSvgLayer;n=a.getElementById(e.id+"_groupElement"),r=a}n||(n=this.svgRenderer.createGElement("g",{id:e.id+"_groupElement"}),void 0!==i&&t.childNodes.length>i?t.insertBefore(n,t.childNodes[i]):t.appendChild(n))}return{g:n,svg:r}},e.prototype.renderElement=function(e,t,i,n,r,o,a,s,l){e instanceof nr?(!1,this.renderContainer(e,t,i,n,r,o,a,s,l)):e instanceof ur?this.renderImageElement(e,t,n,r,a):e instanceof dr?this.renderPathElement(e,t,n,r,a,l):e instanceof or?this.renderTextElement(e,t,n,r,a):e instanceof gr?this.renderNativeElement(e,t,n,r,a):e instanceof Ta?this.renderHTMLElement(e,t,i,n,r,a,s):this.renderRect(e,t,n,r,l)},e.prototype.drawSelectionRectangle=function(e,t,i,n,r,o){e=(e+o.tx)*o.scale,t=(t+o.ty)*o.scale;var a={width:i*o.scale,height:n*o.scale,x:e+.5,y:t+.5,fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:r.id+"_selected_region"},s=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(s,a)},e.prototype.renderHighlighter=function(e,t,i){var n=e.actualSize.width||2,r=e.actualSize.height||2,o=e.offsetX-n*e.pivot.x,a=e.offsetY-r*e.pivot.y;o=(o+i.tx)*i.scale,a=(a+i.ty)*i.scale;var s={width:n*i.scale,height:r*i.scale,x:o,y:a,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:t.id+"_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawRectangle(t,s,this.diagramId,void 0,void 0,t)},e.prototype.renderStackHighlighter=function(e,t,i,n,r,o,a){var s,l=e.actualSize.width||2,c=e.offsetX-l*e.pivot.x,h=e.actualSize.height||2,d=e.offsetY-h*e.pivot.y;c=(c+i.tx)*i.scale;var p=e.bounds,u="";if(d=(d+i.ty)*i.scale,n)if(o){s="M 0 0 L "+((m=l*i.scale)+2)+" 0 Z";var f=p.x,g=p.y;f=e.actualSize.width/Number(p.width?p.width:1)*i.scale,g=e.actualSize.height/Number(p.height?p.height:1)*i.scale;u=nn(an(Ji("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z")),f+m+2,g-8,!1,p.x,p.y,0,0),r.y>=e.offsetY&&(d+=h)}else{var m;a&&r.y>=e.offsetY&&(d+=h),s="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+(m=l*i.scale)+" 0 Z M "+m+" 0 L "+(m+10)+" 10 Z L "+(m+10)+" -10 Z"}else s="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+(m=h*i.scale)+" Z M 0  "+m+" L -10  "+(m+10)+" Z L 10  "+(m+10)+" Z",r.x>=e.offsetX&&(c+=l);var y={data:s+u,width:l*i.scale,height:h*i.scale,x:c,y:d,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:t.id+"_stack_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawPath(t,y,this.diagramId)},e.prototype.drawLine=function(e,t){this.svgRenderer.drawLine(e,t)},e.prototype.drawPath=function(e,t){this.svgRenderer.drawPath(e,t,this.diagramId)},e.prototype.renderResizeHandle=function(e,t,i,n,r,o,a,s,l,c){var h=e.offsetX-e.actualSize.width*e.pivot.x,d=e.offsetY-e.actualSize.height*e.pivot.y,p=e.actualSize.height,u=e.actualSize.width;!c&&i&In.Rotate&&Ds(this.rendererActions)&&!Ls(this.rendererActions)&&(this.renderPivotLine(e,t,o,r,a),this.renderRotateThumb(e,t,o,r,a)),this.renderBorder(e,t,o,s,l,c);var f=e.actualSize.width*n,g=e.actualSize.height*n;l||!Ds(this.rendererActions)||Ls(this.rendererActions)||(f>=40&&g>=40&&(r&Cn.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",e,h,d,t,Sc(r,"ResizeNorthWest"),i&In.ResizeNorthWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest"),r&Cn.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",e,h+u,d,t,Sc(r,"ResizeNorthEast"),i&In.ResizeNorthEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast"),r&Cn.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",e,h,d+p,t,Sc(r,"ResizeSouthWest"),i&In.ResizeSouthWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest"),r&Cn.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",e,h+u,d+p,t,Sc(r,"ResizeSouthEast"),i&In.ResizeSouthEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast")),r&Cn.ResizeNorth&&this.renderCircularHandle("resizeNorth",e,h+u/2,d,t,Sc(r,"ResizeNorth"),i&In.ResizeNorth,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north"),r&Cn.ResizeSouth&&this.renderCircularHandle("resizeSouth",e,h+u/2,d+p,t,Sc(r,"ResizeSouth"),i&In.ResizeSouth,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south"),r&Cn.ResizeWest&&this.renderCircularHandle("resizeWest",e,h,d+p/2,t,Sc(r,"ResizeWest"),i&In.ResizeWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west"),r&Cn.ResizeEast&&this.renderCircularHandle("resizeEast",e,h+u,d+p/2,t,Sc(r,"ResizeEast"),i&In.ResizeEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east"))},e.prototype.renderEndPointHandle=function(e,t,i,n,r,o,a,s){var l,c,h=e.sourcePoint,d=e.targetPoint,p=e.wrapper;if(this.renderCircularHandle("connectorSourceThumb",p,h.x,h.y,t,Sc(n,"ConnectorSourceThumb"),i&In.ConnectorSource,r,o,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),this.renderCircularHandle("connectorTargetThumb",p,d.x,d.y,t,Sc(n,"ConnectorTargetThumb"),i&In.ConnectorTarget,r,a,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),s)if(("Straight"===e.type||"Bezier"===e.type)&&e.segments.length>0)for(l=0;l<e.segments.length-1;l++)c=e.segments[l],this.renderCircularHandle("segementThumb_"+(l+1),p,c.point.x,c.point.y,t,!0,i&In.ConnectorSource,r,o,null,null,l);else for(l=0;l<e.segments.length;l++){var u=e.segments[l];this.renderOrthogonalThumbs("orthoThumb_"+(l+1),p,u,t,Sc(n,"ConnectorSourceThumb"),r)}if("Bezier"===e.type)for(l=0;l<e.segments.length;l++){var f=e.segments[l],g=Qi.isEmptyPoint(f.point1)?f.bezierPoint1:f.point1;this.renderCircularHandle("bezierPoint_"+(l+1)+"_1",p,g.x,g.y,t,Sc(n,"ConnectorSourceThumb"),i&In.ConnectorSource,r,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-handle e-source"),Sc(n,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_1",p,t,f.points[0],Qi.isEmptyPoint(f.point1)?f.bezierPoint1:f.point1,r),g=Qi.isEmptyPoint(f.point2)?f.bezierPoint2:f.point2,this.renderCircularHandle("bezierPoint_"+(l+1)+"_2",p,g.x,g.y,t,Sc(n,"ConnectorTargetThumb"),i&In.ConnectorTarget,r,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-handle e-target"),Sc(n,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_2",p,t,f.points[1],Qi.isEmptyPoint(f.point2)?f.bezierPoint2:f.point2,r)}},e.prototype.renderOrthogonalThumbs=function(e,t,i,n,r,o){var a,s,l,c=0;for(c=0;c<i.points.length-1;c++)l=Qi.distancePoints(i.points[c],i.points[c+1]),a=i.points[c].y.toFixed(2)===i.points[c+1].y.toFixed(2)?"horizontal":"vertical",s=!!(l>=50&&i.allowDrag),this.renderOrthogonalThumb(e+"_"+(c+1),t,(i.points[c].x+i.points[c+1].x)/2,(i.points[c].y+i.points[c+1].y)/2,n,s,a,o)},e.prototype.renderOrthogonalThumb=function(e,t,i,n,r,o,a,s){var l,c,h;"horizontal"===a?(l="M0,7 L15,0 L30,7 L15,14 z",c=-15,h=-7):(l="M7,0 L0,15 L7,30 L14,15 z",c=-7,h=-15);var d={x:(i+s.tx)*s.scale+c,y:(n+s.ty)*s.scale+h,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:l,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:o,id:e};this.svgRenderer.drawPath(r,d,this.diagramId)},e.prototype.renderPivotLine=function(e,t,i,n,r){var o=e,a=!!(n&Cn.Rotate);r&&(a=!1);var s=this.getBaseAttributes(o,i);s.fill="None",s.stroke="black",s.strokeWidth=1,s.dashArray="2,3",s.visible=a;var l=i.scale;s.x*=l,s.y*=l,s.width*=l,s.height*=l,s.id="pivotLine",s.class="e-diagram-pivot-line";var c={x:o.actualSize.width*o.pivot.x*l,y:-20},h={x:o.actualSize.width*o.pivot.x*l,y:0};s.startPoint=c,s.endPoint=h,this.svgRenderer.drawLine(t,s)},e.prototype.renderBezierLine=function(e,t,i,n,r,o){var a=this.getBaseAttributes(t,o);a.id=e,a.stroke="black",a.strokeWidth=1,a.dashArray="3,3",a.fill="None",a.class="e-diagram-bezier-line",a.x=0,a.y=0;var s=o.scale,l={x:(n.x+o.tx)*s,y:(n.y+o.ty)*s},c={x:(r.x+o.tx)*s,y:(r.y+o.ty)*s};a.startPoint=l,a.endPoint=c,this.svgRenderer.drawLine(i,a)},e.prototype.renderCircularHandle=function(e,t,i,n,r,o,a,s,l,c,h,d,p){var u=t,f=7,g={x:i,y:n};if(0!==u.rotateAngle||0!==u.parentTransform){var m=pn();fn(m,u.rotateAngle+u.parentTransform,u.offsetX,u.offsetY),g=un(m,g)}var y=this.getBaseAttributes(u);y.stroke="black",y.strokeWidth=1,void 0!==d?(f=5,y.id="segmentEnd_"+d,y.fill="#e2e2e2"):(f=7,y.fill=l?"#8CC63F":"white"),y.centerX=(g.x+s.tx)*s.scale,y.centerY=(g.y+s.ty)*s.scale,y.radius=f,y.angle=0,y.id=e,y.visible=o,y.class=p,l&&(y.class+=" e-connected"),c&&(y.visible=!1),this.svgRenderer.drawCircle(r,y,a,h)},e.prototype.renderBorder=function(e,t,i,n,r,o){var a=e,s=this.getBaseAttributes(a,i);s.x*=i.scale,s.y*=i.scale,s.width*=i.scale,s.height*=i.scale,s.fill="transparent",s.stroke="#097F7F",s.strokeWidth=1.2,s.dashArray="6,3",s.class="e-diagram-border",o&&(s.class+=" e-diagram-lane"),s.id="borderRect",s.id=this.rendererActions&Nn.DrawSelectorBorder?"borderRect_symbol":"borderRect",n||(s.class+=" e-disabled"),r&&(s.class+=" e-thick-border"),s.cornerRadius=0;var l=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,s,this.diagramId,void 0,!0,l)},e.prototype.renderUserHandler=function(e,t,i,n){for(var r,o=e.wrapper,a=0,s=e.userHandles;a<s.length;a++){var l=s[a];r=!0,(l.disableConnectors&&e.connectors.length>0||l.disableNodes&&e.nodes.length>0)&&(r=!1);var c=document.getElementById(l.name+"_template_hiddenUserHandle");c&&(l.template=c.childNodes[0].cloneNode(!0));var h=void 0;if((h=wc(e,l,i)).x=(h.x+i.tx)*i.scale,h.y=(h.y+i.ty)*i.scale,l.visible&&(l.visible=!!(e.constraints&Cn.UserHandle)),r)if(l.pathData){var d=l.pathData?l.pathData:l.content,p=this.getBaseAttributes(o);p.id=l.name+"_userhandle",p.fill=l.backgroundColor,p.stroke=l.borderColor,p.strokeWidth=l.borderWidth,p.centerX=h.x,p.centerY=h.y,p.radius=.5*l.size,p.class="e-diagram-userhandle-circle",p.angle=0,p.visible=l.visible,p.opacity=1,this.svgRenderer.drawCircle(t,p,1,{"aria-label":l.name+"user handle"});var u=[];u=an(u=Ji(d));var f=Wh(d),g=nn(u,(l.size-.45*l.size)/f.width,(l.size-.45*l.size)/f.height,!0,f.x,f.y,0,0);f=Wh(g);var m={x:h.x-f.width/2,y:h.y-f.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:l.pathColor,stroke:l.backgroundColor,strokeWidth:.5,dashArray:"",data:g,width:l.size-5,height:l.size-5,pivotX:0,pivotY:0,opacity:1,visible:l.visible};this.svgRenderer.drawPath(t,m,this.diagramId,void 0,void 0,{"aria-label":l.name+"user handle"})}else if(l.content){var y=void 0;(y=new gr(l.name,this.diagramId)).content=l.content,y.offsetX=h.x,y.offsetY=h.y,y.id=l.name+"_shape",y.horizontalAlignment="Center",y.verticalAlignment="Center",y.visible=l.visible,y.setOffsetWithRespectToBounds(h.x,h.y,"Fraction"),y.relativeMode="Object",y.description=l.name||"User handle",y.measure(new Zi(l.size,l.size)),y.arrange(y.desiredSize),this.svgRenderer.drawNativeContent(y,t,l.size,l.size,this.adornerSvgLayer)}else if(l.source){var v=new ur;(m=this.getBaseAttributes(v,i)).width=l.size,m.height=l.size,m.x=h.x-l.size/2,m.y=h.y-l.size/2,m.sourceWidth=l.size,m.sourceHeight=l.size,m.alignment=v.imageAlign,m.source=l.source,m.scale=v.imageScale,m.visible=l.visible,m.description=l.name||"User handle",m.id=l.name+"_",this.renderer.drawImage(t,m,this.adornerSvgLayer,!1)}else{var b=void 0;(b=new Ta(l.name,this.diagramId)).offsetX=h.x,b.offsetY=h.y,b.id=l.name+"_shape",b.visible=l.visible,b.relativeMode="Object",b.template=l.template,b.measure(new Zi(l.size,l.size)),b.arrange(b.desiredSize),this.svgRenderer.drawHTMLContent(b,n,void 0,!0,void 0)}}},e.prototype.renderRotateThumb=function(e,t,i,n,r){new dr;var o,a=new Zi;a.width=18,a.height=16;var s=e.offsetY-e.actualSize.height*e.pivot.y,l=e.offsetX-e.actualSize.width*e.pivot.x,c=!!(n&Cn.Rotate);r&&(c=!1);var h=l+e.pivot.x*e.actualSize.width,d=s;if(h=(h+i.tx)*i.scale,d=(d+i.ty)*i.scale,o={x:h-.5*a.width,y:d-30-.5*a.height},0!==e.rotateAngle||0!==e.parentTransform){var p=pn();fn(p,e.rotateAngle+e.parentTransform,(i.tx+e.offsetX)*i.scale,(i.ty+e.offsetY)*i.scale),o=un(p,o)}var u={x:o.x,y:o.y,angle:e.rotateAngle+e.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:c,id:e.id,class:"e-diagram-rotate-handle"};u.id="rotateThumb",this.svgRenderer.drawPath(t,u,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},e.prototype.renderPathElement=function(e,t,i,n,r,o){var a=this.getBaseAttributes(e,i,o);a.data=e.absolutePath,a.data=e.absolutePath;var s=e.description?e.description:e.id;if(this.isSvgMode||(a.x=e.flipOffset.x?e.flipOffset.x:a.x,a.y=e.flipOffset.y?e.flipOffset.y:a.y),e.isExport){var l=e.absoluteBounds;a.data=Vh(e,l,0,a)}this.renderer.drawPath(t,a,this.diagramId,void 0,n,s)},e.prototype.renderSvgGridlines=function(e,t,i,n,r,o){var a=document.createElementNS("http://www.w3.org/2000/svg","pattern"),s=document.createElementNS("http://www.w3.org/2000/svg","defs");s.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(e.constraints&Sn.ShowHorizontalLines||e.constraints&Sn.ShowVerticalLines)&&a.setAttribute("id",this.diagramId+"_pattern");var l=0,c=0,h=0,d=0,p=1,u=!1,f="Lines"===e.gridType,g=f?e.verticalGridlines.lineIntervals:e.verticalGridlines.dotIntervals,m=f?e.horizontalGridlines.lineIntervals:e.horizontalGridlines.dotIntervals;if(n.showRulers&&n.dynamicGrid&&r&&o)h=o.updateSegmentWidth(i.scale),d=r.updateSegmentWidth(i.scale),e.horizontalGridlines.scaledIntervals=[h/r.interval],e.verticalGridlines.scaledIntervals=[d/o.interval],u=!0;else{for(var y=0;y<g.length;y+=1)l+=g[y];for(y=0;y<m.length;y+=1)c+=m[y];p=this.scaleSnapInterval(e,i.scale)}l=u?d:l*p,c=u?h:c*p,hd(a,{id:this.diagramId+"_pattern",x:0,y:0,width:l,height:c,patternUnits:"userSpaceOnUse"}),this.horizontalSvgGridlines(a,l,c,p,e,n,o,u,f,m),this.verticalSvgGridlines(a,l,c,p,e,n,r,u,f,g),s.appendChild(a),t.appendChild(s)},e.prototype.horizontalSvgGridlines=function(e,t,i,n,r,o,a,s,l,c){var h,d=0,p=[];if(r.constraints&Sn.ShowHorizontalLines){r.horizontalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(r.horizontalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&a&&(c=this.updateLineIntervals(c,o,a,i,l)),c=Yl(c,l);for(var u=0;u<c.length;u+=2){d=Ul(c,l,u,d);h=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");var f=l?d+c[u]/2:d;f=s?f:f*n;l?(hd(h,{"stroke-width":c[u],stroke:r.horizontalGridlines.lineColor,d:"M0,"+f+" L"+t+","+f+" Z",dashArray:p.toString(),class:1.25===c[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(h),d+=c[u+1]+c[u]):(this.renderDotGrid(u,e,r,0,f,n,!0),d+=c[u])}}},e.prototype.renderDotGrid=function(e,t,i,n,r,o,a){var s,l,c,h=a?i.verticalGridlines.dotIntervals:i.horizontalGridlines.dotIntervals;h=Yl(h,!1);for(var d=1;d<h.length;d+=2)s=d===h.length-1?h[0]:h[d-1],c=n,c*=o,hd(l=document.createElementNS("http://www.w3.org/2000/svg","circle"),{cx:a?c:r,cy:a?r:c,fill:i.horizontalGridlines.lineColor,r:s}),t.appendChild(l),n+=h[d]+h[d-1]},e.prototype.verticalSvgGridlines=function(e,t,i,n,r,o,a,s,l,c){var h,d=0,p=[];if(r.constraints&Sn.ShowVerticalLines){r.verticalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(r.verticalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&a&&(c=this.updateLineIntervals(c,o,a,t,l));c=Yl(c,l);for(var u=0;u<c.length;u+=2){d=Ul(c,l,u,d),h=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");var f=l?d+c[u]/2:d;f=s?f:f*n;l?(hd(h,{"stroke-width":c[u],stroke:r.verticalGridlines.lineColor,d:"M"+f+",0 L"+f+","+i+" Z",dashArray:p.toString(),class:1.25===c[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(h),d+=c[u+1]+c[u]):(this.renderDotGrid(u,e,r,0,f,n,!1),d+=c[u])}}},e.prototype.updateGrid=function(e,t,i,n,r,o){var a=t.getElementById(this.diagramId+"_grid_rect"),s=!1;if(a){var l=t.getElementById(this.diagramId+"_pattern");l&&l.parentNode.removeChild(l);var c=0,h=0,d=1,p="Lines"===e.gridType,u=p?e.verticalGridlines.lineIntervals:e.verticalGridlines.dotIntervals,f=p?e.horizontalGridlines.lineIntervals:e.horizontalGridlines.dotIntervals;n.showRulers&&n.dynamicGrid&&o&&r?(c=o.updateSegmentWidth(i.scale),h=r.updateSegmentWidth(i.scale),s=!0,e.horizontalGridlines.scaledIntervals=[c/r.interval],e.verticalGridlines.scaledIntervals=[h/o.interval]):d=this.scaleSnapInterval(e,i.scale);for(var g=0,m=0;m<f.length;m+=1)g+=f[m];var y=0;for(m=0;m<u.length;m+=1)y+=u[m];var v={x:-i.tx*i.scale,y:-i.ty*i.scale};hd(a,v),y=s?h:y*d,g=s?c:g*d,v={id:this.diagramId+"_pattern",x:0,y:0,width:y,height:g,patternUnits:"userSpaceOnUse"},hd(l=document.createElementNS("http://www.w3.org/2000/svg","pattern"),v),this.horizontalSvgGridlines(l,y,g,d,e,n,o,s,p,f),this.verticalSvgGridlines(l,y,g,d,e,n,r,s,p,u);var b=t.getElementById(this.diagramId+"_grid_pattern_defn");b&&b.appendChild(l)}},e.prototype.updateLineIntervals=function(e,t,i,n,r){for(var o=[],a=n/i.interval,s=r?i.interval:i.interval+1,l=0;l<2*s;l++)o[l]=l%2===0?r?0===l?1.25:.25:0:r?a-o[l-1]:a;return o},e.prototype.scaleSnapInterval=function(e,t){if(t>=2)for(;t>=2;)t/=2;else if(t<=.5)for(;t<=.5;)t*=2;var i;if(e.horizontalGridlines.scaledIntervals=e.horizontalGridlines.snapIntervals,e.verticalGridlines.scaledIntervals=e.verticalGridlines.snapIntervals,1!==t){var n=e.horizontalGridlines;for(n.scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*t;for((n=e.verticalGridlines).scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*t}return t},e.prototype.renderTextElement=function(e,t,i,n,r){var o=this.getBaseAttributes(e,i);o.cornerRadius=0,o.whiteSpace=Ad(e.style.whiteSpace,e.style.textWrapping),o.content=e.content,o.breakWord=Ed(e.style.textWrapping),o.textAlign=Od(e.style.textAlign),o.color=e.style.color,o.italic=e.style.italic,o.bold=e.style.bold,o.fontSize=e.style.fontSize,o.fontFamily=e.style.fontFamily,o.textOverflow=e.style.textOverflow,o.textWrapping=e.style.textWrapping,o.textDecoration=e.style.textDecoration,o.doWrap=e.doWrap,o.wrapBounds=e.wrapBounds,o.childNodes=e.childNodes,o.isHorizontalLane=e.isLaneOrientation,e.isLaneOrientation&&(o.parentOffsetX=this.groupElement.offsetX,o.parentOffsetY=this.groupElement.offsetY,o.parentWidth=this.groupElement.actualSize.width,o.parentHeight=this.groupElement.actualSize.height),o.dashArray="",o.strokeWidth=0,o.fill=e.style.fill;var a=e.description?e.description:e.content?e.content:e.id;("Wrap"===e.style.textWrapping||"WrapWithOverflow"===e.style.textWrapping)&&this.groupElement&&o.height>this.groupElement.actualSize.height&&("Clip"===e.style.textOverflow||"Ellipsis"===e.style.textOverflow)&&(o.y=o.y+(o.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(t,o,this.diagramId,void 0,void 0,n),this.renderer.drawText(t,o,n,a,this.diagramId,e.isExport&&Math.min(e.exportScaleValue.x||e.exportScaleValue.y),this.groupElement),this.isSvgMode&&(e.doWrap=!1)},e.prototype.renderNativeElement=function(e,t,i,n,r){var o,a,s=this.getParentSvg(e,void 0,t)||n,l=this.getParentElement(e,t,s).g||t,c=this.getBaseAttributes(e,i);switch(c.fill="transparent",c.cornerRadius=e.cornerRadius,c.stroke="transparent",this.renderer.drawRectangle(t,c,this.diagramId,void 0,void 0,n),e.scale){case"None":o=e.contentSize.width,a=e.contentSize.height;break;case"Stretch":o=e.actualSize.width,a=e.actualSize.height;break;case"Meet":o=a=e.actualSize.width<=e.actualSize.height?e.actualSize.width:e.actualSize.height;break;case"Slice":o=a=e.actualSize.width>=e.actualSize.height?e.actualSize.width:e.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(e,l,a,o,s)},e.prototype.renderHTMLElement=function(e,t,i,n,r,o,a){var s=this.getBaseAttributes(e,n);s.fill="transparent",s.cornerRadius=e.cornerRadius,s.stroke="transparent",this.renderer.drawRectangle(t,s,this.diagramId,void 0,void 0,r),this.svgRenderer&&this.svgRenderer.drawHTMLContent(e,i.children[0],n,function(e){var t=e.parentElement;do{if(ad(t,"e-diagram"))return!0;t=t.parentElement}while(t);return!1}(i),a)},e.prototype.renderImageElement=function(e,t,i,n,r){var o,a,s,l,c=this.getBaseAttributes(e,i);if(c.cornerRadius=0,this.renderer.drawRectangle(t,c,this.diagramId,void 0,void 0,n),"Stretch"===e.stretch)o=e.actualSize.width,a=e.actualSize.height;else{var h=e.contentSize.width,d=e.contentSize.height,p=c.width/h,u=c.height/d,f=void 0;switch(e.stretch){case"Meet":o=h*(f=Math.min(p,u)),a=d*f,c.x+=Math.abs(c.width-o)/2,c.y+=Math.abs(c.height-a)/2;break;case"Slice":p=c.width/h,u=c.height/d,o=h*(f=Math.max(p,u)),a=d*f,s=c.width/o*h,l=c.height/a*d;break;case"None":o=h,a=d}}c.width=o,c.height=a,c.sourceWidth=s,c.sourceHeight=l,c.source=e.source,c.alignment=e.imageAlign,c.scale=e.imageScale,c.description=e.description?e.description:e.id,this.renderer.drawImage(t,c,n,r)},e.prototype.renderContainer=function(e,t,i,n,r,o,a,s,l){var c={svg:r,g:t};if(this.diagramId&&(r=this.getParentSvg(e)||r,this.isSvgMode)){var h;h=this.getParentElement(e,t,r,s).g||t,r=this.getParentSvg(this.hasNativeParent(e.children))||r;var d=this.getParentElement(this.hasNativeParent(e.children),h,r,s);c.svg=d.svg||r,c.g=d.g||h,o?(r&&(r.getElementById(c.g.id)||t.appendChild(c.g)),t=c.g):t=c.g}if(this.renderRect(e,t,n,r),this.groupElement=e,e.hasChildren()){for(var p,u=void 0,f=void 0,g=0,m=e.children;g<m.length;g++){var y=m[g];r=this.getParentSvg(this.hasNativeParent(e.children)||y)||r,this.isSvgMode&&(u=(p=this.getParentElement(this.hasNativeParent(e.children)||y,t,r)).g||t,p.svg&&(r=p.svg)),this.isSvgMode||(y.flip=e.flip),this.renderElement(y,u||t,i,n,r,!0,a,s,l),y instanceof or&&u&&!(e.elementActions&Tn.ElementIsGroup)&&(f=y.flip&&"None"!==y.flip?y.flip:e.flip,this.renderFlipElement(y,u,f)),y.elementActions&Tn.ElementIsPort&&u&&(f=y.flip&&"None"!==y.flip?y.flip:e.flip,this.renderFlipElement(e,u,f)),!(y instanceof or)&&"None"!==e.flip&&e.elementActions&Tn.ElementIsGroup&&this.renderFlipElement(y,u||t,e.flip)}e.elementActions&Tn.ElementIsGroup||this.renderFlipElement(e,t,e.flip)}},e.prototype.renderFlipElement=function(e,t,i){var n={},r=1,o=1,a=0,s=0,l=0,c=0;if("None"!==i?("Horizontal"!==i&&"Both"!==i||(a=e.bounds.center.x,l=-e.bounds.center.x,r=-1),"Vertical"!==i&&"Both"!==i||(s=e.bounds.center.y,c=-e.bounds.center.y,o=-1),n={transform:"translate("+a+","+s+") scale("+r+","+o+") translate("+l+","+c+")"}):n={transform:"translate(0,0)"},n)if(e&&e.children&&e.children.length&&e.children[0]instanceof Ta){var h=t.id.split("_preview");(t=(document.getElementById(h[0]+"_html_div")||id(this.diagramId).children[0]).querySelector("#"+e.id+"_content_html_element"))&&(t.style.transform="scale("+r+","+o+")rotate("+(e.rotateAngle+e.parentTransform)+"deg)")}else hd(t,n)},e.prototype.hasNativeParent=function(e,t){if(e&&e.length>0){var i=e[0];if(i instanceof gr)return i;i.children&&i.children.length&&this.hasNativeParent(i.children,t++||0)}},e.prototype.renderRect=function(e,t,i,n,r){var o=this.getBaseAttributes(e,i,r);o.cornerRadius=e.cornerRadius||0;var a=e.description?e.description:e.id;this.renderer.drawRectangle(t,o,this.diagramId,void 0,void 0,n,a)},e.prototype.drawRect=function(e,t){t.cornerRadius=0,this.svgRenderer.drawRectangle(e,t,this.diagramId)},e.prototype.getBaseAttributes=function(e,t,i){var n={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,canApplyStyle:e.canApplyStyle};return i&&(n.x=n.x-.5,n.y=n.y-.5),e.isExport&&(n.width*=e.exportScaleValue.x,n.height*=e.exportScaleValue.y,n.x*=e.exportScaleValue.x,n.y*=e.exportScaleValue.y,n.strokeWidth*=e.exportScaleValue.x),e.flip&&(n.flip=e.flip),t&&(n.x+=t.tx,n.y+=t.ty),n},e.renderSvgBackGroundImage=function(e,t,i,n,r,o){if(e.source){var a=Jh(t.id).getElementById(t.id+"_image");if(!a){var s=Yh(t.id).getElementsByClassName("e-background-image-layer")[0];(a=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("id",t.id+"_image"),s.appendChild(a)}var l=new Image;l.src=e.source,a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l.src.toString());var c="None"!==e.scale?e.scale:"",h=e.align,d=h.charAt(0).toLowerCase()+h.slice(1);c&&(d+=" "+c.charAt(0).toLowerCase()+c.slice(1)),hd(a,{id:t.id+"_image",x:i,y:n,width:r,height:o,preserveAspectRatio:d})}},e.prototype.transformLayers=function(e,t){var i=e.tx*e.scale,n=e.ty*e.scale,r="domTable";if(i!==this.transform.x||n!==this.transform.y||0===i||0===n){if(t)window[r][this.diagramId+"_diagramLayer"]||(window[r][this.diagramId+"_diagramLayer"]=this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer")),window[r][this.diagramId+"_diagramLayer"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")");return function(e){var t=null;return window.domTable[e+"_gridline"]?t=window.domTable[e+"_gridline"]:(t=Qh(e).getElementById(e+"_gridline"),window.domTable[e+"_gridline"]=t),t}(this.diagramId).setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+")"),window[r][this.diagramId+"_diagramPorts"]||(window[r][this.diagramId+"_diagramPorts"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts")),window[r][this.diagramId+"_diagramPorts"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),window[r][this.diagramId+"_diagramExpander"]||(window[r][this.diagramId+"_diagramExpander"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander")),window[r][this.diagramId+"_diagramExpander"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),window[r][this.diagramId+"_nativeLayer"]||(window[r][this.diagramId+"_nativeLayer"]=this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer")),window[r][this.diagramId+"_nativeLayer"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),id(this.diagramId).children[0].style.transform="translate("+e.tx*e.scale+"px,"+e.ty*e.scale+"px)scale("+e.scale+")",this.transform={x:e.tx*e.scale,y:e.ty*e.scale},!0}return!1},e.prototype.updateNode=function(e,t,i,n,r){this.renderElement(e,t,i,n,this.getParentSvg(e),void 0,void 0,r)},e}(),zd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Hd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zd(t,e),Bd([zt("")],t.prototype,"source",void 0),Bd([zt("transparent")],t.prototype,"color",void 0),Bd([zt("None")],t.prototype,"scale",void 0),Bd([zt("None")],t.prototype,"align",void 0),t}(ii),_d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zd(t,e),Bd([zt("Page")],t.prototype,"mode",void 0),Bd([zt("PageSettings")],t.prototype,"region",void 0),Bd([Bt({top:25,bottom:25,left:25,right:25},Yn)],t.prototype,"margin",void 0),Bd([zt(!1)],t.prototype,"canZoomIn",void 0),Bd([zt(void 0)],t.prototype,"customBounds",void 0),Bd([zt(!1)],t.prototype,"canFit",void 0),t}(ii),Wd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zd(t,e),Bd([zt(null)],t.prototype,"width",void 0),Bd([zt(null)],t.prototype,"height",void 0),Bd([Bt({},Yn)],t.prototype,"margin",void 0),Bd([zt("Landscape")],t.prototype,"orientation",void 0),Bd([zt("Infinity")],t.prototype,"boundaryConstraints",void 0),Bd([Bt({},Hd)],t.prototype,"background",void 0),Bd([zt(!1)],t.prototype,"multiplePage",void 0),Bd([zt(!1)],t.prototype,"showPageBreaks",void 0),Bd([Bt({},_d)],t.prototype,"fitOptions",void 0),t}(ii),Fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zd(t,e),Bd([zt(0)],t.prototype,"horizontalOffset",void 0),Bd([zt(0)],t.prototype,"verticalOffset",void 0),Bd([zt(1)],t.prototype,"currentZoom",void 0),Bd([zt(0)],t.prototype,"viewPortWidth",void 0),Bd([zt(0)],t.prototype,"viewPortHeight",void 0),Bd([zt(.2)],t.prototype,"minZoom",void 0),Bd([zt(30)],t.prototype,"maxZoom",void 0),Bd([zt("Diagram")],t.prototype,"scrollLimit",void 0),Bd([zt()],t.prototype,"scrollableArea",void 0),Bd([zt(!1)],t.prototype,"canAutoScroll",void 0),Bd([Bt({left:15,right:15,top:15,bottom:15},Yn)],t.prototype,"autoScrollBorder",void 0),Bd([Bt({left:0,right:0,top:0,bottom:0},Yn)],t.prototype,"padding",void 0),t}(ii),Vd=function(){function e(){this.services={}}return e.prototype.register=function(e,t){this.services[e]=t},e.prototype.getService=function(e){return this.services[e]},e}(),Ud=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Xd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ud(t,e),Yd([zt("lightgray")],t.prototype,"lineColor",void 0),Yd([zt("")],t.prototype,"lineDashArray",void 0),Yd([zt([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],t.prototype,"lineIntervals",void 0),Yd([zt([1,19,.5,19.5,.5,19.5,.5,19.5,.5,19.5])],t.prototype,"dotIntervals",void 0),Yd([zt([20])],t.prototype,"snapIntervals",void 0),t}(ii),Gd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ud(t,e),Yd([Bt({},Xd)],t.prototype,"horizontalGridlines",void 0),Yd([Bt({},Xd)],t.prototype,"verticalGridlines",void 0),Yd([zt(Sn.All)],t.prototype,"constraints",void 0),Yd([zt(5)],t.prototype,"snapAngle",void 0),Yd([zt("Lines")],t.prototype,"gridType",void 0),Yd([zt(5)],t.prototype,"snapObjectDistance",void 0),t}(ii),qd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Kd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qd(t,e),Zd([zt(5)],t.prototype,"interval",void 0),Zd([zt(100)],t.prototype,"segmentWidth",void 0),Zd([zt("Horizontal")],t.prototype,"orientation",void 0),Zd([zt("RightOrBottom")],t.prototype,"tickAlignment",void 0),Zd([zt("red")],t.prototype,"markerColor",void 0),Zd([zt(25)],t.prototype,"thickness",void 0),Zd([zt(null)],t.prototype,"arrangeTick",void 0),t}(ii),$d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qd(t,e),Zd([zt(!1)],t.prototype,"showRulers",void 0),Zd([zt(!0)],t.prototype,"dynamicGrid",void 0),Zd([Bt({orientation:"Horizontal"},Kd)],t.prototype,"horizontalRuler",void 0),Zd([Bt({orientation:"Vertical"},Kd)],t.prototype,"verticalRuler",void 0),t}(ii),Qd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qd(t,e),Jd([zt("")],t.prototype,"property",void 0),Jd([zt("")],t.prototype,"field",void 0),t}(ii),tp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ip=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tp(t,e),ip([zt("")],t.prototype,"read",void 0),ip([zt("")],t.prototype,"create",void 0),ip([zt("")],t.prototype,"update",void 0),ip([zt("")],t.prototype,"destroy",void 0),ip([zt()],t.prototype,"customFields",void 0),t}(ii),rp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tp(t,e),ip([zt("")],t.prototype,"id",void 0),ip([zt("")],t.prototype,"sourceID",void 0),ip([zt("")],t.prototype,"targetID",void 0),ip([zt(null)],t.prototype,"sourcePointX",void 0),ip([zt(null)],t.prototype,"sourcePointY",void 0),ip([zt(null)],t.prototype,"targetPointX",void 0),ip([zt(null)],t.prototype,"targetPointY",void 0),ip([zt(null)],t.prototype,"dataManager",void 0),ip([Bt({},np)],t.prototype,"crudAction",void 0),t}(ii),op=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tp(t,e),ip([zt("")],t.prototype,"id",void 0),ip([zt(null)],t.prototype,"dataManager",void 0),ip([zt(null)],t.prototype,"dataSource",void 0),ip([zt("")],t.prototype,"root",void 0),ip([zt("")],t.prototype,"parentId",void 0),ip([zt()],t.prototype,"doBinding",void 0),ip([_t([],ep)],t.prototype,"dataMapSettings",void 0),ip([Bt({},np)],t.prototype,"crudAction",void 0),ip([Bt({},rp)],t.prototype,"connectionDataSource",void 0),t}(ii),ap=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sp=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},lp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ap(t,e),sp([zt("")],t.prototype,"fixedNode",void 0),sp([zt(30)],t.prototype,"horizontalSpacing",void 0),sp([zt(30)],t.prototype,"verticalSpacing",void 0),sp([zt(30)],t.prototype,"maxIteration",void 0),sp([zt(40)],t.prototype,"springFactor",void 0),sp([zt(50)],t.prototype,"springLength",void 0),sp([Bt({left:50,top:50,right:0,bottom:0},Yn)],t.prototype,"margin",void 0),sp([zt("Auto")],t.prototype,"horizontalAlignment",void 0),sp([zt("Auto")],t.prototype,"verticalAlignment",void 0),sp([zt("TopToBottom")],t.prototype,"orientation",void 0),sp([zt("Auto")],t.prototype,"connectionDirection",void 0),sp([zt("Default")],t.prototype,"connectorSegments",void 0),sp([zt("None")],t.prototype,"type",void 0),sp([zt()],t.prototype,"getLayoutInfo",void 0),sp([zt()],t.prototype,"layoutInfo",void 0),sp([zt()],t.prototype,"getBranch",void 0),sp([zt()],t.prototype,"bounds",void 0),sp([zt(!0)],t.prototype,"enableAnimation",void 0),sp([zt("")],t.prototype,"root",void 0),t}(ii);function cp(e,t,i,n,r,o,a){n.selectedItems.connectors[0];if(o&&o.length>1&&r&&r.length>1)return"PinchZoom";if(n.currentSymbol)return"Drag";if("PortDraw"===n.eventHandler.action&&(n.tool&=~An.DrawOnce),(Os(n)||Ps(n))&&n.drawingObject)return"Draw";if(dp(n)&&((p=n.selectedItems).wrapper&&Sc(p.constraints,"UserHandle")))for(var s=0,l=p.userHandles;s<l.length;s++){var c=l[s];if(c.visible)if(hp(i,u=wc(p,c,n.scroller.transform),c.size/(2*n.scroller.transform.scale)))return c.name}if(dp(n)){var h=n.selectedItems.annotation?n.selectedItems.wrapper.children[0]:n.selectedItems.wrapper,d=h.bounds,p=n.selectedItems,u=new hn(d.x,d.y,d.width,d.height);if(pp(n)&&!n.selectedItems.annotation){var f=n.selectedItems.connectors[0],g=10/n.scrollSettings.currentZoom,m=10/n.scrollSettings.currentZoom;if(Sc(p.constraints,"ResizeAll")){if(Sc(p.constraints,"ConnectorSourceThumb")&&cs(f)&&hp(i,f.sourcePoint,g))return"ConnectorSourceEnd";if(Sc(p.constraints,"ConnectorTargetThumb")&&hs(f)&&hp(i,f.targetPoint,m))return"ConnectorTargetEnd";if("OrthoThumb"===(S=function(e,t,i,n){var r=10/n.scrollSettings.currentZoom,o=10/n.scrollSettings.currentZoom;if("Bezier"===e.type)for(var a=0;a<e.segments.length;a++){var s=e.segments[a];if(hp(i,Qi.isEmptyPoint(s.point1)?s.bezierPoint1:s.point1,o))return"BezierSourceThumb";if(hp(i,Qi.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,r))return"BezierTargetThumb"}if(n.connectorEditingToolModule&&ds(e))if("Straight"===e.type||"Bezier"===e.type)for(a=0;a<e.segments.length;a++){s=void 0;if(s=e.segments[a],hp(i,s.point,10))return"SegmentEnd"}else for(a=0;a<e.segments.length;a++){s=void 0;var l={x:0,y:0};if((s=e.segments[a]).allowDrag)for(var c=0;c<s.points.length-1;c++){if(Qi.distancePoints(s.points[c],s.points[c+1])>=50&&(l.x=(s.points[c].x+s.points[c+1].x)/2,l.y=(s.points[c].y+s.points[c+1].y)/2,hp(i,l,30)))return"OrthoThumb"}}return null}(f,0,i,n)))return S;if(Sc(p.constraints,"ConnectorSourceThumb")&&cs(f)&&S)return S;if(Sc(p.constraints,"ConnectorTargetThumb")&&hs(f)&&S)return S}}else{var y=10/n.scroller.currentZoom,v=pn();fn(v,h.rotateAngle+h.parentTransform,h.offsetX,h.offsetY);var b=h.offsetX-h.pivot.x*h.actualSize.width,w=h.offsetY-h.pivot.y*h.actualSize.height,x={x:b+(.5===h.pivot.x?2*h.pivot.x:h.pivot.x)*h.actualSize.width/2,y:w-30/n.scroller.currentZoom};x=un(v,x);var S,C=!!n.selectedItems.annotation,P=!(!C||!ps(n.selectedItems.annotation));if(Sc(p.constraints,"Rotate")&&hp(i,x,y)&&n.selectedItems.thumbsConstraints&In.Rotate){if(C&&P)return"LabelRotate";if(!C)return"Rotate"}if(u.Inflate(y),u.containsPoint(i))if(S=function(e,t,i,n,r,o){var a;1===e.selectedItems.nodes.length&&0===e.selectedItems.connectors.length&&e.selectedItems.nodes[0].container&&(a=function(e,t,i,n,r){var o=10/e.scroller.currentZoom,a=40/e.scroller.currentZoom,s=e.selectedItems,l=t.actualSize.width,c=t.actualSize.height,h=new hn(n,r+20,t.style.strokeWidth,c-40),d=new hn(n+l,r+20,t.style.strokeWidth,c-40),p=new hn(n+20,r,l-40,t.style.strokeWidth),u=new hn(n+20,r+c,l-40,t.style.strokeWidth),f=el(e,e.selectedItems.nodes[0],!0)?e.nameTable[e.selectedItems.nodes[0].parentId]:e.selectedItems.nodes[0];if(l>=a&&c>=a){if(xc(s.constraints,"ResizeEast",s.thumbsConstraints,s)&&d.containsPoint(i,o))return"ResizeEast";if(xc(s.constraints,"ResizeSouth",s.thumbsConstraints,s)&&u.containsPoint(i,o))return"ResizeSouth";if("Grid"!==f.container.type){if(xc(s.constraints,"ResizeWest",s.thumbsConstraints,s)&&h.containsPoint(i,o))return"ResizeWest";if(xc(s.constraints,"ResizeNorth",s.thumbsConstraints,s)&&p.containsPoint(i,o))return"ResizeNorth"}}return null}(e,t,i,r,o));a||e.selectedItems.nodes[0]&&(e.selectedItems.nodes[0].isPhase||e.selectedItems.nodes[0].isLane||"SwimLane"===e.selectedItems.nodes[0].shape.type)||(a=function(e,t,i,n,r,o){var a=40/e.scroller.currentZoom,s=10/e.scroller.currentZoom,l=e.selectedItems,c=!!l.annotation;if(t.actualSize.width>=a&&t.actualSize.height>=a){if(xc(l.constraints,"ResizeSouthEast",l.thumbsConstraints,l)&&hp(i,un(n,{x:r+t.actualSize.width,y:o+t.actualSize.height}),s))return c?"LabelResizeSouthEast":"ResizeSouthEast";if(xc(l.constraints,"ResizeSouthWest",l.thumbsConstraints,l)&&hp(i,un(n,{x:r,y:o+t.actualSize.height}),s))return c?"LabelResizeSouthWest":"ResizeSouthWest";if(xc(l.constraints,"ResizeNorthEast",l.thumbsConstraints,l)&&hp(i,un(n,{x:r+t.actualSize.width,y:o}),s))return c?"LabelResizeNorthEast":"ResizeNorthEast";if(xc(l.constraints,"ResizeNorthWest",l.thumbsConstraints,l)&&hp(i,un(n,{x:r,y:o}),s))return c?"LabelResizeNorthWest":"ResizeNorthWest"}if(xc(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&hp(i,un(n,{x:r+t.actualSize.width,y:o+t.actualSize.height/2}),s))return c?"LabelResizeEast":"ResizeEast";if(xc(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&hp(i,un(n,{x:r,y:o+t.actualSize.height/2}),s))return c?"LabelResizeWest":"ResizeWest";if(xc(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&hp(i,un(n,{x:r+t.actualSize.width/2,y:o+t.actualSize.height}),s))return c?"LabelResizeSouth":"ResizeSouth";if(xc(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&hp(i,un(n,{x:r+t.actualSize.width/2,y:o}),s))return c?"LabelResizeNorth":"ResizeNorth";return null}(e,t,i,n,r,o));if(a)return a;return null}(n,h,i,v,b,w))return S}}if(Cs(n)&&!e)return"Pan";if(a instanceof br&&!Cs(n)&&"None"!==(S=function(e,t,i,n){if(Ms(t)&&(Cc(t,xn.Hover)||Cc(t,xn.Visible))){if(t.constraints&_n.Drag)return"PortDrag"}else if(As(t)&&(Cc(t,xn.Hover)||Cc(t,xn.Visible))&&t.constraints&_n.Draw){e.drawingObject={};var r={type:"Orthogonal",sourcePortID:t.id};return e.drawingObject=r,e.tool|=An.DrawOnce,e.currentDrawingObject=r,"PortDraw"}return"None"}(n,a)))return S;if((a instanceof Pr||a instanceof Or)&&!Cs(n)&&ss(a))return up(n,a,void 0,t)&&ls(a)?"LabelDrag":"LabelSelect";if(null!==e){if(!(e instanceof Lh||e instanceof $a))return"Select";if(t&&t.id){var O=t.id.split(e.id)[1];if(O&&O.match("^_icon"))return"LayoutAnimation"}if(ls(e)&&t instanceof or&&t.hyperlink.link)return"Hyperlink";if(!ls(e)||!up(n,e,!1)||void 0!==n.selectedItems.annotation)return e&&Cs(n)&&!Es(n)?"Pan":n.selectedItems.nodes.length&&n.selectedItems.nodes[0].isLane&&n.selectedItems.wrapper&&n.selectedItems.wrapper.bounds.containsPoint(i)?"Drag":"Select";if(e instanceof $a&&!hp(i,e.sourcePoint,e.hitPadding)&&!hp(i,e.targetPoint,e.hitPadding)||!(e instanceof $a))return"Drag"}return"Select"}function hp(e,t,i){return e.x>=t.x-i&&e.x<=t.x+i&&e.y>=t.y-i&&e.y<=t.y+i}function dp(e){return e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0}function pp(e){return 1===e.selectedItems.connectors.length&&!e.selectedItems.nodes.length}function up(e,t,i,n){if(void 0===i&&(i=!0),t instanceof Hh)return!0;if(t instanceof Lh)for(;t;){if(-1!==e.selectedItems.nodes.indexOf(t)&&void 0===e.selectedItems.annotation)return!0;if(i)break;t=e.nameTable[t.parentId]}else if(t instanceof $a){if(-1!==e.selectedItems.connectors.indexOf(t)&&void 0===e.selectedItems.annotation)return!0}else if((t instanceof Pr||t instanceof Or)&&e.selectedItems.annotation&&e.selectedItems.wrapper.children[0].id===n.id)return!0;return!1}var fp,gp={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"grab",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},mp=function(){function e(){this.valueCreated="created",this.valueUpdated="updated",this.valueDeleted="deleted",this.valueUnchanged="unchanged",this.newNodeObject=[],this.newConnectorObject=[],this.diagramObject={}}return e.prototype.updateObjectCollection=function(e,t){for(var i=0;i<e.length;i++)e[i].objects||(e[i].objects=[]),e[i].objects=t.layers[i].objects},e.prototype.getOldObject=function(e,t,i){for(var n=t?i.oldNodeObjects:i.oldConnectorObjects,r=0;r<n.length;r++)if(n[r].id===e)return n[r]},e.prototype.changeSegments=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if("segments"===r){var o=this.removeNullValues(t[r]);e[r]=o}}return e},e.prototype.removeNullValues=function(e){for(var t=[],i={},n=0;n<e.length;n++)i=this.removeNullObjectValues(e[n]),t.push(i);return t},e.prototype.removeNullObjectValues=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];void 0!==e[r]&&(t[r]=e[r]instanceof Object?this.removeNullObjectValues(e[r]):e[r])}return t},e.prototype.getDifferenceValues=function(e,t,i,n){var r,o,a,s,l=e instanceof Lh;if(e&&(s=l?this.getOldObject(e.id,!0,n):this.getOldObject(e.id,!1,n))){var c=xd(e);return a=this.map(c,s),r=this.frameObject({},a),o=this.removeEmptyValues(r),(o=this.changeSegments(o,c)).children&&(o.children=xd(e).children),this.getDiagramObjects(o,e.id,l,t,i,n)}},e.prototype.getLayerObject=function(e,t,i){if(w()){for(var n={layers:[]},r={layers:[]},o=0;o<i.layers.length;o++)r.layers.push(xd(i.layers[o]));var a=void 0;for(o=0;o<r.layers.length;o++){a=t?this.map(e.layers[o],xd(r.layers[o])):this.map(xd(r.layers[o]),e.layers[o]);var s=this.frameObject({},a),l=this.removeEmptyValues(s);n.layers[o]=l}return this.updateObjectCollection(n.layers,i),n}},e.prototype.getDiagramObjects=function(e,t,i,n,r,o){var a;if(a=yd(o,t),e.sfIndex=a,i?this.newNodeObject.push(e):this.newConnectorObject.push(e),n&&(n.sourceWrapper instanceof or&&r||n.portId)){var s=void 0,l=void 0;l=i?n.portId?this.newNodeObject[0].ports:this.newNodeObject[0].annotations:this.newConnectorObject[0].annotations||[];for(var c=0;c<l.length;c++)if(Object.keys(l[c]).length>0){var h=o.nameTable[t];if(s=l[c],n.portId)this.newNodeObject[0].ports=[s];else{for(var d=0;d<h.annotations.length;d++)n.sourceWrapper.id===h.id+"_"+h.annotations[d].id&&(s.sfIndex=d);i?this.newNodeObject[0].annotations=[s]:this.newConnectorObject[0].annotations=[s]}}}this.diagramObject={nodes:this.newNodeObject,connectors:this.newConnectorObject}},e.prototype.removeArrayValues=function(e){var t=[];if(JSON.stringify(e)!==JSON.stringify({data:[]}))for(var i=0;i<e.length;i++)if(e[i]instanceof Object){var n=this.removeEmptyValues(e[i]);t.push(n)}else t.push(e[i]);return t},e.prototype.removeEmptyValues=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if("wrapper"!==r&&"data"!==r){var o=e[r],a=JSON.stringify(o);if(o instanceof Array){var s=this.removeArrayValues(o);"[]"!==JSON.stringify(s)&&(t[r]=s)}else if(o instanceof Object){if(a!==JSON.stringify({data:[]})){s=this.removeEmptyValues(o);"{}"!==JSON.stringify(s)&&(t[r]=s)}}else a!==JSON.stringify(["data"])&&a!==JSON.stringify("data")&&a!==JSON.stringify({data:[]})&&"version"!==r&&"ejsAction"!==r&&(t[r]=e[r])}}return t},e.prototype.map=function(e,t,i){if(this.isFunction(e)||this.isFunction(t))throw"Invalid argument. Function given, object expected.";if(this.isValue(e)||this.isValue(t))return{type:this.compareValues(e,t),data:void 0===e?t:e};var n={};if(this.isArray(e))for(var r=0;r<e.length;r++){n[i]||(n[i]=[]);var o=this.map(e[r],t[r]);n[i].push(o)}else for(var a in e)if(!this.isFunction(e[a])){var s=void 0;void 0!==t[a]&&(s=t[a]);var l=this.map(e[a],s,this.isArray(s)?a:void 0);this.isArray(s)?n[a]=l[a]:n[a]=l}if(this.isArray(t))for(r=0;r<t.length;r++)if(n[i]||(n[i]=[]),this.isFunction(t[r])||void 0!==n[i][r])n[i][r].type&&n[i][r].type!==this.valueUpdated&&delete n[i];else{o=this.map(void 0,t[r]);n[i][r]=o}else for(var a in t)if(this.isFunction(t[a])||void 0!==n[a])n[a].type&&n[a].type!==this.valueUpdated&&n[a].type!==this.valueDeleted&&delete n[a];else{l=this.map(void 0,t[a]);n[a]=l}return n},e.prototype.compareValues=function(e,t){return e===t||this.isDate(e)&&this.isDate(t)&&e.getTime()===t.getTime()?this.valueUnchanged:void 0===e?this.valueCreated:void 0===t?this.valueDeleted:this.valueUpdated},e.prototype.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},e.prototype.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.prototype.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.prototype.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.prototype.isValue=function(e){return!this.isObject(e)&&!this.isArray(e)},e.prototype.frameObject=function(e,t){for(var i in t)if(this.isArray(t[i])){e[i]||(e[i]=[]);for(var n=0;n<t[i].length;n++){var r=this.frameObject({},t[i][n]);e[i].push(r)}}else if("type"!=i||"type"==i&&t[i]!==this.valueUpdated&&t[i]!==this.valueUnchanged&&t[i]!==this.valueDeleted&&t[i]!==this.valueCreated){if(this.isFunction(t[i]))continue;if(this.isValue(t[i]))return t.data;r=this.frameObject({},t[i]);(this.isValue(r)||Object.keys(r).length>0)&&(e[i]=r)}return e},e}(),yp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vp=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))},bp=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},wp=function(){function e(e,t){void 0===t&&(t=!1),this.commandHandler=null,this.deepDiffer=new mp,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=e,this.isProtectChange=t}return e.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},e.prototype.mouseDown=function(e){w()&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0)),this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source),this.checkProperty=!0},e.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},e.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.currentPosition=e.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),w()&&(this.commandHandler.enableCloneObject(!1),this.commandHandler.ismouseEvents(!1),this.commandHandler.getBlazorOldValues(e,this instanceof Rp)),this.endAction()},e.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},e.prototype.mouseWheel=function(e){this.currentPosition=e.position},e.prototype.mouseLeave=function(e){this.mouseUp(e)},e.prototype.updateSize=function(e,t,i,n,r,o){e=this.commandHandler.renderContainerHelper(e)||e;var a,s={snapped:!1,offset:0,left:!1,right:!1},l={snapped:!1,offset:0,top:!1,bottom:!1},c=this.currentPosition.x-this.startPosition.x,h=this.currentPosition.y-this.startPosition.y,d=!(e instanceof or)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),p=d?this.commandHandler.snappingModule.getLayer():null,u=e instanceof or?o:e.rotateAngle;fn(a=pn(),-u,0,0);e.offsetX,e.offsetY;var f=e.width,g=e.height;e.pivot.x,e.pivot.y;var m,y=0,v=0,b=e instanceof or?e.actualSize.width:e.width,w=e instanceof or?e.actualSize.height:e.height;switch(n){case"ResizeWest":c=(m=un(a,{x:c,y:h})).x,h=m.y,v=1,c=d?this.commandHandler.snappingModule.snapLeft(s,l,p,c,h,e,i===t,r):c,h=0,y=(r.width-c)/b;break;case"ResizeEast":c=(m=un(a,{x:c,y:h})).x,h=m.y,c=d?this.commandHandler.snappingModule.snapRight(s,l,p,c,h,e,i===t,r):c,h=0,y=(r.width+c)/b,v=1;break;case"ResizeNorth":y=1,c=(m=un(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapTop(s,l,p,c,h,e,i===t,r):h,v=(r.height-h)/w;break;case"ResizeSouth":y=1,c=(m=un(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapBottom(s,l,p,c,h,e,i===t,r):h,v=(r.height+h)/w;break;case"ResizeNorthEast":c=(m=un(a,{x:c,y:h})).x,h=m.y,c=d?this.commandHandler.snappingModule.snapRight(s,l,p,c,h,e,i===t,r):c,h=d?this.commandHandler.snappingModule.snapTop(s,l,p,c,h,e,i===t,r):h,y=(r.width+c)/b,v=(r.height-h)/w;break;case"ResizeNorthWest":c=(m=un(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapTop(s,l,p,c,h,e,i===t,r):h,c=d?this.commandHandler.snappingModule.snapLeft(s,l,p,c,h,e,i===t,r):c,y=(r.width-c)/b,v=(r.height-h)/w;break;case"ResizeSouthEast":c=(m=un(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapBottom(s,l,p,c,h,e,i===t,r):h,c=d?this.commandHandler.snappingModule.snapRight(s,l,p,c,h,e,i===t,r):c,v=(r.height+h)/w,y=(r.width+c)/b;break;case"ResizeSouthWest":c=(m=un(a,{x:c,y:h})).x,h=m.y,h=d?this.commandHandler.snappingModule.snapBottom(s,l,p,c,h,e,i===t,r):h,c=d?this.commandHandler.snappingModule.snapLeft(s,l,p,c,h,e,i===t,r):c,y=(r.width-c)/b,v=(r.height+h)/w}return{width:y,height:v}},e.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},e}(),xp=function(e){function t(t,i,n){var r=e.call(this,t,!0)||this;return r.action=n,r}return yp(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===Qi.equals(this.currentPosition,this.prevPosition)){var i=hn.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(i.x,i.y,i.width,i.height)}return!this.blocked},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),!this.commandHandler.isUserHandle(this.currentPosition))if(!1===Qi.equals(this.currentPosition,this.prevPosition)&&this.inAction){var i=hn.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(i)}else{var n=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&t.info&&t.info.ctrlKey?t&&t.source&&(this.commandHandler.isSelected(t.source)?1===t.clickCount&&(this.commandHandler.unSelect(t.source),this.commandHandler.updateBlazorSelector()):this.commandHandler.selectObjects([t.source],!0)):(this.commandHandler.clearSelection(null===t.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(t.source,t.sourceWrapper):t.source&&this.commandHandler.selectObjects([t.source],!1,n))}this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(wp),Sp=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.isConnected=!1,n.endPoint=i,n}return yp(t,e),t.prototype.mouseDown=function(t){return vp(this,void 0,void 0,(function(){var i,n,r,o,a,s,l,c,h,d;return bp(this,(function(p){switch(p.label){case 0:return w()&&t&&t.source&&(i=t.source).connectors?(n=i.connectors[0],this.oldConnector=xd(n),r={connector:Vc(n),oldValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},newValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},cancel:!1,state:"Changing",connectorEnd:this.endPoint},o=Hn.connectionChange,a=void 0,[4,this.commandHandler.triggerEvent(o,r)]):[3,2];case 1:a=p.sent()||r,this.tempArgs=a,(r.cancel||a&&a.cancel)&&(this.canCancel=!0),p.label=2;case 2:if(this.inAction=!0,this.undoElement=void 0,this instanceof Tp||(this.undoElement=xd(t.source)),e.prototype.mouseDown.call(this,t),t.source&&t.source.connectors&&({x:this.prevPosition.x,y:this.prevPosition.y},s=t.source.connectors[0],this.oldConnector=xd(s)),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(l=0;l<s.segments.length;l++)c=s.segments[l],h=Qi.isEmptyPoint(c.point1)?c.bezierPoint1:c.point1,d=Qi.isEmptyPoint(c.point2)?c.bezierPoint2:c.point2,(hp(this.currentPosition,h,s.hitPadding)||hp(this.currentPosition,d,s.hitPadding))&&(this.selectedSegment=c);return this.currentPosition=t.position,[2]}}))}))},t.prototype.mouseUp=function(t){return vp(this,void 0,void 0,(function(){var i,n,r,o,a,s,l,c,h,d,p,u;return bp(this,(function(f){switch(f.label){case 0:return w()?(d=Hn.connectionChange,i=void 0,this.tempArgs&&this.oldConnector?(this.tempArgs.state="Changed",n="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",r="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",this.tempArgs.oldValue="ConnectorSourceEnd"===this.endPoint?{connectorSourceValue:{nodeId:this.oldConnector[n],portId:this.oldConnector[r]}}:{connectorTargetValue:{nodeId:this.oldConnector[n],portId:this.oldConnector[r]}},[4,this.commandHandler.triggerEvent(d,this.tempArgs)]):[3,2]):[3,2];case 1:(i=f.sent())&&this.commandHandler.updateConnectorValue(i),f.label=2;case 2:return!w()&&this.isConnected&&t.source.connectors&&(a=t.source.connectors[0],n="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",r="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",h={connector:Vc(a),oldValue:{nodeId:this.oldConnector[n],portId:this.oldConnector[r]},newValue:{nodeId:a[n],portId:a[r]},cancel:!1,state:"Changed",connectorEnd:this.endPoint},a[n]!==this.oldConnector[n]&&(this.commandHandler.triggerEvent(Hn.connectionChange,h),this.isConnected=!1)),this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(t),this instanceof Tp||("ConnectorSourceEnd"!==this.endPoint||!t.source.connectors.length||Qi.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&t.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||Qi.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&t.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)?this instanceof Tp||"BezierTargetThumb"!==this.endPoint&&"BezierSourceThumb"!==this.endPoint||this.undoElement&&t.source&&(p=void 0,p=xd(t.source),u={type:"SegmentChanged",redoObject:p,undoObject:this.undoElement,category:"Internal"},this.commandHandler.addHistoryEntry(u)):(o=void 0,a=void 0,t.source&&t.source.connectors&&(o={x:this.prevPosition.x,y:this.prevPosition.y},a=t.source.connectors[0]),s=void 0,l=void 0,t.target&&((c=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof br?s=c.id:l=c.id),h={connector:a,state:"Completed",targetNode:l,oldValue:o,newValue:o,cancel:!1,targetPort:s},w()&&(h={connector:Vc(a),state:"Completed",targetNode:l,oldValue:Vc(o),newValue:o,cancel:h.cancel,targetPort:s}),d="ConnectorSourceEnd"===this.endPoint?Hn.sourcePointChange:Hn.targetPointChange,this.commandHandler.triggerEvent(d,h),this.commandHandler.removeTerminalSegment(a,!0),this.undoElement&&t.source&&(p=void 0,p=xd(t.source),u={type:"ConnectionChanged",redoObject:xd(p),undoObject:xd(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(u))),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,e.prototype.mouseUp.call(this,t),[2]}}))}))},t.prototype.mouseMove=function(t){var i;if(e.prototype.mouseMove.call(this,t),!(this instanceof Tp)&&("ConnectorSourceEnd"===this.endPoint&&Qi.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&Qi.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var n=void 0,r=void 0;t.source&&t.source.connectors&&(n={x:this.prevPosition.x,y:this.prevPosition.y},r=t.source.connectors[0]);var o=void 0,a=void 0;if(t.target)a=t.target.id,(y=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof br||y instanceof yh?o=y.id:a=y.id;var s={connector:r,state:"Start",targetNode:a,oldValue:n,newValue:n,cancel:!1,targetPort:o};w()&&(s={connector:Vc(r),state:"Start",targetNode:a,oldValue:n,newValue:n,cancel:s.cancel,targetPort:o});var l="ConnectorSourceEnd"===this.endPoint?Hn.sourcePointChange:Hn.targetPointChange;this.commandHandler.triggerEvent(l,s)}if(this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var c=this.currentPosition.x-this.prevPosition.x,h=this.currentPosition.y-this.prevPosition.y,d=void 0,p=(n=void 0,void 0),u=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var f=void 0;t.source&&t.source.connectors&&(d={x:this.currentPosition.x,y:this.currentPosition.y},n={x:this.prevPosition.x,y:this.prevPosition.y},f=t.source.connectors[0]);var g=void 0,m=void 0;if(t.target)(y=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof br?g=y.id:m=y.id;var y;s={connector:f,state:"Progress",targetNode:m,oldValue:n,newValue:d,cancel:!1,targetPort:g};if(w()&&(s={connector:Vc(f),state:"Progress",targetNode:m,oldValue:n,newValue:d,cancel:s.cancel,targetPort:g}),!(this instanceof Tp)){l="ConnectorSourceEnd"===this.endPoint?Hn.sourcePointChange:Hn.targetPointChange;this.commandHandler.triggerEvent(l,s)}if(t.target&&(p=Ec(t.target,!0),u=Ec(t.target,!1)),!s.cancel&&this.inAction&&void 0!==this.endPoint&&0!==c||0!==h)if(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,t.source,this.currentPosition,this.selectedSegment,t.target,g),this.commandHandler.updateSelector(),t.target&&("ConnectorSourceEnd"===this.endPoint&&(ms(t.target)||ys(u))||"ConnectorTargetEnd"===this.endPoint&&(fs(t.target)||gs(p))))if(this.commandHandler.canDisconnect(this.endPoint,t,g,m)&&(i=this.commandHandler.disConnect(t.source,this.endPoint,this.canCancel),this.isConnected=!0),(y=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Lh)(fs(y)&&"ConnectorTargetEnd"===this.endPoint||ms(y)&&"ConnectorSourceEnd"===this.endPoint)&&(i=this.commandHandler.connect(this.endPoint,t,this.canCancel),this.isConnected=!0);else this.checkConnect(y)&&(this.isConnected=!0,i=this.commandHandler.connect(this.endPoint,t,this.canCancel));else-1===this.endPoint.indexOf("Bezier")&&(this.isConnected=!0,i=this.commandHandler.disConnect(t.source,this.endPoint,this.canCancel),this.commandHandler.updateSelector());if(this.commandHandler.canEnableDefaultTooltip()){var v=this.getTooltipContent(t.position);this.commandHandler.showTooltip(t.source,t.position,v,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}i&&(this.tempArgs=i)}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.x)+" Y:"+Math.round(e.y)},t.prototype.checkConnect=function(e){return!(!gs(e)||"ConnectorTargetEnd"!==this.endPoint)||(!(!ys(e)||"ConnectorSourceEnd"!==this.endPoint)||!(e.constraints&_n.None||gs(e)||ys(e)))},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(wp),Cp=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.currentTarget=null,n.canCancel=!1,n.objectType=i,n}return yp(t,e),t.prototype.mouseDown=function(t){if(t.source instanceof Lh||t.source instanceof $a){var i=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([t.source],t.info&&t.info.ctrlKey,i);var n={nodes:[],connectors:[]};t.source instanceof Lh?n.nodes.push(xd(t.source)):n.connectors.push(xd(t.source)),this.undoElement=xd(n)}else this.undoElement=xd(t.source);var r;if(this.undoParentElement=this.commandHandler.getSubProcess(t.source),"Port"===this.objectType&&(this.portId=t.sourceWrapper.id),w()){this.startPosition=this.currentPosition=this.prevPosition=t.position,this.initialOffset={x:0,y:0},t.source&&(r={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY});var o={source:xd(t.source),state:"Start",oldValue:r,newValue:{},target:xd(t.target),targetPosition:t.position,allowDrop:!0,cancel:!1};this.tempArgs=o}e.prototype.mouseDown.call(this,t),this.initialOffset={x:0,y:0}},t.prototype.mouseUp=function(t,i){return vp(this,void 0,void 0,(function(){var n,r,o,a,s,l,c,h,d,p,u,f,g,m,y,v;return bp(this,(function(b){switch(b.label){case 0:return w()&&"Port"!==this.objectType?(t.source&&(r={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},n={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY}),f={source:Vc(t.source),state:"Completed",oldValue:Vc(this.tempArgs.oldValue),newValue:Vc(r),target:Vc(this.currentTarget),targetPosition:Vc(this.currentPosition),allowDrop:!0,cancel:!1},[4,this.commandHandler.triggerEvent(Hn.positionChange,f)]):[3,2];case 1:(o=b.sent())&&o.cancel&&(this.canCancel=!0),this.canCancel&&(a=this.tempArgs.oldValue.offsetX-t.source.wrapper.offsetX,s=this.tempArgs.oldValue.offsetY-t.source.wrapper.offsetY,this.commandHandler.dragSelectedObjects(a,s)),b.label=2;case 2:return this.checkPropertyValue(),c=!1,d={nodes:[],connectors:[]},"Port"===this.objectType?[3,7]:(t.source instanceof Lh||t.source instanceof $a?(t.source instanceof Lh?d.nodes.push(xd(t.source)):d.connectors.push(xd(t.source)),l=xd(d),p=t.source.wrapper,l.offsetX=p.offsetX,l.offsetY=p.offsetY):l=xd(t.source),("helper"!==(h=this.commandHandler.renderContainerHelper(t.source)||t.source||this.commandHandler.renderContainerHelper(t.source)).id||l.nodes[0].isLane||l.nodes[0].isPhase)&&"helper"===h.id||h.offsetX===this.undoElement.offsetX&&h.offsetY===this.undoElement.offsetY&&h.sourcePoint===this.undoElement.sourcePoint&&h.targetPoint===this.undoElement.targetPoint||(t.source&&(r={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},n={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY}),f={source:t.source,state:"Completed",oldValue:n,newValue:r,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},f={source:Vc(t.source),state:"Completed",oldValue:Vc(n),newValue:Vc(r),target:Vc(this.currentTarget),targetPosition:Vc(this.currentPosition),allowDrop:f.allowDrop,cancel:f.cancel},w()&&(f=this.getBlazorPositionChangeEventArgs(f,this.currentTarget)),w()||this.commandHandler.triggerEvent(Hn.positionChange,f),i||(this.commandHandler.startGroupAction(),c=!0,v={type:"PositionChanged",redoObject:xd(l),undoObject:xd(this.undoElement),category:"Internal"},l.nodes[0]&&l.nodes[0].processId&&(u={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(t.source)},this.commandHandler.addHistoryEntry(u)),this.commandHandler.addHistoryEntry(v))),this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0),this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),t.source&&this.currentTarget&&bs(this.currentTarget)&&this.commandHandler.isDroppable(t.source,this.currentTarget)?(this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition),f={element:t.source,target:this.currentTarget,position:this.currentPosition,cancel:!1},w()?(f=function(e,t){if(w()){var i=Rc(e.source)===$a,n=Vc(e.source),r=Vc(e.target);t={element:i?{connector:n}:{node:n},target:i?{connector:r}:{node:r},position:t.position,cancel:t.cancel}}return t}(t,f),[4,this.commandHandler.triggerEvent(Hn.drop,f)]):[3,4]):[3,6]);case 3:return f=b.sent()||f,[3,5];case 4:this.commandHandler.triggerEvent(Hn.drop,f),b.label=5;case 5:if(!f.cancel&&t.source&&this.commandHandler.isParentAsContainer(this.currentTarget)){for(g=t.source instanceof Hh?t.source.nodes:[t.source],m=!1,y=0;y<g.length;y++)g[y].container||(m=!0,this.commandHandler.dropChildToContainer(this.currentTarget,g[y]),this.commandHandler.renderContainerHelper(g[y]));c&&this.commandHandler.isContainer&&m&&this.commandHandler.endGroupAction()}b.label=6;case 6:return t.source&&this.currentTarget&&this.commandHandler.dropAnnotation(t.source,this.currentTarget),this.commandHandler.updateSelector(),c&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction(),[3,8];case 7:d.nodes.push(xd(t.source)),t.portId=this.portId,l=xd(d),v={type:"PortPositionChanged",objectId:this.portId,redoObject:xd(l),undoObject:xd(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(v),b.label=8;case 8:return this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),[2]}}))}))},t.prototype.getBlazorPositionChangeEventArgs=function(e,t){return e={source:Vc(e.source),state:e.state,oldValue:e.oldValue,newValue:e.newValue,target:Rc(t)===$a?{connector:Vc(t)}:{node:Vc(t)},targetPosition:this.currentPosition,allowDrop:!0,cancel:!1}},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i,n,r=!1;(i=this.commandHandler.renderContainerHelper(t.source)||t.source)instanceof Lh||i instanceof $a?i instanceof Lh?i.offsetX===this.undoElement.nodes[0].offsetX&&i.offsetY===this.undoElement.nodes[0].offsetY&&(r=!0):Qi.equals(i.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&Qi.equals(i.targetPoint,this.undoElement.connectors[0].targetPoint)&&(r=!0):i.wrapper.offsetX===this.undoElement.wrapper.offsetX&&i.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(r=!0),i&&(n={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY});var o={source:i,state:"Start",oldValue:n,newValue:n,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(o={source:Vc(i),state:"Start",oldValue:Vc(n),newValue:Vc(n),target:t.target,targetPosition:t.position,allowDrop:o.allowDrop,cancel:o.cancel},r&&!w()&&this.commandHandler.triggerEvent(Hn.positionChange,o),this.currentPosition=t.position,"Port"!==this.objectType){this.currentPosition.x,this.prevPosition.x,this.currentPosition.y,this.prevPosition.y;var a,s=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),l=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(t,this.currentPosition),this.commandHandler.disConnect(t.source),this.commandHandler.removeSnap();var c=void 0,h=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,s,l);this.initialOffset.x=s-h.x,this.initialOffset.y=l-h.y,i&&(a={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY},c={offsetX:i.wrapper.offsetX+h.x,offsetY:i.wrapper.offsetY+h.y}),this.currentTarget&&t.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(t.source,t.target,this.currentTarget),this.currentTarget=t.target;var d={source:i,state:"Progress",oldValue:a,newValue:c,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(w()&&(d=this.getBlazorPositionChangeEventArgs(d,t.target)),w()||this.commandHandler.triggerEvent(Hn.positionChange,d),!d.cancel&&!this.canCancel){this.blocked=!this.commandHandler.dragSelectedObjects(h.x,h.y);var p=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||p}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(t),this.currentTarget&&t.source!==this.currentTarget&&this.commandHandler.isDroppable(t.source,this.currentTarget)&&"helper"!==t.source.id){var u=t.source instanceof Hh?t.source.nodes[0]:t.source;this.commandHandler.isParentAsContainer(u,!0)||"SwimLane"===u.shape.type||u.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(t,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var f=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,f,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var g=pn(),m=t.source;fn(g,-m.rotateAngle,m.offsetX,m.offsetY);var y=un(g,{x:this.prevPosition.x,y:this.prevPosition.y}),v=un(g,{x:t.position.x,y:t.position.y});this.commandHandler.portDrag(t.source,t.sourceWrapper,v.x-y.x,v.y-y.y)}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.wrapper.bounds.x)+" Y:"+Math.round(e.wrapper.bounds.y)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},t}(wp),Pp=function(e){function t(t){return e.call(this,t,!0)||this}return yp(t,e),t.prototype.mouseDown=function(t){if(w()){var i={rotateAngle:(this.commandHandler.renderContainerHelper(t.source)||t.source).wrapper.rotateAngle},n={source:Vc(t.source),state:"Start",oldValue:i,newValue:void 0,cancel:!1};this.tempArgs=n,this.tempArgs&&this.tempArgs.cancel&&(this.canCancel=!0)}if(this.undoElement=xd(t.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var r=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),o=0;o<r.length;o++){var a=this.commandHandler.cloneChild(r[o].id);this.childTable[r[o].id]=xd(a)}e.prototype.mouseDown.call(this,t)},t.prototype.mouseUp=function(t){return vp(this,void 0,void 0,(function(){var i,n,r,o,a,s,l,c;return bp(this,(function(h){switch(h.label){case 0:return this.checkPropertyValue(),w()?(i=this.commandHandler.renderContainerHelper(t.source)||t.source,a={rotateAngle:this.tempArgs.oldValue.rotateAngle},n={rotateAngle:i.wrapper.rotateAngle},s={source:Vc(t.source),state:"Completed",oldValue:a,newValue:n,cancel:!1},[4,this.commandHandler.triggerEvent(Hn.rotateChange,s)]):[3,2];case 1:(r=h.sent())&&r.cancel&&(this.canCancel=!0),this.canCancel&&this.commandHandler.rotatePropertyChnage(this.tempArgs.oldValue.rotateAngle),h.label=2;case 2:return o=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle!==o.wrapper.rotateAngle&&(a={rotateAngle:o.wrapper.rotateAngle},s={source:t.source,state:"Completed",oldValue:a,newValue:a,cancel:!1},w()||this.commandHandler.triggerEvent(Hn.rotateChange,s),void 0,l=xd(t.source),c={type:"RotationChanged",redoObject:xd(l),undoObject:xd(this.undoElement),category:"Internal",childTable:this.childTable},this.commandHandler.addHistoryEntry(c),this.commandHandler.updateSelector()),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,e.prototype.mouseUp.call(this,t),[2]}}))}))},t.prototype.mouseMove=function(t){var i;if(e.prototype.mouseMove.call(this,t),i=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle===i.wrapper.rotateAngle){var n={rotateAngle:i.wrapper.rotateAngle},r={source:t.source,state:"Start",oldValue:n,newValue:n,cancel:!1};w()||this.commandHandler.triggerEvent(Hn.rotateChange,r)}this.currentPosition=t.position;var o={x:i.wrapper.offsetX,y:i.wrapper.offsetY},a=Qi.findAngle(o,this.currentPosition)+90,s=this.commandHandler.snapAngle(a);a=((a=0!==s?s:a)+360)%360;var l={rotateAngle:i.wrapper.rotateAngle},c={rotateAngle:a},h=(t.source,!1),d={source:Vc(t.source),state:"Progress",oldValue:Vc(l),newValue:Vc(c),cancel:h};if(w()||this.commandHandler.triggerEvent(Hn.rotateChange,d),(!w()&&!d.cancel||w()&&!this.canCancel)&&(this.blocked=!this.commandHandler.rotateSelectedItems(a-i.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var p=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,p,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},t.prototype.getTooltipContent=function(e){return Math.round(e.rotateAngle%360).toString()+"\xb0"},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(wp),Op=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.initialBounds=new hn,n.canCancel=!1,n.corner=i,n}return yp(t,e),t.prototype.mouseDown=function(t){var i;if(w()){this.startPosition=this.currentPosition=this.prevPosition=t.position,this.currentElement=t.source,this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width,t.source&&(i={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height});var n={source:Vc(t.source),state:"Start",oldValue:i,newValue:Vc(this.currentElement),cancel:!1};this.tempArgs=n}if(this.undoElement=xd(t.source),this.undoParentElement=this.commandHandler.getSubProcess(t.source),e.prototype.mouseDown.call(this,t),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var r=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),o=0;o<r.length;o++){var a=this.commandHandler.cloneChild(r[o].id);this.childTable[r[o].id]=xd(a)}this.commandHandler.checkSelection(t.source,this.corner),e.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width},t.prototype.mouseUp=function(t,i){return vp(this,void 0,void 0,(function(){var n,r,o,a,s,l,c,h,d,p,u;return bp(this,(function(f){switch(f.label){case 0:return w()?(d=xd(t.source),n={width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height,offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},h={oldValue:this.tempArgs.oldValue,newValue:n,cancel:!1,source:Vc(t.source),state:"Completed"},this.canCancel?[3,2]:[4,this.commandHandler.triggerEvent(Hn.sizeChange,h)]):[3,3];case 1:(r=f.sent())&&r.cancel&&(o=this.tempArgs.oldValue.width/d.wrapper.actualSize.width,a=this.tempArgs.oldValue.height/d.wrapper.actualSize.height,this.commandHandler.scaleSelectedItems(o,a,this.getPivot(this.corner))),f.label=2;case 2:this.tempArgs=void 0,this.canCancel=void 0,f.label=3;case 3:return this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelector(),s=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX===s.wrapper.offsetX&&this.undoElement.offsetY===s.wrapper.offsetY&&this.undoElement.width===s.wrapper.bounds.width&&this.undoElement.height===s.wrapper.bounds.height||(w()||(l=this.updateSize(t.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds),this.blocked=this.scaleObjects(l.width,l.height,this.corner,this.currentPosition,this.prevPosition,s),c={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},h={source:Vc(t.source),state:"Completed",oldValue:c,newValue:c,cancel:!1},this.commandHandler.triggerEvent(Hn.sizeChange,h)),d=xd(t.source),p={type:"SizeChanged",redoObject:xd(d),undoObject:xd(this.undoElement),category:"Internal",childTable:this.childTable},i||(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(p),d.nodes[0]&&d.nodes[0].processId&&(u={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(t.source),undoObject:this.undoParentElement,category:"Internal"},this.commandHandler.addHistoryEntry(u)),this.commandHandler.endGroupAction())),this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),[2,!this.blocked]}}))}))},t.prototype.mouseMove=function(t){var i;if(e.prototype.mouseMove.call(this,t),i=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX===i.wrapper.offsetX&&this.undoElement.offsetY===i.wrapper.offsetY){var n={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},r={source:t.source,state:"Start",oldValue:n,newValue:this.currentElement,cancel:!1};w()||this.commandHandler.triggerEvent(Hn.sizeChange,r)}this.currentPosition=t.position;var o={x:this.currentPosition.x-this.startPosition.x,y:this.currentPosition.y-this.startPosition.y};o=Dd(-this.currentElement.wrapper.rotateAngle,void 0,void 0,o);this.currentElement.wrapper.actualSize.width,o.x,this.currentElement.wrapper.actualSize.width,this.currentElement.wrapper.actualSize.height,o.y,this.currentElement.wrapper.actualSize.height;o=this.getChanges(o),this.commandHandler.removeSnap();var a=this.updateSize(t.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(a.width,a.height,this.corner,this.startPosition,this.currentPosition,i),this.commandHandler.canEnableDefaultTooltip()){var s=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,s,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"W:"+Math.round(e.wrapper.bounds.width)+" H:"+Math.round(e.wrapper.bounds.height)},t.prototype.getChanges=function(e){switch(this.corner){case"ResizeEast":return{x:e.x,y:0};case"ResizeSouthEast":return e;case"ResizeSouth":return{x:0,y:e.y};case"ResizeNorth":return{x:0,y:-e.y};case"ResizeNorthEast":return{x:e.x,y:-e.y};case"ResizeNorthWest":return{x:-e.x,y:-e.y};case"ResizeWest":return{x:-e.x,y:0};case"ResizeSouthWest":return{x:-e.x,y:e.y}}return e},t.prototype.scaleObjects=function(e,t,i,n,r,o){o instanceof Hh&&1===o.nodes.length&&o.nodes[0].constraints&En.AspectRatio&&("ResizeWest"===i||"ResizeEast"===i||"ResizeNorth"===i||"ResizeSouth"===i?1===t&&1===e||(t=e=Math.max(1===t?0:t,1===e?0:e)):t=e=n!==r?Math.max(t,e):0);var a={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};this.blocked=this.commandHandler.scaleSelectedItems(e,t,this.getPivot(this.corner));var s,l,c={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};return s={source:o,state:"Progress",oldValue:a,newValue:c,cancel:!1},l={source:Vc(o),state:"Progress",oldValue:Vc(a),newValue:Vc(c),cancel:s.cancel},w()||this.commandHandler.triggerEvent(Hn.sizeChange,l),(l.cancel||this.canCancel)&&this.commandHandler.scaleSelectedItems(1/e,1/t,this.getPivot(this.corner)),this.blocked},t}(wp),Ep=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.sourceObject=i,n}return yp(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setFocus()},t.prototype.mouseMove=function(t){var i;e.prototype.mouseMove.call(this,t);var n={offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y};if(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(n)),this.inAction&&!1===Qi.equals(this.currentPosition,this.prevPosition)){var r=hn.toBounds([this.prevPosition,this.currentPosition]);(i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r))&&this.commandHandler.updateNodeDimension(this.drawingObject,r)}return i},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=hn.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,i),this.drawingObject&&this.drawingObject instanceof Lh&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(wp),Tp=function(e){function t(t,i,n){var r=e.call(this,t,i)||this;return r.sourceObject=n,r}return yp(t,e),t.prototype.mouseDown=function(t){return vp(this,void 0,void 0,(function(){return bp(this,(function(i){return e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setFocus(),[2]}))}))},t.prototype.mouseMove=function(t){if(this.commandHandler.enableServerDataBinding(!1),this.inAction){var i={sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(i)),t.source=this.drawingObject,(t.target||t.actualObject&&t.sourceWrapper&&_c(t.actualObject,t.sourceWrapper))&&("ConnectorTargetEnd"!==this.endPoint||fs(t.target))&&this.commandHandler.connect(this.endPoint,t),this.endPoint="ConnectorTargetEnd"}return this.inAction||(this.commandHandler.updateSelector(),t.source&&t.sourceWrapper&&this.commandHandler.renderHighlighter(t,!0)),e.prototype.mouseMove.call(this,t),this.commandHandler.enableServerDataBinding(!0),!this.blocked},t.prototype.mouseUp=function(t){return vp(this,void 0,void 0,(function(){return bp(this,(function(i){return this.commandHandler.enableServerDataBinding(!1),this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof $a&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),this.inAction=!1,this.commandHandler.enableServerDataBinding(!0),e.prototype.mouseUp.call(this,t),[2]}))}))},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Sp),Ip=function(e){function t(t){return e.call(this,t,!0)||this}return yp(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.commandHandler.clearSelection();var i={shape:{type:"Text"},offsetX:this.currentPosition.x,offsetY:this.currentPosition.y};t.source||(this.drawingNode=this.commandHandler.drawObject(i))},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.drawingNode)this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent";else{var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,style:{strokeDashArray:"2 2",fill:"transparent"},offsetY:this.currentPosition.y};this.drawingNode=this.commandHandler.drawObject(i)}if(this.inAction&&!1===Qi.equals(this.currentPosition,this.prevPosition)){var n=hn.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=t.source,this.drawingNode&&(this.drawingNode instanceof Lh||this.drawingNode instanceof $a)&&this.commandHandler.addText(this.drawingNode,this.currentPosition),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(wp),kp=function(e){function t(t,i){var n=e.call(this,t)||this;return n.zooming=i,n}return yp(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setBlazorDiagramProps(!0)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction)if(this.zooming||!1!==Qi.equals(this.currentPosition,this.prevPosition)){if(t.moveTouches&&t.moveTouches.length&&t.moveTouches.length>=2){var i=t.startTouches[0],n=t.startTouches[1],r=t.moveTouches[0],o=t.moveTouches[1],a=this.getDistance(r,o)/this.getDistance(i,n),s=t.position;this.commandHandler.zoom(a,0,0,s),this.updateTouch(i,r),this.updateTouch(n,o)}}else{var l=this.currentPosition.x-this.prevPosition.x,c=this.currentPosition.y-this.prevPosition.y;this.commandHandler.scroll(l,c,this.currentPosition)}return this.commandHandler.dataBinding(),!this.blocked},t.prototype.mouseUp=function(t){this.commandHandler.setBlazorDiagramProps(!1),this.checkPropertyValue(),this.commandHandler.updatePanState(!1),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.getDistance=function(e,t){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},t.prototype.updateTouch=function(e,t){e.pageX=t.pageX,e.pageY=t.pageY},t}(wp),Ap=function(e){function t(t){return e.call(this,t,!0)||this}return yp(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.commandHandler.initExpand(t),e.prototype.mouseUp.call(this,t)},t}(wp),Mp=function(e){function t(t){return e.call(this,t,!0)||this}return yp(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),window.open(t.sourceWrapper.hyperlink.link,"_blank").focus(),e.prototype.mouseUp.call(this,t)},t}(wp),Dp=function(e){function t(t){return e.call(this,t,!0)||this}return yp(t,e),t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject.shape;i={x:(i=n.points[n.points.length-1]).x,y:i.y},this.drawingObject.shape.points.push(i)}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var r={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};w()&&"Basic"===r.shape.type&&(r.shape.basicShape="Polygon"),this.drawingObject=this.commandHandler.drawObject(r)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(i.points[i.points.length-1].x=this.currentPosition.x,i.points[i.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=en(this.drawingObject.shape.points),this.inAction&&!1===Qi.equals(this.currentPosition,this.prevPosition))){var n=hn.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,n)}}return!0},t.prototype.mouseUp=function(t,i){this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},t}(wp),Lp=function(e){function t(t){return e.call(this,t,!0)||this}return yp(t,e),t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i=this.drawingObject;i.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(i)}return!0},t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=this.drawingObject,n=void 0;(n=new Ba(i,"segments",{type:"Straight"},!0)).point=this.currentPosition,i.segments[i.segments.length-1]=n}else{var r={id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject=this.commandHandler.drawObject(r)}},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&this.drawingObject){var i=this.drawingObject;i.segments[i.segments.length-1].point={x:0,y:0},this.commandHandler.addObjectToDiagram(this.drawingObject)}this.endAction()},t.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},t}(wp),Rp=function(e){function t(t){return e.call(this,t,!0)||this}return yp(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=xd(t.source),this.annotationId=t.sourceWrapper.id,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,r=t.source;if(r instanceof Lh){var o=pn();fn(o,-r.rotateAngle,0,0);var a=un(o,{x:i,y:n});i=a.x,n=a.y}return this.inAction&&(this.commandHandler.labelDrag(t.source,t.sourceWrapper,i,n),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=t.source;this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:xd(this.undoElement),category:"Internal",redoObject:xd(i)};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(wp),jp=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.corner=i,n}return yp(t,e),t.prototype.mouseDown=function(t){this.inAction=!0;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.annotationId=t.source.wrapper.children[0].id,this.undoElement=xd(i);var n=t.source.wrapper.children[0];this.initialBounds={x:n.offsetX,y:n.offsetY,width:n.actualSize.width,height:n.actualSize.height},e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),this.inAction&&this.resizeObject(t),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:xd(i),undoObject:xd(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.resizeObject=function(e){var t;t=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];var i,n,r=e.source.wrapper.children[0],o={x:r.offsetX,y:r.offsetY},a=r.rotateAngle;a=((a+=t instanceof Lh?t.rotateAngle:0)+360)%360;var s=pn();fn(s,a,o.x,o.y);var l=this.corner.slice(5),c=this.updateSize(r,this.startPosition,this.currentPosition,l,this.initialBounds,a),h=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y,p=this.getPivot(l),u=un(s,p={x:h+r.actualSize.width*p.x,y:d+r.actualSize.height*p.y});c.x=u.x,c.y=u.y,i=(i=c.width)<0?1:i,n=(n=c.height)<0?1:n,this.commandHandler.labelResize(t,e.source.annotation,i,n,c,e.source),this.commandHandler.updateSelector()},t}(wp),Np=function(e){function t(t){return e.call(this,t,!0)||this}return yp(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.annotationId=t.source.wrapper.children[0].id;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.undoElement=xd(i),e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),t.source&&this.inAction){var i,n=t.source.nodes[0]?t.source.nodes[0]:t.source.connectors[0];i=t.source.annotation,this.commandHandler.labelRotate(n,i,this.currentPosition,t.source),this.commandHandler.updateSelector()}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.inAction=!1;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0],n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:xd(i),undoObject:xd(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(wp),zp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bp=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.endPoint=i,n}return zp(t,e),t.prototype.mouseDown=function(t){var i,n=!0;if(t.source&&t.source.connectors&&(i=t.source.connectors[0]),t.info&&(n=t.info.ctrlKey&&"Orthogonal"!==t.actualObject.type),i&&n){this.inAction=!0,this.undoElement=xd(t.source),e.prototype.mouseDown.call(this,t);for(var r=0;r<i.segments.length;r++){var o=i.segments[r];if("OrthoThumb"===this.endPoint)for(var a=0;a<o.points.length-1;a++){var s={x:0,y:0};s.x=(o.points[a].x+o.points[a+1].x)/2,s.y=(o.points[a].y+o.points[a+1].y)/2,hp(this.currentPosition,s,30)&&(this.selectedSegment=o,this.segmentIndex=a)}else hp(this.currentPosition,o.point,10)&&(this.selectedSegment=o)}}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.y-this.prevPosition.y,n=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var r=void 0;if(t.source&&t.source.connectors&&(r=t.source.connectors[0]),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==n||0!==i)){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(r,this.selectedSegment,this.currentPosition,this.segmentIndex);else{var o=this.currentPosition.x-this.selectedSegment.point.x,a=this.currentPosition.y-this.selectedSegment.point.y,s=r.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(r,o,a,!1,s)}this.commandHandler.updateSelector()}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){var i,n;if(t.source&&t.source.connectors&&(n={segments:(i=t.source.connectors[0]).segments}),t&&t.source&&t.info&&t.info.ctrlKey&&t.info.shiftKey&&"Straight"===i.type)this.addOrRemoveSegment(i,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var r=i.segments.indexOf(this.selectedSegment),o=i.segments[r-1],a=i.segments[r+1];if(r===i.segments.length-2&&this.updateLastSegment(i,this.selectedSegment))i.segments.splice(i.segments.length-2,1);else if(o&&Math.abs(o.length)<5)1!==r&&this.removePrevSegment(i,r);else if(a){var s=Qi.distancePoints(a.points[0],a.points[1]),l=a.length||0===a.length?a.length:s;Math.abs(l)<=5&&this.removeNextSegment(i,r)}this.commandHandler.updateEndPoint(i,n)}if(this.undoElement){var c={type:"SegmentChanged",redoObject:xd(t.source),undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(c)}e.prototype.mouseUp.call(this,t)},t.prototype.removePrevSegment=function(e,t){var i=e.segments[t-2],n=e.segments[t+1];if(!((n.length||0===n.length?n.length:Qi.distancePoints(n.points[0],n.points[1]))<=5)){var r=e.segments.slice(t-1,t+1),o={element:e,removeSegments:r,type:"Removal",cancel:!1};if(w()&&(o={element:Vc(e),removeSegments:Vc(r),type:"Removal",cancel:o.cancel}),this.commandHandler.triggerEvent(Hn.segmentCollectionChange,o),!o.cancel){var a=e.segments[t+1];e.segments.splice(t-1,2);var s=this.selectedSegment;"Left"===s.direction||"Right"===s.direction?(i.points[i.points.length-1].x=a.points[0].x,a.points[0].y=i.points[i.points.length-1].y):(i.points[i.points.length-1].y=a.points[0].y,a.points[0].x=i.points[i.points.length-1].x),(s.length||0===s.length)&&this.findSegmentDirection(i),this.findSegmentDirection(a)}}},t.prototype.findSegmentDirection=function(e){e.direction&&(e.length||0===e.length)&&(e.length=Qi.distancePoints(e.points[0],e.points[e.points.length-1]),e.direction=Qi.direction(e.points[0],e.points[e.points.length-1]))},t.prototype.removeNextSegment=function(e,t){var i,n,r=this.selectedSegment,o=e.segments[t-1],a=e.segments[t+2],s=e.segments[t+1];if(s.length||0===s.length?(i=e.segments.slice(t,2),n={element:e,removeSegments:i,type:"Removal",cancel:!1},n={element:Vc(e),removeSegments:Vc(i),type:"Removal",cancel:!1},w()&&(n={element:Vc(e),removeSegments:Vc(i),type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(Hn.segmentCollectionChange,n),n.cancel||(e.segments.splice(t,2),"Top"===r.direction||"Bottom"===r.direction?(a.points[0].y=r.points[0].y,o.points[o.points.length-1].x=a.points[0].x):(a.points[0].x=r.points[0].x,o.points[o.points.length-1].y=a.points[0].y))):(i=e.segments.slice(t+1,1),n={element:e,removeSegments:i,type:"Removal",cancel:!1},w()&&(n={element:e,removeSegments:i,type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(Hn.segmentCollectionChange,n),n.cancel||(e.segments.splice(t+1,1),"Top"===r.direction||"Bottom"===r.direction?o.points[o.points.length-1].x=s.points[s.points.length-1].x:o.points[o.points.length-1].y=s.points[s.points.length-1].y,this.findSegmentDirection(o),r.length=r.direction=null)),o&&a&&!n.cancel&&(o.length=Qi.distancePoints(o.points[0],a.points[0]),o.direction=Qi.direction(o.points[0],a.points[0]),a.length||0===a.length)){a.length=Qi.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]);var l=o.points,c=a.points;a.direction=Qi.direction(l[l.length-1],c[c.length-1])}},t.prototype.addOrRemoveSegment=function(e,t){for(var i,n,r={segments:e.segments},o=0;o<e.segments.length;o++){hp(t,(a=e.segments[o]).point,e.hitPadding)&&(n=o,i=!0)}if(i&&void 0!==n){if(e.segments&&e.segments[n]&&"Straight"===e.segments[n].type){var a=e.segments[n],s=e.segments[n+1];s&&(e.segments.splice(n,1),s.points[0]=a.points[0])}}else{this.commandHandler.enableServerDataBinding(!1);var l=this.findIndex(e,t);if(e.segments&&e.segments[l]&&"Straight"===e.segments[l].type){a=e.segments[l];var c=new Ba(e,"segments",{type:"Straight",point:t},!0);c.points[0]=a.points[0],c.points[1]=t,a.points[0]=t,e.segments.splice(l,0,c),i=!0}this.commandHandler.enableServerDataBinding(!0)}i&&this.commandHandler.updateEndPoint(e,r)},t.prototype.findIndex=function(e,t){for(var i=[],n=0;n<e.segments.length;n++){var r=e.segments[n],o=hn.toBounds([r.points[0],r.points[1]]);o.Inflate(e.hitPadding),o.containsPoint(t)&&i.push(r)}if(1===i.length)return e.segments.indexOf(i[0]);var a=void 0,s=void 0,l=void 0,c=void 0,h=void 0,d=void 0;for(n=0;n<i.length;n++)c=i[n],h=(t.y-c.points[0].y)/(c.points[1].y-t.y),d=(t.x-c.points[0].x)/(c.points[1].x-t.x),a=Math.abs(h-d),0===n&&(s=a,l=0),a<s&&(s=a,l=n);return e.segments.indexOf(i[l])},t.prototype.dragOrthogonalSegment=function(e,t,i,n){var r={x:0,y:0},o={segments:e.segments};r.x=(t.points[n].x+t.points[n+1].x)/2,r.y=(t.points[n].y+t.points[n+1].y)/2;var a=i.y-r.y,s=i.x-r.x,l=e.segments.indexOf(t),c=!1;t.points[0].y.toFixed(2),t.points[1].y.toFixed(2);return-1!==l&&(0===l&&1===e.segments.length&&2===t.points.length?(l=this.addSegments(e,t,s,a,l),c=!0):l!==e.segments.length-1||null!==t.direction&&null!==t.length?0===l&&(l=this.insertFirstSegment(e,t,s,a,l),c=!0):(l=this.addTerminalSegment(e,t,s,a,n),c=!0),l&&(c&&(this.selectedSegment=t=e.segments[l],this.segmentIndex=0),this.updateAdjacentSegments(e,l,s,a),this.commandHandler.updateEndPoint(e,o))),!0},t.prototype.addSegments=function(e,t,i,n,r){var o,a,s,l=[],c=Qi.distancePoints(t.points[0],t.points[1]),h=Qi.direction(t.points[0],t.points[1]);l.push(new _a(e,"segments",{type:"Orthogonal",direction:h,length:c/4},!0)),a=t.points[0].y===t.points[1].y?n>0?"Bottom":"Top":i>0?"Right":"Left",s=t.points[0].x===t.points[1].x?n:i,l.push(new _a(e,"segments",{type:"Orthogonal",direction:a,length:s},!0)),l.push(new _a(e,"segments",{type:"Orthogonal",direction:h,length:c/2},!0));var d={element:e,addSegments:l,type:"Addition",cancel:!1};return w()&&(d={addSegments:Vc(l),type:"Addition",cancel:d.cancel,element:Vc(e)}),this.commandHandler.triggerEvent(Hn.segmentCollectionChange,d),d.cancel||(e.segments=l.concat(e.segments),o=r+2),o},t.prototype.insertFirstSegment=function(e,t,i,n,r){var o,a,s,l,c,h=[];if(e.sourcePortID&&t.length&&e.segments[0].points.length>2)for(var d=void 0,p=0;p<t.points.length-1;p++){var u=Qi.distancePoints(t.points[p],t.points[p+1]),f=Qi.direction(t.points[p],t.points[p+1]);0===(c=new _a(e,"segments",{type:"Orthogonal",direction:f,length:u},!0)).length&&(!d||"Top"!==d.direction&&"Bottom"!==d.direction?c.direction=n>0?"Bottom":"Top":c.direction=i>0?"Right":"Left"),d=c,h.push(c)}else s={type:"Orthogonal",direction:t.direction,length:t.length/3},h.push(new _a(e,"segments",s,!0)),"Bottom"===t.direction||"Top"===t.direction?(a=Math.abs(i),o=i>0?"Right":"Left"):(a=Math.abs(n),o=n>0?"Bottom":"Top"),c=new _a(e,"segments",{type:"Orthogonal",direction:o,length:a},!0),h.push(c);var g={element:e,addSegments:h,type:"Addition",cancel:!1};if(w()&&(g={element:Vc(e),addSegments:Vc(h),type:"Addition",cancel:g.cancel}),this.commandHandler.triggerEvent(Hn.segmentCollectionChange,g),!g.cancel){if(e.sourcePortID&&t.length&&e.segments[0].points.length>2)e.segments.splice(0,1),l=1;else{var m=e.segments[1];m&&m.length&&(m.length=o!==m.direction?m.length+a:m.length-a),l=2,t.length=2*t.length/3}e.segments=h.concat(e.segments)}return l},t.prototype.updateAdjacentSegments=function(e,t,i,n){var r=e.segments[t],o=r.points[r.points.length-1],a=r.points[0],s=!0;if("Orthogonal"===r.type&&(r.points[0]=a,r.points[r.points.length-1]=o,e.segments[t-1]&&(s=this.updatePreviousSegment(i,n,e,t)),e.segments.length-1>t&&s)){var l=e.segments[t+1];this.updateNextSegment(e,r,l,i,n)}},t.prototype.addTerminalSegment=function(e,t,i,n,r){e.segments;var o,a,s,l,c=e.segments.indexOf(t),h=[],d=e.segments.pop(),p=e.segments[e.segments.length-1];o=p&&"Orthogonal"===p.type?p:null;for(var u=0;u<t.points.length-2;u++)s=Qi.distancePoints(t.points[u],t.points[u+1]),l=Qi.direction(t.points[u],t.points[u+1]),a=new _a(e,"segments",{type:"Orthogonal",length:s,direction:l},!0),h.push(a),o=a;var f=r;if((2===t.points.length||f===t.points.length-2)&&(o&&(o.length+=5),void 0!==f)){var g;s=2*Qi.distancePoints(t.points[t.points.length-2],t.points[t.points.length-1])/3,l=Qi.direction(t.points[t.points.length-2],t.points[t.points.length-1]),g=new _a(e,"segments",{type:"Orthogonal",length:s,direction:l}),h.push(g)}var m=new _a(e,"segments",{type:"Orthogonal"},!0);h.push(m);var y,v=!1;return y={element:Vc(e),addSegments:Vc(h),type:"Addition",cancel:v},w()&&(y={element:Vc(e),addSegments:Vc(h),type:"Addition",cancel:v}),this.commandHandler.triggerEvent(Hn.segmentCollectionChange,y),y.cancel?e.segments.push(d):(e.segments=e.segments.concat(h),c+=r),this.commandHandler.updateEndPoint(e),c},t.prototype.updatePortSegment=function(e,t,i,n,r){if(1===i&&2===e.points.length&&e.length<0){var o=t.sourceWrapper.corners,a=t.segments[i],s=t.segments[i+1],l=void 0,c=[];l=new _a(t,"segments",{type:"Orthogonal",length:13,direction:e.direction}),c.push(l);var h=void 0;h="Left"===a.direction?a.points[0].x-(o.middleLeft.x-20):"Right"===a.direction?o.middleRight.x+20-a.points[0].x:"Bottom"===a.direction?o.bottomCenter.y+20-a.points[0].y:a.points[0].y-(o.topCenter.y-20);a.direction;l=new _a(t,"segments",{type:"Orthogonal",length:h,direction:a.direction}),c.push(l),a.length=a.length-h,s&&s.length&&s.direction&&(s.direction===e.direction?s.length-=13:s.direction===vo(e.direction)&&(s.length+=13)),t.segments=c.concat(t.segments),this.selectedSegment=t.segments[3]}},t.prototype.updatePreviousSegment=function(e,t,i,n){var r=i.segments[n],o=i.segments[n-1];o.points[o.points.length-1]=r.points[0];var a=!i.sourceID||""!==i.sourcePortID,s=!0;return"Orthogonal"===o.type&&("Bottom"===o.direction?o.length+=t:"Top"===o.direction?o.length-=t:"Right"===o.direction?o.length+=e:o.length-=e,""!==i.sourcePortID&&o.length<0?this.updatePortSegment(o,i,n,e,t):i.sourceID&&""===i.sourcePortID&&o.length<0&&1===n&&(s=!1,this.updateFirstSegment(i,r)),a&&this.changeSegmentDirection(o)),s},t.prototype.changeSegmentDirection=function(e){e.length<0&&(e.direction=vo(e.direction),e.length*=-1)},t.prototype.updateNextSegment=function(e,t,i,n,r){t.points[t.points.length-1];i.points[0]=t.points[t.points.length-1],i&&"Orthogonal"===i.type&&(i.length||0===i.length)&&("Left"===i.direction||"Right"===i.direction?0!==n&&(i.length="Right"===i.direction?i.length-n:i.length+n,(i.length||0===i.length)&&this.changeSegmentDirection(i)):0!==r&&(i.length="Bottom"===i.direction?i.length-r:i.length+r,(i.length||0===i.length)&&this.changeSegmentDirection(i)))},t.prototype.updateFirstSegment=function(e,t){var i,n=e.segments.indexOf(t),r=!1,o=e.segments[n],a=e.segments[n-1],s={segments:e.segments};if(a.length<0&&e.sourceID){var l=e.sourceWrapper.corners,c=[],h=void 0,d=!1;this.changeSegmentDirection(o);var p=e.segments[n+1],u=e.segments[n+2];switch(p&&this.changeSegmentDirection(p),u&&this.changeSegmentDirection(u),a.direction){case"Top":case"Bottom":i=o.length>0&&"Left"===o.direction?l.middleLeft:l.middleRight,o.length>l.width/2?Math.abs(a.length)<l.height/2&&(a.length=Qi.distancePoints(l.center,a.points[a.points.length-1]),o.points[0].x=i.x,o.length=Qi.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].y=i.y,p.points[0].x=p.points[p.points.length-1].x="Right"===o.direction?i.x+20:i.x-20),r=!0,d=!0);break;case"Left":case"Right":i=o.length>0&&"Top"===o.direction?l.topCenter:l.bottomCenter,o.length>l.height/2?Math.abs(a.length)<l.width/2&&(a.length=Qi.distancePoints(l.center,a.points[a.points.length-1]),o.points[0].y=i.y,o.length=Qi.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].x=i.x,p.points[0].y=p.points[p.points.length-1].y="Bottom"===o.direction?i.y+20:i.y-20),r=!0,d=!0)}this.changeSegmentDirection(a),this.changeSegmentDirection(o),r&&(h={type:"Orthogonal",direction:o.direction,length:20},c.push(new _a(e,"segments",h,!0)),d&&(p&&p.direction&&p.length&&(p.length=Qi.distancePoints(p.points[0],p.points[p.points.length-1])),u&&u.direction&&u.length&&(u.length=Qi.distancePoints(p.points[p.points.length-1],u.points[u.points.length-1])),e.segments.splice(n-1,2)),e.segments=c.concat(e.segments)),this.selectedSegment=d?e.segments[n-1]:e.segments[n+1],this.commandHandler.updateEndPoint(e,s)}},t.prototype.updateLastSegment=function(e,t){if(e.targetID&&""===e.targetPortID){var i=void 0,n=void 0,r=void 0,o=void 0,a=e.targetWrapper.corners,s=t.points[0],l=t.points[t.points.length-1];return"Right"===t.direction||"Left"===t.direction?(i={x:s.x,y:s.y},n={x:"Left"===t.direction?l.x-a.width/2:l.x+a.width/2,y:l.y},r={x:a.center.x,y:a.center.y-a.height},o={x:a.center.x,y:a.center.y+a.height}):(i={x:s.x,y:s.y},n={x:l.x,y:"Bottom"===t.direction?l.y+a.height/2:l.y-a.height/2},r={x:a.center.x-a.width,y:a.center.y},o={x:a.center.x+a.width,y:a.center.y}),Ql({x1:i.x,y1:i.y,x2:n.x,y2:n.y},{x1:r.x,y1:r.y,x2:o.x,y2:o.y}).enabled}return!1},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ConnectorEditingTool"},t}(wp),Hp=function(){function e(e,t){this.currentAction="None",this.previousAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.keyArgs={},this.diagram=e,this.objectFinder=new _p,this.commandHandler=t}return Object.defineProperty(e.prototype,"action",{get:function(){return this.currentAction},set:function(e){e!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~An.DrawOnce,this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===e||"LabelRotate"===e?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=e,"None"===this.currentAction||"Select"===this.currentAction||this.diagram.diagramActions&jn.TextEdit?this.diagram.diagramActions=this.diagram.diagramActions&~jn.ToolAction:this.diagram.diagramActions=this.diagram.diagramActions|jn.ToolAction,this.diagram.setCursor(this.diagram.getCursor(e,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blocked",{get:function(){return this.isBlocked},set:function(e){this.isBlocked=e,this.blocked?this.diagram.setCursor("not-allowed"):this.diagram.setCursor(this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),e.prototype.getMousePosition=function(e){var t,i,n;-1!==e.type.indexOf("touch")?(i=(t=e).changedTouches[0].clientX,n=t.changedTouches[0].clientY):(i=e.clientX,n=e.clientY);var r=new Zi;r=rs(this.diagram);var o=this.diagram.element.getBoundingClientRect();return i=i+this.diagram.diagramCanvas.scrollLeft-o.left-r.width,n=n+this.diagram.diagramCanvas.scrollTop-o.top-r.height,i/=this.diagram.scroller.transform.scale,n/=this.diagram.scroller.transform.scale,{x:i-=this.diagram.scroller.transform.tx,y:n-=this.diagram.scroller.transform.ty}},e.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout((function(){t.updateViewPortSize(t.diagram.element)}),300),!1},e.prototype.updateViewPortSize=function(e){var t=document.getElementById(e.id);if(t){var i=t.getBoundingClientRect();this.diagram.scroller.setViewPortSize(i.width,i.height);var n=new Zi;n=rs(this.diagram);var r=this.diagram.getSizeValue(this.diagram.width,n.width),o=this.diagram.getSizeValue(this.diagram.height,n.height);this.diagram.diagramCanvas.style.width=r,this.diagram.diagramCanvas.style.height=o,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&is(this.diagram)}},e.prototype.canHideResizers=function(){return(this.tool instanceof Cp||this.tool instanceof Pp)&&this.isMouseDown},e.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var e=[];e=e.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=this.isMouseDown&&1===e.length&&this.tool instanceof xp&&!ls(e[0])}},e.prototype.isForeignObject=function(e,t){var i=e;if(i)for(;null!==i.parentNode;){if("string"===typeof i.className&&(!t&&-1!==i.className.indexOf("foreign-object")||t&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},e.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},e.prototype.renderUmlHighLighter=function(e){this.diagram.commandHandler.removeStackHighlighter();var t=this.diagram.selectedItems.nodes[0];if(t&&t.container&&"Stack"===t.container.type&&"UmlClassifier"===t.shape.type&&!t.wrapper.bounds.containsPoint(this.currentPosition)){var i=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(n&&n.parentId&&n.parentId===t.id){var r="Vertical"===this.diagram.nameTable[n.parentId].container.orientation;al(n.wrapper,r,e.position,this.diagram,!0)}}},e.prototype.isDeleteKey=function(e,t){return navigator.platform.match("Mac")&&"Backspace"===e&&"delete"===t},e.prototype.isMouseOnScrollBar=function(e){var t,i,n,r,o=e.offsetX,a=e.offsetY,s=this.diagram.diagramCanvas,l=s.offsetHeight,c=s.offsetWidth;return!!(l<s.scrollHeight&&(t={x:c-17,y:0},i={x:c,y:0},n={x:c-17,y:l},r={x:c,y:l},hn.toBounds([t,i,n,r]).containsPoint({x:o,y:a})))||!!(c<s.scrollWidth&&(t={x:0,y:l-17},i={x:c,y:l-17},n={x:0,y:l},r={x:c,y:l},hn.toBounds([t,i,n,r]).containsPoint({x:o,y:a})))},e.prototype.updateVirtualization=function(){var e,t=this;e=setInterval((function(i){t.diagram.removeVirtualObjects(e)}),50),setTimeout((function(){t.diagram.deleteVirtualObject=!0}),50)},e.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var e=0;e<this.diagram.selectedItems.userHandles.length;e++)this.previousAction&&this.diagram.selectedItems.userHandles[e]&&(this.checkUserHandleEvent(Hn.onUserHandleMouseLeave),this.previousAction="None")},e.prototype.checkUserHandleEvent=function(e){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var t=e===Hn.onUserHandleMouseLeave?this.previousAction:this.action,i={element:void 0},n=0;n<this.diagram.selectedItems.userHandles.length;n++)if(t===this.diagram.selectedItems.userHandles[n].name||e===Hn.onUserHandleMouseUp&&"Select"===t){i.element=this.diagram.selectedItems.userHandles[n],e===Hn.onUserHandleMouseEnter&&(this.previousAction=this.action),e===Hn.onUserHandleMouseDown&&(this.userHandleObject=this.diagram.selectedItems.userHandles[n].name);var r=document.getElementById(this.diagram.selectedItems.userHandles[n].name+"_userhandle");e===Hn.onUserHandleMouseUp?this.commandHandler.isUserHandle(this.currentPosition)&&r&&r.id===this.userHandleObject+"_userhandle"&&this.diagram.triggerEvent(e,i):this.diagram.triggerEvent(e,i)}},e.prototype.mouseDown=function(e){var t;if(this.focus=!0,t=e.touches,this.isMouseOnScrollBar(e))return this.isScrolling=!0,void e.preventDefault();if(this.checkUserHandleEvent(Hn.onUserHandleMouseDown),!this.checkEditBoxAsTarget(e)&&Ts(this.diagram)||Cs(this.diagram)&&!Es(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,xn.Hover,!0),!(this.tool instanceof Dp||this.tool instanceof Lp)||2!==e.button&&2!==e.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof Dp||this.tool instanceof Lp))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(e)&&(this.diagram.endEdit(),this.diagram.textEditing=!1);var i=void 0,n=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),r=this.objectFinder.findObjectUnderMouse(this.diagram,n,this.action,this.inAction,this.eventArgs,this.currentPosition),o=null;null!==r&&(o=this.diagram.findElementUnderMouse(r,this.currentPosition))&&(i=this.commandHandler.findTarget(o,r)),this.action=this.diagram.findActionToBeDone(r,o,this.currentPosition,i);var a=this.isMetaKey(e);if(a&&e.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!a&&!e.shiftKey||Cs(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),a||e.shiftKey){var s=a&&e.shiftKey?{ctrlKey:a,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=s}this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===e.type&&(t&&t.length>=2&&(this.touchStartList=sd(this.touchStartList,0,t)),t||e.preventDefault())}else{Vc(this.diagram),Vc(this.currentPosition),e.buttons,Vc(this.eventArgs.actualObject),0===e.button||e.button;this.inAction=!1,this.tool.mouseUp(this.eventArgs)}this.isForeignObject(e.target)||this.isForeignObject(e.target,!0)||t||e.preventDefault()},e.prototype.mouseMoveExtend=function(e,t){(this.tool instanceof Dp||this.tool instanceof Lp)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(e):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var i=!(this.eventArgs.target instanceof Lh&&t instanceof Lh);this.tool instanceof Sp&&this.diagram.updatePortVisibility(this.hoverElement instanceof Lh?this.hoverElement:this.hoverNode,xn.Connect|xn.Hover,i),this.hoverElement instanceof Lh&&this.hoverNode instanceof Lh&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,xn.Connect|xn.Hover,!0),this.hoverElement=i?null:t,this.hoverNode=i?null:t},e.prototype.checkAction=function(e){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof or||this.eventArgs.sourceWrapper instanceof Ta)){var t=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!up(this.diagram,t,!1,this.eventArgs.sourceWrapper)&&ls(t)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else ls(e)&&ss(e)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!up(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof Hh&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),e instanceof $a&&(!(e instanceof $a)||hp(this.currentPosition,e.sourcePoint,e.hitPadding)||hp(this.currentPosition,e.targetPoint,e.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},e.prototype.isSwimlaneElements=function(e){return!e||!(e.isLane||e.isPhase||e.isHeader)},e.prototype.mouseMove=function(e,t){var i,n;if(this.focus=!0,this.isScrolling)e.preventDefault();else if(Ts(this.diagram)||Cs(this.diagram)&&!Es(this.diagram)){this.currentPosition=this.getMousePosition(e);var r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction);i=this.diagram,n=this.currentPosition,i.rulerSettings.showRulers&&(i.hRuler.drawRulerMarker(i.hRuler.element,n,i.scroller.horizontalOffset),i.vRuler.drawRulerMarker(i.vRuler.element,n,i.scroller.verticalOffset));var a=!1,s=void 0;if("touchmove"===e.type&&(t=e.touches)&&t.length>1&&(this.touchMoveList=sd(this.touchMoveList,0,t),"PinchZoom"!==this.action&&(a=!0)),!1===Qi.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||a){this.eventArgs={};var l=null;if(null!==o){if(l=this.diagram.findElementUnderMouse(o,this.currentPosition),o!==this.hoverElement){var c=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==c&&this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,xn.Hover,!0),o instanceof Lh&&(this.hoverNode=o);var h=!0;!this.isSwimlaneElements(o)&&this.hoverElement&&this.isSwimlaneElements(this.hoverElement)&&(h=!1),this.hoverElement=h?o:this.hoverElement,h?this.elementEnter(this.currentPosition,!1):this.hoverElement=o}else this.hoverElement||this.hoverElement!==o||this.elementEnter(this.currentPosition,!0);l&&(s=this.commandHandler.findTarget(l,o))}this.action=this.diagram.findActionToBeDone(o,l,this.currentPosition,s),this.checkUserHandleEvent(Hn.onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof Tp||this.tool instanceof Lp||this.tool instanceof Dp?this.tool.mouseMove(this.eventArgs):t&&this.tool instanceof kp&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var d=!1;(!this.hoverElement||this.tool instanceof kp||!(o instanceof Lh)||!this.isSwimlaneElements(o)||0!==this.diagram.selectedItems.nodes.length&&up(this.diagram,this.hoverElement))&&(d=!0),this.diagram.updatePortVisibility(this.hoverElement,xn.Hover,d);var p=this.getContent();null===o&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&p&&(this.hoverElement=null,this.elementLeave()),a=!1}else{if(this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!up(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof Hh&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),e.ctrlKey||e.shiftKey){var u=e.ctrlKey&&e.shiftKey?{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=u}this.checkAction(o);var f=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,f),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|jn.Interactions),this.mouseMoveExtend(e,o)}this.prevPosition=this.currentPosition,this.isForeignObject(e.target,!0)||e.preventDefault()}}},e.prototype.getContent=function(){return this.hoverElement instanceof Lh&&this.hoverElement.constraints&En.Tooltip||this.hoverElement instanceof $a&&this.hoverElement.constraints&Pn.Tooltip?this.hoverElement.tooltip.content:this.diagram.tooltip.content},e.prototype.checkAutoScroll=function(e){var t=this.startAutoScroll(e);if(!t&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(t){if((this.tool instanceof Cp||this.tool instanceof Op||this.tool instanceof xp)&&this.inAction){var i=this;this.diagram.scrollSettings.canAutoScroll&&t&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval((function(n){i.doAutoScroll(t,e,100)}),100))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},e.prototype.mouseUp=function(e){var t;if(this.checkUserHandleEvent(Hn.onUserHandleMouseUp),"SVG"===this.diagram.mode&&ws(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Nn.DrawSelectorBorder),t=e.touches,this.isScrolling)return this.isScrolling=!1,void e.preventDefault();if(!this.checkEditBoxAsTarget(e)&&Ts(this.diagram)||Cs(this.diagram)&&!Es(this.diagram)){if(this.tool&&(!(this.tool instanceof Dp||this.tool instanceof Lp)||(this.tool instanceof Dp||this.tool instanceof Lp)&&2===e.detail)){if(!this.isForeignObject(e.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction),r=!0;!e.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===e.which&&!(this.diagram.diagramActions&jn.PreventClearSelection)&&(r=!1,this.commandHandler.clearSelection()),up(this.diagram,n)&&r||this.commandHandler.selectObjects([n])}var o=this.updateContainerProperties(),a=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(e),this.diagram.selectedObject.helperObject&&(a=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof Mp)){this.eventArgs.position=this.currentPosition;var s=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,s);var l=this.isMetaKey(e);if(l||e.shiftKey){var c=l&&e.shiftKey?{ctrlKey:l,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=c}if(this.diagram.diagramActions&jn.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~jn.Interactions),this.eventArgs.clickCount=e.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof Cp||this.tool instanceof Op)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var h=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);h&&h.isLane&&(this.commandHandler.isContainer=!0)}this.tool.mouseUp(this.eventArgs,o.isPreventHistory)}else this.tool.mouseUp(this.eventArgs),!this.diagram.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.diagram.contextMenuModule.contextMenu.open(e.pageY,e.pageX,this.diagram.element),this.diagram.checkMenu=!1);o.hasStack&&this.diagram.endGroupAction()}if(a&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),2!==this.eventArgs.clickCount&&this.commandHandler.updateSelectedNodeProperties(this.eventArgs.source),this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.blocked=!1,this.hoverElement){var d=xn.Connect;up(this.diagram,this.hoverElement)&&(d|=xn.Hover),this.diagram.updatePortVisibility(this.hoverElement,d,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof Ip||(this.tool=null)}t||e.preventDefault(),this.diagram.currentDrawingObject=void 0;var p=this.diagram.selectedItems,u=!1;if(this.commandHandler.isUserHandle(this.currentPosition)&&this.isForeignObject(e.target)&&(u=!0),!this.inAction&&p.wrapper&&p.userHandles.length>0&&!u&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var f={element:Vc(this.eventArgs.source)||Vc(this.diagram),position:Vc(this.eventArgs.position),count:e.detail,actualObject:Vc(this.eventArgs.actualObject),button:0===e.button?"Left":1===e.button?"Middle":"Right"};w()&&this.diagram.click&&(f=this.getBlazorClickEventArgs(f)),this.diagram.triggerEvent(Hn.click,f)}this.eventArgs={}}this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},e.prototype.getConnectorPadding=function(e){var t,i=e.source;if(i&&i instanceof Hh&&i.connectors.length){var n=i.connectors[0];t=n.constraints&Pn.ConnectToNearByPort?n.connectionPadding:0}return t||0},e.prototype.getBlazorClickEventArgs=function(e){return e={element:this.eventArgs.source?{selector:Vc(this.eventArgs.source)}:{diagram:Vc(this.diagram)},position:Vc(this.eventArgs.position),count:e.count,actualObject:this.eventArgs.actualObject?{selector:Vc(this.eventArgs.actualObject)}:{diagram:Vc(this.diagram)},button:e.button},this.eventArgs.source instanceof Lh?(e.element.selector.nodes=[],e.element.selector.nodes.push(Vc(this.eventArgs.source))):this.eventArgs.source instanceof $a&&(e.element.selector.connectors=[],e.element.selector.connectors.push(Vc(this.eventArgs.source))),e},e.prototype.addSwimLaneObject=function(e){var t,i,n,r,o,a,s=0,l=e.shape,c=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(i||(i=this.diagram.findObjectUnderMouse(c,this.action,this.inAction)),this.diagram.clearSelectorLayer(),i&&!(i.isLane||i.isPhase||i.isHeader))for(var h=0;h<c.length;h++){var d=this.diagram.nameTable[c[h].id];(d.isLane||d.isPhase||d.isHeader)&&(i=d)}if(i&&(l.isPhase||l.isLane&&i.isLane)){var p=i.parentId;t=this.diagram.nameTable[p]}if(t&&(n=t.shape,o=l.isLane?l.orientation===n.orientation:l.orientation!==n.orientation),o&&i){if(n.header&&n.hasHeader&&"Horizontal"===n.orientation&&(s=1),n.phases.length>0&&(s+=1),l.isPhase){a="Horizontal"===n.orientation?this.currentPosition.x-t.wrapper.bounds.x:this.currentPosition.y-(t.wrapper.bounds.y+n.header.height);var u={id:md(),offset:a,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(t,[u])}else{l.lanes[0].header.height;var f={id:md(),style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}};"Horizontal"===l.orientation?f.height=l.lanes[0].height:f.width=l.lanes[0].width,"Horizontal"===n.orientation?(r=i.rowIndex?i.rowIndex:this.diagram.nameTable[i.parentId].rowIndex,i.wrapper.offsetY<this.currentPosition.y&&(r+=1)):(r=i.columnIndex?i.columnIndex:this.diagram.nameTable[i.parentId].columnIndex,this.currentPosition.x<i.wrapper.bounds.center.x&&(r-=1)),n.lanes.length>r-s?(f.header.width=n.lanes[r-s].header.width,f.header.height=n.lanes[r-s].header.height):(f.header.width=n.lanes[r-s-1].header.width,f.header.height=n.lanes[r-s-1].header.height),this.diagram.addLanes(t,[f],r-s)}this.commandHandler.select(t)}else if(l.isLane){var g={id:md(),width:e.width,height:e.height,addInfo:e.addInfo,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:l.lanes[0].header.style},phases:[{id:md(),header:{annotation:{content:"Phase"}}}],lanes:[{id:md(),height:e.height,width:e.width,style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}}],orientation:l.orientation}};"Vertical"===l.orientation&&(g.width+=20),g.offsetX=this.currentPosition.x+g.width/2,g.offsetY=this.currentPosition.y+g.height/2,this.diagram.add(g)}},e.prototype.mouseLeave=function(e){(this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject)&&(this.updateContainerProperties(),this.updateContainerBounds()&&this.diagram.endGroupAction());this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,xn.Hover,!0),this.hoverElement=null),this.tool instanceof Sp&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof Lh&&(this.diagram.updatePortVisibility(this.eventArgs.target,xn.Hover|xn.Connect,!0),this.hoverElement=null);var t=this.diagram.selectedItems;t&&t.wrapper&&this.diagram.renderSelector(!0),(this.diagram.diagramActions&jn.Interactions||this.diagram.diagramActions&jn.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~jn.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.elementLeave(),this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.tool=null,function(){var e,t,i=document.getElementsByClassName("e-d-ruler-marker");if(i&&i.length>0)for(t=i.length-1;t>=0;t--)(e=i[t])&&e.parentNode.removeChild(e)}(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),e.preventDefault()},e.prototype.mouseWheel=function(e){this.diagram.blazorActions=wn.interaction;var t=e.wheelDelta>0||-40*e.detail>0,i=this.getMousePosition(e);if(this.diagram.tooltipObject.close(),this.isMetaKey(e))this.diagram.zoom(t?1.2:1/1.2,i),e.preventDefault();else{var n=this.diagram.scroller.horizontalOffset,r=this.diagram.scroller.verticalOffset,o=t?20:-20;this.tool&&(this.tool instanceof Dp||this.tool instanceof Lp)&&(this.eventArgs={},this.getMouseEventArgs(i,this.eventArgs),this.eventArgs.position=i,this.tool.mouseWheel(this.eventArgs)),e.shiftKey?this.diagram.scroller.zoom(1,o,0,i):this.diagram.scroller.zoom(1,0,o,i),n===this.diagram.scroller.horizontalOffset&&r===this.diagram.scroller.verticalOffset||e.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var a=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(a,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}this.diagram.blazorActions=this.diagram.blazorActions&~wn.interaction},e.prototype.keyDown=function(e){if(!(this.diagram.diagramActions&jn.TextEdit)&&!this.checkEditBoxAsTarget(e)||"Escape"===e.key||27===e.keyCode){var t=void 0,i=e.keyCode?e.keyCode:e.which,n=e.key,r=this.isMetaKey(e);if(this.diagram.commandManager&&this.diagram.commands)for(var o=this.diagram.commands,a=0,s=Object.keys(o);a<s.length;a++){var l=s[a];if((t=this.diagram.commands[l])&&(t.gesture.keyModifiers||t.gesture.key)&&(i===t.gesture.key||n===Rn[t.gesture.key]||this.isDeleteKey(n,l))&&(!t.gesture.keyModifiers&&!e.altKey&&!e.shiftKey&&!r||t.gesture.keyModifiers&&(r||e.altKey||e.shiftKey)&&this.altKeyPressed(t.gesture.keyModifiers)&&e.altKey||this.shiftKeyPressed(t.gesture.keyModifiers)&&e.shiftKey||this.ctrlKeyPressed(t.gesture.keyModifiers)&&r)){var c=Ld(t.canExecute);if(w()||c&&c({keyDownEventArgs:KeyboardEvent,parameter:t.parameter})){if(e.preventDefault(),"Escape"===e.key)if(this.checkEditBoxAsTarget(e))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),ac(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id],this.diagram.droppable.sourceElement.draggable.intDestroy();var h=this.diagram.droppable.selectedSymbols;h.parentNode.removeChild(h);var d=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(d,jn.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Nn.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(d,jn.PreventClearSelection),this.isMouseDown=!1}else this.inAction&&this.diagram.drawingObject&&this.tool&&this.tool.inAction&&(this.tool.mouseUp(this.eventArgs),this.tool=null,this.isMouseDown=!1);if(t.execute)if(this.diagram.tool!==An.ZoomPan)Ld(t.execute)({keyDownEventArgs:KeyboardEvent,parameter:t.parameter});if(w()){var p={gesture:t.gesture};this.diagram.triggerEvent(Hn.commandExecute,p)}break}}}}this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.keyArgs={element:Vc(this.diagram.selectedItems),key:e.key,keyCode:e.keyCode?e.keyCode:e.which},this.getKeyModifier(this.keyArgs,e),this.diagram.diagramActions&jn.TextEdit&&this.getlabel(this.keyArgs,e),this.diagram.triggerEvent(Hn.keyDown,this.keyArgs)},e.prototype.getlabel=function(e,t){var i=this.diagram.activeLabel;e.target=this.diagram.element.id+"_editBox";var n=this.diagram.nameTable[i.parentId];if(document.getElementById(this.diagram.element.id+"_editBox")){e.text=document.getElementById(this.diagram.element.id+"_editBox").value;for(var r=0;r<n.annotations.length;r++)if(n.annotations[r].id===i.id){e.label=n.annotations[r];break}}},e.prototype.getKeyModifier=function(e,t){e.keyModifiers=Ln.None,t.ctrlKey&&(e.keyModifiers|=Ln.Control),t.shiftKey&&(e.keyModifiers|=Ln.Shift),t.altKey&&(e.keyModifiers|=Ln.Alt),this.isMetaKey(t)&&(e.keyModifiers|=Ln.Meta)},e.prototype.keyUp=function(e){this.keyArgs={element:Vc(this.diagram.selectedItems),key:e.key,keyCode:e.keyCode?e.keyCode:e.which};this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.getKeyModifier(this.keyArgs,e),this.diagram.diagramActions&jn.TextEdit&&this.getlabel(this.keyArgs,e),this.diagram.triggerEvent(Hn.keyUp,this.keyArgs)},e.prototype.startAutoScroll=function(e){var t=this.getMousePosition(e);t.x*=this.diagram.scroller.currentZoom,t.y*=this.diagram.scroller.currentZoom;var i,n=rs(this.diagram),r=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===le.info.name&&0===this.diagram.scroller.viewPortWidth){var o=document.getElementById(this.diagram.element.id).getBoundingClientRect();o.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(o.width,o.height)}return this.diagram.scrollSettings.canAutoScroll&&(t.x+this.diagram.scroller.horizontalOffset+r.right+n.width>=this.diagram.scroller.viewPortWidth-18?i="right":t.x+this.diagram.scroller.horizontalOffset<r.left?i="left":t.y+this.diagram.scroller.verticalOffset+r.bottom+n.height>this.diagram.scroller.viewPortHeight-18?i="bottom":t.y+this.diagram.scroller.verticalOffset<r.top&&(i="top")),i},e.prototype.doAutoScroll=function(e,t,i,n){var r=e;if((this.tool instanceof Cp||this.tool instanceof Op||this.tool instanceof xp)&&this.inAction){var o=this.getMousePosition(t),a=(this.diagram.scrollSettings.autoScrollBorder,0),s=0,l={x:o.x,y:o.y};switch(r){case"right":l.x=o.x+10,a=10;break;case"left":l.x=o.x-10,a=-10;break;case"bottom":l.y=o.y+10,s=10;break;case"top":l.y=o.y-10,s=-10}this.eventArgs.position={x:l.x,y:l.y},this.currentPosition=this.eventArgs.position;var c=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);this.eventArgs.target=this.diagram.findObjectUnderMouse(c,this.action,this.inAction),this.tool.mouseMove(this.eventArgs),this.diagram.scroller.zoom(1,-a,-s,o)}},e.prototype.mouseEvents=function(){for(var e=this.diagram.findObjectsUnderMouse(this.currentPosition),t=0;t<e.length;t++)this.eventArgs.actualObject===e[t]&&e.splice(t,1);var i={targets:{}};if(w()||(i={targets:Vc(e),element:Vc(this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source),actualObject:Vc(this.eventArgs.actualObject)}),w()&&(this.diagram.mouseEnter||this.diagram.mouseOver)&&(i.actualObject=Rc(this.eventArgs.actualObject)===$a?{connector:Vc(this.eventArgs.actualObject)}:{node:Vc(this.eventArgs.actualObject)},i.targets.connector=[],i.targets.node=[],this.getBlazorCollectionObject(e,i)),this.lastObjectUnderMouse&&this.diagram.mouseLeave&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var n={targets:void 0,element:Vc(this.lastObjectUnderMouse),actualObject:void 0};w()&&(n={targets:void 0,element:Rc(this.lastObjectUnderMouse)===$a?{connector:Vc(e)}:{node:Vc(this.lastObjectUnderMouse)},actualObject:void 0}),this.diagram.triggerEvent(Hn.mouseLeave,n),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,void 0!==this.eventArgs.actualObject&&this.diagram.triggerEvent(Hn.mouseEnter,i)),this.eventArgs.actualObject&&this.diagram.triggerEvent(Hn.mouseOver,i)},e.prototype.getBlazorCollectionObject=function(e,t){if(e)for(var i=0;i<e.length;i++)Rc(e[i])===$a?t.targets.connector.push(Vc(e[i])):t.targets.node.push(Vc(e[i]))},e.prototype.elementEnter=function(e,t){if(!t){var i=this.hoverElement instanceof Lh&&this.hoverElement.constraints&En.Tooltip||this.hoverElement instanceof $a&&this.hoverElement.constraints&Pn.Tooltip,n=this.getContent();"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&function(e,t){var i=e.tooltipObject;va(t?t.tooltip:e.tooltip,i)}(this.diagram,i?this.hoverElement:void 0);var r=ic(this.diagram,e,this.hoverElement);"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.offsetX=r.x,this.diagram.tooltipObject.offsetY=r.y,this.diagram.tooltipObject.dataBind()),function(e,t){var i=0;return e instanceof $a?e.constraints&Pn.Tooltip?i=e.constraints&Pn.Tooltip:e.constraints&Pn.InheritTooltip&&(i=t.constraints&kn.Tooltip):e.constraints&En.Tooltip?i=e.constraints&En.Tooltip:e.constraints&En.InheritTooltip&&(i=t.constraints&kn.Tooltip),i}(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&this.diagram.tooltipObject.open(this.diagram.element)}},e.prototype.elementLeave=function(){this.diagram.tooltipObject.close()},e.prototype.altKeyPressed=function(e){return!!(e&Ln.Alt)},e.prototype.ctrlKeyPressed=function(e){return!!(e&Ln.Control)},e.prototype.shiftKeyPressed=function(e){return!!(e&Ln.Shift)},e.prototype.scrolled=function(e){this.diagram.updateScrollOffset(),w()&&this.diagram.realActions&zn.OverViewAction&&this.diagram.setBlazorDiagramProps(!1)},e.prototype.doubleClick=function(e){if(Ts(this.diagram)){var t=void 0,i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(null!==n&&Ts(this.diagram)){if(t=this.diagram.findElementUnderMouse(n,this.currentPosition),this.tool&&(this.tool instanceof Dp||this.tool instanceof Lp)){Vc(n)||Vc(this.diagram),this.currentPosition,e.detail;this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,e.preventDefault()}else{var r=this.diagram.commandHandler.getObjectLayer(n.id);if(r&&!r.lock&&r.visible&&!(this.diagram.diagramActions&jn.TextEdit)){var o="";"TextAnnotation"===n.shape.shape&&(o=n.wrapper.children[1].id.split("_")[1]),this.diagram.startTextEdit(n,o||(t instanceof or?t.id.split(n.id+"_")[1]:void 0))}}}var a={source:Vc(n)||Vc(this.diagram),position:this.currentPosition,count:e.detail};if(w()){var s=void 0;s=n instanceof Lh?{nodes:[Vc(n)]}:n instanceof $a?{connectors:[Vc(n)]}:Vc(n),a={source:n?{selector:s}:{diagram:Vc(this.diagram)},position:this.currentPosition,count:e.detail}}this.diagram.triggerEvent(Hn.doubleClick,a)}},e.prototype.itemClick=function(e,t){var i=e;return el(this.diagram,i,!0)?i:null},e.prototype.inputChange=function(e){var t,i,n,r,o,a,s,l,c,h=document.getElementById(this.diagram.element.id+"_editBox"),d=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),p=h.value,u=p.split("\n");(!(r=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0])&&this.tool instanceof Ip||r&&"SwimLane"===r.shape.type)&&(r=this.diagram.nameTable[this.diagram.activeLabel.parentId]),r&&("Text"!==r.shape.type&&r.annotations.length>0||"Text"===r.shape.type)&&(n=this.diagram.getWrapper(r.wrapper,this.diagram.activeLabel.id),t=(t=r.wrapper.bounds.width<n.bounds.width?r.wrapper.bounds.width:n.bounds.width)>90?t:90,s=Fh(n.style,p,void 0,void 0,t),i=Number(h.style.fontSize.split("px")[0]),u.length>1&&""===u[u.length-1]&&(s.height=s.height+i),l=this.diagram.scroller.transform,c=Is(this.diagram)?l.scale:1,a=(90>(a=s.width)?90:a)*c,o=(12>s.height?12:s.height)*c,d.style.left=(n.bounds.center.x+l.tx)*l.scale-a/2-2.5+"px",d.style.top=(n.bounds.center.y+l.ty)*l.scale-o/2-3+"px",d.style.width=a+"px",d.style.height=o+"px",h.style.minHeight="12px",h.style.minWidth="90px",h.style.width=a+"px",h.style.height=o+"px")},e.prototype.isAddTextNode=function(e,t){return!!(this.tool instanceof Ip||t)&&(this.tool=null,e&&!Ps(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),!(Ic(this.diagram.nodes,e.id)||Ic(this.diagram.connectors,e.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e)>-1))},e.prototype.checkEditBoxAsTarget=function(e){return!(!e.target||e.target.id!==this.diagram.element.id+"_editBox")},e.prototype.getMouseEventArgs=function(e,t,i,n){var r,o,a;if(t.position=e,i?(o=this.diagram.findObjectsUnderMouse(this.currentPosition,i),r=this.diagram.findTargetObjectUnderMouse(o,this.action,this.inAction,t.position,i)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(r=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&r&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction))):(o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction)),r&&r.isHeader&&(r=this.diagram.nameTable[r.parentId],this.eventArgs.actualObject=r),r){var s=void 0,l=void 0,c=void 0;if(((a=this.diagram.findElementUnderMouse(r,this.currentPosition,n))&&r.ports&&r.ports.length&&!_c(r,a)||!a||!r)&&o&&o.length&&i instanceof Hh)for(s=i.connectors[0],c=o.length-1;c>=0;c--)if((l=o[c])instanceof Lh&&s&&s.connectionPadding){if(r=l,a=this.diagram.findElementUnderMouse(r,this.currentPosition,n),s.constraints&Pn.ConnectToNearByPort&&r&&r.ports&&r.ports.length&&_c(r,a))break;if(l instanceof Lh&&s&&s.connectionPadding&&l.wrapper.outerBounds.containsPoint(this.currentPosition)&&s.constraints&Pn.ConnectToNearByNode&&!(s.constraints&Pn.ConnectToNearByPort)){r=l,a=this.diagram.findElementUnderMouse(r,this.currentPosition,0);break}}}return i?(t.target=r,t.targetWrapper=a):(t.source=r,t.sourceWrapper=a),t.actualObject=this.eventArgs.actualObject,t.startTouches=this.touchStartList,t.moveTouches=this.touchMoveList,t},e.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},e.prototype.getTool=function(e){switch(e){case"Select":return new xp(this.commandHandler,!0);case"Drag":return new Cp(this.commandHandler);case"Rotate":return new Pp(this.commandHandler);case"LayoutAnimation":return new Ap(this.commandHandler);case"Hyperlink":return new Mp(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Op(this.commandHandler,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new Sp(this.commandHandler,e);case"SegmentEnd":case"OrthoThumb":return new Bp(this.commandHandler,e);case"Draw":var t=function(e){var t;return e&&(e.type?t="Connector":e.shape&&!e.type&&(t="Node")),t}(this.diagram.drawingObject);if("Node"===t&&"Text"===this.diagram.drawingObject.shape.type)return new Ip(this.commandHandler);if("Node"===t&&("Polygon"===this.diagram.drawingObject.shape.shape||w()&&"Polygon"===this.diagram.drawingObject.shape.basicShape)&&!this.diagram.drawingObject.shape.points)return new Dp(this.commandHandler);if("Node"===t||"Node"===t&&"Polygon"===this.diagram.drawingObject.shape.shape&&this.diagram.drawingObject.shape.points)return new Ep(this.commandHandler,this.diagram.drawingObject);if("Connector"===t&&"Polyline"===this.diagram.drawingObject.type)return new Lp(this.commandHandler);if("Connector"===t)return new Tp(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new kp(this.commandHandler,!1);case"PinchZoom":return new kp(this.commandHandler,!0);case"PortDrag":return new Cp(this.commandHandler,"Port");case"PortDraw":return new Tp(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new xp(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new Rp(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new jp(this.commandHandler,e);case"LabelRotate":return new Np(this.commandHandler)}return null},e.prototype.getCursor=function(e){var t=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems;return function(e,t){if(t+=360,t%=360,-1===e.indexOf("Resize"))return gp[e];var i=gp[e];return t>=0&&t<25||t>=160&&t<=205||t>=340&&t<=360?i:t>=25&&t<=70||t>=205&&t<=250?"n-resize"===i||"s-resize"===i?"ne-resize":"nw-resize"===i||"se-resize"===i?"n-resize":"e-resize"===i||"w-resize"===i?"nw-resize":"e-resize":t>=70&&t<=115||t>=250&&t<=295?"n-resize"===i||"s-resize"===i?"e-resize":"nw-resize"===i||"se-resize"===i?"ne-resize":"e-resize"===i||"w-resize"===i?"n-resize":"nw-resize":t>=115&&t<=155||t>=295&&t<=340?"n-resize"===i||"s-resize"===i?"nw-resize":"nw-resize"===i||"se-resize"===i?"e-resize":"e-resize"===i||"w-resize"===i?"ne-resize":gp[e]:"n-resize"}(e,this.diagram.selectedItems.annotation?t.rotateAngle+t.parentTransform:t.rotateAngle)},e.prototype.findElementUnderMouse=function(e,t,i){return this.objectFinder.findElementUnderSelectedItem(e,t,i)},e.prototype.findObjectsUnderMouse=function(e,t){return this.objectFinder.findObjectsUnderMouse(e,this.diagram,this.eventArgs,t)},e.prototype.findObjectUnderMouse=function(e,t,i){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,i,this.eventArgs,this.currentPosition)},e.prototype.findTargetUnderMouse=function(e,t,i,n,r){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,i,this.eventArgs,n,r)},e.prototype.findActionToBeDone=function(e,t,i,n){return cp(e,t,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,n)},e.prototype.updateContainerBounds=function(e){var t=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject instanceof Lh){var i=this.tool instanceof Op,n=this.diagram.selectedObject.actualObject,r=this.diagram.nameTable[n.parentId];e?Qs(this.diagram,n,this.currentPosition,i):((!r||r&&"SwimLane"!==r.shape.type)&&this.diagram.updateDiagramObject(n),t=function(e,t,i,n){var r,o=!1;if(el(e,t,!0)){e.protectPropertyChange(!0);var a=(r=e.nameTable[t.parentId]).wrapper;if(r&&"Canvas"===r.container.type){if(n||a.bounds.x<=i.x&&a.bounds.right>=i.x&&a.bounds.y<=i.y&&a.bounds.bottom>=i.y){var s=void 0,l=a.bounds.y,c=a.bounds.x,h=e.nameTable[r.parentId]||r;if("SwimLane"===h.shape.type)o=ol(r,h,t,e,!0);else{var d=e.nameTable[r.parentId]||r,p=d.shape;s=d.wrapper,a.actualSize.width<a.outerBounds.width&&!(a.bounds.x>a.outerBounds.x)&&(void 0!==r.rowIndex?(d.columns.length-1,s.updateColumnWidth(r.columnIndex,a.outerBounds.width,!0),"Horizontal"===p.orientation&&p.phaseSize&&Ol(d,e,a,r.columnIndex),El(e,d),e.drag(d,c-a.bounds.x,l-a.bounds.y)):e.scale(r,1+(a.outerBounds.width-a.actualSize.width)/a.actualSize.width,1,a.outerBounds.x<a.bounds.x?{x:1,y:.5}:{x:0,y:.5})),a.actualSize.height<a.outerBounds.height&&!(a.bounds.y>a.outerBounds.y)&&(void 0!==r.rowIndex?(s.updateRowHeight(r.rowIndex,a.outerBounds.height,!0),e.drag(d,c-a.bounds.x,l-a.bounds.y)):e.scale(r,1,1+(a.outerBounds.height-a.actualSize.height)/a.actualSize.height,a.outerBounds.y<a.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}e.select([t]),wl([],e)}e.protectPropertyChange(!1)}return o}(this.diagram,n,this.currentPosition,i),this.diagram.updateSelector(),(n.isLane||n.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.selectObjects([n])))}return t},e.prototype.updateContainerProperties=function(){var e,t,i,n,r=!1,o=!1,a={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var s=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(s,this.action,this.inAction);if(e=this.diagram.selectedObject.helperObject,(n=this.diagram.selectedObject.actualObject)instanceof Lh){if("SwimLane"===n.shape.type&&(i=ul(this.diagram,n.wrapper.children[0])),"SwimLane"!==n.shape.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l instanceof Lh&&this.diagram.getObject(l.parentId)&&"SwimLane"!==this.diagram.getObject(l.parentId).shape.type&&(l=this.diagram.getObject(l.parentId)),"Drag"===this.currentAction&&n.container&&"Canvas"===n.container.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l&&l!==n&&l.container&&"Canvas"===l.container.type&&l.isLane&&n.isLane&&l.parentId===n.parentId)xl(this.diagram,n,l,this.currentPosition),a.isPreventHistory=!0;else{var c=this.diagram.nameTable[n.parentId];if(!c||c&&"SwimLane"!==c.shape.type)if(c&&c.isLane&&n.constraints&En.AllowMovingOutsideLane){var h=this.diagram.getObject(c.parentId),d=h.id+h.shape.lanes[0].id+"0",p=this.diagram.getObject(d),u=p.wrapper.bounds.x,f=p.wrapper.bounds.y,g=h.wrapper.bounds.bottomRight.x-u,m=h.wrapper.bounds.bottomRight.y-f;new hn(u,f,g,m).containsPoint(this.currentPosition)&&(n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.width=e.width,n.height=e.height,n.rotateAngle=e.rotateAngle)}else n.offsetX=e.offsetX,n.offsetY=e.offsetY,n&&n.shape&&"UmlClassifier"!==n.shape.type&&("Bpmn"!==n.shape.type||"Bpmn"===n.shape.type&&"TextAnnotation"!==n.shape.shape)&&(n.width=e.width,n.height=e.height),n.rotateAngle=e.rotateAngle;var y=void 0;if(c&&c.container&&"Stack"===c.container.type&&(this.diagram.startGroupAction(),o=!0),!l&&c&&c.container&&"Stack"===c.container.type&&"Drag"===this.action){var v=c.wrapper.children.indexOf(n.wrapper);if(y={targetIndex:void 0,target:void 0,sourceIndex:v,source:xd(n)},v>-1){var b=c.children;b.splice(b.indexOf(n.id),1),this.diagram.nameTable[n.id].parentId="",t=!0,c.wrapper.children.splice(v,1)}}if(function(e,t,i,n){var r=e,o=i.nameTable[r.parentId],a=i.nameTable[r.parentId];if(t&&a&&a.container&&"Stack"===a.container.type&&t.container&&"Stack"===t.container.type&&a.id!==t.parentId){var s=a.wrapper.children.indexOf(r.wrapper);s>-1&&(i.nameTable[r.id].parentId=t.id,a.wrapper.children.splice(s,1))}if(t&&t.parentId&&r.parentId&&"Drag"===n&&a.container&&"Stack"===a.container.type){var l=o.wrapper.children.indexOf(t.wrapper),c=o.wrapper.children.indexOf(r.wrapper),h={targetIndex:l,target:t,sourceIndex:c,source:e};o.wrapper.children.splice(c,1),o.wrapper.children.splice(l,0,r.wrapper);var d={type:"StackChildPositionChanged",redoObject:{targetIndex:c,target:t,sourceIndex:l,source:e},undoObject:h,category:"Internal"};i.commandHandler.addHistoryEntry(d)}}(n,l,this.diagram,this.action),(c=el(this.diagram,n)?this.diagram.nameTable[n.parentId]:this.diagram.nameTable[n.parentId]||n)&&c.container&&"Canvas"===c.container.type&&(c.wrapper.maxWidth=c.maxWidth=c.wrapper.actualSize.width,c.wrapper.maxHeight=c.maxHeight=c.wrapper.actualSize.height,r=!0),el(this.diagram,n,!0)&&c&&"Canvas"===c.container.type?tl(this.diagram,n):a=this.updateContainerPropertiesExtend(c,n,i,e,a),this.diagram.lineRoutingModule&&this.diagram.constraints&kn.LineRouting&&!el(this.diagram,n,!0)&&(n.children&&(this.diagram.realActions|=zn.EnableGroupAction),this.diagram.nodePropertyChange(n,{},{width:n.width,height:n.height,offsetX:n.offsetX,offsetY:n.offsetY}),n.children&&(this.diagram.realActions&=~zn.EnableGroupAction)),n.shape.lanes&&this.updateLaneChildNode(n),r&&(c.maxWidth=c.wrapper.maxWidth=void 0,c.maxHeight=c.wrapper.maxHeight=void 0),t){this.diagram.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY,width:c.width,height:c.height,rotateAngle:c.rotateAngle});var w={redoObject:{sourceIndex:void 0,source:y.source},type:"StackChildPositionChanged",undoObject:y,category:"Internal"};this.diagram.diagramActions&jn.UndoRedo||this.diagram.addHistoryEntry(w)}n&&n.container&&("Stack"===n.container.type||"Canvas"===n.container.type&&""===n.parentId)&&(n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!1))}wl(i,this.diagram),a.hasStack=o}}return n&&(n.isPhase||n.isLane||n.shape&&"SwimLane"===n.shape.type)&&this.diagram.updateDiagramElementQuad(),a},e.prototype.updateLaneChildNode=function(e){for(var t=0;t<e.shape.lanes.length;t++)if(e.shape.lanes[t].children&&e.shape.lanes[t].children.length>0)for(var i=0;i<e.shape.lanes[t].children.length;i++){var n=e.shape.lanes[t].children[i].id,r=this.diagram.nameTable[n];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY}},e.prototype.updateContainerPropertiesExtend=function(e,t,i,n,r){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===t.shape.type){var o=xd(t),a=!1;if(e&&e.container&&"Grid"===e.container.type){var s="SwimLane"===e.shape.type,l=s?e.wrapper.children[0]:e.wrapper,c=s?e.shape.padding:void 0,h=e.wrapper.bounds.x,d=e.wrapper.bounds.y;if(void 0!==t.columnIndex&&"Horizontal"===e.container.orientation&&(s&&t.isPhase||!s&&1===t.rowIndex)||"Vertical"===e.container.orientation&&(!s&&t.rowIndex>0&&t.columnIndex>0||s&&t.isLane)){if("Horizontal"===e.container.orientation&&t.isPhase&&t.wrapper.width>t.maxWidth&&(t.maxWidth=t.wrapper.width,t.wrapper.maxWidth=t.wrapper.width),Sl(this.diagram,t,e,n),l.updateColumnWidth(t.columnIndex,n.width,!0,c),t.isPhase){var p=e.shape.phases[t.columnIndex].header.id,u=this.diagram.nameTable[p];u.maxWidth<n.width&&(u.maxWidth=n.width,u.wrapper.maxWidth=n.width)}"SwimLane"===e.shape.type&&(e.width=e.width?l.width:e.width,El(this.diagram,e),e.wrapper.width=e.width,i=ul(this.diagram,l,t.rowIndex))}else void 0!==t.rowIndex&&(a=!0,Sl(this.diagram,t,e,n),l.updateRowHeight(t.rowIndex,n.height,!0,c),"SwimLane"===e.shape.type&&(e.height=e.height?l.height:e.height,e.wrapper.height=e.height,i=ul(this.diagram,l,t.rowIndex)));"SwimLane"===e.shape.type&&(r.isPreventHistory=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,rotateAngle:e.rotateAngle}),this.diagram.drag(e,h-e.wrapper.bounds.x,d-e.wrapper.bounds.y)}else t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,width:t.width,height:t.height,rotateAngle:t.rotateAngle}),t.wrapper.measureChildren=!1;if(t.wrapper.measure(new Zi(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var f={category:"Internal",type:a?"RowHeightChanged":"ColumnWidthChanged",undoObject:o,redoObject:xd(t)};this.diagram.addHistoryEntry(f)}}return wl(i,this.diagram),r},e.prototype.addUmlNode=function(){var e=this.diagram.selectedItems.nodes[0],t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(t,this.action,this.inAction);if(i||(t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(t,this.action,this.inAction)),e&&e.container&&"Stack"===e.container.type&&i&&i.parentId&&i.parentId===e.id){var n=i,r=Gh(this.diagram.element.id);if(r.getElementById(r.id+"_stack_highlighter")){var o=e.wrapper.children.indexOf(i.wrapper)+1;this.diagram.enableServerDataBinding(!1);var a=new Lh(this.diagram,"nodes",{style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},annotations:i.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(En.Default|En.HideThumbs)&~(En.Rotate|En.Drag|En.Resize),minHeight:25},!0);a.annotations[0].content=" + Name : Type";n.id.split("_");a.id=md()+a.id,a.parentId=e.id,a.zIndex=-1,a.umlIndex=o,this.diagram.startGroupAction();e.wrapper.children.indexOf(a.wrapper);this.diagram.enableServerDataBinding(!0),this.diagram.add(a),this.diagram.updateConnectorEdges(e),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[a.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},e}(),_p=function(){function e(){}return e.prototype.findObjectsUnderMouse=function(e,t,i,n,r){var o,a,s,l,c=[];n&&n instanceof Hh&&n.nodes.length+n.connectors.length===1&&(n=n.nodes[0]||n.connectors[0]).children&&0===n.children.length&&(i.actualObject=n);for(var h,d,p=n&&n instanceof $a&&(n.constraints&Pn.ConnectToNearByNode||n.constraints&Pn.ConnectToNearByPort)&&n.connectionPadding||0,u={},f=0,g=t.spatialSearch.findObjects(new hn(e.x-50-p,e.y-50-p,100+p,100+p));f<g.length;f++){var m=e;a=(E=g[f]).wrapper.outerBounds;var y=!E.rotateAngle&&a.containsPoint(m,p);if((E!==n||t.currentDrawingObject instanceof $a)&&E instanceof $a?E!==t.currentDrawingObject:E.wrapper.visible)if((C=t.commandHandler.getObjectLayer(E.id))&&!C.lock&&C.visible){if(h=u[C.zIndex]=u[C.zIndex]||[],E.rotateAngle){a=bd(o=E.wrapper);for(var v=0,b=o.children;v<b.length;v++)s=b[v],fn(l=pn(),-(s.rotateAngle+s.parentTransform),s.offsetX,s.offsetY),m=un(l,e),bd(s).containsPoint(m,p)&&(y=!0)}if((!n||!1===up(t,E))&&((d=E)instanceof $a?d.constraints&Pn.PointerEvents:d.constraints&En.PointerEvents)&&(E instanceof $a?$l(E,e):y)){var w=E instanceof $a&&E.hitPadding||0;this.findElementUnderMouse(E,e,p||w)&&"helper"!==E.id&&Ac(E,"zIndex",h)}}}for(var x=0,S=t.layers;x<S.length;x++)for(var C=S[x],P=0,O=c=c.concat(u[C.zIndex]||[]);P<O.length;P++){var E;if("Bpmn"===(E=O[P]).shape.type&&E.processId&&(!(t.eventHandler.tool instanceof Cp)||t.eventHandler.tool instanceof Cp&&bs(E)))(D=c.indexOf(t.nameTable[E.processId]))>-1&&c.splice(D,1);if("UmlClassifier"===E.shape.type&&E.container&&"Stack"===E.container.type)(D=c.indexOf(t.nameTable[t.nameTable[E.id].wrapper.children[0].id]))>-1&&c.splice(D,1)}for(var T=0;T<c.length;T++){var I=t.nameTable[c[T].parentId];if(I)for(var k=this.findElementUnderMouse(I,e),A=0;A<I.ports.length;A++)if(k.id.match("_"+I.ports[A].id+"$")){var M=I.ports[A];if(Ms(M)||As(M))return c}for(;I;){var D;if(-1===(D=c.indexOf(I)))break;c.splice(D,1),I=t.nameTable[I.parentId]}}if(i&&!i.source)for(T=0;T<c.length;T++){var L=t.nameTable[c[T].parentId];if(L&&"SwimLane"===L.shape.type)for(A=0;A<c.length;A++){c[A]instanceof $a&&c.splice(T,1)}}return c},e.prototype.isTarget=function(e,t,i){var n,r=t.selectedItems.connectors[0];if(!(n="ConnectorSourceEnd"===i?t.nameTable[r.targetID]:n=t.nameTable[r.sourceID])||(n.processId||e.processId)&&n.processId===e.processId||(n.processId!==e.processId&&(e=null),e&&e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])),"ConnectorSourceEnd"===i&&r.targetID){var o=t.nameTable[r.targetID];if(o&&o.shape&&"TextAnnotation"===o.shape.shape){var a=r.id.split("_");("Bpmn"===o.shape.type&&"Bpmn"!==e.shape.type||a[0]===e.id||"TextAnnotation"===e.shape.shape)&&(e=null),e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])}}return e},e.prototype.findObjectUnderMouse=function(e,t,i,n,r,o,a){var s,l,c=null;if(0!==t.length)if(a&&a instanceof Hh&&a.nodes.length+a.connectors.length===1&&(a=a.nodes[0]||a.connectors[0]),"ConnectorSourceEnd"===i&&a||"PortDraw"===i||(Os(e)||Ps(e))&&Rc(e.drawingObject)===$a)for(var h=e.selectedItems.connectors[0],d=t.length-1;d>=0;d--){l=Ec(t[d],!1),s=Ec(t[d],!0);var p=e.eventHandler.tool,u=this.findTargetElement(t[d].wrapper,o,void 0);if("Draw"===i&&u&&t[d]instanceof Lh&&!_c(t[d],u)&&(p&&"ConnectorSourceEnd"===p.endPoint&&!ms(t[d])||p&&"ConnectorTargetEnd"===p.endPoint&&!fs(t[d])))return c;if(t[d]instanceof Lh&&(ms(t[d])||ys(l)||fs(t[d])||gs(s)||"PortDraw"===i&&p instanceof Sp&&"ConnectorTargetEnd"==p.endPoint&&(fs(t[d])||gs(s))))return c=t[d],h&&(c=this.isTarget(c,e,i)),r.actualObject=c,c}else if("ConnectorTargetEnd"===i&&a){for(d=t.length-1;d>=0;d--)if(s=Ec(t[d],!0),t[d]instanceof Lh&&(fs(t[d])||gs(s)))return c=t[d],c=this.isTarget(c,e,i),r.actualObject=c,c}else{if(a&&("Drag"===i||e.eventHandler.tool instanceof Cp)){var f=0;for(d=0;d<t.length;d++){var g=t[d];a!==g&&(g instanceof $a||!o||g.wrapper.bounds.containsPoint(o))&&bs(g)&&(c?(c=f>=g.zIndex?c:g,f=Math.max(f,g.zIndex)):f=(c=g).zIndex)}return c&&"Bpmn"===c.shape.type&&(c=e.selectedItems.nodes.length>0&&"Bpmn"===e.selectedItems.nodes[0].shape.type?c:null),c&&(r.actualObject=c),c}if("Select"!==i&&"Pan"!==i||!e.eventHandler.tool)if("Pan"===i||"LayoutAnimation"===i){for(d=t.length-1;d>=0;d--)if(t[d]instanceof Lh||t[d]instanceof $a){var m=this.findTargetElement(t[d].wrapper,o,void 0);if("Pan"===i||m&&(m.id.match("_icon_content_shape$")||m.id.match("_icon_content_rect$")))return t[d]}}else c=t[t.length-1],r&&c&&(r.actualObject=c);else{for(var d=t.length-1;d>=0;d--)if(t[d]instanceof $a){var y=t[d-1];if(t[d-1]instanceof Lh&&y.ports){var v=this.findTargetElement(y.wrapper,o,void 0);if(v&&(v.id.match("_icon_content_shape$")||v.id.match("_icon_content_rect$")))return y;for(var b=0;b<y.ports.length;b++)if(v&&v.id.match("_"+y.ports[b].id+"$")&&As(y.ports[b]))return y}}if(c=t[t.length-1],r.actualObject=c,!e.eventHandler.itemClick(c,!0)&&c.parentId)for(var w=c,x=up(e,w);w&&(!up(e,w)||x);)c=w,w=e.nameTable[w.parentId]}}return c},e.prototype.findElementUnderSelectedItem=function(e,t,i){return e instanceof Hh?1!==e.nodes.length||e.connectors&&e.connectors.length?e.nodes&&!e.nodes.length||1!==e.connectors.length?null:this.findElementUnderMouse(e.connectors[0],t):this.findElementUnderMouse(e.nodes[0],t):this.findElementUnderMouse(e,t,i)},e.prototype.findElementUnderMouse=function(e,t,i){return this.findTargetElement(e.wrapper,t,i)},e.prototype.findTargetElement=function(e,t,i){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];if(r&&r.outerBounds.containsPoint(t,i||0)){if(r instanceof nr){var o=this.findTargetElement(r,t);if(o)return o}if(r.bounds.containsPoint(t,i||0))return r}}return e.bounds.containsPoint(t,i)&&"none"!==e.style.fill?e:null},e}(),Wp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fp=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Vp=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.objectZIndex=-1,o.zIndexTable={},o.objects=[],o}return Wp(t,e),Fp([zt("")],t.prototype,"id",void 0),Fp([zt(!0)],t.prototype,"visible",void 0),Fp([zt(!1)],t.prototype,"lock",void 0),Fp([zt()],t.prototype,"objects",void 0),Fp([zt()],t.prototype,"addInfo",void 0),Fp([zt(-1)],t.prototype,"zIndex",void 0),t}(ii),Up=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))},Yp=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Xp=function(){function e(e){this.clipboardData={},this.diagramObject={},this.newSelectedObjects={},this.oldSelectedObjects={},this.connectorsTable=[],this.processTable={},this.deepDiffer=new mp,this.isContainer=!1,this.childTable={},this.parentTable={},this.diagram=e}return Object.defineProperty(e.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),e.prototype.startTransaction=function(e){this.state={element:this.diagram.selectedItems,backup:null},e&&this.diagram.protectPropertyChange(!0),Zh(this.diagram.element.id).style.pointerEvents="none"},e.prototype.endTransaction=function(e){this.state=null,e&&this.diagram.protectPropertyChange(!1),Zh(this.diagram.element.id).style.pointerEvents="all"},e.prototype.setFocus=function(){document.getElementById(this.diagram.element.id).focus()},e.prototype.showTooltip=function(e,t,i,n,r){var o=this;if(r&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltip.relativeMode="ConnectTool"===n?"Mouse":"Object",this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var a=void 0,s=Ld(this.diagram.selectedItems.setTooltipTemplate);s&&(a=s(e,this.diagram)),i=a instanceof HTMLElement?a.cloneNode(!0):a||i}this.diagram.tooltipObject.content=i;var l=ic(this.diagram,{x:t.x,y:t.y},e);this.diagram.tooltipObject.offsetX=l.x+("ConnectTool"===n?10:0),this.diagram.tooltipObject.offsetY=l.y+10,this.diagram.tooltipObject.dataBind(),r&&setTimeout((function(){o.diagram.tooltipObject.open(o.diagram.element)}),1)},e.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},e.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&Cn.ToolTip)},e.prototype.updateSelector=function(){this.diagram.updateSelector()},e.prototype.updateConnectorValue=function(e){if(e.cancel){var t={},i={},n=this.diagram.nameTable[e.connector.id],r="ConnectorSourceEnd"===e.connectorEnd?"sourceID":"targetID",o="ConnectorSourceEnd"===e.connectorEnd?"sourcePortID":"targetPortID",a="ConnectorTargetEnd"===e.connectorEnd,s=a?e.newValue.connectorTargetValue:e.newValue.connectorSourceValue,l=a?e.oldValue.connectorTargetValue:e.oldValue.connectorSourceValue;i[r]=s.nodeId,i[o]=s.portId,t[r]=l.nodeId,t[o]=l.portId,e.cancel&&"ConnectorTargetEnd"!==e.connectorEnd&&(n.sourceID=l.nodeId,e.connector.sourcePortID&&(n.sourcePortID=l.portId),this.diagram.connectorPropertyChange(n,i,t)),e.cancel&&"ConnectorTargetEnd"===e.connectorEnd&&(e.connector.targetPortID&&(n.targetPortID=l.portId),n.targetID=l.nodeId,this.diagram.connectorPropertyChange(n,i,t))}},e.prototype.triggerEvent=function(e,t){return Up(this,void 0,void 0,(function(){return Yp(this,(function(i){switch(i.label){case 0:if(e===Hn.drop||e===Hn.positionChange||e===Hn.connectionChange){if(this.diagram.currentSymbol)return[2];if(e===Hn.drop&&(t.source=Vc(this.diagram)),this.diagram.currentDrawingObject&&e!==Hn.positionChange)return[2]}return[4,this.diagram.triggerEvent(e,t)];case 1:return[2,i.sent()]}}))}))},e.prototype.dragOverElement=function(e,t){if(this.diagram.currentSymbol){var i={element:Vc(e.source),target:Vc(e.target),mousePosition:Vc(t),diagram:Vc(this.diagram)};this.triggerEvent(Hn.dragOver,i)}},e.prototype.disConnect=function(e,t,i){var n,r,o=w(),a={},s={};if(e instanceof Hh?r=e.connectors[0]:e instanceof $a&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject),e&&r&&(pp(this.diagram)||this.diagram.currentDrawingObject))if(w()&&this.diagram.insertValue(xd(r),!1),!t||"ConnectorSourceEnd"!==t&&"ConnectorTargetEnd"!==t){if("OrthoThumb"!==t&&"SegmentEnd"!==t&&(r.sourceID||r.targetID)){a={sourceID:r.sourceID,sourcePortID:r.sourcePortID,targetID:r.targetID,targetPortID:r.targetPortID},r.sourceID="",r.sourcePortID="",r.targetID="",r.targetPortID="",s={sourceID:r.sourceID,sourcePortID:r.sourcePortID,targetID:r.targetID,targetPortID:r.targetPortID};var l={connector:Vc(r),oldValue:a,newValue:s,cancel:!1,state:"Changing",connectorEnd:t};w()&&(n=l={connector:Vc(r),oldValue:{connector:Vc(a)},newValue:{connector:Vc(s)},cancel:!1,state:"Changed",connectorEnd:t}),o||this.triggerEvent(Hn.connectionChange,l),l.cancel?(r.sourceID=a.sourceID,r.sourcePortID=a.sourcePortID,r.targetID=a.targetID,r.targetPortID=a.targetPortID):(this.diagram.connectorPropertyChange(r,a,s),this.diagram.updateDiagramObject(r),l={connector:r,oldValue:a,newValue:s,cancel:!1,state:"Changed",connectorEnd:t},w()&&(n=l={connector:Vc(r),oldValue:{connector:a},newValue:{connector:s},cancel:!1,state:"Changed",connectorEnd:t}),o||this.triggerEvent(Hn.connectionChange,l))}}else{var c="ConnectorSourceEnd"===t?"sourceID":"targetID",h="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";r[c]&&(a[c]=r[c],r[c]="",s[c]=r[c],(r.sourcePortID||r.targetPortID)&&(a[h]=r[h],r[h]="",s[h]=r[h]),n=this.connectionEventChange(r,a,s,t,i))}return n},e.prototype.connectionEventChange=function(e,t,i,n,r){var o,a,s=w(),l="ConnectorSourceEnd"===n?"sourceID":"targetID",c="ConnectorSourceEnd"===n?"sourcePortID":"targetPortID";if(this.enableCloneObject){var h=xd(o=this.diagram.nameTable[i[l]]);this.diagram.insertValue(h,!0)}var d={cancel:!1,state:"Changing",connectorEnd:n,connector:Vc(e),oldValue:{nodeId:t[l],portId:t[c]},newValue:{nodeId:i[l],portId:i[c]}};if(w()&&(d={connector:Vc(e),cancel:!1,state:"Changing",connectorEnd:n,oldValue:void 0,newValue:void 0},"ConnectorSourceEnd"===n?(d.oldValue={connectorSourceValue:{portId:t[c],nodeId:t[l]}},d.newValue={connectorSourceValue:{nodeId:i[l],portId:i[c]}}):(d.oldValue={connectorTargetValue:{nodeId:t[l],portId:t[c]}},d.newValue={connectorTargetValue:{nodeId:i[l],portId:i[c]}}),a=d),s||this.triggerEvent(Hn.connectionChange,d),d.cancel||w()&&r?(e[l]=t[l],e[c]=t[c],i=t):(this.diagram.connectorPropertyChange(e,t,i),this.diagram.updateDiagramObject(e),d={connector:Vc(e),oldValue:{nodeId:t[l],portId:t[c]},newValue:{nodeId:i[l],portId:i[c]},cancel:!1,state:"Changing",connectorEnd:n},w()&&(d={connector:Vc(e),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:n},"ConnectorSourceEnd"===n?(d.newValue={connectorSourceValue:{portId:i[c],nodeId:i[l]}},d.oldValue={connectorSourceValue:{portId:t[c],nodeId:t[l]}}):(d.oldValue={connectorTargetValue:{nodeId:t[l],portId:t[c]}},d.newValue={connectorTargetValue:{portId:i[c],nodeId:i[l]}}),a=d)),this.enableCloneObject&&void 0===o){h=xd(o=this.diagram.nameTable[t[l]]);this.diagram.insertValue(h,!0)}return a},e.prototype.findTarget=function(e,t,i,n){if(t instanceof Lh){if(e&&e.id===t.id+"_content")return t;if(i&&"Bpmn"===t.shape.type&&(!w()&&"Activity"===t.shape.shape||w()&&"Activity"===t.shape.bpmnShape)&&"Transaction"===t.shape.activity.subProcess.type){var r=t.shape.activity.subProcess.transaction;if(r.success.visible&&0===e.id.indexOf(t.id+"_success"))return r.success;if(r.cancel.visible&&0===e.id.indexOf(t.id+"_cancel"))return r.cancel;if(r.failure.visible&&0===e.id.indexOf(t.id+"_failure"))return r.failure}if(e instanceof dr)for(var o=0;o<t.ports.length;o++){var a=t.ports[o];if(e.id===t.id+"_"+a.id)return a}}if(!n){var s=void 0;for(o=0;o<t.annotations.length;o++)if(s=t.annotations[o],e.id===t.id+"_"+s.id)return s}return t},e.prototype.canDisconnect=function(e,t,i,n){var r;t.source instanceof Hh?r=t.source.connectors[0]:t.source instanceof $a&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);this.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===e,!0);var o="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";return r["ConnectorSourceEnd"===e?"sourceID":"targetID"]!==n||r[o]!==i},e.prototype.changeAnnotationDrag=function(e){var t;if(e.source&&e.source.connectors&&e.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e.source.connectors[0])>-1){e.source instanceof Hh&&(t=e.source.connectors[0]);var i=t.id.split("_"),n=(i[i.length-1],i[i.length-3]||i[0]);if(e.target&&e.target.id!==n&&(!w()&&"TextAnnotation"!==e.target.shape.shape||w()&&"TextAnnotation"!==e.target.shape.bpmnShape)){this.diagram.startGroupAction();var r=this.diagram.nameTable[i[0]],o=this.getAnnotation(r,i[1]),a={id:i[1]+md(),angle:Qi.findAngle(t.intermediatePoints[0],t.intermediatePoints[1]),text:o.text,length:Qi.distancePoints(t.intermediatePoints[0],t.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:o.nodeId},s=new xh(e.target.shape,"annotations",a,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[t.targetID],this.diagram),this.diagram.refreshCanvasLayers(),s.id=i[1],this.diagram.addTextAnnotation(s,e.target),this.diagram.endGroupAction()}else t&&(t.sourceID=n,this.diagram.connectorPropertyChange(t,{},{sourceID:n}),this.diagram.updateDiagramObject(t))}},e.prototype.connect=function(e,t,i){var n,r,o,a,s={},l={};t.source instanceof Hh?o=t.source.connectors[0]:t.source instanceof $a&&this.diagram.currentDrawingObject&&(o=this.diagram.currentDrawingObject);var c=this.findTarget(t.targetWrapper||t.sourceWrapper,t.target||t.actualObject,"ConnectorSourceEnd"===e,!0),h="ConnectorSourceEnd"===e?"sourceID":"targetID",d="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";if(c instanceof Lh)l[h]=o[h],o[h]=c.id,s[h]=o[h],l[d]=o[d],a=this.connectionEventChange(o,l,s,e,i);else{n=o[h],r=o[d],o[d]=c.id,o[h]=t.target&&t.target.id||t.actualObject.id,s[h]=o[h],s[d]=o[d];var p={connector:Vc(o),oldValue:{nodeId:n,portId:r},newValue:{nodeId:s[h],portId:s[d]},cancel:!1,state:"Changing",connectorEnd:e};w()&&(p={connector:Vc(o),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:e},"ConnectorSourceEnd"===e?(p.oldValue={connectorSourceValue:{portId:l[d],nodeId:l[h]}},p.newValue={connectorSourceValue:{portId:s[d],nodeId:s[h]}}):(p.newValue={connectorTargetValue:{portId:s[d],nodeId:s[h]}},p.oldValue={connectorTargetValue:{portId:l[d],nodeId:l[h]}}),a=p),this.triggerEvent(Hn.connectionChange,p),p.cancel||w()&&i?(o[h]=n,o[d]=r,s[h]=n,s[d]=r):(this.diagram.connectorPropertyChange(o,l,s),this.diagram.updateDiagramObject(o),p={connector:Vc(o),oldValue:{nodeId:n,portId:r},newValue:{nodeId:s[h],portId:s[d]},cancel:!1,state:"Changing",connectorEnd:e},w()&&(p={newValue:void 0,connector:Vc(o),oldValue:void 0,cancel:!1,state:"Changing",connectorEnd:e},"ConnectorSourceEnd"===e?(p.oldValue={connectorSourceValue:{portId:l[d],nodeId:l[h]}},p.newValue={connectorTargetValue:{portId:s[d],nodeId:s[h]}}):(p.oldValue={connectorTargetValue:{portId:l[d],nodeId:l[h]}},p.newValue={connectorTargetValue:{portId:s[d],nodeId:s[h]}})))}return this.renderHighlighter(t,void 0,"ConnectorSourceEnd"===e),a},e.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},e.prototype.UpdateBlazorDiagramModelLayers=function(e,t){var i=Vc(e);if(window&&window.Blazor){var n={methodName:"UpdateBlazorDiagramModelLayers",diagramobj:JSON.stringify(i),isRemove:t};window.sfBlazor.updateBlazorProperties(n,this.diagram)}},e.prototype.addLayer=function(e,t,i){void 0===i&&(i=!0),e.id=e.id||md(),e.zIndex=this.diagram.layers.length,this.diagram.enableServerDataBinding(!1),e=new Vp(this.diagram,"layers",e,!0),this.diagram.enableServerDataBinding(!0),e.objectZIndex=-1,e.zIndexTable={},this.diagram.layers.push(e),i&&this.UpdateBlazorDiagramModelLayers(e,!1),this.diagram.layerZIndexTable[e.zIndex]=e.id,this.diagram.activeLayer=e;e.objects;if(t)for(var n=0;n<t.length;n++)this.diagram.add(t[n])},e.prototype.getObjectLayer=function(e){for(var t=this.diagram.layers,i=0;i<t.length;i++){if(t[i].objects.indexOf(e)>-1)return t[i]}return this.diagram.activeLayer},e.prototype.getLayer=function(e){for(var t=this.diagram.layers,i=0;i<t.length;i++)if(t[i].id===e)return t[i]},e.prototype.removeLayer=function(e,t){void 0===t&&(t=!0);var i=this.getLayer(e);if(i){for(var n=this.diagram.layers.indexOf(i),r=i.objects,o=r.length-1;o>=0;o--)this.diagram.unSelect(this.diagram.nameTable[r[o]]),this.diagram.remove(this.diagram.nameTable[r[o]]),"default_layer"!==i.id&&this.diagram.activeLayer.id===e&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);t&&this.UpdateBlazorDiagramModelLayers(this.diagram.layers[n],!0),delete this.diagram.layerZIndexTable[i.zIndex],this.diagram.layers.splice(n,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.moveObjects=function(e,t){var i,n=this.getLayer(t)||this.diagram.activeLayer;this.diagram.setActiveLayer(n.id);for(var r=0,o=e;r<o.length;r++){var a=o[r];this.getObjectLayer(a).objects.indexOf(a)>-1&&(i=this.diagram.nameTable[a],this.diagram.unSelect(i),this.diagram.remove(this.diagram.nameTable[a]),this.diagram.add(i))}},e.prototype.cloneLayer=function(e){this.diagram.layers;var t=this.getLayer(e);if(t){var i=[],n={id:e+"_"+md(),objects:[],visible:!0,lock:!1};this.addLayer(n,null,!0),n.zIndex=this.diagram.layers.length-1;i.length;for(var r=0,o=t.objects;r<o.length;r++){var a=o[r];i.push(this.diagram.nameTable[a])}this.paste(i)}},e.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},e.prototype.copyObjects=function(){var e=[],t=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){e=this.diagram.selectedItems.connectors;for(var i=0;i<e.length;i++){var n=void 0;n=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e[i])>-1?xd(this.diagram.nameTable[e[i].targetID]):xd(e[i]),t.push(n)}}if(this.diagram.selectedItems.nodes.length>0){e=e.concat(this.diagram.selectedItems.nodes);for(i=0;i<this.diagram.selectedItems.nodes.length;i++)if(!e[i].isPhase){var r=xd(this.diagram.selectedItems.nodes[i]);r.wrapper&&r.offsetX!==r.wrapper.offsetX&&(r.offsetX=r.wrapper.offsetX),r.wrapper&&r.offsetY!==r.wrapper.offsetY&&(r.offsetY=r.wrapper.offsetY);this.copyProcesses(r),t.push(xd(r));var o=pn();if(fn(o,-r.rotateAngle,r.offsetX,r.offsetY),r.children){for(var a=this.clipboardData.childTable,s=void 0,l=this.getAllDescendants(r,[],!0),c=0;c<l.length;c++){var h=a[(s=this.diagram.nameTable[l[c].id]).id]=xd(s),d=un(o,{x:h.wrapper.offsetX,y:h.wrapper.offsetY});s instanceof Lh&&(h.offsetX=d.x,h.offsetY=d.y,h.rotateAngle-=r.rotateAngle)}this.clipboardData.childTable=a}if("SwimLane"===r.shape.type){var p=this.diagram.getObject(this.diagram.selectedItems.nodes[i].id),u=(a=this.clipboardData.childTable,ul(this.diagram,p.wrapper.children[0]));for(c=0;c<u.length;c++){var f=this.diagram.getObject(u[c]);a[f.id]=xd(f)}}if(r&&r.isLane){a=this.clipboardData.childTable,p=this.diagram.getObject(r.parentId);var g=_l(r,this.diagram);a[r.id]=xd(g),a[r.id].width=p.wrapper.actualSize.width}}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var m=0,y=e;m<y.length;m++){var v=y[m];this.diagram.nameTable[v.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(v)>-1?this.diagram.remove(this.diagram.nameTable[v.targetID]):this.diagram.remove(v))}this.endGroupAction()}return this.sortByZIndex(t,"zIndex"),t},e.prototype.copyProcesses=function(e){if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0){for(var t=0,i=e.shape.activity.subProcess.processes;t<i.length;t++){var n=i[t];this.processTable[n]=xd(this.diagram.nameTable[n]),this.processTable[n].shape.activity.subProcess.processes&&this.processTable[n].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[n])}this.clipboardData.processTable=this.processTable}},e.prototype.group=function(){this.oldSelectedObjects=Bc(this.diagram);var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|jn.Group;var t,i=[],n={};n.id="group"+md(),(n=new Lh(this.diagram,"nodes",n,!0)).children=[],i=(i=this.diagram.selectedItems.nodes).concat(this.diagram.selectedItems.connectors);for(var r=0;r<i.length;r++)i[r].parentId||n.children.push(i[r].id);(t=this.diagram.add(n))&&this.select(t);var o={type:"Group",undoObject:n,redoObject:n,category:"Internal"};this.addHistoryEntry(o),this.diagram.diagramActions=this.diagram.diagramActions&~jn.Group,this.diagram.protectPropertyChange(e),this.updateBlazorSelector()},e.prototype.unGroup=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|jn.Group;var i=[];e?i.push(e):i=this.diagram.selectedItems.nodes;for(var n=0;n<i.length;n++){var r=i[n],o={type:"UnGroup",undoObject:xd(r),redoObject:xd(r),category:"Internal"};if(this.diagram.diagramActions&jn.UndoRedo||this.addHistoryEntry(o),r.children){r.ports&&r.ports.length>0&&this.diagram.removePorts(r,r.ports),r.annotations&&r.annotations.length>0&&(!w()||w()&&""!==r.annotations[0].content)&&this.diagram.removeLabels(r,r.annotations);for(var a=this.diagram.nameTable[r.parentId],s=r.children.length-1;s>=0;s--)this.diagram.nameTable[r.children[s]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[r.children[s]],r),r.parentId&&r.children[s]&&this.diagram.addChild(a,r.children[s]);r.parentId&&this.diagram.deleteChild(r,a)}this.diagram.removeNode(r),this.clearSelection()}this.diagram.diagramActions=this.diagram.diagramActions&~jn.Group,this.diagram.protectPropertyChange(t)},e.prototype.paste=function(e){if(e||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var t=e?this.getNewObject(e):this.clipboardData.clipObject;if(t){var i=1!==t.length,n=!1,r={},o={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(n=!0,this.diagram.historyManager.startGroupAction());for(var a=0,s=t;a<s.length;a++){r[(h=s[a]).id]=h}var l=[];i&&(this.diagram.isServerUpdate=!0);for(var c=0;c<t.length;c++){var h=t[c];if(Rc(h)===$a){var d=xd(h),p=d.sourceID;d.sourceID="",r[p]&&o[p]&&(d.sourceID=o[p]),p=d.targetID,d.targetID="",r[p]&&o[p]&&(d.targetID=o[p]);var u=this.cloneConnector(d,i);l.push(u),o[h.id]=u.id}else{var f=this.cloneNode(h,i);if(l.push(f),f){o[h.id]=f.id;var g=h.inEdges;if(g)for(var m=0,y=g;m<y.length;m++){if(r[w=y[m]]&&o[w])(x=this.diagram.nameTable[o[w]]).targetID=o[h.id],this.diagram.connectorPropertyChange(x,{targetID:"",targetPortID:""},{targetID:x.targetID,targetPortID:x.targetPortID})}if(g=h.outEdges)for(var v=0,b=g;v<b.length;v++){var w,x;if(r[w=b[v]]&&o[w])(x=this.diagram.nameTable[o[w]]).sourceID=o[h.id],this.diagram.connectorPropertyChange(x,{sourceID:"",sourcePortID:""},{sourceID:x.sourceID,sourcePortID:x.sourcePortID})}}}}i&&(this.diagram.isServerUpdate=!1,this.diagram.UpdateBlazorDiagramModelCollection(t[0],l)),!0===n&&(this.diagram.historyManager.endGroupAction(),n=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},e.prototype.getNewObject=function(e){var t,i=[];this.clipboardData.pasteIndex=1;for(var n=0;n<e.length;n++)t=xd(e[n]),i.push(t);return i},e.prototype.cloneConnector=function(e,t){var i,n=xd(e);return this.translateObject(n),n.zIndex=-1,i=this.diagram.add(n),this.selectObjects([i],t),i},e.prototype.cloneNode=function(e,t,i,n){var r,o,a={},s=xd(e),l=this.diagram.nameTable[e.parentId];if(e.shape&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length&&(o=s.shape.activity.subProcess.processes,s.zIndex=-1,s.shape.activity.subProcess.processes=void 0),e.shape&&"SwimLane"===e.shape.type)Dl(e,this.diagram,this.clipboardData);else if(l&&"SwimLane"===l.shape.type)Dl(xd(l),this.diagram,this.clipboardData,e,!0);else if(!e.children||!e.children.length||i&&i.length)if(e.shape&&(!w()&&"TextAnnotation"===e.shape.shape||w()&&"TextAnnotation"===e.shape.bpmnShape)&&-1!==e.id.indexOf("_textannotation_")&&this.diagram.nameTable[e.id])for(var c=e.id.split("_textannotation_"),h=void 0,d=this.diagram.nameTable[e.id],p=0;p<d.inEdges.length;p++){var u=this.diagram.nameTable[d.inEdges[p]];if(u){h=this.diagram.nameTable[u.sourceID];var f=this.getAnnotation(h,c[1]),g={id:c[1]+md(),angle:f.angle,text:f.text,length:f.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:f.nodeId};this.diagram.addTextAnnotation(g,h)}}else this.translateObject(s,n),s.zIndex=-1,i&&(s.children=i),r=this.diagram.add(s);else r=this.cloneGroup(e,t);for(var m=0,y=Object.keys(a);m<y.length;m++){var v=y[m];this.diagram.add(a[v])}return o&&o.length&&(r.shape.activity.subProcess.processes=o,this.cloneSubProcesses(r)),r&&this.selectObjects([r],t),r},e.prototype.getAnnotation=function(e,t){var i=e.shape.annotations;if(i&&i.length)for(var n=0;n<=i.length;n++)if(i[n].id===t)return i[n]},e.prototype.cloneSubProcesses=function(e){var t=[],i={};if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length)for(var n=e.shape.activity.subProcess.processes,r=0;r<n.length;r++){for(var o=this.diagram.nameTable[n[r]]||this.clipboardData.processTable[n[r]],a=0,s=o.outEdges;a<s.length;a++){var l=s[a];t.indexOf(l)<0&&t.push(l)}for(var c=0,h=o.inEdges;c<h.length;c++){l=h[c];t.indexOf(l)<0&&t.push(l)}var d=xd(this.clipboardData.processTable[n[r]]);d.processId=e.id;var p=this.cloneNode(d,!1);i[n[r]]=p.id,n[r]=p.id,this.diagram.addProcess(p,e.id);for(var u=0,f=t;u<f.length;u++){var g=f[u],m=xd(this.diagram.nameTable[g]||this.diagram.connectorTable[g]);i[m.sourceID]&&i[m.targetID]&&(m.zIndex=-1,m.id+=md(),m.sourceID=i[m.sourceID],m.targetID=i[m.targetID],t.splice(t.indexOf(g),1),this.diagram.add(m))}}},e.prototype.cloneGroup=function(e,t){var i,n=[],r=[],o=[],a=[];r=r.concat(e.children);var s=md();if(this.clipboardData.childTable||e.children.length>0)for(var l=0;l<r.length;l++){var c=void 0;(c=this.clipboardData.childTable?this.clipboardData.childTable[r[l]]:this.diagram.nameTable[r[l]]).parentId="",c&&(Rc(c)===$a?o.push(c):(i=this.cloneNode(c,t,void 0,s),a.push(c.id),n.push(i.id)))}for(var h=0;h<o.length;h++){if(o[h].sourceID||o[h].targetID)for(var d=0;d<a.length;d++)o[h].sourceID===a[d]&&(o[h].sourceID+=s),o[h].targetID===a[d]&&(o[h].targetID+=s);i=this.cloneConnector(o[h],t),n.push(i.id)}var p=this.cloneNode(e,t,n);return p&&p.container&&p.shape&&"UmlClassifier"===p.shape.type&&(this.diagram.updateDiagramObject(p),p.wrapper.measure(new Zi)),p},e.prototype.translateObject=function(e,t){e.id+=t||md();var i=10*this.clipboardData.pasteIndex;if(Rc(e)===$a){if(e.sourcePoint={x:e.sourcePoint.x+i,y:e.sourcePoint.y+i},e.targetPoint={x:e.targetPoint.x+i,y:e.targetPoint.y+i},"Bezier"===e.type)for(var n=e.segments,r=0;r<n.length;r++)Qi.isEmptyPoint(n[r].point1)||(n[r].point1={x:n[r].point1.x+i,y:n[r].point1.y+i}),Qi.isEmptyPoint(n[r].point2)||(n[r].point2={x:n[r].point2.x+i,y:n[r].point2.y+i});if(("Straight"===e.type||"Bezier"===e.type)&&e.segments&&e.segments.length>0)for(n=e.segments,r=0;r<n.length-1;r++)n[r].point.x+=i,n[r].point.y+=i}else e.offsetX+=i,e.offsetY+=i},e.prototype.drawObject=function(e){var t,i,n;w()&&(t=this.diagram.getProtectPropertyChangeValue(),this.diagram.protectPropertyChange(!0)),e&&e.shape&&"Text"===e.shape.type&&(e.width=this.diagram.drawingObject.width?this.diagram.drawingObject.width:50,e.height=this.diagram.drawingObject.height?this.diagram.drawingObject.height:20),n=xd(this.diagram.drawingObject);for(var r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];n[a]=e[a]}return Rc(this.diagram.drawingObject)===Lh?(i=new Lh(this.diagram,"nodes",n,!0)).id=(this.diagram.drawingObject.id||"node")+md():(i=new $a(this.diagram,"connectors",n,!0)).id=(this.diagram.drawingObject.id||"connector")+md(),w()&&Kl(i,n,Rc(this.diagram.drawingObject)===Lh?this.diagram.nodeDefaults:this.diagram.connectorDefaults),this.diagram.initObject(i),this.diagram.updateDiagramObject(i),this.diagram.currentDrawingObject=i,w()&&this.diagram.protectPropertyChange(t),i},e.prototype.addObjectToDiagram=function(e){var t;this.diagram.removeFromAQuad(e),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[e.id]),delete this.diagram.nameTable[e.id],t=this.diagram.add(e),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([t]),e&&!Ps(this.diagram)&&(this.diagram.tool&=~An.DrawOnce,this.diagram.currentDrawingObject=void 0)},e.prototype.enableServerDataBinding=function(e){this.diagram.enableServerDataBinding(e)},e.prototype.addText=function(e,t){var i=this.diagram.findElementUnderMouse(e,t);this.diagram.startTextEdit(e,i instanceof or?i.id.split("_")[1]:void 0)},e.prototype.updateArgsObject=function(e,t,i){if(e)for(var n=0;n<e.length;n++)Rc(e[n])===$a?i.connectors.push(Vc(e[n])):i.nodes.push(Vc(e[n]))},e.prototype.updateSelectionChangeEventArgs=function(e,t,i){if(w()){var n=(e={cause:this.diagram.diagramActions,newValue:{},oldValue:{},state:e.state,type:e.type,cancel:!1}).oldValue,r=e.newValue;return n.connectors=[],n.nodes=[],r.connectors=[],r.nodes=[],this.updateArgsObject(this.getSelectedObject(),e,r),this.updateArgsObject(i,e,n),e}return e},e.prototype.isUserHandle=function(e){var t=this.diagram.selectedItems;if(t.wrapper&&Sc(t.constraints,"UserHandle"))for(var i=0,n=t.userHandles;i<n.length;i++){var r=n[i];if(r.visible)if(hp(e,wc(t,r,this.diagram.scroller.transform),r.size/(2*this.diagram.scroller.transform.scale)))return!0}return!1},e.prototype.selectObjects=function(e,t,i){return Up(this,void 0,void 0,(function(){var n,r,o,a,s,l,c,h,d;return Yp(this,(function(p){switch(p.label){case 0:if(n={oldValue:i||this.getSelectedObject(),newValue:e,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1},this.diagram.enableServerDataBinding(!1),!0,w()?this.oldSelectedObjects=Bc(this.diagram):this.diagram.triggerEvent(Hn.selectionChange,n),r=Ss(this.diagram),(o=xs(this.diagram))||r){if(!r&&(e.length>1||t&&1===e.length)){if(1!==e.length)return[2];this.clearSelection()}if(!o&&1===e.length&&(!t||!dp(this.diagram)))return this.clearSelection(),[2]}if(n.cancel)return[3,4];for(a=0;a<e.length;a++)if(s=e[a])if(!0,dp(this.diagram)){if((a>0||t)&&s.children&&!s.parentId)for(l=0;l<this.diagram.selectedItems.nodes.length;l++)(c=this.diagram.nameTable[this.diagram.selectedItems.nodes[l].parentId])&&(c=this.findParent(c))&&s.id===c.id&&this.selectGroup(s);this.selectProcesses(s),this.selectBpmnSubProcesses(s)&&this.select(s,a>0||t,!0)}else this.select(s,a>0||t,!0);return n={oldValue:i||[],newValue:this.getSelectedObject(),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.diagram.renderSelector(t||e&&e.length>1),this.updateBlazorSelectorModel(i),w()&&this.diagram.selectionChange&&(n=this.updateSelectionChangeEventArgs(n,e,i||[]),this.updateBlazorSelector()),w()?[3,1]:(this.diagram.triggerEvent(Hn.selectionChange,n),[3,3]);case 1:return[4,this.diagram.triggerEvent(Hn.selectionChange,n)];case 2:(h=p.sent())&&h.cancel&&(d=[],h.oldValue.nodes.length>0&&(d=h.oldValue.nodes),h.oldValue.connectors.length>0&&(d=d.concat(h.oldValue.connectors)),d&&(d.length>0?this.diagram.select(d):this.clearSelection(!0,!0))),p.label=3;case 3:this.diagram.enableServerDataBinding(!0),this.updateBlazorSelector(),p.label=4;case 4:return[2]}}))}))},e.prototype.updateBlazorSelector=function(){if(w()){this.newSelectedObjects=Bc(this.diagram);var e=this.deepDiffer.map(xd(this.newSelectedObjects),this.oldSelectedObjects),t=this.deepDiffer.frameObject({},e),i=this.deepDiffer.removeEmptyValues(t);i.nodes=[];for(var n=0;n<this.diagram.selectedItems.nodes.length;n++)i.nodes.push(this.diagram.selectedItems.nodes[n].id);i.connectors=[];for(n=0;n<this.diagram.selectedItems.connectors.length;n++)i.connectors.push(this.diagram.selectedItems.connectors[n].id);if(window&&window.Blazor){var r={methodName:"UpdateBlazorProperties",diagramobj:{selectedItems:i}};window.sfBlazor.updateBlazorProperties(r,this.diagram)}}},e.prototype.findParent=function(e){return e.parentId&&(e=this.diagram.nameTable[e.parentId],this.findParent(e)),e},e.prototype.selectProcesses=function(e){if(this.hasProcesses(e))for(var t=e.shape.activity.subProcess.processes,i=0;i<t.length;i++){var n=this.diagram.nameTable[t[i]];this.hasProcesses(n)&&this.selectObjects([n],!0),this.unSelect(n)}},e.prototype.selectGroup=function(e){for(var t=0;t<e.children.length;t++){var i=this.diagram.nameTable[e.children[t]];i.children&&this.selectGroup(i),this.unSelect(this.diagram.nameTable[e.children[t]])}},e.prototype.selectBpmnSubProcesses=function(e){var t,i=!0;if(e.processId)i=!up(this.diagram,this.diagram.nameTable[e.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[e.processId]);else if(e instanceof $a){if(e.sourceID&&this.diagram.nameTable[e.sourceID]&&this.diagram.nameTable[e.sourceID].processId&&(t=this.diagram.nameTable[e.sourceID].processId),e.targetID&&this.diagram.nameTable[e.targetID]&&this.diagram.nameTable[e.targetID].processId&&(t=this.diagram.nameTable[e.targetID].processId),t){if(up(this.diagram,this.diagram.nameTable[t]))return!1;i=this.selectBpmnSubProcesses(this.diagram.nameTable[t])}}else e.parentId&&this.diagram.nameTable[e.parentId]&&"UmlClassifier"===this.diagram.nameTable[e.parentId].shape.type&&up(this.diagram,this.diagram.nameTable[e.parentId])&&(i=!1);return i},e.prototype.hasProcesses=function(e){return!!(e&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)},e.prototype.select=function(e,t,i){var n=this.getObjectLayer(e.id);if(ss(e)&&!(e instanceof Hh)&&!up(this.diagram,e)&&n&&!n.lock&&n.visible&&e.wrapper.visible){(t=!!dp(this.diagram)&&t)||this.clearSelection(),this.diagram.enableServerDataBinding(!1);var r=this.diagram.selectedItems;if(e instanceof Lh)if(e.isHeader){var o=this.diagram.nameTable[e.parentId];r.nodes.push(o)}else r.nodes.push(e);else r.connectors.push(e);if(t)r.wrapper.rotateAngle=r.rotateAngle=0,r.wrapper.children.push(e.wrapper);else if(r.init(this.diagram),1===r.nodes.length&&0===r.connectors.length){var a=Ll(this.diagram,r);a&&(r.wrapper.children[0]=a),r.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.pivot=r.nodes[0].pivot}i||this.diagram.renderSelector(t),this.diagram.enableServerDataBinding(!0)}},e.prototype.getObjectCollectionId=function(e,t){for(var i=[],n=0,r=e?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;!t&&n<r.length;)i[n]=r[n].id,n++;return i},e.prototype.updateBlazorSelectorModel=function(e,t){if(window&&window.sfBlazor){for(var i=0,n=[];e&&i<e.length;)n[i]=e[i].id,i++;i=0;var r=Vc({nodes:this.getObjectCollectionId(!0,t),connectors:this.getObjectCollectionId(!1,t)});window.sfBlazor.updateDiagramCollection&&window.sfBlazor.updateDiagramCollection.call(this.diagram,"selectedItems",r,n,!1,!0)}},e.prototype.labelSelect=function(e,t){this.oldSelectedObjects=Bc(this.diagram);var i=this.diagram.selectedItems,n=this.diagram.allowServerDataBinding;this.diagram.allowServerDataBinding=!1,i.nodes=i.connectors=[],this.diagram.allowServerDataBinding=n,e instanceof Lh?i.nodes[0]=e:i.connectors[0]=e,i.annotation=this.findTarget(t,e),i.init(this.diagram),this.diagram.renderSelector(!1),this.updateBlazorSelector()},e.prototype.unSelect=function(e){var t=[];t.push(e);var i={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||w()||this.diagram.triggerEvent(Hn.selectionChange,i),up(this.diagram,e)){var n=this.diagram.selectedItems,r=void 0;e instanceof Lh?(r=n.nodes.indexOf(e,0),n.nodes.splice(r,1)):(r=n.connectors.indexOf(e,0),n.connectors.splice(r,1)),i={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(t),(i={oldValue:Vc(t),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:i.cancel}).cancel||(r=n.wrapper.children.indexOf(e.wrapper,0),n.wrapper.children.splice(r,1),this.diagram.updateSelector(),this.diagram.currentSymbol||(w()&&(i=this.updateSelectionChangeEventArgs(i,[],t),this.updateBlazorSelector()),this.diagram.triggerEvent(Hn.selectionChange,i)))}},e.prototype.getChildElements=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];n.children&&n.children.length>0?t.concat(this.getChildElements(n.children)):(t.push(n.id),n instanceof or&&t.push(n.id+"_text"))}return t},e.prototype.moveSvgNode=function(e,t){var i=Yh(t+"_groupElement",this.diagram.element.id),n=Yh(e+"_groupElement",this.diagram.element.id);i.parentNode.insertBefore(n,i)},e.prototype.sendLayerBackward=function(e){var t=this.getLayer(e);if(t&&0!==t.zIndex){var i=t.zIndex;if("SVG"===this.diagram.mode){var n=t.objects,r=this.getLayer(this.diagram.layerZIndexTable[i-1]).objects[0];if(r)for(var o=0,a=n;o<a.length;o++){var s=a[o];this.moveSvgNode(s,r)}}var l=this.getLayer(this.diagram.layerZIndexTable[i-1]);l.zIndex=l.zIndex+1,t.zIndex=t.zIndex-1;var c=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i-1],this.diagram.layerZIndexTable[i-1]=c,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.bringLayerForward=function(e){var t=this.getLayer(e);if(t&&t.zIndex<this.diagram.layers.length-1){var i=t.zIndex,n=this.getLayer(this.diagram.layerZIndexTable[i+1]);if("SVG"===this.diagram.mode)for(var r=t.objects[0],o=0,a=n.objects;o<a.length;o++){var s=a[o];s&&this.moveSvgNode(s,r)}n.zIndex=n.zIndex-1,t.zIndex=t.zIndex+1;var l=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i+1],this.diagram.layerZIndexTable[i+1]=l,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.sendToBack=function(e){if(this.diagram.protectPropertyChange(!0),dp(this.diagram)||e){var t=e&&e.id;t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.nameTable[t].zIndex,n=this.diagram.layers.indexOf(this.getObjectLayer(t)),r=this.diagram.layers[n].zIndexTable,o=xd(this.diagram.selectedItems);if(1!==this.diagram.nodes.length&&(void 0===this.diagram.nameTable[t].children||this.checkObjectBehind(t,r,i))){for(var a=i;a>0;a--)r[a]&&(r[a-1]?(r[a]=r[a-1],this.diagram.nameTable[r[a]].zIndex=a):(r[a-1]=r[a],this.diagram.nameTable[r[a-1]].zIndex=a,delete r[a]));if(r[0]=this.diagram.nameTable[t].id,this.diagram.nameTable[t].zIndex=0,"SVG"===this.diagram.mode){for(var s=r[a=1];!s&&a<i;)s=r[++a];this.moveSvgNode(t,s),this.updateNativeNodeIndex(t)}else this.diagram.refreshCanvasLayers();var l={type:"SendToBack",category:"Internal",undoObject:o,redoObject:xd(this.diagram.selectedItems)};this.diagram.diagramActions&jn.UndoRedo||this.addHistoryEntry(l)}}this.diagram.protectPropertyChange(!1)},e.prototype.checkObjectBehind=function(e,t,i){for(var n=0;n<i;n++){var r=t[n];if(e!==this.diagram.nameTable[r].parentId)return!0}return!1},e.prototype.bringToFront=function(e){if(this.diagram.protectPropertyChange(!0),dp(this.diagram)||e){var t=e&&e.id;t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);for(var i=this.diagram.layers.indexOf(this.getObjectLayer(t)),n=this.diagram.layers[i].zIndexTable,r=xd(this.diagram.selectedItems),o=Number(Object.keys(n).sort((function(e,t){return Number(e)-Number(t)})).reverse()[0]),a=this.diagram.nameTable[t].zIndex;a<o;a++)n[a]&&(n[a+1]?(n[a]=n[a+1],this.diagram.nameTable[n[a]].zIndex=a):(n[a+1]=n[a],this.diagram.nameTable[n[a+1]].zIndex=a,delete n[a]));if(n[o]=this.diagram.nameTable[t].id,this.diagram.nameTable[t].zIndex=o,"SVG"===this.diagram.mode){var s=this.diagram.diagramLayer,l=(this.getChildElements(this.diagram.nameTable[t].wrapper.children),Yh(t+"_groupElement",this.diagram.element.id)),c=this.diagram.selectedItems.nodes;if(c.length>0&&("Native"===c[0].shape.type||"HTML"===c[0].shape.type)){l.parentNode.removeChild(l);for(var h=0;h<this.diagram.views.length;h++){var d=(l=Yh(t+("HTML"===c[0].shape.type?"_html_element":"_content_groupElement"),this.diagram.views[h])).parentNode.lastChild;d.parentNode.insertBefore(l,d.nextSibling)}var p=id(this.diagram.element.id);this.diagram.diagramRenderer.renderElement(this.diagram.nameTable[t].wrapper,s,p)}else{var u=this.getObjectLayer(t);for(a=0;a<u.objects.length;a++)u.objects[a]!==t&&this.diagram.nameTable[u.objects[a]].parentId!==t&&(this.moveSvgNode(u.objects[a],t),this.updateNativeNodeIndex(t))}}else this.diagram.refreshCanvasLayers();var f={type:"BringToFront",category:"Internal",undoObject:r,redoObject:xd(this.diagram.selectedItems)};this.diagram.diagramActions&jn.UndoRedo||this.addHistoryEntry(f)}this.diagram.protectPropertyChange(!1)},e.prototype.sortByZIndex=function(e,t){var i=t||"zIndex";return e=e.sort((function(e,t){return e[i]-t[i]}))},e.prototype.orderCommands=function(e,t,i){var n=t.nodes;if(n=n.concat(t.connectors),e)"SendBackward"===i?this.sendBackward(n[0]):"SendForward"===i?this.sendForward(n[0]):"BringToFront"===i?this.bringToFront(n[0]):"SendToBack"===i&&this.sendToBack(n[0]);else{var r=n[0].zIndex,o=this.diagram.nameTable[n[0].id].zIndex,a=n[0],s=this.getObjectLayer(a.id),l=s.zIndex,c=s.zIndexTable;if("SendBackward"===i||"SendForward"===i)for(var h=0;h<n.length;h++){var d=n[h],p=this.diagram.layers.indexOf(this.getObjectLayer(d.id));this.diagram.nameTable[n[h].id].zIndex=d.zIndex,this.diagram.layers[p].zIndexTable[d.zIndex]=d.id}else if("BringToFront"===i)for(var u=o;u>r;u--)c[u]&&(c[u-1]?(c[u]=c[u-1],this.diagram.nameTable[c[u]].zIndex=u):(c[u-1]=c[u],this.diagram.nameTable[c[u-1]].zIndex=u,delete c[u]));else if("SendToBack"===i)for(u=o;u<r;u++)c[u]&&(c[u+1]?(c[u]=c[u+1],this.diagram.nameTable[c[u]].zIndex=u):(c[u+1]=c[u],this.diagram.nameTable[c[u+1]].zIndex=u,delete c[u]));if("BringToFront"===i||"SendToBack"===i)this.diagram.nameTable[n[0].id].zIndex=a.zIndex,this.diagram.layers[l].zIndexTable[a.zIndex]=a.id;if("SVG"===this.diagram.mode){if("SendBackward"===i)this.moveObject(n[1].id,n[0].id);else if("SendForward"===i)this.moveObject(n[0].id,n[1].id);else if("BringToFront"===i)this.moveObject(n[0].id,c[n[0].zIndex+1]);else if("SendToBack"===i){var f=this.getObjectLayer(n[0].id);for(h=0;h<=n[0].zIndex;h++)f.objects[h]!==n[0].id&&(this.moveSvgNode(f.objects[h],n[0].id),this.updateNativeNodeIndex(n[0].id))}}else this.diagram.refreshCanvasLayers()}},e.prototype.moveObject=function(e,t){t&&(this.moveSvgNode(e,t),this.updateNativeNodeIndex(e,t))},e.prototype.sendForward=function(e){if(this.diagram.protectPropertyChange(!0),dp(this.diagram)||e){var t=e&&e.id;t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.layers.indexOf(this.getObjectLayer(t)),n=this.diagram.layers[i].zIndexTable,r=(Object.keys(n).length,this.diagram.nameTable[t]),o=[],a=this.diagram.spatialSearch.findObjects(r.wrapper.bounds);a.length>2&&(a=this.sortByZIndex(a));for(var s=0,l=a;s<l.length;s++){var c=l[s];if(r.id!==c.id)if(i===this.getObjectLayer(c.id).zIndex&&Number(this.diagram.nameTable[t].zIndex)<Number(c.zIndex)&&r.wrapper.bounds.intersects(c.wrapper.bounds)){o.push(c);break}}if(o.length>0){var h=o[0].zIndex,d=r.zIndex,p=n[h],u=xd(this.diagram.selectedItems);this.diagram.nameTable[p]instanceof Lh?u.nodes.push(xd(this.diagram.nameTable[p])):u.connectors.push(xd(this.diagram.nameTable[p])),this.diagram.layers[0].zIndexTable[h]=r.id,this.diagram.nameTable[n[h]].zIndex=h,this.diagram.layers[0].zIndexTable[d]=o[0].id,this.diagram.nameTable[n[d]].zIndex=d,"SVG"===this.diagram.mode?(this.moveSvgNode(n[Number(o[0].zIndex)],t),this.updateNativeNodeIndex(n[Number(o[0].zIndex)],t)):this.diagram.refreshCanvasLayers();var f=xd(this.diagram.selectedItems);this.diagram.nameTable[p]instanceof Lh?f.nodes.push(xd(this.diagram.nameTable[p])):f.connectors.push(xd(this.diagram.nameTable[p]));var g={type:"SendForward",category:"Internal",undoObject:u,redoObject:f};this.diagram.diagramActions&jn.UndoRedo||this.addHistoryEntry(g)}}this.diagram.protectPropertyChange(!1)},e.prototype.sendBackward=function(e){if(this.diagram.protectPropertyChange(!0),dp(this.diagram)||e){var t=e&&e.id;t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.layers.indexOf(this.getObjectLayer(t)),n=this.diagram.layers[i].zIndexTable,r=(Object.keys(n).length,this.diagram.nameTable[t]),o=[],a=this.diagram.spatialSearch.findObjects(r.wrapper.bounds);a.length>2&&(a=this.sortByZIndex(a));for(var s=0,l=a;s<l.length;s++){var c=l[s];if(r.id!==c.id)i===this.getObjectLayer(c.id).zIndex&&Number(this.diagram.nameTable[t].zIndex)>Number(c.zIndex)&&r.wrapper.bounds.intersects(c.wrapper.bounds)&&o.push(c)}if(o.length>0){var h=o[o.length-1].zIndex,d=r.zIndex,p=n[h],u=xd(this.diagram.selectedItems);this.diagram.nameTable[p]instanceof Lh?u.nodes.push(xd(this.diagram.nameTable[p])):u.connectors.push(xd(this.diagram.nameTable[p])),n[h]=r.id,this.diagram.nameTable[n[h]].zIndex=h,n[d]=o[o.length-1].id,this.diagram.nameTable[n[d]].zIndex=d,"SVG"===this.diagram.mode?r.children&&r.children.length>0||(this.moveSvgNode(t,n[o[o.length-1].zIndex]),this.updateNativeNodeIndex(t,n[o[o.length-1].zIndex])):this.diagram.refreshCanvasLayers();var f=xd(this.diagram.selectedItems);this.diagram.nameTable[p]instanceof Lh?f.nodes.push(xd(this.diagram.nameTable[p])):f.connectors.push(xd(this.diagram.nameTable[p]));var g={type:"SendBackward",category:"Internal",undoObject:u,redoObject:f};this.diagram.diagramActions&jn.UndoRedo||this.addHistoryEntry(g)}}this.diagram.protectPropertyChange(!1)},e.prototype.updateNativeNodeIndex=function(e,t){for(var i=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(t),n=0;n<this.diagram.views.length;n++)if(i&&("HTML"===i.shape.type||"Native"===i.shape.type)){var r="HTML"===i.shape.type?"_html_element":"_content_groupElement",o=Yh(e+r,this.diagram.views[n]),a=t?Yh(t+r,this.diagram.views[n]):o.parentElement.firstChild;o.parentNode.id===a.parentNode.id&&a.parentNode.insertBefore(o,a)}},e.prototype.initSelectorWrapper=function(){var e=this.diagram.selectedItems;e.init(this.diagram),1===e.nodes.length&&0===e.connectors.length&&(e.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.pivot=e.nodes[0].pivot)},e.prototype.doRubberBandSelection=function(e){this.clearSelectionRectangle();var t=[],i=[];t=this.diagram.getNodesConnectors(t),(i="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?function(e,t){for(var i=[],n=0;n<t.length;n++){var r=t[n];e.containsRect(r.wrapper.bounds)&&i.push(r)}return i}(e,t):this.diagram.spatialSearch.findObjects(e)).length&&this.selectObjects(i,!0)},e.prototype.clearSelectionRectangle=function(){var e=Gh(this.diagram.element.id).getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");e&&ut(e)},e.prototype.dragConnectorEnds=function(e,t,i,n,r,o){var a,s,l,c=!1;return t instanceof Hh?a=t.connectors[0]:t instanceof $a&&this.diagram.currentDrawingObject&&(this.clearSelection(),a=this.diagram.currentDrawingObject),"BezierSourceThumb"!==e&&"BezierTargetThumb"!==e||(c=!0),"ConnectorSourceEnd"===e||"BezierSourceThumb"===e?(s=i.x-(c?n.bezierPoint1.x:a.sourcePoint.x),l=i.y-(c?n.bezierPoint1.y:a.sourcePoint.y),this.dragSourceEnd(a,s,l,null,i,e,void 0,r,o,void 0,n)):(s=i.x-(c?n.bezierPoint2.x:a.targetPoint.x),l=i.y-(c?n.bezierPoint2.y:a.targetPoint.y),this.dragTargetEnd(a,s,l,null,i,e,void 0,n))},e.prototype.getSelectedObject=function(){var e=this.diagram.selectedItems;return e.nodes.concat(e.connectors)},e.prototype.updateBlazorProperties=function(e){if(e){if(window&&window.Blazor){t={methodName:"UpdateBlazorProperties",diagramobj:this.deepDiffer.diagramObject};window.sfBlazor.updateBlazorProperties(t,this.diagram)}}else if(window&&window.Blazor){var t={methodName:"UpdateBlazorProperties",diagramobj:this.diagramObject};window.sfBlazor.updateBlazorProperties(t,this.diagram)}this.diagram.enableServerDataBinding(!0),this.deepDiffer.newNodeObject=[],this.deepDiffer.newConnectorObject=[],this.diagramObject=[],this.diagram.oldNodeObjects=[],this.diagram.oldConnectorObjects=[]},e.prototype.enableCloneObject=function(e){this.diagram.canEnableBlazorObject=e},e.prototype.ismouseEvents=function(e){this.diagram.blazorActions=e?this.diagram.addConstraints(this.diagram.blazorActions,wn.interaction):this.diagram.removeConstraints(this.diagram.blazorActions,wn.interaction)},e.prototype.updateLayerObject=function(e,t){if(w()){var i;i=this.deepDiffer.getLayerObject(e,t,this.diagram),this.diagramObject=i,this.updateBlazorProperties()}},e.prototype.getDiagramOldValues=function(e,t){for(var i={},n=0;n<t.length;n++)i[t[n]]=xd(this.diagram[t[n]]);var r=xd(i),o=this.deepDiffer.map(r,e),a=this.deepDiffer.frameObject({},o),s=this.deepDiffer.removeEmptyValues(a);s=this.deepDiffer.changeSegments(s,r),this.diagramObject=s,this.updateBlazorProperties()},e.prototype.getBlazorOldValues=function(e,t){if(w()){for(var i=this.diagram.oldNodeObjects,n=0;n<i.length;n++)i[n].id&&(this.diagram.oldNodeObjects[n]instanceof Lh&&(this.diagram.oldNodeObjects[n]=Vc(this.diagram.oldNodeObjects[n])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[i[n].id],e,t,this.diagram));var r=this.diagram.oldConnectorObjects;for(n=0;n<r.length;n++)r[n].id&&(this.diagram.oldConnectorObjects[n]instanceof $a&&(this.diagram.oldConnectorObjects[n]=Vc(this.diagram.oldConnectorObjects[n])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[r[n].id],e,t,this.diagram));(i.length>0||r.length>0)&&this.updateBlazorProperties(!0)}},e.prototype.getObjectChanges=function(e,t,i){for(var n=0;n<e.length;n++){var r=this.deepDiffer.map(t[n],e[n]),o=this.deepDiffer.frameObject({},r),a=this.deepDiffer.removeEmptyValues(o);a.children&&(a.children=xd(t[n]).children),(a=this.deepDiffer.changeSegments(a,t[n])).sfIndex=yd(this.diagram,t[n].id),i.push(a)}},e.prototype.clearSelection=function(e,t){return Up(this,void 0,void 0,(function(){var i,n,r,o,a,s;return Yp(this,(function(l){switch(l.label){case 0:return i=this.diagram.allowServerDataBinding,this.diagram.enableServerDataBinding(!1),dp(this.diagram)?(n=this.diagram.selectedItems,r=this.getSelectedObject(),this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=r),o={oldValue:r,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(r,!0),e&&(w()?this.oldSelectedObjects=xd(n):this.diagram.triggerEvent(Hn.selectionChange,o)),o.cancel?[3,3]:(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.nodes=[],n.connectors=[],n.wrapper=null,n.annotation=void 0,this.diagram.clearSelectorLayer(),e?(o={oldValue:Vc(r),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},w()&&(o=this.updateSelectionChangeEventArgs(o,[],r),this.updateBlazorSelector()),w()?[3,1]:(this.diagram.triggerEvent(Hn.selectionChange,o),[3,3])):[3,3])):[3,4];case 1:return[4,this.diagram.triggerEvent(Hn.selectionChange,o)];case 2:(a=l.sent())&&a.cancel&&!t&&(s=[],a.oldValue.nodes.length>0&&(s=a.oldValue.nodes),a.oldValue.connectors.length>0&&(s=s.concat(a.oldValue.connectors)),s&&this.diagram.select(s)),l.label=3;case 3:this.updateBlazorSelector(),this.diagram.enableServerDataBinding(i),l.label=4;case 4:return[2]}}))}))},e.prototype.clearSelectedItems=function(){var e=this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0,t=this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0;this.clearSelection(e+t>0)},e.prototype.removeStackHighlighter=function(){var e=Gh(this.diagram.element.id),t=e.getElementById(e.id+"_stack_highlighter");t&&t.parentNode.removeChild(t)},e.prototype.renderStackHighlighter=function(e,t){var i,n,r,o=this.diagram.selectedItems.nodes[0];if(!t){var a=this.diagram.findObjectsUnderMouse(e.position);if((t=this.diagram.findObjectUnderMouse(a,"Drag",!0))&&!(t.isLane||t.isPhase||t.isHeader))for(var s=0;s<a.length;s++){var l=this.diagram.nameTable[a[s].id];(l.isLane||l.isPhase||l.isHeader)&&(t=l,this.diagram.parentObject=t)}}o&&t&&t.isLane&&o.shape&&!o.shape.isPhase&&(n=this.diagram.nameTable[t.parentId],this.diagram.currentSymbol&&"SwimLane"===n.shape.type&&(i=!0),(o&&!o.parentId&&"SwimLane"!==o.shape.type||o&&o.parentId&&this.diagram.nameTable[o.parentId]&&this.diagram.nameTable[o.parentId].isLane&&o.parentId!==t.parentId&&o.parentId!==t.id)&&(r=this.diagram.selectedItems,(c=Ll(this.diagram,r,t.id,!0))&&(r.wrapper.children[0]=c),this.diagram.renderSelector(!1,!0),r.wrapper.children[0]=r.nodes[0].wrapper));o&&t&&t.parentId&&o.shape&&o.shape.isPhase&&("SwimLane"===this.diagram.nameTable[t.parentId].shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[t.parentId].wrapper,this.diagram.renderSelector(!1,!0)));if(i&&this.diagram.currentSymbol.shape.isLane||o&&t&&o.parentId&&t.parentId&&!o.isPhase&&o.parentId===t.parentId&&o.id!==t.id&&n&&n.container&&("Stack"===n.container.type||"Grid"===n.container.type)){var c=void 0,h="Vertical"===n.container.orientation,d="Stack"===n.container?h:!h;"Grid"===n.container.type&&t.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===n.shape.orientation&&t.rowIndex!==o.rowIndex||"Vertical"===n.shape.orientation&&t.columnIndex!==o.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===n.container.orientation)&&(r=this.diagram.selectedItems,(o.isLane&&Wl(o,this.diagram)||!o.isLane)&&(c=Ll(this.diagram,r,t.id,i)));var p="Stack"===n.container.type?t.wrapper:c;p&&al(p,d,e.position,this.diagram,!1,!0)}},e.prototype.drag=function(e,t,i){var n;if(ls(e)&&this.checkBoundaryConstraints(t,i,e.wrapper.bounds)&&ks(this.diagram))if(e instanceof Lh){var r={offsetX:e.offsetX,offsetY:e.offsetY};if(e.offsetX+=t,e.offsetY+=i,e.children&&!e.container){el(this.diagram,e,!0)||(this.diagram.diagramActions=this.diagram.diagramActions|jn.isGroupDragging);for(var o=this.getAllDescendants(e,[]),a=0;a<o.length;a++)n=this.diagram.nameTable[o[a].id],this.drag(n,t,i);this.updateInnerParentProperties(e),this.diagram.diagramActions=this.diagram.diagramActions&~jn.isGroupDragging}if(el(this.diagram,e,!0)?tl(this.diagram,e):(e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,r,{offsetX:e.offsetX,offsetY:e.offsetY},void 0,void 0,!1),e.wrapper.measureChildren=!1),"SwimLane"===e.shape.type&&!this.diagram.currentSymbol){var s=e.wrapper.children[0];wl(ul(this.diagram,s),this.diagram)}}else{var l=e,c=(r={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint},"Bezier"===l.type),h=!1;if(l.sourceWrapper?h=!0:this.dragSourceEnd(l,t,i,!0,null,"",c),l.targetWrapper?h=!0:this.dragTargetEnd(l,t,i,!0,null,"",c),!h){this.dragControlPoint(l,t,i,!0);var d={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint};this.diagram.connectorPropertyChange(l,r,d)}}},e.prototype.connectorSegmentChange=function(e,t,i){var n,r,o=!0;if(!1===t.equals(t,e.wrapper.bounds)&&e.outEdges.length>0)for(var a=0;a<e.outEdges.length;a++){var s=this.diagram.nameTable[e.outEdges[a]];if(o=""!==s.targetID?!this.isSelected(this.diagram.nameTable[s.targetID]):!this.isSelected(this.diagram.nameTable[s.id]),"Orthogonal"===s.type&&s.segments&&s.segments.length>1)if(i){var l=s.segments[0],c=s.segments[1],h=io(Xr(e.wrapper,e.wrapper.corners,e.wrapper.bounds),l.direction),d=ho({corners:void 0,point:h=ro(s,s.sourceWrapper,h,{x:s.sourceWrapper.offsetX,y:s.sourceWrapper.offsetY},!1),margin:void 0,direction:l.direction},{corners:void 0,point:c.points[1],margin:void 0,direction:void 0});l.length=Qi.distancePoints(d[0],d[1]),c.direction&&c.length&&(c.length=Qi.distancePoints(d[1],d[2]))}else if(o){switch(s.segments[0].direction){case"Bottom":n=e.wrapper.bounds.bottomCenter.x-t.bottomCenter.x,r=e.wrapper.bounds.bottomCenter.y-t.bottomCenter.y;break;case"Top":n=e.wrapper.bounds.topCenter.x-t.topCenter.x,r=e.wrapper.bounds.topCenter.y-t.topCenter.y;break;case"Left":n=e.wrapper.bounds.middleLeft.x-t.middleLeft.x,r=e.wrapper.bounds.middleLeft.y-t.middleLeft.y;break;case"Right":n=e.wrapper.bounds.middleRight.x-t.middleRight.x,r=e.wrapper.bounds.middleRight.y-t.middleRight.y}this.dragSourceEnd(s,n,r,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!(e.parentId&&this.diagram.diagramActions&jn.isGroupDragging))}}},e.prototype.updateEndPoint=function(e,t){e.sourcePoint,e.targetPoint,e.sourceID&&e.sourceID,e.targetID&&e.targetID,e.sourcePortID&&e.sourcePortID,e.targetPortID&&e.targetPortID,e.segments&&e.segments;var i={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};e.sourceID&&(i.sourceID=e.sourceID),e.targetID&&(i.targetID=e.targetID),e.sourcePortID&&(i.sourcePortID=e.sourcePortID),e.targetPortID&&(i.targetPortID=e.targetPortID),e.segments&&(i.segments=e.segments),this.diagram.connectorPropertyChange(e,t||{},i),this.diagram.updateSelector()},e.prototype.dragSourceEnd=function(e,t,i,n,r,o,a,s,l,c,h){var d=this.diagram.nameTable[e.id],p={},u=this.checkBoundaryConstraints(t,i,d.wrapper.bounds);if(cs(d)&&u&&"BezierSourceThumb"!==o&&ks(this.diagram)&&(p={sourcePoint:d.sourcePoint},d.sourcePoint.x+=t,d.sourcePoint.y+=i,"ConnectorSourceEnd"===o&&"Orthogonal"===d.type&&this.changeSegmentLength(d,s,l,c),"Bpmn"===d.shape.type&&"Default"===d.shape.sequence&&this.updatePathElementOffset(d)),"Bezier"===d.type)if(p={sourcePoint:d.sourcePoint},h)this.translateBezierPoints(e,""===o?"ConnectorSourceEnd":o,t,i,h,r,!a);else for(var f=0;f<e.segments.length;f++)this.translateBezierPoints(e,""===o?"ConnectorSourceEnd":o,t,i,e.segments[f],r,!a);return n||this.updateEndPoint(d,p),this.diagram.realActions&zn.AnimationClick||this.diagram.refreshCanvasLayers(),u},e.prototype.updatePathElementOffset=function(e){e.wrapper.children.splice(3,1);var t=new dr,i=e.intermediatePoints;t=Hc(i,e),e.wrapper.children.splice(3,0,t)},e.prototype.changeSegmentLength=function(e,t,i,n){if(e.segments&&null!==e.segments[0].direction&&(!t&&""===e.sourceID||n)){var r=e.segments[0],o=e.segments[1],a=this.diagram.nameTable[e.sourceID],s=void 0;if(r.points[0]=e.sourcePoint,"Top"===r.direction||"Bottom"===r.direction?(r.points[r.points.length-1].x=e.sourcePoint.x,o.points[0].y=r.points[r.points.length-1].y):(r.points[r.points.length-1].y=e.sourcePoint.y,o.points[0].x=r.points[r.points.length-1].x),r.direction&&(r.length||0===r.length)&&(r.length=Qi.distancePoints(r.points[0],r.points[r.points.length-1])),o.direction&&(o.length||0===o.length)&&(o.length=Qi.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]),o.direction=Qi.direction(r.points[r.points.length-1],o.points[o.points.length-1])),""!==e.sourcePortID&&r.length<10)if(e.segments.length>2){var l=e.segments[2],c=Qi.direction(l.points[0],l.points[1]);r.direction===vo(c)?("Right"===r.direction?l.points[0].x=r.points[r.points.length-1].x=a.wrapper.corners.middleRight.x+20:"Left"===r.direction?l.points[0].x=r.points[r.points.length-1].x=a.wrapper.corners.middleLeft.x-20:"Top"===r.direction?l.points[0].y=r.points[r.points.length-1].y=a.wrapper.corners.topCenter.y-20:l.points[0].y=r.points[r.points.length-1].y=a.wrapper.corners.bottomCenter.y+20,l.direction&&l.length&&(l.length=Qi.distancePoints(l.points[0],l.points[l.points.length-1])),r.length=Qi.distancePoints(r.points[0],r.points[r.points.length-1])):r.direction===c&&l.direction&&l.length?("Top"===r.direction||"Bottom"===r.direction?(l.points[0]=r.points[0],l.points[l.points.length-1].x=l.points[0].x):(l.points[0]=r.points[0],l.points[l.points.length-1].y=l.points[0].y),l.length=Qi.distancePoints(l.points[0],l.points[l.points.length-1]),e.segments.splice(0,2)):r.length=20}else r.length=20;else if(r.length<1)if(""!==e.sourceID){if("Right"===o.direction?(s=a.wrapper.corners.middleRight,o.points[o.points.length-1].y=s.y):"Left"===o.direction?(s=a.wrapper.corners.middleLeft,o.points[o.points.length-1].y=s.y):"Top"===o.direction?(s=a.wrapper.corners.topCenter,o.points[o.points.length-1].x=s.x):(s=a.wrapper.corners.bottomCenter,o.points[o.points.length-1].x=s.x),o.length=Qi.distancePoints(s,o.points[o.points.length-1]),e.segments.length>2)(l=e.segments[2]).direction&&l.length&&(l.length=Qi.distancePoints(o.points[o.points.length-1],l.points[l.points.length-1]));e.segments.splice(0,1)}else e.segments.splice(0,1)}else t&&!i&&e.sourceID!==t.id&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof Lh&&this.changeSourceEndToNode(e,t),t&&i&&e.sourcePortID!==i&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof Lh&&this.changeSourceEndToPort(e,t,i)},e.prototype.changeSourceEndToPort=function(e,t,i){var n=this.diagram.getWrapper(t.wrapper,i),r={x:n.offsetX,y:n.offsetY},o=mo(r,bd(t.wrapper),t.wrapper.bounds),a=e.segments[0],s=e.segments[1];if(a.direction!==o){var l=[],c={};if(a.direction===vo(o)){c={};var h=void 0;"Top"===o||"Bottom"===o?(h="Top"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(a.points[0].y-r.y)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.y-a.points[0].y)},c=a.points[0].x>r.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:a.points[0].x-r.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:r.x-a.points[0].x}):(h="Right"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(a.points[0].x-r.x)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.x-a.points[0].x)},c=a.points[0].y>r.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:a.points[0].y-r.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:r.y-a.points[0].y}),l.push(new _a(e,"segments",h,!0)),l.push(new _a(e,"segments",c,!0))}else c={type:"Orthogonal",direction:o,length:20,isTerminal:!0},l.push(new _a(e,"segments",c,!0));a.direction!==vo(o)&&("Top"===o||"Bottom"===o?(a.points[0].x=r.x,a.points[0].y=a.points[a.points.length-1].y="Top"===o?r.y-20:r.y+20):(a.points[0].y=r.y,a.points[0].x=a.points[a.points.length-1].x="Right"===o?r.x+20:r.x-20),a.length=Qi.distancePoints(a.points[0],a.points[a.points.length-1]),s.length=Qi.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1])),e.segments=l.concat(e.segments)}else a.points[0]=r,"Top"===o||"Bottom"===o?a.points[a.points.length-1].x=r.x:a.points[a.points.length-1].y=r.y,a.length=Qi.distancePoints(a.points[0],a.points[a.points.length-1]),s.length=Qi.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1])},e.prototype.removeTerminalSegment=function(e,t){for(var i=0;i<e.segments.length-2;i++){var n=e.segments[0];n.isTerminal&&(t?n.isTerminal=!1:(e.segments.splice(i,1),i--))}},e.prototype.changeSourceEndToNode=function(e,t){this.removeTerminalSegment(e);var i,n,r=t.wrapper.children[0].corners,o=e.segments[0],a=e.segments[1],s=[];if("Right"===o.direction||"Left"===o.direction)if(i="Left"===o.direction?r.middleLeft:r.middleRight,o.length>r.width||"Left"===o.direction&&i.x>=o.points[0].x||"Right"===o.direction&&i.x<=o.points[0].x)o.points[0].y=o.points[o.points.length-1].y=i.y,o.points[0].x=i.x,o.length=Qi.distancePoints(o.points[0],o.points[o.points.length-1]),a.length=Qi.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]);else{var l=void 0;n="Bottom"===(l=a.direction?a.direction:Qi.direction(a.points[0],a.points[a.points.length-1]))?r.bottomCenter:r.topCenter,a.length&&a.direction&&(a.length="Top"===l?o.points[o.points.length-1].y-(n.y+20):n.y+20-o.points[o.points.length-1].y),o.length=o.points[o.points.length-1].x-n.x,o.direction=o.length>0?"Right":"Left";var c={type:"Orthogonal",direction:l,length:20};s.push(new _a(e,"segments",c,!0)),e.segments=s.concat(e.segments)}else if(i="Bottom"===o.direction?r.bottomCenter:r.topCenter,o.length>r.height||"Top"===o.direction&&i.y>=o.points[0].y||"Bottom"===o.direction&&i.y<=o.points[0].y)o.points[0].x=o.points[o.points.length-1].x=i.x,o.points[0].y=i.y,o.length=Qi.distancePoints(o.points[0],o.points[o.points.length-1]),a.length=Qi.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]);else{n="Left"===a.direction?r.middleLeft:r.middleRight;l=void 0;l=a.direction?a.direction:Qi.direction(a.points[0],a.points[a.points.length-1]),a.length&&a.direction&&(a.length="Left"===l?o.points[o.points.length-1].x-(n.x+20):n.x+20-o.points[o.points.length-1].x),o.length=o.points[o.points.length-1].y-n.y,o.direction=o.length>0?"Bottom":"Top";c={type:"Orthogonal",direction:l,length:20};s.push(new _a(e,"segments",c,!0)),e.segments=s.concat(e.segments)}},e.prototype.translateBezierPoints=function(e,t,i,n,r,o,a){var s=e.segments.indexOf(r),l=e.segments[s];l&&("BezierSourceThumb"===t&&(l.vector1.angle||l.vector1.distance)?l.vector1={distance:e.distance(e.sourcePoint,o),angle:Qi.findAngle(e.sourcePoint,o)}:"BezierTargetThumb"===t&&(l.vector2.angle||l.vector2.distance)?l.vector2={distance:e.distance(e.targetPoint,o),angle:Qi.findAngle(e.targetPoint,o)}:("ConnectorSourceEnd"===t&&!e.sourceID||"ConnectorTargetEnd"===t&&!e.targetID)&&a&&Va(l.vector1)&&Va(l.vector2)?(Qi.isEmptyPoint(l.point1)&&(l.bezierPoint1=Ua(e.sourcePoint,e.targetPoint)),Qi.isEmptyPoint(l.point2)&&(l.bezierPoint2=Ua(e.targetPoint,e.sourcePoint))):"BezierSourceThumb"===t||"ConnectorSourceEnd"===t&&!a&&Va(l.vector1)?(l.bezierPoint1.x+=i,l.bezierPoint1.y+=n,Qi.isEmptyPoint(l.point1)&&!a||(l.point1={x:l.bezierPoint1.x,y:l.bezierPoint1.y})):("BezierTargetThumb"===t||"ConnectorTargetEnd"===t&&!a&&Va(l.vector2))&&(l.bezierPoint2.x+=i,l.bezierPoint2.y+=n,Qi.isEmptyPoint(l.point2)&&!a||(l.point2={x:l.bezierPoint2.x,y:l.bezierPoint2.y})))},e.prototype.dragTargetEnd=function(e,t,i,n,r,o,a,s){var l,c=this.diagram.nameTable[e.id],h=this.checkBoundaryConstraints(t,i,c.wrapper.bounds);if(hs(c)&&"BezierTargetThumb"!==o&&h&&ks(this.diagram)){if(l={targetPoint:c.targetPoint},c.targetPoint.x+=t,c.targetPoint.y+=i,"ConnectorTargetEnd"===o&&"Orthogonal"===c.type&&c.segments&&c.segments.length>0){var d=c.segments[c.segments.length-2];d&&2===c.segments[c.segments.length-1].points.length&&("Left"===d.direction||"Right"===d.direction?d.points[d.points.length-1].x=c.targetPoint.x:d.points[d.points.length-1].y=c.targetPoint.y,d.length=Qi.distancePoints(d.points[0],d.points[d.points.length-1]),d.direction=Qi.direction(d.points[0],d.points[d.points.length-1]))}"Bpmn"===c.shape.type&&"Default"===c.shape.sequence&&this.updatePathElementOffset(c)}if("Bezier"===c.type)if(l={targetPoint:c.targetPoint},s)this.translateBezierPoints(e,""===o?"ConnectorTargetEnd":o,t,i,s,r,!a);else for(var p=0;p<e.segments.length;p++)this.translateBezierPoints(e,""===o?"ConnectorTargetEnd":o,t,i,e.segments[p],r,!a);return n||this.updateEndPoint(c,l),this.diagram.realActions&zn.AnimationClick||this.diagram.refreshCanvasLayers(),h},e.prototype.dragControlPoint=function(e,t,i,n,r){var o=this.diagram.nameTable[e.id];if(("Straight"===o.type||"Bezier"===o.type)&&o.segments.length>0){if(void 0!==r&&o.segments[r])o.segments[r].point.x+=t,o.segments[r].point.y+=i;else for(var a=0;a<o.segments.length-1;a++)o.segments[a].point.x+=t,o.segments[a].point.y+=i;n||this.updateEndPoint(o)}return!0},e.prototype.rotatePropertyChnage=function(e){var t=this.diagram.selectedItems,i=[];i=(i=i.concat(t.nodes)).concat(t.connectors);var n={x:t.offsetX,y:t.offsetY};this.rotateObjects(t,i,e-t.rotateAngle,n),t.wrapper.rotateAngle=t.rotateAngle=e,this.diagram.updateSelector()},e.prototype.rotateObjects=function(e,t,i,n,r){n=n||{};var o=pn();fn(o,i,n.x,n.y);for(var a=0,s=t;a<s.length;a++){var l=s[a];if(l instanceof Lh){if(ps(l)&&ks(this.diagram)){if(!1!==r||e!==l){({rotateAngle:l.rotateAngle}),l.rotateAngle+=i,l.rotateAngle=(l.rotateAngle+360)%360;var c=un(o,{x:l.offsetX,y:l.offsetY});l.offsetX=c.x,l.offsetY=c.y,this.diagram.nodePropertyChange(l,{},{offsetX:l.offsetX,offsetY:l.offsetY,rotateAngle:l.rotateAngle})}if(l.processId){var h=this.diagram.nameTable[l.processId],d=this.diagram.bpmnModule.getChildrenBound(h,l.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(d,l,this.diagram)}l.children&&l.children.length&&!l.container&&this.getChildren(l,t)}}else this.rotatePoints(l,i,n||{x:l.wrapper.offsetX,y:l.wrapper.offsetY});this.diagram.updateDiagramObject(l)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},e.prototype.snapConnectorEnd=function(e){return this.diagram.snapSettings.constraints&Sn.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(e),e},e.prototype.snapAngle=function(e){return this.diagram.snapSettings.constraints&Sn.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,e):0},e.prototype.rotatePoints=function(e,t,i){if(!e.sourceWrapper||!e.targetWrapper){var n=pn();fn(n,t,i.x,i.y),e.sourcePoint=un(n,e.sourcePoint),e.targetPoint=un(n,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e);var r={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};this.diagram.connectorPropertyChange(e,{},r)}},e.prototype.updateInnerParentProperties=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var i=this.getAllDescendants(e,[],!1,!0),n=0;n<i.length;n++){var r=this.diagram.nameTable[i[n].id];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,r.width=r.wrapper.width,r.height=r.wrapper.height}this.diagram.protectPropertyChange(t)},e.prototype.scale=function(e,t,i,n,r,o){var a=this.diagram.nameTable[e.id],s=a,l=a.wrapper;r||(r=e);var c=r.wrapper,h=function(e,t,i,n,r,o,a,s){var l={x:0,y:0},c=pn();switch(fn(c,r,o,a),s.x){case 0:switch(s.y){case 0:l=un(c,{x:e,y:t});break;case.5:l=un(c,{x:e,y:t+n/2});break;case 1:l=un(c,{x:e,y:t+n})}break;case.5:switch(s.y){case 0:l=un(c,{x:e+i/2,y:t});break;case.5:l=un(c,{x:e+i/2,y:t+n/2});break;case 1:l=un(c,{x:e+i/2,y:t+n})}break;case 1:switch(s.y){case 0:l=un(c,{x:e+i,y:t});break;case.5:l=un(c,{x:e+i,y:t+n/2});break;case 1:l=un(c,{x:e+i,y:t+n})}}return{x:l.x,y:l.y}}(c.offsetX-c.actualSize.width*c.pivot.x,c.offsetY-c.actualSize.height*c.pivot.y,c.actualSize.width,c.actualSize.height,c.rotateAngle,c.offsetX,c.offsetY,n);if(void 0!==l.actualSize.width&&void 0!==l.actualSize.height&&ks(this.diagram)){if(s.children&&!s.container){for(var d=0,p=this.getAllDescendants(s,[]);d<p.length;d++){var u=p[d];this.scaleObject(t,i,h,u,l,r)}e.wrapper.measure(new Zi),e.wrapper.arrange(e.wrapper.desiredSize),this.diagram.updateGroupOffset(a),this.updateInnerParentProperties(s)}else this.scaleObject(t,i,h,a,l,r);var f=wd(e.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,f)&&o)return this.scale(e,1/t,1/i,n,void 0,!0),!1;this.diagram.updateDiagramObject(e)}return!0},e.prototype.getAllDescendants=function(e,t,i,n){for(var r=e,o=[],a=0;a<r.children.length;a++)(e=this.diagram.nameTable[r.children[a]])&&(e.children?(i&&t.push(e),n&&o.push(e),t=this.getAllDescendants(e,t)):t.push(e));return n?o:t},e.prototype.getChildren=function(e,t){var i=e;if(e.children)for(var n=0;n<i.children.length;n++)e=this.diagram.nameTable[i.children[n]],t.push(e);return t},e.prototype.cloneChild=function(e){return this.diagram.nameTable[e]},e.prototype.scaleObject=function(e,t,i,n,r,o){t=t<0?1:t;var a={};if(1!==(e=e<0?1:e)||1!==t){var s=void 0,l=void 0;if(n instanceof Lh){var c=n,h=void 0,d=void 0;a={width:n.wrapper.actualSize.width,height:n.wrapper.actualSize.height,offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY,margin:{top:c.margin.top,left:c.margin.left}},"Bpmn"===c.shape.type&&c.shape.activity.subProcess.processes&&c.shape.activity.subProcess.processes.length>0&&(d=this.diagram.bpmnModule.getChildrenBound(c,c.id,this.diagram),h=c.wrapper.bounds.containsRect(d)),s=c.wrapper.actualSize.width*e,l=c.wrapper.actualSize.height*t,void 0!==c.maxWidth&&0!==c.maxWidth&&(s=Math.min(c.maxWidth,s)),void 0!==c.minWidth&&0!==c.minWidth&&(s=Math.max(c.minWidth,s)),void 0!==c.maxHeight&&0!==c.maxHeight&&(l=Math.min(c.maxHeight,l)),void 0!==c.minHeight&&0!==c.minHeight&&(l=Math.max(c.minHeight,l)),h&&(s=Math.max(s,d.right-c.wrapper.bounds.x),l=Math.max(l,d.bottom-c.wrapper.bounds.y)),e=s/c.actualSize.width,t=l/c.actualSize.height}var p,u=pn();if(o||(o=n),fn(u,-(p=o.wrapper).rotateAngle,i.x,i.y),gn(u,e,t,i.x,i.y),fn(u,p.rotateAngle,i.x,i.y),n instanceof Lh){var f,g,m=un(u,{x:(c=n).wrapper.offsetX,y:c.wrapper.offsetY}),y=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,v=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y;if(s>0)if(c.processId){var b=this.diagram.nameTable[c.processId];(!b.maxWidth||c.margin.left+s<b.maxWidth)&&(c.width=s,c.offsetX=m.x)}else c.width=s,c.offsetX=m.x;if(l>0)if(c.processId){var w=this.diagram.nameTable[c.processId];(!w.maxHeight||c.margin.top+l<w.maxHeight)&&(c.height=l,c.offsetY=m.y)}else c.height=l,c.offsetY=m.y;f=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,g=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y,this.diagram.nameTable[c.processId]&&(c.margin.top+(g-v)<=0||c.margin.left+(f-y)<=0)?this.diagram.nodePropertyChange(n,{},{margin:{top:c.margin.top,left:c.margin.left}}):el(this.diagram,n,!0)?tl(this.diagram,n):this.diagram.nodePropertyChange(n,a,{width:c.width,height:c.height,offsetX:c.offsetX,offsetY:c.offsetY,margin:{top:c.margin.top+(g-v),left:c.margin.left+(f-y)}})}else{var x=n,S={sourcePoint:x.sourcePoint,targetPoint:x.targetPoint};x.sourceWrapper&&x.targetWrapper||this.scaleConnector(x,u,S)}var C=this.diagram.nameTable[n.processId];if(C){C.wrapper.bounds,n.wrapper.bounds,d=this.diagram.bpmnModule.getChildrenBound(C,n.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(d,n,this.diagram)}}},e.prototype.scaleConnector=function(e,t,i){e.sourcePoint=un(t,e.sourcePoint),e.targetPoint=un(t,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e);var n={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};this.diagram.connectorPropertyChange(e,i,n)},e.prototype.portDrag=function(e,t,i,n){var r,o,a=this.findTarget(t,e),s=wd(e.wrapper);a&&Ms(a,this.diagram)&&(r=this.getPortChanges(e,a),a.offset.x+=i/s.width,a.offset.y+=n/s.height,o=this.getPortChanges(e,a),this.diagram.nodePropertyChange(e,r,o),this.diagram.updateDiagramObject(e))},e.prototype.labelDrag=function(e,t,i,n){var r,o,a;a=this.findTarget(t,e);var s=bd(e.wrapper);r=this.getAnnotationChanges(e,a),a instanceof Pr?(a.offset.x+=i/s.width,a.offset.y+=n/s.height):(this.updatePathAnnotationOffset(e,a,i,n),a instanceof Or&&(a.alignment="Center")),o=this.getAnnotationChanges(e,a),e instanceof Lh?this.diagram.nodePropertyChange(e,r,o):this.diagram.connectorPropertyChange(e,r,o),this.diagram.updateDiagramObject(e),up(this.diagram,a,!1,t)||this.labelSelect(e,t)},e.prototype.updatePathAnnotationOffset=function(e,t,i,n,r,o){var a,s,l,c,h=this.diagram.getWrapper(e.wrapper,t.id),d=h.offsetX,p=h.offsetY,u=e.intermediatePoints,f=0,g=r||{x:d+i,y:p+n},m=this.getInterceptWithSegment(g,u),y=u[u.length-1];if(l=Qi.getLengthFromListOfPoints(u),m.length>0){if(t.dragLimit.top||t.dragLimit.bottom||t.dragLimit.left||t.dragLimit.right){var v={minDistance:null};y=this.getRelativeOffset(g,u,v);var b={minDistance:null};if(c=this.getRelativeOffset(g,m,b),null!=v&&b.minDistance<v.minDistance)y=c;else y=oc(e.intermediatePoints,t,e.wrapper.bounds).point}else y=c=m[m.length-1];if(y){var w=void 0;for(w=0;w<u.length;w++){if(null!=s){if(hn.toBounds([s,u[w]]).containsPoint(y)){f+=Qi.findLength(s,y);break}f+=Qi.findLength(s,u[w])}s=u[w]}a={x:f/l,y:0}}this.updateLabelMargin(e,t,a,g,o,i,n)}else this.updateLabelMargin(e,t,null,g,o,i,n)},e.prototype.getRelativeOffset=function(e,t,i){var n,r,o,a;for(a=0;a<t.length;a++)o=t[a],r=Math.round(Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))),null!==i.minDistance&&Math.min(Math.abs(i.minDistance),Math.abs(r))!==Math.abs(r)||(n=o,i.minDistance=r);return n},e.prototype.dragLimitValue=function(e,t,i,n){var r=!1,o=!1;return i.x>=t.x-e.dragLimit.left-n.width/2&&i.x<=t.x+e.dragLimit.right+n.width/2&&(r=!0),i.y>=t.y-e.dragLimit.top-n.height/2&&i.y<=t.y+e.dragLimit.bottom+n.height/2&&(o=!0),{x:r,y:o}},e.prototype.updateLabelMargin=function(e,t,i,n,r,o,a){if(i=i||{x:t.offset,y:0},t&&i&&i.x>0&&i.x<1){var s,l=Qi.getLengthFromListOfPoints(e.intermediatePoints);s=this.getPointAtLength(l*i.x,e.intermediatePoints,0);var c=this.diagram.scrollSettings.currentZoom,h=t.dragLimit;if(h.top||h.bottom||h.left||h.right){this.diagram.getWrapper(e.wrapper,t.id);var d=new hn(0,0,0,0),p=this.diagram.getWrapper(e.wrapper,t.id);d.x=p.offsetX/c+o,d.y=p.offsetY/c+a,d.width=p.bounds.width/c,d.height=p.bounds.height/c;var u=new hn(s.x-(h.left||0)-d.width/2,s.y-(h.top||0)-d.height/2,(h.left||0)+(h.right||0)+d.width,(h.top||0)+(h.bottom||0)+d.height);if(u.containsPoint(n))n=n;else for(var f=[s,n],g=0,m=this.boundsInterSects(f,u,!1);g<m.length;g++){n=m[g]}var y=this.dragLimitValue(t,s,n,d);t.margin={left:y.x?n.x-s.x:t.margin.left,top:y.y?n.y-s.y:t.margin.top,right:0,bottom:0}}else t.margin={left:n.x-s.x,top:n.y-s.y,right:0,bottom:0};t.offset=i.x,r&&(t.width=r.width,t.height=r.height)}},e.prototype.boundsInterSects=function(e,t,i){var n;if(t){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height},{x:t.x,y:t.y}];n=this.intersect(e,r,i)}return n},e.prototype.intersect=function(e,t,i){for(var n=[],r=0;r<e.length-1;r++)for(var o=0;o<t.length-1;o++){var a=Jl(e[r],e[r+1],t[o],t[o+1]);0!==a.x&&0!==a.y&&n.push(a)}return n},e.prototype.getPointAtLength=function(e,t,i){for(var n,r,o=0,a={x:0,y:0},s=0;s<t.length;s++)if(r=t[s],n){var l=Qi.findLength(n,r),c=void 0,h=void 0,d=void 0,p=void 0;if(o+l>=e){c=e-o,h=Qi.findAngle(n,r),d=c*Math.cos(h*Math.PI/180),p=c*Math.sin(h*Math.PI/180),a={x:n.x+d,y:n.y+p},h;break}o+=l,n=r}else n=r;return a},e.prototype.getInterceptWithSegment=function(e,t){var i,n,r,o=[],a=[],s=[];r=Qi.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight});for(var l=1;l<t.length;l++){s=[t[l-1],t[l]],a=[],n=Math.round(Qi.findAngle(s[0],s[1])%360),i=Math.round(Qi.findAngle(s[1],s[0])%360);var c=n>0&&n<=90||n>180&&n<=270?90:-90;a.push(Qi.transform(e,n+c,r)),a.push(Qi.transform(e,i+c,r));var h=Ql({x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y},{x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y});h.enabled&&o.push(h.intersectPt)}return o},e.prototype.getAnnotationChanges=function(e,t){var i={};return i[Tc(e,t.id,!0)]={width:t.width,height:t.height,offset:e instanceof Lh?{x:t.offset.x,y:t.offset.y}:t.offset,rotateAngle:t.rotateAngle,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},horizontalAlignment:t.horizontalAlignment,verticalAlignment:t.verticalAlignment,alignment:e instanceof $a?t.alignment:void 0},{annotations:i}},e.prototype.getPortChanges=function(e,t){var i={};return i[Tc(e,t.id,!1)]={offset:t.offset},{ports:i}},e.prototype.labelRotate=function(e,t,i,n){var r,o;r=this.getAnnotationChanges(e,t);pn(),t.rotateAngle;var a=this.diagram.getWrapper(e.wrapper,t.id),s=to({x:a.offsetX,y:a.offsetY},i)+90,l=this.snapAngle(s);(s=0!==l?l:s,t instanceof Or&&t.segmentAngle)&&(s-=rc(e.intermediatePoints,t,e.wrapper.bounds).angle);s=(s+360)%360,t.rotateAngle+=s-(t.rotateAngle+a.parentTransform),t.margin.bottom+="Top"===a.verticalAlignment?-t.height/2:"Bottom"===a.verticalAlignment?t.height/2:0,t.margin.right+="Left"===a.horizontalAlignment?-t.width/2:"Right"===a.horizontalAlignment?t.width/2:0,t instanceof Or?t.alignment="Center":t.horizontalAlignment=t.verticalAlignment="Center",n.wrapper.rotateAngle=n.rotateAngle=t.rotateAngle,o=this.getAnnotationChanges(e,t),e instanceof Lh?this.diagram.nodePropertyChange(e,r,o):this.diagram.connectorPropertyChange(e,r,o),this.diagram.updateDiagramObject(e)},e.prototype.labelResize=function(e,t,i,n,r,o){var a,s,l;a=this.getAnnotationChanges(e,t);var c=o.wrapper.children[0];if(i&&1!==i||n&&1!==n){var h=pn(),d=pn();fn(h,-e.rotateAngle,e.offsetX,e.offsetY),fn(d,-(l=(c.rotateAngle+(e instanceof Lh?e.rotateAngle:0)+360)%360),r.x,r.y),gn(d,i,n,r.x,r.y),fn(d,l,r.x,r.y);var p=un(d,{x:c.offsetX,y:c.offsetY}),u=c.actualSize.height*n,f=c.actualSize.width*i,g=this.findTarget(c,e);if(g instanceof Or)this.updatePathAnnotationOffset(e,t,0,0,p,new Zi(f,u));else{var m=bd(e.wrapper);(p=un(h,p)).x=p.x-c.margin.left+c.margin.right,p.y=p.y-c.margin.top+c.margin.bottom,p.y+="Top"===g.verticalAlignment?-u/2:"Bottom"===g.verticalAlignment?u/2:0,p.x+="Left"===g.horizontalAlignment?-f/2:"Right"===g.horizontalAlignment?f/2:0;var y=m.width/(p.x-m.x),v=m.height/(p.y-m.y);f>1&&(g.width=f,g.offset.x=1/y),u>1&&(g.height=u,g.offset.y=1/v)}}t instanceof Or&&(t.alignment="Center"),s=this.getAnnotationChanges(e,t),e instanceof Lh?this.diagram.nodePropertyChange(e,a,s):this.diagram.connectorPropertyChange(e,a,s),this.diagram.updateDiagramObject(e)},e.prototype.getSubProcess=function(e){var t,i={nodes:[],connectors:[]};return e instanceof Lh?t=e.processId:e&&e.nodes&&e.nodes.length&&e.nodes[0].processId&&(t=e.nodes[0].processId),t?(i.nodes.push(xd(this.diagram.nameTable[t])),i):i},e.prototype.checkBoundaryConstraints=function(e,t,i){var n=this.diagram.pageSettings,r=this.diagram.pageSettings.boundaryConstraints,o=this.diagram.scroller;if("Page"===r||"Diagram"===r){var a=i?void 0:this.diagram.selectedItems.wrapper.bounds,s="Page"===r?n.width:o.viewPortWidth,l="Page"===r?n.height:o.viewPortHeight,c=i,h=(i?c.right:a.right)+(e||0),d=(i?c.left:a.left)+(e||0),p=(i?c.top:a.top)+(t||0),u=(i?c.bottom:a.bottom)+(t||0);return h<=s&&d>=0&&u<=l&&p>=0}return!0},e.prototype.dragSelectedObjects=function(e,t){var i=this.diagram.selectedItems;if(this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=i.offsetX,this.state.backup.offsetY=i.offsetY),i=Js(this.diagram,i)||i,this.checkBoundaryConstraints(e,t)){this.diagram.diagramActions=this.diagram.diagramActions|jn.PreventZIndexOnDragging|jn.DragUsingMouse;var n=this.diagram.selectedObject.actualObject;return(n&&n instanceof Lh&&n.isLane&&Wl(n,this.diagram)||!n||!n.isLane)&&this.diagram.drag(i,e,t),this.diagram.diagramActions=this.diagram.diagramActions&~(jn.PreventZIndexOnDragging|jn.DragUsingMouse),this.diagram.refreshCanvasLayers(),!0}return!1},e.prototype.scaleSelectedItems=function(e,t,i){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY,this.state.backup.width=n.width,this.state.backup.height=n.height,this.state.backup.pivot=i),n=Js(this.diagram,n)||n,this.diagram.scale(n,e,t,i)},e.prototype.rotateSelectedItems=function(e){var t=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=t.rotateAngle),t=Js(this.diagram,t)||t,this.diagram.rotate(t,e)},e.prototype.hasSelection=function(){return dp(this.diagram)},e.prototype.isSelected=function(e){return up(this.diagram,e)},e.prototype.initExpand=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var i=e.target||e.source,n={isExpanded:i.isExpanded};i.isExpanded=!i.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=jn.PreventIconsUpdate,this.diagram.nodePropertyChange(i,n,{isExpanded:i.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~jn.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1;for(var r=0,o=this.diagram.views;r<o.length;r++){var a=o[r],s=this.diagram.views[a];s instanceof cu||this.diagram.refreshCanvasDiagramLayer(s)}this.diagram.protectPropertyChange(t)},e.prototype.expandNode=function(e,t){var i,n=this.diagram.preventNodesUpdate,r=e.isExpanded;if(this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(e,r,this.diagram),e.isExpanded=r,this.diagram.layout.fixedNode=e.id,this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),this.diagram.blazorActions=wn.expandNode,i=this.diagram.doLayout(),this.diagram.blazorActions=wn.Default,this.diagram.preventNodesUpdate=n,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule)this.diagram.allowServerDataBinding=!1,this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,i,e,this.diagram),this.diagram.allowServerDataBinding=!0;else{var o={element:Vc(xd(e)),state:!!e.isExpanded};this.triggerEvent(Hn.expandStateChange,o),this.diagram.lineRoutingModule&&this.diagram.constraints&kn.LineRouting&&this.diagram.resetSegments()}return i},e.prototype.getparentexpand=function(e,t,i,n){for(var r,o=0;o<e.inEdges.length;o++){var a=t.nameTable[e.inEdges[o]],s=t.nameTable[a.sourceID];if(s.isExpanded&&!i&&s.id!==n.sourceID&&a.visible)return!1;r=!0}return r},e.prototype.expandCollapse=function(e,t,i){for(var n=0;n<e.outEdges.length;n++){var r=i.nameTable[e.outEdges[n]],o=i.nameTable[r.targetID],a=this.getparentexpand(o,i,t,r);r.visible=t;var s={visible:o.visible,style:{opacity:o.wrapper.style.opacity}},l={visible:o.visible,style:{opacity:o.wrapper.style.opacity}};a&&(o.isExpanded&&this.expandCollapse(o,t,i),o.visible=t,o.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&t?.1:o.style.opacity,i.nodePropertyChange(o,s,l)),i.connectorPropertyChange(r,s,l)}},e.prototype.updateNodeDimension=function(e,t){e instanceof Lh&&(e.offsetX=t.x+t.width/2,e.offsetY=t.y+t.height/2,e.width=t.width,e.height=t.height,e.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(e,{},{width:t.width,height:t.height,offsetX:e.offsetX,offsetY:e.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},e.prototype.updateConnectorPoints=function(e,t){e instanceof $a&&(this.diagram.connectorPropertyChange(e,{},{targetPoint:e.targetPoint}),this.diagram.updateDiagramObject(e))},e.prototype.updateSelectedNodeProperties=function(e){if(this.diagram.lineRoutingModule&&this.diagram.constraints&kn.LineRouting){var t=[],i=[],n=[],r=[],o=[],a=[];this.diagram.protectPropertyChange(!0);var s=[],l=[],c=this.diagram.selectedObject.actualObject,h=this.diagram.selectedObject.helperObject;if(h&&c){var d=h.offsetX-c.offsetX,p=h.offsetY-c.offsetY,u=h.width-c.width,f=h.height-c.height,g=h.rotateAngle-c.rotateAngle;if(this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>0&&(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=h.rotateAngle),c instanceof Lh&&"SwimLane"!==c.shape.type&&!c.isLane&&!c.isPhase&&!c.isHeader)c.offsetX===c.wrapper.offsetX&&c.offsetY===c.wrapper.offsetY&&c.width===c.wrapper.width&&c.height===c.wrapper.height&&c.rotateAngle===c.wrapper.rotateAngle||(w()&&t.push(xd(c,void 0,void 0,!0)),c.offsetX+=d,c.offsetY+=p,c.width+=u,c.height+=f,c.rotateAngle+=g,this.diagram.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY,width:c.width,height:c.height,rotateAngle:c.rotateAngle}),w()&&n.push(xd(c,void 0,void 0,!0))),s=this.diagram.spatialSearch.findObjects(c.wrapper.outerBounds);else if(c instanceof Hh)for(var m=0;m<c.nodes.length;m++){var y=c.nodes[m];y instanceof Lh&&"SwimLane"!==y.shape.type&&!y.isLane&&!y.isPhase&&!y.isHeader&&(y.offsetX+=d,y.offsetY+=p,y.width+=u,y.height+=f,y.rotateAngle+=g,this.diagram.nodePropertyChange(y,{},{offsetX:y.offsetX,offsetY:y.offsetY,width:y.width,height:y.height,rotateAngle:y.rotateAngle}),s=s.concat(this.diagram.spatialSearch.findObjects(c.wrapper.outerBounds)))}}else e instanceof $a?s.push(e):e instanceof Hh&&e.connectors.length&&(s=s.concat(e.connectors));for(m=0;m<s.length;m++)s[m]instanceof $a&&-1===l.indexOf(s[m].id)&&l.push(s[m].id);this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0);for(m=0;m<l.length;m++){var v=this.diagram.nameTable[l[m]];v instanceof $a&&"Orthogonal"===v.type&&(w()&&i.push(xd(v,void 0,void 0,!0)),this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,v,!0),w()&&r.push(xd(v,void 0,void 0,!0)))}if(this.updateSelector(),w()){this.getObjectChanges(t,n,o),this.getObjectChanges(i,r,a);var b={nodes:o,connectors:a};if(window&&window.Blazor&&a.length+o.length){var x={methodName:"UpdateBlazorProperties",diagramobj:b};window.sfBlazor.updateBlazorProperties(x,this.diagram)}}this.diagram.protectPropertyChange(!1)}},e.prototype.drawSelectionRectangle=function(e,t,i,n){this.diagram.drawSelectionRectangle(e,t,i,n)},e.prototype.startGroupAction=function(){this.diagram.startGroupAction()},e.prototype.endGroupAction=function(){this.diagram.endGroupAction()},e.prototype.removeChildFromBPmn=function(e,t,i){var n=this.diagram.nameTable[e.id]||e.nodes[0];if(i&&n&&n.processId&&n.processId===i.wrapper.id){var r=xd(n);r.processId=n.processId,this.diagram.startGroupAction();for(var o=[],a=(o=o.concat(n.outEdges,n.inEdges)).length-1;a>=0;a--){var s=this.diagram.nameTable[o[a]];s&&this.diagram.remove(s)}var l=void 0;(l=this.diagram.nameTable[n.processId].shape.activity.subProcess.processes||[]).splice(l.indexOf(n.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[n.processId].wrapper,n.id),this.diagram.nameTable[n.id].processId="",n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var c={type:"PositionChanged",redoObject:{nodes:[xd(n)]},undoObject:{nodes:[r]},category:"Internal"};this.addHistoryEntry(c),this.diagram.endGroupAction()}},e.prototype.isDroppable=function(e,t){var i=this.diagram.nameTable[e.id]||e.nodes[0];return!!i&&(!!(!w()&&"TextAnnotation"===i.shape.shape||w()&&"TextAnnotation"===i.shape.bpmnShape)||(!i||"Bpmn"!==i.shape.type||!(i.processId===t.id||i.id===t.processId||"Bpmn"===t.shape.type&&t.shape.activity.subProcess.collapsed)))},e.prototype.renderHighlighter=function(e,t,i){new hn;if(e.target instanceof Lh||t&&e.source instanceof Lh){var n=t?e.source:e.target,r=t?e.sourceWrapper:e.targetWrapper,o=this.findTarget(r,n,i,!0),a=void 0;if(o instanceof yh)for(var s=o.id,l=e.target,c=0,h=l.wrapper.children[0].children[0].children[2].children;c<h.length;c++){var d=h[c];if(d.id===l.id+"_"+s){a=d.children[0];break}}else a=o instanceof Lh?o.wrapper:t?e.sourceWrapper:e.targetWrapper;this.diagram.renderHighlighter(a)}},e.prototype.mouseOver=function(e,t,i){return!0},e.prototype.snapPoint=function(e,t,i,n){var r,o=this.diagram.selectedItems,a=t.x<e.x,s=t.y<e.y,l=r={x:i,y:n};return this.snappingModule&&(l=this.diagram.snappingModule.snapPoint(this.diagram,o,a,s,r,e,t)),l},e.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&Sn.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},e.prototype.dropAnnotation=function(e,t){var i=e instanceof Lh?e:e.nodes[0];if(this.diagram.bpmnModule&&"Bpmn"===t.shape.type&&(!w()&&"TextAnnotation"===i.shape.shape||w()&&"TextAnnotation"===i.shape.bpmnShape)){i.hasTarget=t.id,i.shape.annotation.nodeId=t.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(i.shape.annotation,t),i.shape.annotation.nodeId="",this.diagram.remove(i)),this.diagram.refreshDiagramLayer()}},e.prototype.drop=function(e,t,i){this.diagram.bpmnModule&&(this.diagram.bpmnModule.dropBPMNchild(t,e instanceof Lh?e:e.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())},e.prototype.addHistoryEntry=function(e){this.diagram.addHistoryEntry(e)},e.prototype.align=function(e,t,i){if(e.length>0){var n=0;e[0]=this.diagram.nameTable[e[0].id]||e[0];var r="Object"===i?wd(e[0].wrapper):this.diagram.selectedItems.wrapper.bounds,o={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(n="Object"===i?n+1:n;n<e.length;n++){var s=0,l=0;e[n]=this.diagram.nameTable[e[n].id]||e[n];var c=wd(e[n].wrapper);"Left"===t?s=r.left+c.width/2-c.center.x:"Right"===t?s=r.right-c.width/2-c.center.x:"Top"===t?l=r.top+c.height/2-c.center.y:"Bottom"===t?l=r.bottom-c.height/2-c.center.y:"Center"===t?s=r.center.x-c.center.x:"Middle"===t&&(l=r.center.y-c.center.y),o=this.storeObject(o,e[n]),this.drag(e[n],s,l),this.diagram.updateSelector(),a=this.storeObject(a,e[n])}o=xd(o),a=xd(a);var h={type:"Align",category:"Internal",undoObject:xd(o),redoObject:xd(a)};this.addHistoryEntry(h)}},e.prototype.distribute=function(e,t){if(e.length>0){var i=0,n=(new hn,0),r=0,o=0,a=0,s=0,l=0,c=0,h={nodes:[],connectors:[]},d={nodes:[],connectors:[]};for(i=0;i<e.length;i++)e[i]=this.diagram.nameTable[e[i].id]||e[i];for(e=function(e,t){var i,n=0,r=0;for(n=0;n<e.length;n++){var o=wd(e[n].wrapper);for(r=0;r<e.length;r++){var a=wd(e[r].wrapper);"Top"===t||"Bottom"===t||"BottomToTop"===t||"Middle"===t?o.center.y>a.center.y&&(i=e[n],e[n]=e[r],e[r]=i):o.center.x>a.center.x&&(i=e[n],e[n]=e[r],e[r]=i)}}return e}(e,t),i=1;i<e.length;i++)n=n+e[i].wrapper.bounds.topRight.x-e[i-1].wrapper.bounds.topRight.x,r=r+e[i].wrapper.bounds.topLeft.x-e[i-1].wrapper.bounds.topLeft.x,o=o+e[i].wrapper.bounds.topRight.y-e[i-1].wrapper.bounds.topRight.y,a=a+e[i].wrapper.bounds.bottomRight.y-e[i-1].wrapper.bounds.bottomRight.y,s=s+e[i].wrapper.bounds.center.x-e[i-1].wrapper.bounds.center.x,l=l+e[i].wrapper.bounds.center.y-e[i-1].wrapper.bounds.center.y,c=c+e[i].wrapper.bounds.topRight.y-e[i-1].wrapper.bounds.bottomRight.y;for(i=1;i<e.length-1;i++){var p=0,u=0,f=wd(e[i-1].wrapper),g=wd(e[i].wrapper);"RightToLeft"===t||"Center"===t?p=f.center.x-g.center.x+s/(e.length-1):"Right"===t?p=f.topRight.x-g.topRight.x+n/(e.length-1):"Left"===t?p=f.topLeft.x-g.topLeft.x+r/(e.length-1):"Middle"===t?u=f.center.y-g.center.y+l/(e.length-1):"Top"===t?u=f.topRight.y-g.topRight.y+o/(e.length-1):"Bottom"===t?u=f.bottomRight.y-g.bottomRight.y+a/(e.length-1):"BottomToTop"===t&&(u=f.bottomRight.y-g.topRight.y+c/(e.length-1)),h=this.storeObject(h,e[i]),this.drag(e[i],p,u),this.diagram.updateSelector(),d=this.storeObject(d,e[i])}h=xd(h),d=xd(d);var m={type:"Distribute",category:"Internal",undoObject:xd(h),redoObject:xd(d)};this.addHistoryEntry(m)}},e.prototype.sameSize=function(e,t){if(e.length>0){var i,n=0;i={x:.5,y:.5},e[0]=this.diagram.nameTable[e[0].id]||e[0];var r=wd(e[0].wrapper),o={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(n=1;n<e.length;n++){e[n]=this.diagram.nameTable[e[n].id]||e[0];var s=wd(e[n].wrapper),l=1,c=1;"Width"===t?l=r.width/s.width:"Height"===t?c=r.height/s.height:"Size"===t&&(l=r.width/s.width,c=r.height/s.height),o=this.storeObject(o,e[n]),this.scale(e[n],l,c,i),a=this.storeObject(a,e[n])}this.diagram.updateSelector(),o=xd(o),a=xd(a);var h={type:"Sizing",category:"Internal",undoObject:xd(o),redoObject:xd(a)};this.addHistoryEntry(h)}},e.prototype.storeObject=function(e,t){return t instanceof Lh?e.nodes.push(xd(t)):e.connectors.push(xd(t)),e},e.prototype.updatePanState=function(e){if(e)this.diagram.realActions=this.diagram.realActions|zn.PanInProgress;else{this.diagram.dataBind();var t=this.diagram.scrollSettings;this.diagram.realActions=this.diagram.realActions&~zn.PanInProgress;var i={VerticalOffset:t.verticalOffset,HorizontalOffset:t.horizontalOffset,ViewportHeight:t.viewPortHeight,ViewportWidth:t.viewPortWidth,CurrentZoom:t.currentZoom},n={oldValue:i,newValue:i,source:this.diagram,panState:"Completed"};this.triggerEvent(Hn.scrollChange,n)}},e.prototype.dataBinding=function(){this.diagram.dataBind()},e.prototype.setBlazorDiagramProps=function(e){this.diagram.setBlazorDiagramProps(e)},e.prototype.scroll=function(e,t,i){var n=this.diagram.constraints&kn.PanX,r=function(e){return e.constraints&kn.PanY}(this.diagram);w()?(this.diagram.setCursor("grabbing"),this.diagram.scroller.zoom(1,(e=n?e:0)*this.diagram.scroller.currentZoom,(t=r?t:0)*this.diagram.scroller.currentZoom,i)):this.diagram.pan((e=n?e:0)*this.diagram.scroller.currentZoom,(t=r?t:0)*this.diagram.scroller.currentZoom,i)},e.prototype.drawHighlighter=function(e){this.diagram.renderHighlighter(e.wrapper)},e.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},e.prototype.renderContainerHelper=function(e){return Js(this.diagram,e)},e.prototype.isParentAsContainer=function(e,t){return el(this.diagram,e,t)},e.prototype.dropChildToContainer=function(e,t){nl(this.diagram,e,t)},e.prototype.checkSelection=function(e,t){var i;if(1===e.nodes.length&&0===e.connectors.length)if(el(this.diagram,e.nodes[0],!0)){i="SwimLane"===e.nodes[0].shape?e.nodes[0]:this.diagram.nameTable[e.nodes[0].parentId];var n=e.nodes[0];if("SwimLane"===i.shape.type){var r="Horizontal"===i.shape.orientation;(n.isPhase&&(r&&"ResizeSouth"===t||!r&&"ResizeEast"===t)||n.isLane&&(r&&"ResizeEast"===t||!r&&"ResizeSouth"===t))&&Ml(this.diagram,i,t)}else if("Grid"===i.container.type)if("Horizontal"===i.container.orientation&&1===n.rowIndex||"Vertical"===i.container.orientation&&n.rowIndex>0&&n.columnIndex>0){if("ResizeSouth"===t)for(var o=0;o<this.diagram.nodes.length;o++){if((a=this.diagram.nodes[o]).rowIndex===i.rows.length-1&&0===a.columnIndex){this.select(a);break}}}else if("ResizeEast"===t)for(o=0;o<this.diagram.nodes.length;o++){var a;if(1===(a=this.diagram.nodes[o]).rowIndex&&a.columnIndex===i.columns.length-1){this.select(a);break}}}else Ml(this.diagram,e.nodes[0],t)},e.prototype.zoom=function(e,t,i,n){this.diagram.scroller.zoom(e,t*this.diagram.scroller.currentZoom,i*this.diagram.scroller.currentZoom,n)},e}(),Gp=function(){function e(e){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=e,this.objects=[],this.transform=e.scroller?e.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=e.scrollSettings.viewPortWidth,this.vPortHeight=e.scrollSettings.viewPortHeight,this.currentZoomFActor=e.scrollSettings.currentZoom,this.hOffset=e.scrollSettings.horizontalOffset,this.vOffset=e.scrollSettings.verticalOffset}return Object.defineProperty(e.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(e){this.vPortHeight=e,this.diagram.scrollSettings.viewPortHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(e){this.currentZoomFActor=e,this.diagram.scrollSettings.currentZoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(e){this.vPortWidth=e,this.diagram.scrollSettings.viewPortWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(e){this.hOffset=e,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|zn.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(e){this.vOffset=e,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|zn.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=e},enumerable:!0,configurable:!0}),e.prototype.updateScrollOffsets=function(e,t){var i,n,r=this.getPageBounds(void 0,void 0,!0);r.x*=this.currentZoom,r.y*=this.currentZoom,r.width*=this.currentZoom,r.height*=this.currentZoom,i=Math.max(0,e-r.left),n=Math.max(0,t-r.top),void 0!==e&&void 0!==t?(this.horizontalOffset=i,this.verticalOffset=n,this.diagram.setOffset(i,n)):this.diagram.setOffset(-this.horizontalOffset-r.x,-this.verticalOffset-r.y),this.transform={tx:Math.max(this.horizontalOffset,-r.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-r.top)/this.currentZoom,scale:this.currentZoom}},e.prototype.setScrollOffset=function(e,t){this.scrolled=!1;var i=this.getPageBounds(void 0,void 0,!0);i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom;var n=-i.left,r=-i.top,o=!1,a=this.viewPortWidth*this.currentZoom,s=this.viewPortHeight*this.currentZoom,l=n-e;if(l!==this.horizontalOffset){n<this.horizontalOffset&&(this.horizontalOffset>l?this.horizontalOffset-=e:this.horizontalOffset=l,o=!0);var c=Math.max(i.right+this.vScrollSize,a);if(!o&&c<-l+this.viewPortWidth){var h=-l+a-this.vScrollSize,d=-this.horizontalOffset+a-this.vScrollSize;h<d||h-i.right>h-d?this.horizontalOffset=l:this.horizontalOffset=-(i.right+this.vScrollSize-a),o=!0}o||(this.horizontalOffset=n-e)}o=!1;var p=r-t;if(p!==this.verticalOffset){r<this.verticalOffset&&(this.verticalOffset>p?this.verticalOffset-=t:this.verticalOffset=p,o=!0);var u=Math.max(i.bottom+this.hScrollSize,s);if(!o&&u<-p+s){var f=-p+s-this.hScrollSize,g=-this.verticalOffset+s-this.hScrollSize;f<g||f-i.bottom>f-g?this.verticalOffset=p:this.verticalOffset=-(i.bottom+this.hScrollSize-s),o=!0}o||(this.verticalOffset=r-t)}this.transform={tx:Math.max(this.horizontalOffset,-i.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-i.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},e.prototype.getObjects=function(e,t){for(var i=[],n=0;n<e.length;n++){for(var r=!1,o=0;o<t.length;o++)if(e[n]===t[o]){r=!0;break}r||i.push(e[n])}return i},e.prototype.virtualizeElements=function(){for(var e=this.viewPortWidth/this.currentZoom,t=this.viewPortHeight/this.currentZoom,i=this.diagram.spatialSearch.findObjects(new hn(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,e,t)),n=[],r=0;r<i.length;r++)n.push(i[r].id);var o=this.getObjects(n,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=n);var a=this.getObjects(this.oldCollectionObjects,n);this.diagram.updateVirtualObjects(o,!1,a),this.oldCollectionObjects=n},e.prototype.setSize=function(){var e=this.getPageBounds(void 0,void 0,!0);e.x*=this.currentZoom,e.y*=this.currentZoom,e.width*=this.currentZoom,e.height*=this.currentZoom;var t=Math.min(e.x,-this.horizontalOffset),i=Math.min(e.y,-this.verticalOffset),n=(this.horizontalOffset,this.viewPortWidth,e.right,this.verticalOffset,this.viewPortHeight,e.bottom,this.scrollerWidth),r=this.scrollerWidth;-this.verticalOffset<=e.y&&-this.verticalOffset+this.viewPortHeight>=e.bottom&&(r=0),-this.horizontalOffset<=e.x&&-this.horizontalOffset+this.viewPortWidth>=e.right&&(n=0),this.hScrollSize=n,this.vScrollSize=r;var o=this.diagramWidth,a=this.diagramHeight;this.diagramWidth=Math.max(e.right,-this.horizontalOffset+this.viewPortWidth-r)-t,this.diagramHeight=Math.max(e.bottom,-this.verticalOffset+this.viewPortHeight-n)-i,o===this.diagramWidth&&a===this.diagramHeight||this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},e.prototype.setViewPortSize=function(e,t){this.viewPortWidth=e,this.viewPortHeight=t},e.prototype.getPageBounds=function(e,t,i){var n,r=new hn;if("Content"!==t&&null!==this.diagram.pageSettings.width&&null!==this.diagram.pageSettings.height){var o=this.diagram.pageSettings.width,a=this.diagram.pageSettings.height,s=0,l=0;if(this.diagram.pageSettings.multiplePage){if((r=this.diagram.spatialSearch.getPageBounds(0,0)).right>o)o*=c=Math.ceil(r.right/o);if(r.bottom>a)a*=c=Math.ceil(r.bottom/a);if(r.left<0&&Math.abs(r.left)>s){var c=Math.ceil(Math.abs(r.left)/this.diagram.pageSettings.width);s=this.diagram.pageSettings.width*c}if(r.top<0&&Math.abs(r.top)>l){c=Math.ceil(Math.abs(r.top)/this.diagram.pageSettings.height);l=this.diagram.pageSettings.height*c}}n=new hn(-s,-l,o+s,a+l)}else{var h=e?void 0:0;n=this.diagram.spatialSearch.getPageBounds(h,h)}if(i){var d=this.diagram.scrollSettings.padding;n.x-=d.left,n.y-=d.top,n.width+=d.left+d.right,n.height+=d.top+d.bottom}return n},e.prototype.getPageBreak=function(e){for(var t=0,i=0,n=-1,r=[],o=0,a=0,s=0,l=0,c=this.diagram.pageSettings.margin.left,h=this.diagram.pageSettings.margin.right,d=this.diagram.pageSettings.margin.top,p=this.diagram.pageSettings.margin.bottom,u=1,f=1,g={x1:o,y1:s,x2:a,y2:l};e.width>t;)(t+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:e.width)===this.diagram.pageSettings.width&&(g={x1:e.left+c,y1:e.top+d,x2:e.left+c,y2:e.bottom-p},r[++n]=g),t<e.width&&(g={x1:o=e.topLeft.x+this.diagram.pageSettings.width*u,y1:s=e.topLeft.y+d,x2:a=e.bottomLeft.x+this.diagram.pageSettings.width*u,y2:l=e.bottomLeft.y-p},r[++n]=g,u++),e.width===t&&(g={x1:e.right-h,y1:e.top+d,x2:e.right-h,y2:e.bottom-p},r[++n]=g);for(;e.height>i;)(i+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:e.height)===this.diagram.pageSettings.height&&(g={x1:e.left+c,y1:e.top+d,x2:e.right-h,y2:e.top+d},r[++n]=g),i<e.height&&(g={x1:o=e.topLeft.x+c,y1:s=e.topLeft.y+this.diagram.pageSettings.height*f,x2:a=e.topRight.x-h,y2:l=e.topRight.y+this.diagram.pageSettings.height*f},r[++n]=g,f++),e.height===i&&(g={x1:e.left+c,y1:e.bottom-p,x2:e.right-h,y2:e.bottom-p},r[++n]=g);return r},e.prototype.zoom=function(e,t,i,n){if(this.diagram.constraints&kn.Zoom&&1!==e||function(e){return e.constraints&kn.Pan}(this.diagram)&&1===e){var r=pn();if(gn(r,this.currentZoom,this.currentZoom),mn(r,this.horizontalOffset,this.verticalOffset),n=un(r,n=n||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom}),this.currentZoom*e>=this.diagram.scrollSettings.minZoom&&this.currentZoom*e<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=e;var o=this.getPageBounds(void 0,void 0,!0);o.x*=this.currentZoom,o.y*=this.currentZoom;var a=pn();gn(a,e,e,n.x,n.y),mn(a,t||0,i||0),yn(r,a);var s=un(r,{x:0,y:0});1===e&&(s=this.applyScrollLimit(s.x,s.y)),this.transform={tx:Math.max(s.x,-o.left)/this.currentZoom,ty:Math.max(s.y,-o.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=s.x,this.verticalOffset=s.y,this.setSize(),"SVG"!==this.diagram.mode&&ws(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||ws(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-o.x,-this.verticalOffset-o.y),is(this.diagram)}}},e.prototype.fitToPage=function(e){var t=(e=e||{}).mode,i=e.region,n=e.margin||{},r=e.canZoomIn,o=e.customBounds;n.bottom=n.bottom||25,n.top=n.top||25,n.left=n.left||25,n.right=n.right||25;var a,s=o,l=-this.horizontalOffset,c=-this.verticalOffset;if("PageSettings"===(i=i||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){t=t||"Page","CustomBounds"!==i&&(s=this.getPageBounds(!0,i,!0));var h={x:0,y:0};h.x=(this.viewPortWidth-(n.left+n.right))/s.width,h.y=(this.viewPortHeight-(n.top+n.bottom))/s.height,!r&&s.width-this.horizontalOffset<this.viewPortWidth&&s.height-this.verticalOffset<this.viewPortHeight&&(h.x=Math.min(this.currentZoom,h.x),h.y=Math.min(this.currentZoom,h.y));var d=void 0,p=void 0,u=void 0;switch(t){case"Width":a=(d=h.x)/this.currentZoom,l+=(p=(this.viewPortWidth-s.width*d)/2-s.x*d)+(n.left-n.right)/2*d,c-=-this.verticalOffset*a,c="CustomBounds"!==i?c:c-this.verticalOffset*a;break;case"Height":a=(d=h.y)/this.currentZoom,p=(this.viewPortWidth-s.width*d)/2-s.x*d,u=(this.viewPortHeight-s.height*d)/2-s.y*d,l+=p+(n.left-n.right)/2*d,c+=u+(n.top-n.bottom)/2*d;break;case"Page":a=(d=Math.min(h.x,h.y))/this.currentZoom,p=(this.viewPortWidth-s.width*d)/2-s.x*d,u=(this.viewPortHeight-s.height*d)/2-s.y*d,l+=p+(n.left-n.right)/2*d,c+=u+(n.top-n.bottom)/2*d}this.zoom(a,l,c,{x:0,y:0})}else a=1/this.currentZoom,this.zoom(a,l,c,{x:0,y:0})},e.prototype.bringIntoView=function(e){var t=0,i=0,n=this.currentZoom,r=e,o=-this.horizontalOffset,a=-this.verticalOffset;r=new hn(r.x*n,r.y*n,r.width*n,r.height*n),new hn(o,a,this.viewPortWidth,this.viewPortHeight).containsRect(r)||(r.right>-o+this.viewPortWidth&&(t=r.right-this.viewPortWidth),r.x<-o&&(t=r.x),r.bottom>-a+this.viewPortHeight&&(i=r.bottom-this.viewPortHeight),r.y<-a&&(i=r.y),this.zoom(1,-this.horizontalOffset-t,-this.verticalOffset-i,null))},e.prototype.bringToCenter=function(e){var t=this.currentZoom,i=new hn(e.x*t,e.y*t,e.width*t,e.height*t),n=i.x+i.width/2-this.viewPortWidth/2,r=i.y+i.height/2-this.viewPortHeight/2;this.zoom(1,-this.horizontalOffset-n,-this.verticalOffset-r,null)},e.prototype.applyScrollLimit=function(e,t){if("Infinity"!==this.diagram.scrollSettings.scrollLimit){var i=void 0;if("Limited"===this.diagram.scrollSettings.scrollLimit){var n=this.diagram.scrollSettings.scrollableArea;i=new hn(n.x,n.y,n.width,n.height)}(i=i||this.getPageBounds(!0)).x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom,e*=-1,t*=-1;var r=Math.max(i.right,this.viewPortWidth);if(!(e<=i.x&&(e+this.viewPortWidth>=i.right||e>=i.right-this.viewPortWidth)||e>=i.x&&e+this.viewPortWidth<=r))if(e>=i.x)e=Math.max(i.x,Math.min(e,e-(e+this.viewPortWidth-this.vScrollSize-r)));else{var o=i.right-this.viewPortWidth;e=Math.min(o,i.x)}var a=Math.max(i.bottom,this.viewPortHeight);if(!(t<=i.y&&t+this.viewPortHeight>=i.bottom||t>=i.y&&t+this.viewPortHeight<=a))if(t>=i.y)t=Math.max(i.y,Math.min(t,t-(t+this.viewPortHeight-this.hScrollSize-a)));else{o=i.bottom-this.viewPortHeight;t=Math.min(i.y,o)}e*=-1,t*=-1}return{x:e,y:t}},e}(),qp=function(){function e(e,t,i,n,r){this.objects=[],this.left=e,this.top=t,this.width=i,this.height=n,this.spatialSearch=r}return e.prototype.findQuads=function(e,t){null!=this.first&&this.first.isIntersect(e)&&this.first.findQuads(e,t),null!=this.second&&this.second.isIntersect(e)&&this.second.findQuads(e,t),null!=this.third&&this.third.isIntersect(e)&&this.third.findQuads(e,t),null!=this.fourth&&this.fourth.isIntersect(e)&&this.fourth.findQuads(e,t),this.objects.length>0&&t.push(this)},e.prototype.isIntersect=function(e){return!(this.left+this.width<e.left||this.top+this.height<e.top||this.left>e.right||this.top>e.bottom)},e.prototype.selectQuad=function(){for(var e,t=null,i=this;null!=i;)e=i.getQuad(t),i=e.source,t=e.target||t;return t},e.prototype.getQuad=function(t){var i=this.width/2,n=this.height/2;if(i>=1e3&&n>=1e3){var r=this.left+i,o=this.top+n;if(this.spatialSearch.childRight<=r){if(this.spatialSearch.childBottom<=o){if(!this.first)(a=new e(this.left,this.top,i,n,this.spatialSearch)).parent=this,this.first=a;return{source:this.first}}if(this.spatialSearch.childTop>=o){if(!this.third)(a=new e(this.left,o,i,n,this.spatialSearch)).parent=this,this.third=a;return{source:this.third}}}else if(this.spatialSearch.childLeft>=r){if(this.spatialSearch.childBottom<=o){if(!this.second)(a=new e(r,this.top,i,n,this.spatialSearch)).parent=this,this.second=a;return{source:this.second}}if(this.spatialSearch.childTop>=o){var a;if(!this.fourth)(a=new e(r,o,i,n,this.spatialSearch)).parent=this,this.fourth=a;return{source:this.fourth}}}}return this,this.objects.push(this.spatialSearch.childNode),{target:this}},e.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},e.prototype.addIntoAQuad=function(e){var t={};this.spatialSearch.setCurrentNode(e);for(var i=null;!t.isAdded;)i=(t=this.spatialSearch.parentQuad.add(i)).quad;return i},e.prototype.add=function(t){if(t=null,this.isContained())return{isAdded:!0,quad:t=this.selectQuad()};var i=void 0,n=0===this.objects.length&&!this.first&&!this.second&&!this.third&&!this.fourth,r=2*this.width,o=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(i=new e(this.left-this.width,this.top-this.height,r,o,this.spatialSearch),n||(i.fourth=this)):(i=new e(this.left-this.width,this.top,r,o,this.spatialSearch),n||(i.second=this)):this.spatialSearch.childTop<this.top?(i=new e(this.left,this.top-this.height,r,o,this.spatialSearch),n||(i.third=this)):(i=new e(this.left,this.top,r,o,this.spatialSearch),n||(i.first=this)),this.parent=i,this.spatialSearch.parentQuad=i,{isAdded:!1,quad:t}},e}(),Zp=function(){function e(e){this.quadSize=500,this.objectTable=e,this.parentQuad=new qp(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return e.prototype.removeFromAQuad=function(e){if(this.quadTable[e.id]){var t=this.quadTable[e.id],i=this.objectIndex(t.objects,e);-1!==i&&(t.objects.splice(i,1),this.update(t),delete this.quadTable[e.id])}},e.prototype.update=function(e){if(e.parent&&0===e.objects.length&&e.first&&e.second&&e.third&&e.fourth){var t=e.parent;t.first===e?t.first=null:t.second===e?t.second=null:t.third===e?t.third=null:t.fourth===e&&(t.fourth=null),this.update(e.parent)}else e!==this.parentQuad||e.first||e.second||e.third||e.fourth||(e.left=0,e.width=1e3,e.top=0,e.height=1e3)},e.prototype.addIntoAQuad=function(e){var t=this.parentQuad.addIntoAQuad(e);this.quadTable[e.id]=t},e.prototype.objectIndex=function(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t.id)return i;return-1},e.prototype.updateQuad=function(e){this.setCurrentNode(e);var t=e.outerBounds;if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))return!1;this.quadTable[e.id]?this.quadTable[e.id].isContained()||(this.removeFromAQuad(e),this.addIntoAQuad(e)):this.addIntoAQuad(e);if(!this.isWithinPageBounds(t)||this.leftElement===e||this.topElement===e||this.rightElement===e||this.bottomElement===e){var i=!1;return this.pageLeft===this.childLeft&&e===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=e,i=!0):e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),i=!0)),this.pageTop===this.childTop&&e===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=e,i=!0):e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),i=!0)),this.pageBottom===this.childBottom&&e===this.bottomElement||(this.pageBottom<=this.childBottom?(i=!0,this.pageBottom=this.childBottom,this.bottomElement=e):e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),i=!0)),this.pageRight===this.childRight&&e===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=e,i=!0):e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),i=!0)),i}return this.setCurrentNode(null),!1},e.prototype.isWithinPageBounds=function(e){return e.left>=this.pageLeft&&e.right<=this.pageRight&&e.top>=this.pageTop&&e.bottom<=this.pageBottom},e.prototype.findQuads=function(e){var t=[];return this.parentQuad.findQuads(e,t),t},e.prototype.findObjects=function(e){for(var t=[],i=0,n=this.findQuads(e);i<n.length;i++)for(var r=0,o=n[i].objects;r<o.length;r++){var a=o[r];a.outerBounds.intersects(e)&&t.push(this.objectTable[a.id])}return t},e.prototype.updateBounds=function(e){var t=!1;return e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),t=!0),e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),t=!0),e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),t=!0),e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),t=!0),t},e.prototype.findBottom=function(e){e.third||e.fourth?(e.third&&this.findBottom(e.third),e.fourth&&this.findBottom(e.fourth)):(e.second&&this.findBottom(e.second),e.first&&this.findBottom(e.first));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageBottom<=n.outerBounds.bottom&&(this.pageBottom=n.outerBounds.bottom,this.bottomElement=n)}},e.prototype.findRight=function(e){e.second||e.fourth?(e.second&&this.findRight(e.second),e.fourth&&this.findRight(e.fourth)):(e.first&&this.findRight(e.first),e.third&&this.findRight(e.third));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageRight<=n.outerBounds.right&&(this.pageRight=n.outerBounds.right,this.rightElement=n)}},e.prototype.findLeft=function(e){e.first||e.third?(e.first&&this.findLeft(e.first),e.third&&this.findLeft(e.third)):(e.second&&this.findLeft(e.second),e.fourth&&this.findLeft(e.fourth));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageLeft>=n.outerBounds.left&&(this.pageLeft=n.outerBounds.left,this.leftElement=n)}},e.prototype.findTop=function(e){e.first||e.second?(e.first&&this.findTop(e.first),e.second&&this.findTop(e.second)):(e.third&&this.findTop(e.third),e.fourth&&this.findTop(e.fourth));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageTop>=n.outerBounds.top&&(this.pageTop=n.outerBounds.top,this.topElement=n)}},e.prototype.setCurrentNode=function(e){if(this.childNode=e,e){var t=e.outerBounds;this.childLeft=Number(t.left),this.childTop=Number(t.top),this.childRight=Number(t.right),this.childBottom=Number(t.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},e.prototype.getPageBounds=function(e,t){if(this.pageLeft===Number.MAX_VALUE)return new hn(0,0,0,0);var i=void 0!==e?Math.min(this.pageLeft,0):this.pageLeft,n=void 0!==t?Math.min(this.pageTop,0):this.pageTop;return new hn(Math.round(i),Math.round(n),Math.round(this.pageRight-i),Math.round(this.pageBottom-n))},e.prototype.getQuad=function(e){return this.quadTable[e.id]},e}(),Kp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$p=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Qp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kp(t,e),$p([zt(!1)],t.prototype,"preventDefaults",void 0),t}(ii),Jp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eu=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},tu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jp(t,e),eu([zt("")],t.prototype,"action",void 0),eu([zt("")],t.prototype,"cursor",void 0),t}(ii),iu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nu=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ru=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iu(t,e),nu([zt(!0)],t.prototype,"inversedAlignment",void 0),t}(ii),ou=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),au=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},su=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))},lu=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},cu=function(e){function t(t,i){var n,r,o=e.call(this,t,i)||this;o.version=17.1,o.checkMenu=!1,o.isServerUpdate=!1,o.oldNodeObjects=[],o.oldDiagramObject={},o.oldConnectorObjects=[],o.canEnableBlazorObject=!1,o.connectorTable={},o.groupTable={},o.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},o.textEditing=!1,o.isTriggerEvent=!1,o.preventNodesUpdate=!1,o.preventConnectorsUpdate=!1,o.callBlazorModel=!0,o.selectionConnectorsList=[],o.deleteVirtualObject=!1,o.changedConnectorCollection=[],o.changedNodesCollection=[],o.previousNodeCollection=[],o.previousConnectorCollection=[],o.crudDeleteNodes=[],o.diagramid=88123,o.selectedObject={helperObject:void 0,actualObject:void 0},o.renderTimer=null;var a=w()&&window&&window.Blazor&&!o.dataSourceSettings.dataSource;o.ignoreCollectionWatch=!0;for(var s=0;t&&t.nodes&&s<t.nodes.length;s++)n=t.nodes[s],r=o.nodes[s],n.children&&n.children.length>0&&(n.style&&n.style.fill||(r.style.fill="transparent"),n.style&&n.style.strokeColor||(r.style.strokeColor="transparent")),n.shape&&"UmlActivity"===n.shape.type&&Xl(n,r),n.shape&&"SwimLane"===n.shape.type&&Vl(n,r),o.nodeDefaults&&(a&&o.previousNodeCollection.push(xd(r,void 0,void 0,!0)),Kl(r,n,o.nodeDefaults)),o.updateAnnotationText(r.annotations);if(t&&t.connectors&&o.connectorDefaults)for(s=0;t&&t.connectors&&s<t.connectors.length;s++)n=t.connectors[s],r=o.connectors[s],a&&o.previousConnectorCollection.push(xd(r,void 0,void 0,!0)),Kl(r,n,o.connectorDefaults),o.updateAnnotationText(r.annotations);for(s=0;t&&t.connectors&&s<t.connectors.length;s++){var l=t.connectors[s],c=o.connectors[s];if(l.shape&&"None"!==l.shape.type&&Gl(l,c),w()){var h=xd(o.bulkChanges);o.enableServerDataBinding(!0),o.protectPropertyChange(!0);for(var d=Object.keys(h),p=0;p<d.length;p++){var u=d[p],f=u.split("-");f&&f[0]&&("nodes"===f[0]&&(h[u].sfIndex=Number(f[1]),o.changedNodesCollection.push(h[u])),"connectors"===f[0]&&(h[u].sfIndex=Number(f[1]),o.changedConnectorCollection.push(h[u])))}}}return o}return ou(t,e),t.prototype.updateAnnotationText=function(e){if(w()&&e.length>0)for(var t=0;e&&t<e.length;t++){var i=e[t];i.content=i.content.split("\\n").join("\n")}},t.prototype.callFromServer=function(e){if("getParentID"===e.methodName){var t=e.id;return this.nameTable[t].parentId}if("getEdges"===e.methodName){var i=e.outEdge;t=e.id;return i?this.nameTable[t].outEdges:this.nameTable[t].inEdges}if("updateDiagramObjects"===e.methodName){var n=e.obj;if(this.isServerUpdate=!0,e.IsAdding){this.add.apply(this,n)}else{this.remove.apply(this,n)}this.isServerUpdate=!1}else if("invokeLoadDiagramMethod"===e.methodName){this.loadDiagram(e.data)}},t.prototype.clearCollection=function(e){for(var t,i=[],n=0,r=Object.keys(this.nameTable);n<r.length;n++){var o=r[n];(t=this.nameTable[o])&&(e&&t instanceof $a||!e&&t instanceof Lh)&&i.push(t)}this.clearObjects(i)},t.prototype.onPropertyChanged=function(i,n){var r=!0,o=!1,a=!1;if(this.diagramActions&jn.Render){for(var s=0,l=Object.keys(i);s<l.length;s++){switch(l[s]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var c=0,h=this.views;c<h.length;c++){var d=h[c];(k=this.views[d])instanceof t||k.updateView(k)}break;case"nodes":if(i.nodes.length>0&&0===n.nodes.length)this.clearCollection(),a=!0;else{for(var p=0,u=Object.keys(i.nodes);p<u.length;p++){var f=u[p],g=Number(f),m=this.nodes[g],y=i.nodes[g];o=o||void 0!==y.excludeFromLayout,this.nodePropertyChange(m,n.nodes[g],y,void 0,!0,!0);var v={element:Vc(m),cause:this.diagramActions,oldValue:Vc(n.nodes[g]),newValue:Vc(i.nodes[g])};w()&&(v.element={node:Vc(m)},v.oldValue={node:Vc(void 0)},v.newValue={node:Vc(void 0)}),this.triggerEvent(Hn.propertyChange,v),r&&(r=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(i.connectors.length>0&&0===n.connectors.length)this.clearCollection(!0),a=!0;else{for(var b=0,x=Object.keys(i.connectors);b<x.length;b++){f=x[b],g=Number(f),m=this.connectors[g];(y=i.connectors[g])&&(y.sourceDecorator||y.targetDecorator)&&(this.diagramActions|=jn.DecoratorPropertyChange),this.connectorPropertyChange(m,n.connectors[g],y,!0,!0),y&&(y.sourceDecorator||y.targetDecorator)&&(this.diagramActions=this.diagramActions&~jn.DecoratorPropertyChange);v={element:Vc(m),cause:this.diagramActions,oldValue:Vc(n.connectors[g]),newValue:Vc(i.connectors[g])};w()&&(v.element={connector:Vc(m)},v.oldValue={connector:Vc(void 0)},v.newValue={connector:Vc(void 0)}),this.triggerEvent(Hn.propertyChange,v),m&&m.parentId&&"UmlClassifier"===this.nameTable[m.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[m.parentId]||m),r&&(r=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(i.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(i.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(i);break;case"commandManager":this.initCommands();break;case"layout":o=!0;break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?a=!0:o=!0;break;case"tooltip":ga(this);break;case"rulerSettings":this.updateRulerSettings(i);break;case"layers":this.updateLayer(i);break;case"scrollSettings":this.updateScrollSettings(i);break;case"locale":i.locale!==n.locale&&(this.realActions|=zn.PreventDataInit,e.prototype.refresh.call(this),this.realActions&=~zn.PreventDataInit);break;case"contextMenuSettings":if(void 0!==i.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=i.contextMenuSettings.showCustomMenuOnly),void 0!==i.contextMenuSettings.show&&(this.contextMenuSettings.show=i.contextMenuSettings.show),i.contextMenuSettings.items)for(var S=i.contextMenuSettings.items,C=0,P=Object.keys(S);C<P.length;C++){f=P[C],g=Number(f);this.contextMenuSettings.items[g]=S[g]}break;case"serializationSettings":void 0!==i.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=i.serializationSettings.preventDefaults)}}if(o&&!a&&this.doLayout(),r&&this.propertyChange){v={element:Vc(this),cause:this.diagramActions,oldValue:Vc(n),newValue:Vc(i)};w()&&(v.element={diagram:Vc(this)},v.oldValue={diagram:Vc(void 0)},v.newValue={diagram:Vc(void 0)}),this.triggerEvent(Hn.propertyChange,v)}if(!a&&this.canLogChange()&&this.modelChanged(i,n)){var O={type:"PropertyChanged",undoObject:n,redoObject:i,category:"Internal"};this.addHistoryEntry(O)}this.resetDiagramActions(),a&&(this.initObjects(!0),this.refreshDiagramLayer(),o&&this.doLayout());var E=1===Object.keys(i).length&&void 0!==i.scrollSettings;if(!a)for(var T=0,I=this.views;T<I.length;T++){var k=I[T];(d=this.views[k])instanceof t||(i.scrollSettings&&i.scrollSettings.currentZoom!=n.scrollSettings.currentZoom&&d.updateHtmlLayer(d),E||this.refreshCanvasDiagramLayer(d))}this.resetTemplate()}},t.prototype.updateSnapSettings=function(e){(void 0!==e.snapSettings.constraints||e.snapSettings.horizontalGridlines||e.snapSettings.verticalGridlines||e.snapSettings.gridType)&&this.diagramRenderer.updateGrid(this.snapSettings,Qh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.updateRulerSettings=function(e){void 0!==e.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,Qh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==e.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===e.rulerSettings.horizontalRuler&&void 0===e.rulerSettings.verticalRuler||(void 0!==e.rulerSettings.horizontalRuler.thickness||void 0!==e.rulerSettings.verticalRuler.thickness?(ns(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):is(this)),this.diagramRenderer.updateGrid(this.snapSettings,Qh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new Vd,this.initializeServices(),this.setCulture();window.measureElement&&(window.measureElement=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},t.prototype.initializePrivateVariables=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-diagram").length;this.element.id="diagram_"+this.diagramid+"_"+e}this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new Xp(this),this.eventHandler=new Hp(this,this.commandHandler),this.spatialSearch=new Zp(this.nameTable),this.scroller=new Gp(this)},t.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new xi(this.getModuleName(),this.defaultLocale,this.locale))},t.prototype.setCulture=function(){this.localeObj=new xi(this.getModuleName(),this.defaultLocale,this.locale)},t.prototype.render=function(){this.ignoreCollectionWatch=!0;window.domTable={};var e=[];if(w()){for(var t=[],i=[],n=0;n<this.changedNodesCollection.length;n++)t.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedNodesCollection[n]));for(n=0;n<this.changedConnectorCollection.length;n++)i.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedConnectorCollection[n]));var r="sfBlazor",o="Blazor",a={nodes:t,connectors:i};if(window&&window[o]&&!this.dataSourceSettings.dataSource&&(t.length>0||i.length>0)){var s={methodName:"UpdateBlazorProperties",diagramobj:a};window[r].updateBlazorProperties(s,this)}}this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new Nd(this.element.id,new jd,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0);var l=!1;if(w()&&!this.dataSourceSettings.dataSource&&"None"!==this.layout.type){for(var c=0,h=this.nodes;c<h.length;c++){s=h[c];this.insertValue(xd(s),!0)}for(var d=0,p=this.connectors;d<p.length;d++){s=p[d];this.insertValue(xd(s),!1)}l=!0}if(this.doLayout(),l&&this.commandHandler.getBlazorOldValues(),this.lineRoutingModule){var u=[],f=[],g=[];if(w())for(var m=0,y=this.connectors;m<y.length;m++){s=y[m];u.push(xd(s,void 0,void 0,!0))}if(this.lineRoutingModule.lineRouting(this),w()){for(var v=0,b=this.connectors;v<b.length;v++){s=b[v];f.push(xd(s,void 0,void 0,!0))}this.commandHandler.getObjectChanges(u,f,g);r="sfBlazor",o="Blazor",a={nodes:[],connectors:g};if(window&&window[o]){s={methodName:"UpdateBlazorProperties",diagramobj:a};window[r].updateBlazorProperties(s,this)}}}this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,Qh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),le.isDevice&&(this.tool=An.ZoomPan|An.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=ga(this),this.diagramActions=jn.Render;var x=this.nodes;for(n=0;n<x.length;n++)x[n].isExpanded||e.push(x[n]);if(e.length)for(n=e.length-1;n>=0;n--)this.commandHandler.expandNode(e[n],this);this.initCommands();var S=document.getElementsByClassName(this.element.id+"_hiddenUserHandleTemplate");!function(e,t,i){var n,r,o,a,s;if(e&&t){n=vd(e);for(var l=0,c=i.userHandles;l<c.length;l++)if(r=c[l],n){for(o=n(xd(r),void 0,"template",void 0,void 0,!1),a=0;a<o.length;a++){(s=nd("div",{style:"height: 100%; width: 100%; pointer-events: all",id:r.name+"_template_hiddenUserHandle"})).appendChild(o[a])}t[0].appendChild(s)}}else if(w())for(var h=void 0,d=0,p=i.userHandles;d<p.length;d++)if(!(r=p[d]).pathData&&!r.content&&!r.source){for(a=0,h=(o=ze(r.content))(Vc(r),null,null,"diagramsf_userHandle_template");a<h.length;a++){(s=nd("div",{style:"height: 100%; width: 100%; pointer-events: all",id:r.name+"_template_hiddenUserHandle"})).appendChild(h[a])}t[0].appendChild(s)}}(this.userHandleTemplate,S,this.selectedItems),this.updateTemplate(),this.isLoading=!1,this.renderComplete(),this.updateFitToPage()},t.prototype.updateFitToPage=function(){this.pageSettings&&this.pageSettings.fitOptions&&this.pageSettings.fitOptions.canFit&&this.fitToPage(this.pageSettings.fitOptions)},t.prototype.updateTemplate=function(){for(var e,t,i,n=0;n<this.nodes.length;n++)t=(e=this.nodes[n]).annotations[0],"HTML"===e.shape.type||"Native"===e.shape.type?Be("diagramsf_node_template","NodeTemplate",this,!1):t&&"Template"===t.annotationType&&Be("diagramsf_annotation_template","AnnotationTemplate",this,!1);for(n=0;n<this.connectors.length;n++)(i=this.connectors[n].annotations[0])&&"Template"===i.annotationType&&Be("diagramsf_annotation_template","AnnotationTemplate",this,!1);for(n=0;n<this.selectedItems.userHandles.length;n++)this.selectedItems.userHandles[n].template&&Be("diagramsf_userHandle_template","UserHandleTemplate",this,!1)},t.prototype.resetTemplate=function(){for(var e,t,i,n=0;n<this.nodes.length;n++)t=(e=this.nodes[n]).annotations[0],"HTML"===e.shape.type&&e.shape.content instanceof HTMLElement?He("diagramsf_node_template"):t&&"Template"===t.annotationType&&He("diagramsf_annotation_template");for(n=0;n<this.connectors.length;n++)(i=this.connectors[n].annotations[0])&&"Template"===i.annotationType&&He("diagramsf_annotation_template");for(n=0;n<this.selectedItems.userHandles.length;n++)this.selectedItems.userHandles[n].template&&Be("diagramsf_userHandle_template","UserHandleTemplate",this,!1)},t.prototype.renderInitialCrud=function(){var e,t=this;t.dataSourceSettings.crudAction.read&&((e=new Q(t.dataSourceSettings.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.dataManager?t.dataSourceSettings.dataManager=JSON.parse(e):t.dataSourceSettings.dataSource=JSON.parse(e),t.dataBind()},e.send().then());t.dataSourceSettings.connectionDataSource.crudAction.read&&((e=new Q(t.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(e),t.dataBind()},e.send().then())},t.prototype.getModuleName=function(){return"diagram"},t.prototype.getClassName=function(){return"Diagram"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e.push({member:"Bridging",args:[]}),e.push({member:"ConnectorEditingTool",args:[]}),this.constraints&kn.UndoRedo&&e.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&e.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&e.push({member:"Snapping",args:[this]}),e.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||e.push({member:"OrganizationalChart",args:[this]}),"ComplexHierarchicalTree"===this.layout.type&&e.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&e.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&e.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&e.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&e.push({member:"DataBinding",args:[]}),this.constraints&kn.LineRouting&&e.push({member:"LineRouting",args:[]}),e},t.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var t=document.getElementsByClassName("e-diagram-tooltip");t.length>0;)t[0].parentNode.removeChild(t[0]);var i=document.getElementById(this.element.id+"content");i&&this.element.removeChild(i);if(window.measureElement){window.measureElement.usageCount-=1;window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null)}}window.domTable={};for(var n=0;n<this.layers.length;n++){this.layers[n].zIndexTable={}}this.diagramActions=void 0},t.prototype.wireEvents=function(){var e=le.touchStartEvent,t=le.touchEndEvent,i=le.touchMoveEvent,n=le.isPointer?"pointerleave":"mouseleave",r=le.isPointer,o="mozilla"===le.info.name?r?"mousewheel":"DOMMouseScroll":"mousewheel";ce.add(this.diagramCanvas,e,this.eventHandler.mouseDown,this.eventHandler),ce.add(this.diagramCanvas,i,this.eventHandler.mouseMove,this.eventHandler),ce.add(this.diagramCanvas,t,this.eventHandler.mouseUp,this.eventHandler),ce.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),ce.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),ce.add(this.diagramCanvas,"keyup",this.eventHandler.keyUp,this.eventHandler),ce.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),ce.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),ce.add(this.diagramCanvas,o,this.eventHandler.mouseWheel,this.eventHandler),ce.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},t.prototype.unWireEvents=function(){var e=le.touchStartEvent,t=le.touchMoveEvent,i=le.isPointer?"pointerleave":"mouseleave",n=le.isPointer,r="mozilla"===le.info.name?n?"mousewheel":"DOMMouseScroll":"mousewheel",o=le.touchEndEvent;ce.remove(this.diagramCanvas,e,this.eventHandler.mouseDown),ce.remove(this.diagramCanvas,t,this.eventHandler.mouseMove),ce.remove(this.diagramCanvas,o,this.eventHandler.mouseUp),ce.remove(this.diagramCanvas,i,this.eventHandler.mouseLeave),ce.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),ce.remove(this.diagramCanvas,"keyup",this.eventHandler.keyUp),ce.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),ce.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),ce.remove(this.diagramCanvas,r,this.eventHandler.mouseWheel),ce.remove(window,"resize",this.eventHandler.windowResize)},t.prototype.select=function(e,t){if(w()){for(var i=0;i<e.length;i++)e[i]=this.nameTable[e[i].id];e=this.nameTable[e.id]||e}null!=e&&this.commandHandler.selectObjects(e,t)},t.prototype.selectAll=function(){var e;e=this.getObjectsOfLayer(this.activeLayer.objects),this.select(e)},t.prototype.unSelect=function(e){w()&&(this.commandHandler.oldSelectedObjects=xd(this.selectedItems),e=this.nameTable[e.id]||e),e&&up(this,e)&&(this.commandHandler.unSelect(e),this.commandHandler.updateBlazorSelector())},t.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},t.prototype.updateViewPort=function(){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.eventHandler.updateViewPortSize(this.element),this.updateBlazorDiagramProperties(e,!0)},t.prototype.cutCommand=function(){this.cut()},t.prototype.cut=function(){this.commandHandler.cut()},t.prototype.addProcess=function(e,t){this.bpmnModule&&this.bpmnModule.addProcess(e,t,this)},t.prototype.removeProcess=function(e){this.bpmnModule&&this.bpmnModule.removeProcess(e,this)},t.prototype.pasteCommand=function(){this.paste()},t.prototype.paste=function(e){this.commandHandler.paste(e)},t.prototype.fitToPage=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.fitToPage(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.bringIntoView=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.bringIntoView(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.bringToCenter=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.bringToCenter(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.copyCommand=function(){this.copy()},t.prototype.copy=function(){return this.commandHandler.copy()},t.prototype.group=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.group(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},t.prototype.unGroup=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.unGroup(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},t.prototype.sendToBack=function(){var e=this.selectedItems.nodes.length?this.selectedItems.nodes[0]:this.selectedItems.connectors[0];this.insertBlazorDiagramObjects(e),this.commandHandler.sendToBack(),this.commandHandler.getBlazorOldValues()},t.prototype.setActiveLayer=function(e){var t=this.commandHandler.getLayer(e);this.activeLayer=t},t.prototype.addLayer=function(e,t){this.commandHandler.addLayer(e,t)},t.prototype.addDiagramLayer=function(e,t){this.commandHandler.addLayer(e,t,!1)},t.prototype.removeLayer=function(e){this.commandHandler.removeLayer(e)},t.prototype.removeDiagramLayer=function(e){this.commandHandler.removeLayer(e,!1)},t.prototype.moveObjects=function(e,t){var i=xd(this.layers);this.enableServerDataBinding(!1),this.commandHandler.moveObjects(e,t);var n=this.commandHandler.deepDiffer.map(i,xd(this.layers)),r=this.commandHandler.deepDiffer.frameObject({},n);this.oldDiagramObject={layers:r},this.commandHandler.updateBlazorProperties()},t.prototype.layerObjectUpdate=function(){if(w()){this.enableServerDataBinding(!1),this.oldDiagramObject.layers=[];for(var e=0;e<this.layers.length;e++){var t=xd(this.layers[e]);t.sfIndex=this.layers[e].zIndex,this.oldDiagramObject.layers.push(t)}}},t.prototype.sendLayerBackward=function(e){this.layerObjectUpdate(),this.commandHandler.sendLayerBackward(e),this.commandHandler.updateLayerObject(this.oldDiagramObject,!0)},t.prototype.bringLayerForward=function(e){this.layerObjectUpdate(),this.commandHandler.bringLayerForward(e),this.commandHandler.updateLayerObject(this.oldDiagramObject)},t.prototype.cloneLayer=function(e){this.commandHandler.cloneLayer(e)},t.prototype.bringToFront=function(){var e=this.selectedItems.nodes.length?this.selectedItems.nodes[0]:this.selectedItems.connectors[0];this.insertBlazorDiagramObjects(e),this.commandHandler.bringToFront(),this.commandHandler.getBlazorOldValues()},t.prototype.moveForward=function(){var e=this.selectedItems.nodes.length?this.selectedItems.nodes[0]:this.selectedItems.connectors[0];this.insertBlazorDiagramObjects(e),this.commandHandler.sendForward(),this.commandHandler.getBlazorOldValues()},t.prototype.sendBackward=function(){var e=this.selectedItems.nodes.length?this.selectedItems.nodes[0]:this.selectedItems.connectors[0];this.insertBlazorDiagramObjects(e),this.commandHandler.sendBackward(),this.commandHandler.getBlazorOldValues()},t.prototype.getObject=function(e){return this.nameTable[e]},t.prototype.getNodeObject=function(e){return xd(this.nameTable[e])},t.prototype.getConnectorObject=function(e){return xd(this.nameTable[e])},t.prototype.getActiveLayer=function(){return this.activeLayer},t.prototype.nudgeCommand=function(e,t,i){"object"!==typeof e&&(this.selectedItems.nodes.length||this.selectedItems.connectors.length)>0&&this.nudge(e)},t.prototype.nudge=function(e,t,i){var n=0,r=0;"Left"===e||"Right"===e?n=("Left"===e?-1:1)*(t||1):r=("Up"===e?-1:1)*(i||1);var o=this.selectedItems,a=this.selectedItems.wrapper.children[0];if(a instanceof or)this.commandHandler.labelDrag(o.nodes[0],a,n,r);else{var s=xd(this.selectedItems);this.protectPropertyChange(!0),this.drag(o,n,r),this.protectPropertyChange(!1);var l={type:"PositionChanged",redoObject:xd(this.selectedItems),undoObject:s,category:"Internal"};this.addHistoryEntry(l)}this.refreshCanvasLayers()},t.prototype.insertBlazorDiagramObjects=function(e){if(w()&&!(this.blazorActions&wn.interaction)){if(this.enableServerDataBinding(!1),e instanceof Hh){for(var t=0;t<e.nodes.length;t++)this.insertBlazorDiagramObjects(e.nodes[t]);for(t=0;t<e.connectors.length;t++)this.insertBlazorDiagramObjects(e.connectors[t])}if(!(e instanceof Hh)){var i;if(e&&e.children&&e.children.length>0)for(t=0;t<e.children.length;t++)this.insertBlazorDiagramObjects(this.nameTable[e.children[t]]);i=xd(this.nameTable[e.id]),this.insertValue(i,!(Rc(e)===$a))}}},t.prototype.drag=function(e,t,i){if((this.insertBlazorDiagramObjects(e),w()&&e.id&&(e=this.nameTable[e.id]||e),this.bpmnModule&&e instanceof Lh)&&this.bpmnModule.updateAnnotationDrag(e,this,t,i))return;if(e instanceof Hh){if(this.preventConnectorsUpdate=!0,e.nodes&&e.nodes.length){for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];if(this.callBlazorModel=!1,this.drag(o,t,i),o.parentId){var a=this.nameTable[o.parentId];if(a.isLane)ol(a,this.nameTable[a.parentId],o,this)}}this.callBlazorModel=!0}if(e.connectors&&e.connectors.length){this.callBlazorModel=!1;for(var s=0,l=e.connectors;s<l.length;s++){var c=l[s];this.drag(c,t,i),-1===this.selectionConnectorsList.indexOf(c)&&this.selectionConnectorsList.push(c)}this.callBlazorModel=!0}this.updateSelector(),this.diagramActions&jn.DragUsingMouse&&this.updatePage()}else e instanceof Lh&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(e,this,t,i),this.commandHandler.drag(e,t,i);if(e instanceof Hh){this.preventConnectorsUpdate=!1;for(var h=0,d=this.selectionConnectorsList;h<d.length;h++){var p=d[h];this.updateConnectorProperties(this.nameTable[p.id]),"Bpmn"===p.shape.type&&"Default"===p.shape.sequence&&this.commandHandler.updatePathElementOffset(p)}this.selectionConnectorsList=[]}this.diagramActions&jn.ToolAction||this.diagramActions&jn.DragUsingMouse||this.updateSelector(),!this.callBlazorModel||this.blazorActions&wn.interaction||this.commandHandler.getBlazorOldValues()},t.prototype.disableStackContainerPadding=function(e,t){if(e instanceof Zc&&(e.considerPadding=t),e.children)for(var i=0,n=e.children;i<n.length;i++){var r=n[i];this.disableStackContainerPadding(r,!1)}},t.prototype.scale=function(e,t,i,n){this.disableStackContainerPadding(e.wrapper,!1),this.insertBlazorDiagramObjects(e);var r=!0;if(e.id&&(e=this.nameTable[e.id]||e),e instanceof Hh){if(e.nodes&&e.nodes.length){this.callBlazorModel=!1;for(var o=0,a=e.nodes;o<a.length;o++){var s=a[o];r=this.commandHandler.scale(s,t,i,n,e),this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds)||this.commandHandler.scale(s,1/t,1/i,n,e)}this.callBlazorModel=!0}if(e.connectors&&e.connectors.length){this.callBlazorModel=!1;for(var l=0,c=e.connectors;l<c.length;l++){var h=c[l];this.commandHandler.scale(h,t,i,n,e),this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds)||this.commandHandler.scale(h,1/t,1/i,n,e)}this.callBlazorModel=!0}this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(e,t,i,n,e.children?e:void 0);return!this.callBlazorModel||this.blazorActions&wn.interaction||this.commandHandler.getBlazorOldValues(),this.disableStackContainerPadding(e.wrapper,!0),r},t.prototype.rotate=function(e,t,i){var n;if(this.insertBlazorDiagramObjects(e),e.id&&(e=this.nameTable[e.id]||e),e)if(i=i||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof Hh){this.callBlazorModel=!1,e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var r=wd(e.wrapper);if(!(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r)))return e.rotateAngle-=t,e.wrapper.rotateAngle-=t,n;var o=[];o=(o=o.concat(e.nodes)).concat(e.connectors),this.commandHandler.rotateObjects(e,o,t,i),this.callBlazorModel=!0}else this.commandHandler.rotateObjects(e,[e],t,i);return!this.callBlazorModel||this.blazorActions&wn.interaction||this.commandHandler.getBlazorOldValues(),n},t.prototype.dragSourceEnd=function(e,t,i){this.insertBlazorDiagramObjects(e),this.commandHandler.dragSourceEnd(e,t,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},t.prototype.dragTargetEnd=function(e,t,i){this.insertBlazorDiagramObjects(e),this.commandHandler.dragTargetEnd(e,t,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},t.prototype.findObjectsUnderMouse=function(e,t){return this.eventHandler.findObjectsUnderMouse(e,t)},t.prototype.findObjectUnderMouse=function(e,t,i){return this.eventHandler.findObjectUnderMouse(e,t,i)},t.prototype.findTargetObjectUnderMouse=function(e,t,i,n,r){return this.eventHandler.findTargetUnderMouse(e,t,i,n,r)},t.prototype.findElementUnderMouse=function(e,t,i){return this.eventHandler.findElementUnderMouse(e,t,i)},t.prototype.findActionToBeDone=function(e,t,i,n){return this.eventHandler.findActionToBeDone(e,t,i,n)},t.prototype.getTool=function(e){var t,i=Ld(this.getCustomTool);return i&&(t=i(e))?t:this.eventHandler.getTool(e)},t.prototype.getCursor=function(e,t){var i,n=Ld(this.getCustomCursor);if(n&&(i=n(e,t)))return i;if(this.customCursor.length)for(var r=0;r<this.customCursor.length;r++)if(this.customCursor[r].action===e)return this.customCursor[r].cursor;return this.eventHandler.getCursor(e)},t.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},t.prototype.addHistoryEntry=function(e){if(this.undoRedoModule&&this.constraints&kn.UndoRedo&&!this.currentSymbol){if(e.undoObject&&"helper"===e.undoObject.id)return;this.undoRedoModule.addHistoryEntry(e,this),"StartGroup"!==e.type&&"EndGroup"!==e.type&&this.historyChangeTrigger(e,"CustomAction")}},t.prototype.addCustomHistoryEntry=function(e){w()&&this.undoRedoModule&&this.constraints&kn.UndoRedo&&(e.type=void 0,e.category="External",this.undoRedoModule.addHistoryEntry(e,this))},t.prototype.historyChangeTrigger=function(e,t){var i={},n=[];if("Internal"===e.category){switch(e&&e.redoObject&&e.redoObject.nodes instanceof Array&&e.redoObject.connectors instanceof Array?n=e.redoObject.nodes.concat(e.redoObject.connectors):e.redoObject&&n.push(e.redoObject),i.type=e.type,e.type){case"PositionChanged":i.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},i.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY};break;case"RotationChanged":i.oldValue={rotateAngle:e.undoObject.rotateAngle},i.newValue={rotateAngle:e.redoObject.rotateAngle};break;case"SizeChanged":i.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY,width:e.undoObject.width,height:e.undoObject.height},i.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY,width:e.redoObject.width,height:e.redoObject.height};break;case"CollectionChanged":i[e.changeType]=n;break;case"ConnectionChanged":i.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},i.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY}}var r=void 0;if(r={cause:e.category,source:Vc(n),change:Vc(i),action:t},w()){var o=(r={cause:e.category,change:Vc(i),source:{connectors:void 0,nodes:void 0},action:t}).source;o.connectors=[],o.nodes=[];for(var a=void 0,s=0;s<n.length;s++)a=Vc(n[s]),Rc(n[s])===$a?o.connectors.push(a):o.nodes.push(a);r.source=o}n.length&&this.triggerEvent(Hn.historyChange,r)}},t.prototype.startGroupAction=function(){this.addHistoryEntry({type:"StartGroup",category:"Internal"})},t.prototype.endGroupAction=function(){this.addHistoryEntry({type:"EndGroup",category:"Internal"})},t.prototype.undo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&kn.UndoRedo&&this.undoRedoModule.undo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.redo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&kn.UndoRedo&&this.undoRedoModule.redo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.getBlazorDiagramObjects=function(e){if(e)for(var t=0;t<e.length;t++)this.insertBlazorDiagramObjects(e[t]);else this.insertBlazorDiagramObjects(this.selectedItems);this.callBlazorModel=!1,this.canEnableBlazorObject=!0},t.prototype.align=function(e,t,i){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|jn.PublicMethod,this.commandHandler.align(t,e,i||"Object"),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.distribute=function(e,t){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|jn.PublicMethod,this.commandHandler.distribute(t,e),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},t.prototype.sameSize=function(e,t){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|jn.PublicMethod,this.commandHandler.sameSize(t,e),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},t.prototype.updateBlazorDiagramProperties=function(e,t){if(w()&&!t){this.enableServerDataBinding(!1);for(var i=0;i<e.length;i++)this.oldDiagramObject[e[i]]=xd(this[e[i]])}t&&this.commandHandler.getDiagramOldValues(this.oldDiagramObject,e)},t.prototype.getZoomingAttribute=function(){var e=[];return e.push("scrollSettings"),e.push("snapSettings"),e},t.prototype.zoom=function(e,t){var i=this.getZoomingAttribute();this.updateBlazorDiagramProperties(i),this.scroller.zoom(e,0,0,t),this.blazorActions&wn.interaction||this.updateBlazorDiagramProperties(i,!0)},t.prototype.zoomTo=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t);var i=e.zoomFactor?e.zoomFactor:.2;i="ZoomOut"===e.type?1/(1+i):1+i,this.scroller.zoom(i,0,0,e.focusPoint),this.updateBlazorDiagramProperties(t,!0)},t.prototype.pan=function(e,t,i){var n=this.getZoomingAttribute();this.updateBlazorDiagramProperties(n),this.setCursor("grabbing"),this.scroller.zoom(1,e,t,i),this.updateBlazorDiagramProperties(n,!0)},t.prototype.reset=function(){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0}),this.updateBlazorDiagramProperties(e,!0)},t.prototype.resetSegments=function(){var e=[],t=[],i=[];if(w())for(var n=0,r=this.connectors;n<r.length;n++){var o=r[n];e.push(xd(o,void 0,void 0,!0))}if(this.constraints&kn.LineRouting&&this.lineRoutingModule)this.lineRoutingModule.lineRouting(this);else{this.protectPropertyChange(!0);for(var a=void 0,s=0;s<this.connectors.length;s++)(a=this.connectors[s]).segments=[],this.connectorPropertyChange(a,{},{segments:a.segments});this.protectPropertyChange(!1)}if(w()){for(var l=0,c=this.connectors;l<c.length;l++){o=c[l];t.push(xd(o,void 0,void 0,!0))}this.commandHandler.getObjectChanges(e,t,i);var h={nodes:[],connectors:i};if(window&&window.Blazor){o={methodName:"UpdateBlazorProperties",diagramobj:h};window.sfBlazor.updateBlazorProperties(o,this)}}},t.prototype.setBlazorDiagramProps=function(e){var t=this.getZoomingAttribute();e?this.updateBlazorDiagramProperties(t):this.updateBlazorDiagramProperties(t,!0)},t.prototype.triggerEvent=function(e,t){return su(this,void 0,void 0,(function(){var i;return lu(this,(function(n){switch(n.label){case 0:return t&&this.updateEventValue(t),[4,this.trigger(Hn[e],t)];case 1:return i=n.sent(),w()&&"string"===typeof i&&(i=JSON.parse(i)),[2,i]}}))}))},t.prototype.updateEventValue=function(e){var t=e.element;e.element&&t instanceof Hh&&t.nodes.length+t.connectors.length===1&&(e.element=1===t.nodes.length?t.nodes[0]:t.connectors[0])},t.prototype.addNodeToLane=function(e,t,i){if(this.nameTable[t]){var n=this.nameTable[t];if(this.protectPropertyChange(!0),this.undoRedoModule&&this.historyManager.startGroupAction(),this.nameTable[e.id]||(e.offsetX=n.wrapper.bounds.width+n.wrapper.bounds.x,e.offsetY=n.wrapper.bounds.height+n.wrapper.bounds.y,e=this.add(e)),e.parentId="",n.shape.phases.length)for(var r=0;r<n.shape.phases.length;r++){l=t+i+r;if(this.nameTable[l]&&this.nameTable[l].isLane){var o=this.nameTable[l].wrapper.bounds,a={x:o.x+(o.x-n.wrapper.bounds.x+e.margin.left+e.wrapper.bounds.width/2),y:o.y+n.wrapper.bounds.y-e.margin.top};if("Horizontal"===n.shape.orientation)a.y=o.y;else{a.x=o.x;var s=this.nameTable[l].parentId+n.shape.lanes[0].id+"_0_header";a.y=o.y+(n.wrapper.bounds.y-this.nameTable[s].wrapper.bounds.height+e.margin.top+e.wrapper.bounds.height/2)}if(o.containsPoint(a)||l===t+i+(n.shape.phases.length-1)){nl(this,this.nameTable[l],e,void 0,!0),ol(this.nameTable[l],n,e,this);break}}}else{var l=t+i+"0";this.nameTable[l]&&(nl(this,this.nameTable[l],e,void 0,!0),ol(this.nameTable[l],n,e,this))}this.undoRedoModule&&this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}this.updateDiagramElementQuad()},t.prototype.showTooltip=function(e){var t=wd(e.wrapper),i={x:0,y:0},n=e.tooltip.content?e.tooltip.content:"X:"+Math.round(t.x)+" Y:"+Math.round(t.y);e&&"Custom"===e.tooltip.openOn&&(i=e instanceof Lh?{x:e.offsetX+e.width/2,y:e.offsetY+e.height/2}:{x:e.targetPoint.x,y:e.targetPoint.x},this.commandHandler.showTooltip(e,i,n,"SelectTool",!0))},t.prototype.hideTooltip=function(e){e&&"Custom"===e.tooltip.openOn&&this.tooltipObject.close()},t.prototype.addNode=function(e,t){return this.add(e,t)},t.prototype.addChildToGroup=function(e,t){this.addChild(e,t)},t.prototype.getHistoryStack=function(e){var t,i=[];if(t=e?this.historyManager.undoStack:this.historyManager.redoStack,void 0!==this.historyManager.stackLimit){for(var n=t.length-1;n>=0;n--)if(i.push(t[n]),i.length>this.historyManager.stackLimit)return i}else i=t;return i},t.prototype.getEdges=function(e){return e.outEdge?this.nameTable[e.id].outEdges:this.nameTable[e.id].inEdges},t.prototype.getParentId=function(e){return this.nameTable[e].parentId},t.prototype.addConnector=function(e){return this.add(e)},t.prototype.UpdateBlazorDiagramModelCollection=function(e,t,i){var n=Vc(e);if(window&&window.Blazor&&(!this.isServerUpdate||i)){this.isServerUpdate=!0;var r=[],o=[],a=[],s=void 0,l=[],c=[];if(!t){l=i||this.commandHandler.getChildren(e,[]);for(var h=0;h<l.length;h++)n=Vc(l[h]),o.push(n),s=Rc(l[h])===$a?this.connectors.indexOf(l[h]):this.nodes.indexOf(l[h]),r.push(s),c.push(Rc(l[h])===$a?"Connector":"Node");i||(o.push(Vc(e)),r.push(this.nodes.indexOf(e)),c.push(Rc(e)===$a?"Connector":"Node"))}if(t&&t.length>0)for(h=0;h<t.length;h++){n=Vc(t[h]),t[h]instanceof Lh?o.push(n):a.push(n),c.push(Rc(t[h])===$a?"Connector":"Node")}var d={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(o),ObjectType:c,removalIndex:t?void 0:r,isMultipleObjects:!0,annotationIndex:void 0,connectorObj:JSON.stringify(a)}};window.sfBlazor.updateBlazorProperties(d,this)}},t.prototype.UpdateBlazorDiagramModel=function(e,t,i,n){var r=Vc(e);if(window&&window.Blazor&&!this.isServerUpdate&&!(this.diagramActions&jn.Clear)){var o={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(r),ObjectType:t,removalIndex:i,isMultipleObjects:!1,annotationIndex:n,connectorObj:void 0}};window.sfBlazor.updateBlazorProperties(o,this)}},t.prototype.addBlazorDiagramObjects=function(){var e=[],t=[];if(this.dataBindingModule&&!(this.realActions&zn.PreventDataInit)){for(var i=0;i<this.nodes.length;i++)e.push(xd(this.nodes[i],void 0,void 0,!0));for(i=0;i<this.connectors.length;i++)t.push(xd(this.connectors[i],void 0,void 0,!0))}if(window&&window.Blazor){var n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(e),isConnector:!1}};window.sfBlazor.updateBlazorProperties(n,this),n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(t),isConnector:!0}},window.sfBlazor.updateBlazorProperties(n,this)}},t.prototype.removeNodeEdges=function(e,t,i){var n=this.nameTable[e],r=i?n.outEdges:n.inEdges;if(r.length>0)for(var o=0;o<r.length;o++)r[o]===t&&r.splice(o,1)},t.prototype.add=function(e,i){var n,r=this.isProtectedOnChange;if(this.protectPropertyChange(!0),e){var o=void 0;o={element:e=xd(e),cause:this.diagramActions,state:"Changing",type:"Addition",cancel:!1},this.parentObject&&(o.parentId=this.parentObject.id),w()&&(o=Lc(o,e,"Changing","Addition")),"helper"===e.id||this.diagramActions&jn.PreventCollectionChangeOnDragOver||this.triggerEvent(Hn.collectionChange,o),o.cancel&&this.drawingObject&&(this.removeElements(o.element),this.tooltipObject.close(),Rc(o.element)===$a&&(o.element.sourceID&&this.removeNodeEdges(o.element.sourceID,o.element.id,!0),o.element.targetID&&this.removeNodeEdges(o.element.targetID,o.element.id,!1))),this.diagramActions=this.diagramActions|jn.PublicMethod,e.id=e.id||md();var a=this.activeLayer;if(!o.cancel&&!a.lock){if(a.objects.indexOf(e.id)<0&&!a.lock&&(a.visible||(a.visible=!0,this.dataBind()),a.objects.push(e.id)),Rc(e)===$a)(n=new $a(this,"connectors",e,!0)).status="New",Kl(n,e,this.connectorDefaults),this.connectors.push(n),this.initObject(n),this.UpdateBlazorDiagramModel(n,"Connector"),!1===e.visible&&this.updateElementVisibility(n.wrapper,n,e.visible),this.updateEdges(n);else{if(Kl(n=new Lh(this,"nodes",e,!0),e,this.nodeDefaults),n.parentId=e.parentId,n.umlIndex=e.umlIndex,n.status="New",this.nodes.push(n),this.initObject(n,a,void 0,i),this.updateTemplate(),this.UpdateBlazorDiagramModel(n,"Node"),this.bpmnModule){if(n.shape.annotations&&0!==n.shape.annotations.length)for(var s=0,l=this.bpmnModule.getTextAnnotationConn(n);s<l.length;s++){var c=l[s];this.initConnectors(c,a,!1)}n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(n,this)}if(this.lineRoutingModule&&this.constraints&kn.LineRouting)for(var h=this.spatialSearch.findObjects(n.wrapper.outerBounds),d=0;d<h.length;d++){var p=h[d];p instanceof $a&&this.connectorPropertyChange(p,{},{sourceID:p.sourceID,targetID:p.targetID,sourcePortID:p.sourcePortID,targetPortID:p.targetPortID,sourcePoint:p.sourcePoint,targetPoint:p.targetPoint})}if(n.umlIndex>-1&&e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type){var u=this.nameTable[e.parentId];u.children.splice(n.umlIndex,0,n.id),u.wrapper.children.splice(n.umlIndex,0,n.wrapper),u.wrapper.measure(new Zi),u.wrapper.arrange(u.wrapper.desiredSize),this.updateDiagramObject(u)}}if(o={element:n,cause:this.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.parentObject&&(o.parentId=this.parentObject.id),this.updateBlazorCollectionChange(n,!0),w()&&(o=Lc(o,e,"Changed","Addition")),"helper"===e.id||this.diagramActions&jn.PreventCollectionChangeOnDragOver||this.triggerEvent(Hn.collectionChange,o),!(this.diagramActions&jn.UndoRedo)&&!(this.diagramActions&jn.Group)&&!(this.diagramActions&jn.PreventHistory)){var f={type:"CollectionChanged",changeType:"Insert",undoObject:xd(e),redoObject:xd(e),category:"Internal"};this.addHistoryEntry(f)}this.parentObject=void 0,"SVG"===this.mode&&(this.updateSvgNodes(n),this.updateTextElementValue(n),this.updateDiagramObject(n),n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.updateProcesses(n),this.updateBridging())}}this.protectPropertyChange(r),this.resetDiagramActions(jn.PublicMethod),n&&this.layers.length>1&&this.moveNode(n);for(var g=0,m=this.views;g<m.length;g++){var y=m[g],v=this.views[y];v instanceof t||this.refreshCanvasDiagramLayer(v)}return n},t.prototype.updateBlazorCollectionChange=function(e,t){if(window&&window.sfBlazor){var i={},n=e instanceof Lh?"nodes":"connectors";i["nodes"===n?this.nodes.indexOf(e).toString():this.connectors.indexOf(e).toString()]=xd(e),window.sfBlazor.updateDiagramCollection&&window.sfBlazor.updateDiagramCollection.call(this,n,i,{},!t,!1)}},t.prototype.updateSvgNodes=function(e){if(e.children)for(var t=0,i=e.children;t<i.length;t++){var n=i[t];if(this.nameTable[n]&&this.nameTable[n].parentId){var r=Yh(n+"_groupElement",this.element.id);r&&r.parentNode.removeChild(r)}}},t.prototype.updateProcesses=function(e){if(this.bpmnModule&&e&&e.shape&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length){var t=e.shape.activity.subProcess.processes;this.moveSvgNode(e.id);for(var i=0,n=t;i<n.length;i++){var r=n[i];this.moveSvgNode(r);for(var o=[],a=(o=o.concat(this.nameTable[r].outEdges,this.nameTable[r].inEdges)).length-1;a>=0;a--)this.moveSvgNode(o[a])}for(var s=0,l=t;s<l.length;s++){r=l[s];this.nameTable[r].shape.activity.subProcess.processes&&this.nameTable[r].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[r])}}else this.moveSvgNode(e.id)},t.prototype.moveSvgNode=function(e){var t=Yh(e+"_groupElement",this.element.id),i=t.parentElement;t.parentNode.removeChild(t),i.appendChild(t)},t.prototype.addTextAnnotation=function(e,t){if(this.bpmnModule){var i=this.bpmnModule.addAnnotation(t,e,this);if(this.initConnectors(i,this.commandHandler.getObjectLayer(t.id),!1),this.updateDiagramObject(t),!(this.diagramActions&jn.UndoRedo)&&!(this.diagramActions&jn.Group)){var n={type:"CollectionChanged",changeType:"Insert",undoObject:xd(e),redoObject:xd(e),category:"Internal"};this.addHistoryEntry(n)}}},t.prototype.spliceConnectorEdges=function(e,t){var i,n,r=[];if(i=t?this.nameTable[e.sourceID]:this.nameTable[e.targetID]){for(var o=(r=t?i.outEdges:i.inEdges).length-1;o>=0;o--)r[o]===e.id&&r.splice(o,1);for(var a=0;i.ports&&a<i.ports.length;a++)n=!t,this.removePortEdges(i,i.ports[a].id,e.id,n)}},t.prototype.removeDependentConnector=function(e){for(var t,i=[],n=(i=i.concat(e.outEdges,e.inEdges)).length-1;n>=0;n--)(t=this.nameTable[i[n]])&&(this.connectorTable[t.id]=xd(t),this.remove(t))},t.prototype.removeObjectsFromLayer=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var i=this.nameTable[e.children[t]];i&&this.removeObjectsFromLayer(i)}var n=this.layers.indexOf(this.commandHandler.getObjectLayer(e.id)),r=this.layers[n].objects.indexOf(e.id);r>-1&&(up(this,e)&&this.unSelect(e),this.layers[n].objects.splice(r,1),delete this.layers[n].zIndexTable[this.nameTable[e.id].zIndex])},t.prototype.removeElements=function(e){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===e.shape.type){var t=Yh(e.id+"_groupElement",this.element.id),i=e;if(i.ports&&i.ports.length>0)for(var n=0;n<i.ports.length;n++){var r=i.ports[n],o=Yh(i.id+"_"+r.id+"_groupElement",this.element.id);o&&o.parentNode.removeChild(o)}t&&t.parentNode.removeChild(t)}this.refreshCanvasLayers();var a,s=e.wrapper.children;if(s)for(n=0;n<s.length;n++){if(s[n]instanceof gr||s[n].id&&s[n].id.indexOf("icon_content")>0){s[n].id.indexOf("icon_content")>0&&"SVG"===this.mode&&((a=Yh(s[n].id+"_shape_groupElement",this.element.id))&&a.parentNode.removeChild(a),(a=Yh(s[n].id+"_rect_groupElement",this.element.id))&&a.parentNode.removeChild(a));for(var l=0,c=this.views;l<c.length;l++){var h=c[l];ld(s[n].id+"_groupElement",h);var d=this.scroller.removeCollection.indexOf(e.id);this.scroller.removeCollection.splice(d,1)}}else if(s[n]instanceof Ta)for(var p=0,u=this.views;p<u.length;p++){h=u[p];ld(e.id+"_html_element",h),ld(s[n].id+"_html_element",h)}yc(s[n].id)}},t.prototype.removeCommand=function(){this.remove()},t.prototype.remove=function(e){var t,i=[];i=i.concat(this.selectedItems.nodes,this.selectedItems.connectors);var n=!1;if(e){if((e=this.nameTable[e.id])&&e.shape&&"SwimLane"===e.shape.type&&function(e,t){var i,n,r,o,a,s,l=t.wrapper.children[0].rows;for(n=0;n<l.length;n++)for(r=0;r<l[n].cells.length;r++){if((a=jl(l[n].cells[r]))&&a.children)for(o=0;o<a.children.length;o++)a.children[o].children&&(s=e.nameTable[a.children[o].id])&&(s.isLane?Nl(e,s):(e.removeDependentConnector(s),e.diagramActions|=jn.PreventHistory,s.constraints&En.Delete?e.remove(s):Qs(e,s,{},!1),e.diagramActions&=~jn.PreventHistory,o--));a&&(i=e.nameTable[a.id])&&Nl(e,i)}}(this,e),e&&(function(e){return e instanceof $a?e.constraints&Pn.Delete:e.constraints&En.Delete}(e)||this.diagramActions&jn.Clear)&&(t={element:e,cause:this.diagramActions,state:"Changing",type:"Removal",cancel:!1},w()&&(t=Lc(t,e,"Changing","Removal")),this.diagramActions&jn.Clear||"helper"===e.id||this.triggerEvent(Hn.collectionChange,t),!t.cancel)){if(this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(e,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&jn.UndoRedo)&&!(this.diagramActions&jn.PreventHistory)&&(e instanceof Lh||e instanceof $a)){var r={type:"CollectionChanged",changeType:"Remove",undoObject:xd(e),redoObject:xd(e),category:"Internal"};this.updateBlazorCollectionChange(e,!1),this.diagramActions&jn.Clear||i.length>0&&this.undoRedoModule&&!this.layout.type&&(this.historyManager.startGroupAction(),n=!0),e instanceof Lh&&this.removeDependentConnector(e),e.isLane||e.isPhase||this.diagramActions&jn.Clear||this.isStackChild(e)||this.addHistoryEntry(r)}!e.children||e.isLane||e.isPhase||this.deleteGroup(e),e.parentId&&(this.deleteChild(e),this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[e.parentId]),this.updateConnectorEdges(this.nameTable[e.parentId])));var o=void 0;this.diagramActions=this.diagramActions|jn.PublicMethod;var a=this.nameTable[e.id];if(a instanceof Lh){if("Bpmn"===a.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(a,this),a.isLane||a.isPhase||"SwimLane"===a.shape.type){(s=a.isLane||a.isPhase?this.nameTable[a.parentId]:this.nameTable[a.id]).wrapper.children[0];a.isLane?zl(this,a,s):a.isPhase&&Hl(this,a,s)}o=this.nodes.indexOf(a),w()&&"helper"!==e.id&&this.UpdateBlazorDiagramModel(e,"Node",o),-1!==o&&(this.crudDeleteNodes.push(this.nameTable[a.id]),this.nodes.splice(o,1),this.updateNodeEdges(a))}else o=this.connectors.indexOf(a),this.UpdateBlazorDiagramModel(e,"Connector",o),-1!==o&&(this.crudDeleteNodes.push(this.nameTable[a.id]),this.connectors.splice(o,1)),this.updateEdges(a),this.spliceConnectorEdges(e,!0),this.spliceConnectorEdges(e,!1);if(n&&this.historyManager.endGroupAction(),up(this,a)&&this.unSelect(a),!a.isPhase){if(this.removeObjectsFromLayer(e),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[e.id],i.length>0&&i[0].id===a.id&&a.parentId){var s,l=this.nameTable[a.parentId];if(l&&l.isLane&&"SwimLane"===this.nameTable[l.parentId].shape.type)Rl(this,s=this.nameTable[l.parentId],l,a)}this.removeElements(a),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&jn.Clear||(this.removeFromAQuad(a),t={element:e,cause:this.diagramActions,state:"Changed",type:"Removal",cancel:!1},w()&&(t=Lc(t,e,"Changed","Removal")),"helper"!==e.id&&this.triggerEvent(Hn.collectionChange,t),this.resetTool())}}}else if(i.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),n=!0);for(var c=0;c<i.length;c++){i[c];if(this.nameTable[i[c].id]){if(i[c]instanceof $a&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(i[c])>-1)return void this.remove(this.nameTable[i[c].targetID]);w()&&(!this.isServerUpdate&&i&&i.length>1&&(this.isServerUpdate=!0,this.UpdateBlazorDiagramModelCollection(i[0],void 0,i)),i[c].parentId&&this.insertBlazorDiagramObjects(this.nameTable[i[c].parentId])),this.remove(i[c]),w()&&i[c].parentId&&(this.commandHandler.getBlazorOldValues(),this.isServerUpdate=!1)}}n&&this.historyManager.endGroupAction(),this.clearSelection()}if(this.tooltipObject.close(),w()&&i&&i.length>0){for(var h=!0,d=0;d<i.length;d++)this.nameTable[i[d].id]&&(h=!1);h&&(this.isServerUpdate=!1)}},t.prototype.isStackChild=function(e){var t,i=this.nameTable[e.parentId];if(e&&e.parentId&&i.container&&"Stack"===i.container.type&&"UmlClassifier"!==this.nameTable[e.parentId].shape.type){t=!0;var n={type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:e,target:void 0,targetIndex:void 0},undoObject:{sourceIndex:i.wrapper.children.indexOf(e.wrapper),source:e,target:void 0,targetIndex:void 0},category:"Internal"};this.diagramActions&jn.UndoRedo||this.addHistoryEntry(n)}return t},t.prototype.deleteChild=function(e,t){var i;if(t=t?this.nameTable[t.id]:this.nameTable[e.parentId],i="string"===typeof e?e:e.id,t&&t.children){for(var n=0;n<t.children.length;n++)if(t.children[n]===i){t.children.splice(n,1);for(var r=0;r<t.wrapper.children.length;r++)t.wrapper.children[r].id===i&&t.wrapper.children.splice(r,1)}t.wrapper.measure(new Zi),t.wrapper.arrange(t.wrapper.desiredSize)}},t.prototype.addChild=function(e,t,i){var n,r=this.nameTable[e.id];if(r.children||(r.children=[]),r.children&&("string"===typeof t?this.nameTable[t]&&(n=t):(n=t.id=t.id||md(),this.add(t)),n&&(!t.umlIndex||-1===t.umlIndex))){var o=this.nameTable[n];o.parentId=r.id,r.container&&"Stack"===r.container.type&&this.updateStackProperty(r,o),i?(r.children.splice(i,0,n),r.wrapper.children.splice(i,0,o.wrapper)):(r.children.push(n),r.wrapper.children.push(o.wrapper)),r.wrapper.measure(new Zi),r.wrapper.arrange(r.wrapper.desiredSize),r.isLane||(this.nameTable[e.id].width=r.wrapper.actualSize.width,this.nameTable[e.id].height=r.wrapper.actualSize.height),void 0!==r.container&&(o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY),(!r.parentId||this.nameTable[r.parentId]&&"SwimLane"!==this.nameTable[r.parentId].shape.type)&&this.updateDiagramObject(r)}},t.prototype.clear=function(){this.clearObjects()},t.prototype.clearObjects=function(e){var t=[];t=e||(t=t.concat(this.nodes)).concat(this.connectors),this.diagramActions=this.diagramActions|jn.Clear;for(var i=0,n=t;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}this.diagramActions=this.diagramActions&~jn.Clear,this.spatialSearch=new Zp(this.nameTable),this.initHistory()},t.prototype.startEditCommad=function(){var e,t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(t&&t instanceof Lh)if(t.isLane&&t.parentId)for(var i=this.nameTable[t.parentId],n=i.shape.lanes,r=t.id.slice(i.id.length),o=r.substring(0,r.length-1),a=0;a<n.length;a++)t.isLane&&o===n[a].id&&(e=this.nameTable[n[a].header.id]);else if("SwimLane"===t.shape.type&&t.shape.header&&t.shape.hasHeader){var s=t.wrapper.children[0].rows[0].cells[0].children[0].id;e=this.nameTable[s]}this.startTextEdit(e)},t.prototype.startTextEdit=function(e,t){if(!Cs(this)&&!Ss(this)||xs(this)){this.textEditing=!0;var i=this.scroller.transform,n=Is(this)?i.scale:1,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0;if(e||(e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),e){if(w()){var c=xd(e);c.annotations.length>0&&this.insertValue(c,e instanceof Lh),e=this.nameTable[e.id]||e}e.shape&&"UmlClassifier"===e.shape.type&&(e=this.nameTable[e.children[0]]);var h=!1;if(this.bpmnModule&&(l=this.bpmnModule.getTextAnnotationWrapper(e,t))&&(e=this.nameTable[e.id.split("_textannotation_")[0]]),l?h=!0:("Text"!==e.shape.type&&0===e.annotations.length&&(e.constraints&En.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(e,[{id:md(),content:""}]))),!t&&("Text"!==e.shape.type&&e.annotations.length>0||"Text"===e.shape.type)&&(t="Text"===e.shape.type?e.wrapper.children[0].id.split("_")[1]:e.annotations[0].id),t&&(l=this.getWrapper(e.wrapper,t))),e&&l&&!(l instanceof Ta)&&(!function(e,t){var i;return i=t instanceof $a?Pn.ReadOnly:En.ReadOnly,"Text"===t.shape.type?t.constraints&En.ReadOnly:t.constraints&i?e.constraints&On.InheritReadOnly?1:0:e.constraints&On.ReadOnly?1:0}(l,e)||h)){var d=l.style,p=void 0;p=90>(p=l.bounds.width<e.wrapper.bounds.width?l.bounds.width:e.wrapper.bounds.width)?90:p;var u=document.getElementById(this.element.id+"_editTextBoxDiv"),f=document.getElementById(this.element.id+"_editBox");r=f?f.value:l.content,this.activeLabel.text=r,u||f||(u=nd("div",{}),f=nd("textarea",{}),this.diagramCanvas.appendChild(u),u.appendChild(f),f.appendChild(document.createTextNode(r))),(o=Fh(l.style,r,void 0,void 0,p)).isEmpty()&&(o="Text"!==e.shape.type?new Zi(Pc(e,l.id.split(e.id+"_")[1]).width||50,l.style.fontSize):new Zi(e.width>50?50:e.width,l.style.fontSize)),e.parentId&&"UmlClassifier"===this.nameTable[e.parentId].shape.type?(o.width=e.wrapper.bounds.width-20,a=(e.wrapper.bounds.center.x+i.tx)*i.scale-o.width/2*n-2.5,s=(e.wrapper.bounds.center.y+i.ty)*i.scale-o.height/2*n-3,l.style.textAlign="Left"):(o.width=Math.max(o.width,50),a=(l.bounds.center.x+i.tx)*i.scale-o.width/2*n-2.5,s=(l.bounds.center.y+i.ty)*i.scale-o.height/2*n-3),pd(u,{id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+a+"px;top:"+s+"px;width:"+(o.width+1)*n+"px;height:"+o.height*n+"px; containerName:"+e.id+";"}),pd(f,{id:this.element.id+"_editBox",style:"width:"+(o.width+1)*n+"px;height:"+o.height*n+"px;resize: none;outline: none;overflow: hidden;;font-family:"+d.fontFamily+";font-size:"+d.fontSize*n+"px;text-align:"+l.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),f.style.fontWeight=d.bold?"bold":"",f.style.fontStyle=d.italic?"italic":"",f.style.lineHeight=(1.2*d.fontSize+"px;").toString(),f.style.textDecoration=d.textDecoration?d.textDecoration:"",this.activeLabel.parentId=e.id,this.activeLabel.id=t,l.visible=!1,this.updateDiagramObject(e),this.diagramActions=this.diagramActions|jn.TextEdit,this.isTriggerEvent||(ce.add(f,"input",this.eventHandler.inputChange,this.eventHandler),ce.add(f,"focusout",this.focusOutEdit,this),f.select())}}}},t.prototype.updateNodeExpand=function(e,t){for(var i=0;i<e.outEdges.length;i++){var n=this.nameTable[e.outEdges[i]],r=this.nameTable[n.targetID];n.visible=t,t||(this.updateElementVisibility(n.wrapper,n,!1),r.isExpanded=t),this.updateNodeExpand(r,r.isExpanded),r.visible=t,t||this.updateElementVisibility(r.wrapper,r,!1)}},t.prototype.updateConnectorAnnotation=function(e){if(e.annotations.length)for(var t=void 0,i=0,n=e.annotations;i<n.length;i++){var r=n[i];t=this.getWrapper(e.wrapper,r.id),e.updateAnnotation(r,e.intermediatePoints,e.wrapper.bounds,t,this.diagramActions&jn.Interactions)}e.wrapper.measure(new Zi(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.removeChildrenFromLayout=function(e){for(var t,i=[],n=0;n<e.length;n++)(t=e[n]).parentId||t.processId||i.push(t);return i},t.prototype.doLayout=function(){var e,t=!1,i=this.isProtectedOnChange;this.protectPropertyChange(!0);var n=this.removeChildrenFromLayout(this.nodes),r={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if("None"!==this.layout.type){if(this.organizationalChartModule)e=this.organizationalChartModule.updateLayout(n,this.nameTable,this.layout,r,this.dataSourceSettings.id,this.diagramActions),t=!0,this.layoutAnimateModule&&e.rootNode&&!this.diagramActions&&this.updateNodeExpand(e.rootNode,e.rootNode.isExpanded);else if(this.mindMapChartModule)n&&n.length>0&&this.mindMapChartModule.updateLayout(n,this.nameTable,this.layout,r,this.dataSourceSettings.id,this.dataSourceSettings.root),t=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(n,this.nameTable,this.layout,r),t=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(n,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,r),t=!0;else if(this.complexHierarchicalTreeModule){var o=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);o.length>0&&this.complexHierarchicalTreeModule.doLayout(o,this.nameTable,this.layout,r),t=!0}if(t){this.preventDiagramUpdate=!0;var a={},s=n;w()&&this.updateTemplate();for(var l=0,c=s;l<c.length;l++){var h=c[l];if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&jn.PreventIconsUpdate||(this.updateIcon(h),this.updateDefaultLayoutIcons(h)),this.preventNodesUpdate=!0,this.nodePropertyChange(h,{},{offsetX:h.offsetX,offsetY:h.offsetY},!0),this.preventNodesUpdate=!1,h.wrapper.measure(new Zi(h.wrapper.width,h.wrapper.height)),h.wrapper.arrange(h.wrapper.desiredSize),this.updateDiagramObject(h,!0),h.inEdges.length>0)for(var d=0;d<h.inEdges.length;d++){a[(m=this.nameTable[h.inEdges[d]]).id]=m}if(h.outEdges.length>0)for(var p=0;p<h.outEdges.length;p++){var u=this.nameTable[h.outEdges[p]];a[u.id]=u}}for(var f=0,g=Object.keys(a);f<g.length;f++){var m;bc(m=a[g[f]],this.getPoints(m)),"Bpmn"===m.shape.type&&"Default"===m.shape.sequence&&this.commandHandler.updatePathElementOffset(m),m.wrapper.measure(new Zi(void 0,void 0)),m.wrapper.arrange(m.wrapper.desiredSize),this.updateConnectorAnnotation(m),this.updateQuad(m),this.updateDiagramObject(m,!0)}this.preventDiagramUpdate=!1,this.updatePage(),this.diagramActions&jn.Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}i||this.protectPropertyChange(i)}return t&&this.updateDiagramElementQuad(),!(this.blazorActions&wn.expandNode)||e},t.prototype.saveDiagram=function(){return lc(this)},t.prototype.loadDiagram=function(e){return dc(e,this)},t.prototype.getDiagramContent=function(e){return this.printandExportModule?this.printandExportModule.getDiagramContent(e):""},t.prototype.exportImage=function(e,t){this.printandExportModule&&this.printandExportModule.exportImages(e,t)},t.prototype.printImage=function(e,t){this.printandExportModule&&(t.printOptions=!0,this.printandExportModule.exportImages(e,t))},t.prototype.setStackLimit=function(e){this.undoRedoModule&&e&&(this.historyManager.stackLimit=e,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,e,this,!0))},t.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},t.prototype.getDiagramBounds=function(){if(this.printandExportModule){var e=this.printandExportModule.getDiagramBounds("",{});return e.width=e.width>this.scrollSettings.viewPortWidth?e.width+(e.x>0?e.x:0):this.scrollSettings.viewPortWidth,e.height=e.height>this.scrollSettings.viewPortHeight?e.height+(e.y>0?e.y:0):this.scrollSettings.viewPortHeight,e.x=e.x>0?0:e.x,e.y=e.y>0?0:e.y,e}return new hn},t.prototype.exportDiagram=function(e){return this.printandExportModule?this.printandExportModule.exportDiagram(e):""},t.prototype.print=function(e){this.printandExportModule&&this.printandExportModule.print(e)},t.prototype.addPorts=function(e,t){var i;this.protectPropertyChange(!0),e=this.nameTable[e.id]||e,t.length>1&&this.startGroupAction();for(var n=0;n<t.length;n++){if(i=new br(e,"ports",t[n],!0),e.ports.push(i),e.children){var r=e.wrapper;e.initPorts(this.getDescription,e.wrapper.children[r.children.length-1])}else{e.wrapper.children.push(e.initPortWrapper(e.ports[e.ports.length-1]))}if(!(this.diagramActions&jn.UndoRedo)&&!(this.diagramActions&jn.Group)){var o={type:"PortCollectionChanged",changeType:"Insert",undoObject:xd(i),redoObject:xd(e),category:"Internal"};this.addHistoryEntry(o)}}t.length>1&&this.endGroupAction(),e.wrapper.measure(new Zi(e.width,e.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addConstraints=function(e,t){return e|t},t.prototype.removeConstraints=function(e,t){return e&~t},t.prototype.addNodeLabels=function(e,t){this.addLabels(e,t)},t.prototype.addConnectorLabels=function(e,t){this.addLabels(e,t)},t.prototype.addLabels=function(e,t){this.protectPropertyChange(!0);var i,n=(e=this.nameTable[e.id]||e).wrapper;t.length>1&&this.startGroupAction();for(var r=0;r<t.length;r++){if(e instanceof Lh){if(i=new Pr(e,"annotations",t[r],!0),e.annotations.push(i),w()){var o=xd(e);this.insertValue(o,e instanceof Lh)}if(this.UpdateBlazorDiagramModel(i,"NodeAnnotation",void 0,this.nodes.indexOf(e)),e.children)for(var a=e,s=0;s<a.wrapper.children.length;s++){if(a.wrapper.children[s].id===a.id+"group_container")a.wrapper.children[s].children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id))}else n.children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id))}else if(e instanceof $a){if(i=new Or(e,"annotations",t[r],!0),this.UpdateBlazorDiagramModel(i,"ConnectorAnnotation",void 0,this.connectors.indexOf(e)),e.annotations.push(i),w()){o=xd(e);this.insertValue(o,e instanceof Lh)}var l=n.children[0],c=new hn(l.offsetX-l.width/2,l.offsetY-l.height/2,l.width,l.height);n.children.push(e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,c,this.getDescription,this.element.id))}if(!(this.diagramActions&jn.UndoRedo)&&!(this.diagramActions&jn.Group)){var h={type:"LabelCollectionChanged",changeType:"Insert",undoObject:xd(i),redoObject:xd(e),category:"Internal"};this.addHistoryEntry(h)}}t.length>1&&this.endGroupAction(),e.wrapper.measure(new Zi(n.width,n.height)),e.wrapper.arrange(n.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addLanes=function(e,t,i){e=this.nameTable[e.id]||e;for(var n=0;n<t.length;n++)Tl(this,e,t[n],i),void 0!==i&&(i+=1);this.updateDiagramElementQuad()},t.prototype.addPhases=function(e,t){e=this.nameTable[e.id]||e;for(var i=0;i<t.length;i++)kl(this,e,t[i]);this.updateDiagramElementQuad()},t.prototype.removeLane=function(e,t){zl(this,void 0,e,t),this.updateDiagramElementQuad()},t.prototype.removePhase=function(e,t){Hl(this,void 0,e,t),this.updateDiagramElementQuad()},t.prototype.removelabelExtension=function(e,t,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[r];if((o instanceof or||o instanceof Ta)&&o.id.match("_"+t[i].id+"$")){for(var a=0;a<e.annotations.length;a++)if(o.id.match("_"+e.annotations[a].id+"$")){if(!(this.diagramActions&jn.UndoRedo)){var s={type:"LabelCollectionChanged",changeType:"Remove",undoObject:xd(e.annotations[a]),redoObject:xd(e),category:"Internal"};this.addHistoryEntry(s)}e.annotations.splice(a,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=Yh(o.id,this.element.id);if(l){var c=Yh(o.id,this.element.id);c.parentNode.removeChild(c)}Yh(o.id+"_text",this.element.id)&&(l=Yh(o.id+"_text",this.element.id)).parentNode.removeChild(l);var h=Yh(o.id+"_html_element",this.element.id);h&&h.parentNode.removeChild(h)}else this.refreshCanvasLayers()}}},t.prototype.removeLabels=function(e,t){e=this.nameTable[e.id]||e,t.length>1&&this.startGroupAction();for(var i=t.length-1;i>=0;i--)if(e.children&&e.children.length>0)for(var n=0;n<e.wrapper.children.length;n++)this.removelabelExtension(e,t,i,e.wrapper.children[n]);else this.removelabelExtension(e,t,i,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.removePortsExtenion=function(e,t,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[r];if(o instanceof dr&&o.id.match("_"+t[i].id+"$")){for(var a=0;a<e.ports.length;a++)if(o.id.match("_"+e.ports[a].id+"$")){if(!(this.diagramActions&jn.UndoRedo)){var s={type:"PortCollectionChanged",changeType:"Remove",undoObject:xd(e.ports[a]),redoObject:xd(e),category:"Internal"};this.addHistoryEntry(s)}e.ports.splice(a,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=Yh(o.id,this.element.id);l.parentNode.removeChild(l)}else this.refreshCanvasLayers()}}},t.prototype.removePorts=function(e,t){e=this.nameTable[e.id]||e,t.length>1&&this.startGroupAction();for(var i=t.length-1;i>=0;i--)if(e.children&&e.children.length>0)for(var n=0;n<e.wrapper.children.length;n++)this.removePortsExtenion(e,t,i,e.wrapper.children[n]);else this.removePortsExtenion(e,t,i,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.getSizeValue=function(e,t){var i;if(i=e.toString().indexOf("px")>0?e.toString():e.toString().indexOf("%")>0?void 0!==t?"100%":e.toString():e.toString()+"px",t){rs(this);i="calc("+i+" - "+t+"px)"}return i},t.prototype.renderRulers=function(){this.rulerSettings.showRulers?(!function(e){var t=rs(e),i=nd("div",{id:e.element.id+"_overlapRuler",style:"height:"+t.height+"px;width:"+t.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"});e.element.insertBefore(i,e.element.firstChild)}(this),ts(this,!0),ts(this,!1)):ns(this)},t.prototype.intOffPageBackground=function(){var e=new Zi;e=rs(this);var t=document.getElementById(this.element.id+"content"),i=this.getSizeValue(this.width,e.width),n=this.getSizeValue(this.height,e.height),r=this.rulerSettings.showRulers?"width:"+i+"; height:"+n+";top:"+e.height+"px;left:"+e.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+i+"; height:"+n+";position:absolute; left:0px;  top:0px;overflow: auto;",o={id:this.element.id+"content",tabindex:"0",style:r};t?(this.diagramCanvas=t,dd(this.diagramCanvas,r)):(this.diagramCanvas=nd("div",o),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},t.prototype.initDiagram=function(){this.intOffPageBackground(),pd(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},t.prototype.renderHiddenUserHandleTemplateLayer=function(e){var t;t=nd("div",{class:this.element.id+"_hiddenUserHandleTemplate",style:"width:"+e.width+"px; height:"+e.height+"px;visibility:hidden ;  overflow: hidden;"}),this.element.appendChild(t)},t.prototype.renderBackgroundLayer=function(e,t){var i=this.createSvg(this.element.id+"_backgroundLayer_svg",e.width,e.height);dd(i,t);var n=rd("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});i.appendChild(n);var r=rd("g",{id:this.element.id+"_backgroundLayer",class:"e-background-layer"});i.appendChild(r),this.diagramCanvas.appendChild(i)},t.prototype.renderGridLayer=function(e,t){var i=this.createSvg(this.element.id+"_gridline_svg",e.width,e.height);i.setAttribute("class","e-grid-layer");var n=rd("g",{id:this.element.id+"_gridline",width:"100%",height:"100%"}),r=rd("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%"});Uc()?r.setAttribute("fill","url("+location.protocol+"//"+location.host+location.pathname+"#"+this.element.id+"_pattern)"):r.setAttribute("fill","url(#"+this.element.id+"_pattern)"),n.appendChild(r),i.appendChild(n),this.diagramCanvas.appendChild(i),hd(i,{style:t})},t.prototype.renderDiagramLayer=function(e,t){var i={id:this.element.id+"_diagramLayer_div",style:"width:"+e.width+"px; height:"+e.height+"px;"+t};if(this.diagramLayerDiv=nd("div",i),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",e.width,e.height);n.style["pointer-events"]="none",n.setAttribute("class","e-diagram-layer");var r=rd("g",{id:this.element.id+"_diagramLayer"}),o=rd("g",{});this.diagramLayer=r,n.style["pointer-events"]="all",o.appendChild(r),n.appendChild(o),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=Rd.createCanvas(this.element.id+"_diagram",e.width,e.height),dd(this.diagramLayer,"position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},t.prototype.initLayers=function(){var e="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",t=document.getElementById(this.element.id).getBoundingClientRect(),i=function(){var e=nd("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var i=nd("div",{style:"width:100%"});e.appendChild(i);var n=i.getBoundingClientRect().width;return e.parentNode.removeChild(e),t-n}();this.scroller.scrollerWidth=i,this.scroller.setViewPortSize(t.width,t.height),this.renderRulers();window.measureElement&&(window.measureElement=null,document.getElementById("measureElement").remove());ud(),this.renderBackgroundLayer(t,e),this.renderGridLayer(t,e),this.renderDiagramLayer(t,e),this.renderHTMLLayer(t,e),this.renderPortsExpandLayer(t,e),this.renderNativeLayer(t,e),this.renderAdornerLayer(t,e),this.renderHiddenUserHandleTemplateLayer(t)},t.prototype.renderAdornerLayer=function(e,t){var i=nd("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t}),n=nd("div",{id:this.element.id+"_diagramUserHandleLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t});n.setAttribute("class","e-userHandle-layer"),i.appendChild(n);var r=this.createSvg(this.element.id+"_diagramAdorner_svg",e.width,e.height);r.setAttribute("class","e-adorner-layer"),r.style["pointer-events"]="none",this.adornerLayer=rd("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.style[" pointer-events"]="all",r.appendChild(this.adornerLayer),i.appendChild(r),this.diagramCanvas.appendChild(i);var o=rd("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(o),hd(r,{style:"pointer-events:none;"})},t.prototype.renderPortsExpandLayer=function(e,t){var i=this.createSvg(this.element.id+"_diagramPorts_svg",e.width,e.height);i.setAttribute("class","e-ports-expand-layer");var n=rd("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});i.appendChild(n);var r=rd("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});i.appendChild(r),this.diagramCanvas.appendChild(i),hd(i,{style:t})},t.prototype.renderHTMLLayer=function(e,t){this.htmlLayer=nd("div",{id:this.element.id+"_htmlLayer",style:"width:"+e.width+"px; height:"+e.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var i=nd("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(i),this.diagramCanvas.appendChild(this.htmlLayer)},t.prototype.renderNativeLayer=function(e,t){var i=this.createSvg(this.element.id+"_nativeLayer_svg",e.width,e.height),n=rd("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});i.appendChild(n),this.diagramLayerDiv.appendChild(i),hd(i,{class:"e-native-layer",style:t})},t.prototype.createSvg=function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return hd(n,{id:e,width:t,height:i}),n},t.prototype.updateBazorShape=function(){for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];switch(t.shape.type){case"Bpmn":t.shape.bpmnShape=t.shape.shape?t.shape.shape:t.shape.bpmnShape;break;case"UmlActivity":t.shape.umlActivityShape=t.shape.shape?t.shape.shape:t.shape.umlActivityShape;break;case"Flow":t.shape.flowShape=t.shape.shape?t.shape.shape:t.shape.flowShape;break;case"Basic":t.shape.basicShape=t.shape.shape?t.shape.shape:t.shape.basicShape;break;case"Text":t.shape.textContent=t.shape.content?t.shape.content:t.shape.textContent}}},t.prototype.initObjects=function(e){this.updateBazorShape(),this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(e)},t.prototype.initLayerObjects=function(){var e=this.layers.length>1,t=[],i=window&&window.Blazor&&!this.dataSourceSettings.dataSource,n={},r={},o=[],a=[],s=[],l=[],c=[],h=[],d=[];w()&&i&&(a=this.previousNodeCollection,s=this.previousConnectorCollection);for(var p=0,u=this.nodes;p<u.length;p++){(O=u[p]).id=O.id||md(),this.addToLayer(O,e),n[O.id]=O}for(var f=0,g=this.connectors;f<g.length;f++){(O=g[f]).id=O.id||md(),this.addToLayer(O,e),n[O.id]=O}for(var m=0,y=this.layers;m<y.length;m++){for(var v=0,b=(A=y[m]).objects;v<b.length;v++){if(n[O=b[v]])if(n[O]instanceof $a)if((L=n[O]).sourceID&&L.targetID){var x=n[L.sourceID],S=n[L.targetID];x&&x.wrapper&&S&&S.wrapper?this.initConnectors(n[O],A):t.push(n[O])}else this.initConnectors(n[O],A);else n[O].children?o.push(O):n[O].shape instanceof Sh&&n[O].shape.activity.subProcess.processes&&n[O].shape.activity.subProcess.processes.length>0?r[n[O].id]=O:this.initNodes(n[O],A)}if(this.bpmnModule)for(var C=0,P=this.bpmnModule.textAnnotationConnectors;C<P.length;C++){var O=P[C];this.initConnectors(O,A,!1)}}for(var E=0,T=Object.keys(r);E<T.length;E++){O=T[E];this.initObject(n[O]),this.bpmnModule.updateDocks(n[O],this)}for(var I=0,k=this.alignGroup(o,n);I<k.length;I++){O=k[I];var A=this.commandHandler.getObjectLayer(O);this.initNodes(n[O],A)}for(var M=0,D=t;M<D.length;M++){var L=D[M];A=this.commandHandler.getObjectLayer(L.id);this.initConnectors(L,A)}if(w()&&i){for(var R=0,j=this.nodes;R<j.length;R++){var N=j[R];l.push(xd(N,void 0,void 0,!0))}for(var z=0,B=this.connectors;z<B.length;z++){var H=B[z];c.push(xd(H,void 0,void 0,!0))}this.commandHandler.getObjectChanges(a,l,h),this.commandHandler.getObjectChanges(s,c,d);O={methodName:"UpdateBlazorProperties",diagramobj:{nodes:h,connectors:d}};window.sfBlazor.updateBlazorProperties(O,this)}},t.prototype.alignGroup=function(e,t){var i,n,r,o,a=[],s=[];for(r=0;r<e.length;r++){var l=void 0;if((n=t[i=e[r]])&&n.children.length)for(o=0;o<n.children.length;o++)l=n.children[o],e.indexOf(l)>-1&&-1===a.indexOf(l)&&-1===s.indexOf(l)&&a.splice(0,0,l);-1===a.indexOf(i)&&s.push(i)}return a=a.concat(s)},t.prototype.addToLayer=function(e,t){var i;t&&(i=this.commandHandler.getObjectLayer(e.id)),t&&i||-1===this.activeLayer.objects.indexOf(e.id)&&this.activeLayer.objects.push(e.id),this.setZIndex(i||this.activeLayer,e)},t.prototype.updateLayer=function(e){for(var t=0,i=Object.keys(e.layers);t<i.length;t++){for(var n=i[t],r=0,o=this.layers[n].objects;r<o.length;r++){var a=o[r],s=this.nameTable[a];void 0!==e.layers[n].visible?this.updateElementVisibility(s.wrapper,s,e.layers[n].visible):!0===e.layers[n].lock&&this.unSelect(s)}void 0!==e.layers[n].lock&&(this.layers[n].lock=e.layers[n].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},t.prototype.updateScrollSettings=function(e){var t=-this.scroller.horizontalOffset+e.scrollSettings.horizontalOffset||0,i=this.scroller.verticalOffset-e.scrollSettings.verticalOffset||0,n={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===t&&0===i||this.pan(t,i);var r={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},o="Start";this.realActions&zn.PanInProgress&&(o="Progress");var a={oldValue:n,newValue:r,source:this,panState:o};w()&&this.scrollChange&&(a={oldValue:n,newValue:r,sourceId:this.element.id,panState:o}),this.triggerEvent(Hn.scrollChange,a),this.commandHandler.updatePanState(!0),"Canvas"===this.mode&&this.constraints&kn.Virtualization&&this.refreshDiagramLayer()},t.prototype.initData=function(){var e=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;if(this.dataBindingModule&&!(this.realActions&zn.PreventDataInit))if(e&&this.dataSourceSettings.connectionDataSource.dataManager){var t=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;this.nodes=this.generateData(t,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)}else e&&e.dataSource&&(e.dataSource.url||"BlazorAdaptor"===e.adaptorName&&!e.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this)},t.prototype.generateData=function(e,t){var i,n=[];for(i=0;i<e.length;i++){var r=e[i],o=t?this.makeData(r,!0):this.makeData(r,!1);!o||!o.id||Fl(n,o.id)&&Fl(n,o.id)||n.push(o)}return n},t.prototype.makeData=function(e,t){var i,n=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,r={};if(r.id=e[n.id]?e[n.id]:md(),n.sourceID&&(r.sourceID=e[n.sourceID]),n.targetID&&(r.targetID=e[n.targetID]),e[n.sourcePointX]&&e[n.sourcePointY]&&(r.sourcePoint={x:Number(e[n.sourcePointX]),y:Number(e[n.sourcePointY])}),e[n.targetPointX]&&e[n.targetPointY]&&(r.targetPoint={x:Number(e[n.targetPointX]),y:Number(e[n.targetPointY])}),n.crudAction.customFields&&n.crudAction.customFields.length>0)for(i=0;i<n.crudAction.customFields.length;i++)r[n.crudAction.customFields[i]]=e[n.crudAction.customFields[i]];return r},t.prototype.initNodes=function(e,t){this.preventDiagramUpdate=!0,this.initObject(e,t),this.preventDiagramUpdate=!1},t.prototype.initConnectors=function(e,t,i){this.preventDiagramUpdate=!0,this.initObject(e,t,i),this.updateEdges(e),this.preventDiagramUpdate=!1},t.prototype.setZIndex=function(e,t){var i=e;if(-1===t.zIndex){for(;i.zIndexTable[i.objectZIndex+1];)e.objectZIndex++;t.zIndex=++i.objectZIndex}else{var n=t.zIndex;if(i.zIndexTable[n])for(var r=Object.keys(i.zIndexTable).length,o=0;o<r;o++){if(o===n){for(var a=r;a>n;a--)i.zIndexTable[a]=i.zIndexTable[a-1],this.nameTable[i.zIndexTable[a]]&&(this.nameTable[i.zIndexTable[a]].zIndex=a);i.zIndexTable[o]=t.id}0}}},t.prototype.initializeDiagramLayers=function(){this.layers;for(var e=0;e<this.layers.length;e++)if(-1!==this.layers[e].zIndex){var t=this.layers[e];this.layers[e]=this.layers[this.layers[e].zIndex],this.layers[t.zIndex]=t}for(var i=0,n=this.layers;i<n.length;i++){var r=n[i];r.zIndex=-1!==r.zIndex?r.zIndex:this.layers.indexOf(r),this.layerZIndexTable[r.zIndex]=r.id}for(e=0;e<this.layers.length;e++)for(var o=e+1;o<this.layers.length;o++)if(this.layers[e].zIndex>this.layers[o].zIndex){t=this.layers[e];this.layers[e]=this.layers[o],this.layers[o]=t}if(0===this.layers.length){this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}},null,!0)}this.setActiveLayer(this.layers[this.layers.length-1].id)},t.prototype.resetTool=function(){this.eventHandler.resetTool()},t.prototype.initObjectExtend=function(e,t,i){if(i){var n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds);if(t.zIndexTable[e.zIndex]=e.id,!n){for(var r=e instanceof Lh?this.nodes:this.connectors,o=0;o<=r.length;o++)r[o]&&e.id===r[o].id&&r.splice(o,1);delete t.zIndexTable[e.zIndex]}}},t.prototype.initObject=function(e,t,i,n){if(void 0===i&&(i=!0),void 0!==e){if(i&&(t||(this.addToLayer(e,!1),t=this.activeLayer),(e instanceof Lh||e instanceof $a)&&this.setZIndex(t,e)),e instanceof Lh){if(i){if("helper"!==e.id)if(o=Ld(this.getNodeDefaults)){if((a=o(e,this))&&a.ports)for(var r=0;r<a.ports.length;r++)a.ports[r].inEdges=[],a.ports[r].outEdges=[];a&&a!==e&&Cd(a,e)}this.initNode(e,this.element.id)}}else if(e instanceof $a){var o,a;if(o=Ld(this.getConnectorDefaults))(a=o(e,this))&&a!==e&&Cd(a,e),e.segments.length&&e.type!==e.segments[0].type&&(e.segments=[]);var s=this.nameTable[e.sourceID],l=this.nameTable[e.targetID],c=this.getConnectedPort(s,e,!0),h=this.getConnectedPort(l,e),d=this.findInOutConnectPorts(s,!1),p=this.findInOutConnectPorts(l,!0);if((void 0!==s&&ms(s)||""!==e.sourcePortID&&ys(d))&&(e.sourceWrapper=this.getEndNodeWrapper(s,e,!0),e.sourcePortID&&c&&c.constraints&&!(c.constraints&_n.None)&&c.constraints&_n.OutConnect&&(e.sourcePortWrapper=this.getWrapper(s.wrapper,e.sourcePortID))),(void 0!==l&&fs(l)||""!==e.targetPortID&&gs(p))&&(e.targetWrapper=this.getEndNodeWrapper(l,e,!1),e.targetPortID&&h&&h.constraints&&!(h.constraints&_n.None)&&h.constraints&_n.InConnect&&(e.targetPortWrapper=this.getWrapper(l.wrapper,e.targetPortID))),!i){var u=e.getConnectorPoints(e.type);bc(e,u)}i&&e.init(this);for(var f=0;f<e.wrapper.children.length;f++)this.pathTable[e.wrapper.children[f].data]&&(e.wrapper.children[f].absoluteBounds=this.pathTable[e.wrapper.children[f].data].absoluteBounds);e.wrapper.measure(new Zi(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize),e instanceof $a&&"Bezier"===e.type&&this.updateConnectorAnnotation(e);for(var g=0;g<e.wrapper.children.length;g++)this.pathTable[e.wrapper.children[g].data]={},this.pathTable[e.wrapper.children[g].data].absoluteBounds=e.wrapper.children[g].absoluteBounds}if(e instanceof Lh&&e.children&&e.container)for(r=0;r<e.children.length;r++)this.nameTable[e.children[r]].offsetX=this.nameTable[e.children[r]].wrapper.offsetX,this.nameTable[e.children[r]].offsetY=this.nameTable[e.children[r]].wrapper.offsetY;if(this.bpmnModule&&e instanceof Lh&&"Bpmn"===e.shape.type&&e.shape.annotations.length>0&&this.bpmnModule.updateQuad(e,this),this.initObjectExtend(e,t,i),this.nameTable[e.id]=e,e instanceof Lh&&e.children){this.preventNodesUpdate=!0,this.preventConnectorsUpdate=!0,n||e.container||this.updateGroupOffset(e,!0),this.groupTable[e.id]=e.children;for(r=0;r<e.children.length;r++){var m=this.nameTable[e.children[r]];m&&(m.parentId=e.id)}this.isLoading||!e.rotateAngle||e.container||this.commandHandler.rotateObjects(e,[e],e.rotateAngle,{x:e.offsetX,y:e.offsetY},!1),this.preventNodesUpdate=!1,this.preventConnectorsUpdate=!1}void 0===this.enterObject&&this.updateQuad(e)}!1===e.visible&&this.updateElementVisibility(e.wrapper,e,!1)},t.prototype.getConnectedPort=function(e,t,i){if(e&&e.ports)for(var n=0,r=e.ports;n<r.length;n++){var o=r[n];if(o.id===t.sourcePortID&&i)return o;if(o.id===t.targetPortID&&!i)return o}return null},t.prototype.scaleObject=function(e,t,i){var n=i?e.wrapper.actualSize.width:e.wrapper.actualSize.height,r=i?1+(t-n)/n:1,o=i?1:1+(t-n)/n;e.offsetX,e.offsetY;this.realActions|=zn.PreventDrag,this.scale(e,r,o,{x:.5,y:.5}),this.realActions&=~zn.PreventDrag},t.prototype.updateDefaultLayoutIcons=function(e){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(e,e.expandIcon),this.updateDefaultLayoutIcon(e,e.collapseIcon))},t.prototype.updateDefaultLayoutIcon=function(e,t){if("None"!==t.shape&&"Auto"===t.horizontalAlignment&&"Auto"===t.verticalAlignment&&.5===t.offset.x&&1===t.offset.y){var i=this.getWrapper(e.wrapper,"icon_content"),n=void 0,r=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(n=.5,r="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(n="LeftToRight"===this.layout.orientation?1:0,r=.5),i.setOffsetWithRespectToBounds(n,r,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",e.wrapper.measure(new Zi(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)}},t.prototype.updateGroupOffset=function(e,t){if(e.children&&e.children.length>0&&!e.container||e.processId){var i=this.nameTable[e.id];if(!(this.realActions&zn.PreventScale)&&!(this.realActions&zn.PreventDrag)){if(!i.offsetX||!(this.realActions&zn.EnableGroupAction)&&(this.diagramActions&jn.ToolAction||this.diagramActions&jn.PublicMethod))i.offsetX=e.wrapper.offsetX;else{this.realActions|=zn.PreventScale;var n=i.offsetX-e.wrapper.offsetX;i.offsetX=e.wrapper.offsetX;var r=i.offsetY-e.wrapper.offsetY;i.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(i,n,r),this.realActions&=~zn.PreventScale}if(!i.offsetY||!(this.realActions&zn.EnableGroupAction)&&this.diagramActions&jn.ToolAction)i.offsetY=e.wrapper.offsetY;else{this.realActions|=zn.PreventScale;r=i.offsetY-e.wrapper.offsetY;i.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(i,0,r),this.realActions&=~zn.PreventScale}this.diagramActions&&(i.width=e.wrapper.actualSize.width,i.height=e.wrapper.actualSize.height)}}t&&e.children&&e.children.length>0&&(void 0!==this.nameTable[e.id].width?this.scaleObject(e,this.nameTable[e.id].width,!0):this.nameTable[e.id].width=e.wrapper.actualSize.width,void 0!==this.nameTable[e.id].height?this.scaleObject(e,this.nameTable[e.id].height,!1):this.nameTable[e.id].height=e.wrapper.actualSize.height)},t.prototype.initNode=function(e,t,i){var n,r,o=e.initContainer(),a=new sr;if(this.diagramSettings.inversedAlignment||(o.inversedAlignment=!1),o.children||(o.children=[]),e.children){if(o.measureChildren=!1,e.container&&"Grid"===e.container.type)for(var s=0;s<e.children.length;s++){var l=new sr,c=this.nameTable[e.children[s]];l.children=[],l.children.push(c.wrapper),c&&o.addObject(c.wrapper,c.rowIndex,c.columnIndex,c.rowSpan,c.columnSpan)}else for(s=0;s<e.children.length;s++)if(this.nameTable[e.children[s]]){c=this.nameTable[e.children[s]];this.updateStackProperty(e,c,s),o.children.push(c.wrapper),o.elementActions=o.elementActions|Tn.ElementIsGroup,c.wrapper.flip="None"===c.wrapper.flip?e.wrapper.flip:c.wrapper.flip}a.id=e.id+"group_container",a.style.fill="none",a.style.strokeColor="none",a.horizontalAlignment="Stretch",a.verticalAlignment="Stretch",o.style=e.style,a.children=[],a.preventContainer=!0,e.container&&(a.relativeMode="Object"),e.container&&"Grid"===e.container.type||o.children.push(a)}else{var h=Ld(this.setNodeTemplate);h&&"helper"!==e.id&&(n=h(e,this)),n||(n=e.init(this)),o.children.push(n)}r=Ld(this.getDescription),(e.children?o:n).description=r||(e.annotations.length?e.annotations[0].content:e.id);var d=e.children?a:o;e.initAnnotations(this.getDescription,d,this.element.id,!!ws(this),this.annotationTemplate),e.initPorts(this.getDescription,d),e.initIcons(this.getDescription,this.layout,d,t),"SwimLane"===e.shape.type&&e.wrapper&&e.wrapper.children.length>0&&e.wrapper.children[0]instanceof Xs?(fl(e),ml(this,e),this.updateDiagramElementQuad()):(o.measure(new Zi(e.width,e.height),e.id,this.onLoadImageSize.bind(this)),o instanceof Xs?o.arrange(o.desiredSize,!0):o.arrange(o.desiredSize)),"None"!==e.wrapper.flip&&e.wrapper.elementActions&Tn.ElementIsGroup&&zc(e.wrapper,e.wrapper.offsetX,e.wrapper.offsetY,this,e.wrapper.flip),e instanceof Lh&&e.container&&(e.width<o.outerBounds.width||e.height<o.outerBounds.height)&&o.bounds.x<=o.outerBounds.x&&o.bounds.y<=o.outerBounds.y&&(e.width=o.width=o.outerBounds.width,e.height=o.height=o.outerBounds.height,o.measure(new Zi(e.width,e.height)),o.arrange(o.desiredSize)),e.container&&"Grid"===e.container.type&&e.children&&e.children.length>0&&this.updateChildPosition(e)},t.prototype.updateDiagramElementQuad=function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].wrapper&&this.nodes[e].wrapper instanceof nr&&this.updateQuad(this.nodes[e])},t.prototype.onLoadImageSize=function(e,t){var i=this.getObject(e),n=document.getElementById(e+"sf-imageNode");n&&n.parentNode.removeChild(n),this.nodePropertyChange(i,{},{width:t.width,height:t.height});var r={element:xd(i),size:t};this.triggerEvent(Hn.onImageLoad,r)},t.prototype.updateChildPosition=function(e){for(var t=0;t<e.children.length;t++){var i=this.getObject(e.children[t]);i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,i.children&&i.children.length>0&&this.updateChildPosition(i)}},t.prototype.canExecute=function(){return!0},t.prototype.updateStackProperty=function(e,t,i){e.container&&"Stack"===e.container.type&&(t.width||(t.wrapper.horizontalAlignment="Stretch",t.horizontalAlignment="Stretch"),t.height||(t.verticalAlignment="Stretch",t.wrapper.verticalAlignment="Stretch"),i&&"UmlClassifier"===e.shape.type&&(t.umlIndex=i))},t.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},t.prototype.initCommands=function(){var e=this.commandManager.commands,t={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.C,keyModifiers:Ln.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.V,keyModifiers:Ln.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.X,keyModifiers:Ln.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.A,keyModifiers:Ln.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Z,keyModifiers:Ln.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Y,keyModifiers:Ln.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:Rn.Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:Rn.Tab,keyModifiers:Ln.Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Rn.Enter}}};this.initCommandManager(e,t)},t.prototype.overrideCommands=function(e,t){for(var i,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if(i=t[o],e.gesture.key===i.gesture.key&&e.gesture.keyModifiers===i.gesture.keyModifiers){delete t[o];break}}},t.prototype.initCommandManager=function(e,t){var i=0;if(e)for(i=0;i<e.length;i++)t[e[i].name]&&e[i]?(e[i].canExecute&&(t[e[i].name].canExecute=e[i].canExecute),e[i].execute&&(t[e[i].name].execute=e[i].execute),(e[i].gesture.key||e[i].gesture.keyModifiers)&&(t[e[i].name].gesture=e[i].gesture),""!==e[i].parameter&&(t[e[i].name].parameter=e[i].parameter)):(this.overrideCommands(e[i],t),t[e[i].name]={execute:e[i].execute,canExecute:e[i].canExecute,gesture:e[i].gesture,parameter:e[i].parameter});this.commands=t},t.prototype.updateNodeEdges=function(e){for(var t=0,i=e.inEdges;t<i.length;t++){var n=i[t];this.nameTable[n]&&(this.nameTable[n].targetID="")}for(var r=0,o=e.outEdges;r<o.length;r++){n=o[r];this.nameTable[n]&&(this.nameTable[n].sourceID="")}e.inEdges=[],e.outEdges=[]},t.prototype.updateIconVisibility=function(e,t){for(var i=0;i<e.wrapper.children.length;i++){var n=e.wrapper.children[i];if(n.id){var r=n.id.split(e.id)[1];r&&r.match("^_icon")&&(n.visible=t,this.updateDiagramContainerVisibility(n,t))}}},t.prototype.updateEdges=function(e){var t;void 0!==e.sourceID&&""!==e.sourceID&&((t=this.nameTable[e.sourceID])&&t.outEdges&&0===t.outEdges.length&&(t.outEdges=[]),t&&t.outEdges&&-1===t.outEdges.indexOf(e.id)&&t.outEdges.push(e.id),this.updatePortEdges(t,e,!1));if(void 0!==e.targetID&&""!==e.targetID&&((t=this.nameTable[e.targetID])&&t.inEdges&&0===t.inEdges.length&&(t.inEdges=[]),t&&t.inEdges&&-1===t.inEdges.indexOf(e.id)&&t.inEdges.push(e.id),this.updatePortEdges(t,e,!0),t&&t.visible&&t.outEdges)){var i=0!==t.outEdges.length;this.updateIconVisibility(t,i)}},t.prototype.updatePortEdges=function(e,t,i){if(e)for(var n=0;n<e.ports.length;n++){var r=e.ports[n],o=i?t.targetPortID:t.sourcePortID;if(r.id===o){var a=i?r.inEdges:r.outEdges;-1===a.indexOf(t.id)&&a.push(t.id)}}},t.prototype.refreshDiagram=function(){if(this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize(),this.addBlazorDiagramObjects(),w()&&this.layout&&this.layout.layoutInfo&&this.layout.layoutInfo.isRootInverse&&this.nodes.length>2){var e=this.nodes[0];if(e.outEdges.length>1){var t=this.isProtectedOnChange,i=this.nameTable[e.outEdges[1]];this.protectPropertyChange(!1),this.preventDiagramUpdate=!0,i.sourcePortID=e.ports[1].id,this.preventDiagramUpdate=!1,this.dataBind(),this.protectPropertyChange(t)}}if(w())for(var n=void 0,r=0,o=this.views;r<o.length;r++){var a=o[r];(n=this.views[a]).renderDocument&&(n.renderDocument(n),n.diagramRenderer.setLayers(),n.updateView(n),this.renderNodes(n))}this.updateFitToPage()},t.prototype.updateCanupdateStyle=function(e,t){for(var i=0;i<e.length;i++)e[i].children&&this.updateCanupdateStyle(e[i].children,t),e[i].canApplyStyle=t},t.prototype.getZindexPosition=function(e,t){var i,n=[],r=void 0;if(n=(n=n.concat(this.nodes)).concat(this.connectors),-1!==e.zIndex)for(var o=0;o<n.length;o++)if(n[o].zIndex>e.zIndex){"HTML"!==e.shape.type&&"Native"!==e.shape.type||(i="HTML"===e.shape.type?"html":"native"),r=Xh(t,n[o].id,i);break}return r},t.prototype.updateDiagramObject=function(e,t,i){for(var n,r=0,o=this.views;r<o.length;r++){var a=o[r];if(n=this.views[a],this.diagramActions&&"SVG"===n.mode){var s=void 0;if(this.layers.length>1&&(s=this.commandHandler.getObjectLayer(e.id)),void 0===s||s&&s.visible||i){var l=id(this.element.id);window.domTable[n.element.id+"_diagramLayer"]||(window.domTable[n.element.id+"_diagramLayer"]=document.getElementById(n.element.id+"_diagramLayer"));var c=window.domTable[n.element.id+"_diagramLayer"];this.diagramActions&jn.Interactions&&this.updateCanupdateStyle(e.wrapper.children,!0),this.diagramRenderer.updateNode(e.wrapper,c,l,void 0,t?void 0:this.getZindexPosition(e,n.element.id)),this.updateCanupdateStyle(e.wrapper.children,!0)}}}},t.prototype.updateGridContainer=function(e){for(var t,i=id(this.element.id),n=0,r=this.views;n<r.length;n++){var o=r[n];if("SVG"===(t=this.views[o]).mode&&this.diagramActions){var a=document.getElementById(t.element.id+"_diagramLayer");this.diagramRenderer.updateNode(e,a,i,void 0)}else this.refreshCanvasDiagramLayer(t)}},t.prototype.getObjectsOfLayer=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i];this.nameTable[r]&&t.push(this.nameTable[r])}return t},t.prototype.refreshDiagramLayer=function(){for(var e,t=0,i=this.views;t<i.length;t++){var n=i[t];switch((e=this.views[n]).mode){case"SVG":this.refreshSvgDiagramLayer(e);break;case"Canvas":this.refreshCanvasLayers(e)}}},t.prototype.refreshCanvasLayers=function(e){if(e)this.refreshCanvasDiagramLayer(e);else for(var t=0,i=this.views;t<i.length;t++){var n=i[t],r=this.views[n];this.refreshCanvasDiagramLayer(r)}},t.prototype.renderBasicElement=function(e){for(var t=id(e.element.id),i=0;i<this.basicElements.length;i++){var n=this.basicElements[i];n instanceof nr&&(n.prevRotateAngle=0),n.measure(new Zi(n.width,n.height)),n.arrange(n.desiredSize),e.diagramRenderer.renderElement(n,e.diagramLayer,t)}},t.prototype.refreshElements=function(e){if(!this.isDestroyed){this.clearCanvas(e),e instanceof t&&(e.diagramLayer.getContext("2d").setTransform(e.scroller.currentZoom,0,0,e.scroller.currentZoom,0,0),e.diagramLayer.getContext("2d").scale(1.5,1.5));var i=id(e.element.id);this.spatialSearch.getPageBounds();this.renderDiagramElements(e.diagramLayer,e.diagramRenderer,i);for(var n=0;n<this.basicElements.length;n++){var r=this.basicElements[n];r.measure(new Zi(r.width,r.height)),r.arrange(r.desiredSize),e.diagramRenderer.renderElement(r,e.diagramLayer,i)}e instanceof t&&(e.diagramLayer.style.transform="scale("+2/3+")",e.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},t.prototype.refreshCanvasDiagramLayer=function(e){var t=this;"SVG"===e.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(e),!this.diagramActions||0===(this.diagramActions&jn.Render)||jn.ToolAction&this.diagramActions||ws(this)||1!==this.scroller.currentZoom?this.refreshElements(e):this.renderTimer||(this.renderTimer=setTimeout((function(){t.refreshElements(e)}),40)))},t.prototype.updatePortVisibility=function(e,t,i){var n,r=!this.drawingObject||!this.drawingObject.shape;if(e instanceof Lh&&r&&ls(e)){for(var o=e.ports,a=!1,s=0;s<o.length;s++)n=this.getWrapper(e.wrapper,o[s].id),(t&xn.Hover||t&xn.Connect)&&Cc(o[s],t)&&(n.visible=!i,a=!0);a&&this.updateDiagramObject(e)}},t.prototype.refreshSvgDiagramLayer=function(e){var t,i=document.getElementById(e.element.id+"_diagramLayer"),n=id(e.element.id);if(ws(this))this.scroller.virtualizeElements();else{for(var r=0;r<this.basicElements.length;r++)(t=this.basicElements[r]).measure(new Zi(t.width,t.height)),t.arrange(t.desiredSize,!(this.diagramActions&jn.Render)),this.diagramRenderer.renderElement(t,i,n);this.renderDiagramElements(i,this.diagramRenderer,n)}},t.prototype.removeVirtualObjects=function(e){if(this.deleteVirtualObject){for(var t=0;t<this.scroller.removeCollection.length;t++){var i=this.nameTable[this.scroller.removeCollection[t]];this.removeElements(i)}this.deleteVirtualObject=!1}clearInterval(e)},t.prototype.updateTextElementValue=function(e){for(var t=0;t<e.wrapper.children.length;t++){var i=e.wrapper.children[t];i instanceof or&&(i.canMeasure=!0,i.measure(new Zi(e.width,e.height)),i.arrange(i.desiredSize))}},t.prototype.updateVirtualObjects=function(e,t,i){var n=document.getElementById(this.element.id+"_diagramLayer"),r=id(this.element.id);if("SVG"===this.mode){for(var o=0;o<e.length;o++){var a=this.scroller.removeCollection.indexOf(e[o]);a>=0&&this.scroller.removeCollection.splice(a,1);var s=this.nameTable[e[o]];this.updateTextElementValue(s),this.diagramRenderer.renderElement(s.wrapper,n,r,void 0,void 0,void 0,void 0,s.zIndex)}for(var l=0;l<i.length;l++)this.scroller.removeCollection.push(i[l]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},t.prototype.renderDiagramElements=function(e,t,i,n,r,o){void 0===n&&(n=!0);var a=this.scroller.getPageBounds();a.x*=this.scroller.currentZoom,a.y*=this.scroller.currentZoom,a.width*=this.scroller.currentZoom,a.height*=this.scroller.currentZoom;for(var s=-this.scroller.horizontalOffset-a.x,l=-this.scroller.verticalOffset-a.y,c=0,h=Object.keys(this.layerZIndexTable);c<h.length;c++){var d=h[c],p=this.commandHandler.getLayer(this.layerZIndexTable[d]),u=void 0,f=void 0;"Canvas"===this.mode&&ws(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var g="Canvas"===this.mode&&ws(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,m=0,y=Object.keys(g||p.zIndexTable);m<y.length;m++){var v=y[m],b=g?this.nameTable[g[v]]:this.nameTable[p.zIndexTable[v]];if(b&&!b.parentId&&p.visible&&!b.processId){var w={tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale};if(ws(this)){if(this.scroller.currentZoom<1){if(a.x<0||this.scroller.horizontalOffset<0){var x=this.scroller.verticalOffset<0?this.scroller.verticalOffset:0;u=(s>0?s:0)+"px",f=(this.realActions&zn.vScrollbarMoved?0:-x)+"px"}else u="0px",f="0px";this.realActions&zn.hScrollbarMoved&&(this.realActions=this.realActions&~zn.hScrollbarMoved),this.realActions&zn.vScrollbarMoved&&(this.realActions=this.realActions&~zn.vScrollbarMoved)}else u=(a.x<0?s:-this.scroller.horizontalOffset)+"px",f=(a.y<0?l:-this.scroller.verticalOffset)+"px";this.diagramLayer.style.left=u,this.diagramLayer.style.top=f,w.tx=this.scroller.horizontalOffset/w.scale,w.ty=this.scroller.verticalOffset/w.scale}var S=!0;r&&(S=!1),this.updateTextElementValue(b),t.renderElement(b.wrapper,e,i,!t.isSvgMode&&n?w:void 0,void 0,void 0,S&&(!this.diagramActions||o))}}}},t.prototype.updateBridging=function(e){if(this.bridgingModule)for(var t=0;t<this.connectors.length;t++){var i=this.connectors[t];this.bridgingModule.updateBridging(i,this);var n=this.connectors[t].wrapper;if(n){var r=n.children[0],o=r.data;i.getSegmentElement(i,r,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0),r.data!==o&&(n.measure(new Zi),n.arrange(n.desiredSize),"SVG"!==this.mode||e||this.updateDiagramObject(i))}}},t.prototype.setCursor=function(e){this.diagramRenderer.setCursor(this.diagramCanvas,e)},t.prototype.clearCanvas=function(e){var t,i;(t=e.contentWidth||e.diagramLayer.width/this.scroller.currentZoom,i=e.contentHeight||e.diagramLayer.height/this.scroller.currentZoom,"SVG"!==e.mode)&&Rd.getContext(e.diagramLayer).clearRect(0,0,t,i)},t.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),is(this),ws(this)&&this.scroller.virtualizeElements()},t.prototype.setOffset=function(e,t){window.domTable[this.element.id+"content"]||(window.domTable[this.element.id+"content"]=document.getElementById(this.element.id+"content"));var i=window.domTable[this.element.id+"content"];i&&(i.scrollLeft=e,i.scrollTop=t)},t.prototype.setSize=function(e,t){if(this.diagramLayer&&!this.preventDiagramUpdate){var i=rs(this);e-=i.width,t-=i.height;var n=this.spatialSearch.getPageBounds();n.x*=this.scroller.currentZoom,n.y*=this.scroller.currentZoom,n.width*=this.scroller.currentZoom,n.height*=this.scroller.currentZoom;var r="SVG"===this.mode?1:1.5,o="SVG"===this.mode?Uh(this.element.id):this.diagramLayer,a="Canvas"===this.mode&&this.constraints&kn.Virtualization?this.scroller.viewPortWidth:e,s="Canvas"===this.mode&&this.constraints&kn.Virtualization?this.scroller.viewPortHeight:t;o.setAttribute("width",(r*a).toString()),o.setAttribute("height",(r*s).toString());var l=document.getElementById(this.element.id+"_diagramUserHandleLayer");l&&(l.style.width=e+"px",l.style.height=t+"px");var c={width:e.toString(),height:t.toString()};this.diagramLayerDiv.style.width=e+"px",this.diagramLayerDiv.style.height=t+"px",hd($h(this.element.id),c),hd(Yh(this.element.id).getElementsByClassName("e-ports-expand-layer")[0],c);var h=Gh(this.element.id);hd(h,c),h.parentNode.style.width=e+"px",h.parentNode.style.height=t+"px";var d=Qh(this.element.id);hd(d,c),this.diagramRenderer.updateGrid(this.snapSettings,d,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),hd(Jh(this.element.id),c),this.htmlLayer.style.width=e+"px",this.htmlLayer.style.height=t+"px","SVG"===this.mode||ws(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&ws(this)&&this.scroller.virtualizeElements()}},t.prototype.transformLayers=function(){var e=this.spatialSearch.getPageBounds();e.x*=this.scroller.currentZoom,e.y*=this.scroller.currentZoom,e.width*=this.scroller.currentZoom,e.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,Qh(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.diagramActions&jn.DragUsingMouse||this.updateSelector(),this.renderPageBreaks(e)},t.prototype.removePageBreaks=function(){if(this.diagramLayer){var e=ed(this.element.id);if(e&&e.childNodes)for(var t=e.childNodes.length,i=0;i<t;i++)e.removeChild(e.childNodes[0])}},t.prototype.renderPageBreaks=function(e){this.removePageBreaks();var t=ed(this.element.id);if(t){var i=0;e=this.scroller.getPageBounds(!0);var n=(this.scroller.transform.tx+e.x)*this.scroller.currentZoom,r=(this.scroller.transform.ty+e.y)*this.scroller.currentZoom,o=e.height*this.scroller.currentZoom,a=e.width*this.scroller.currentZoom;Nd.renderSvgBackGroundImage(this.pageSettings.background,this.element,n,r,a,o);var s={id:t.id+"rect",x:n,y:r,height:o,width:a,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"};if(this.diagramRenderer.drawRect(t,s),this.pageSettings.showPageBreaks){var l=this.scroller.getPageBreak(e);for(i=0;i<l.length;i++)this.diagramRenderer.drawLine(t,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(l[i].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[i].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(l[i].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[i].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:l[i].y1===l[i].y2?"HorizontalLines":"VerticalLines"})}}},t.prototype.validatePageSize=function(){var e=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(e=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=e):this.pageSettings.height>this.pageSettings.width&&(e=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=e)},t.prototype.setOverview=function(e,t){if(e)e&&(this.views.push(e.id),this.views[e.id]=e,e.renderDocument(e),e.diagramRenderer.setLayers(),e.updateView(e),this.renderNodes(e));else{for(var i=0;i<this.views.length;i++)this.views[i]===t&&(e=this.views[t]);this.views[t]=void 0;var n=this.views.indexOf(t);this.views.splice(n,1)}},t.prototype.renderNodes=function(e){if(e){var t=new Nd(e.id,new jd,!1),i=document.getElementById(e.element.id+"_diagramLayer"),n=id(e.element.id);this.renderDiagramElements(i,e.diagramRenderer||t,n,void 0,void 0,!0)}},t.prototype.updateThumbConstraints=function(e,t,i){for(var n=e.length,r=0;r<n;r++){var o=e[r],a=!1,s=!1,l=t.thumbsConstraints;o instanceof Lh?(a="Bpmn"===o.shape.type&&"Activity"===o.shape.shape&&!1===o.shape.activity.subProcess.collapsed||"TextAnnotation"===o.shape.shape,s="Bpmn"===o.shape.type&&"TextAnnotation"===o.shape.shape,ps(o)&&l&In.Rotate&&!a||(l&=~In.Rotate),vs(o,"SouthEast")&&l&In.ResizeSouthEast&&!s||(l&=~In.ResizeSouthEast),vs(o,"NorthWest")&&l&In.ResizeNorthWest&&!s||(l&=~In.ResizeNorthWest),vs(o,"East")&&l&In.ResizeEast&&!s||(l&=~In.ResizeEast),vs(o,"West")&&l&In.ResizeWest&&!s||(l&=~In.ResizeWest),vs(o,"North")&&l&In.ResizeNorth&&!s||(l&=~In.ResizeNorth),vs(o,"South")&&l&In.ResizeSouth&&!s||(l&=~In.ResizeSouth),vs(o,"NorthEast")&&l&In.ResizeNorthEast&&!s||(l&=~In.ResizeNorthEast),vs(o,"SouthWest")&&l&In.ResizeSouthWest&&!s||(l&=~In.ResizeSouthWest)):o instanceof $a?(i||(l|=In.Default),cs(o)?l|=In.ConnectorSource:l&=~In.ConnectorSource,hs(o)?l|=In.ConnectorTarget:l&=~In.ConnectorTarget):(i||(l|=In.Default),vs(o)||(l&=~(In.ResizeSouthEast|In.ResizeSouthWest|In.ResizeSouth|In.ResizeEast|In.ResizeWest|In.ResizeNorth|In.ResizeNorthEast|In.ResizeNorthWest)),ps(o)||(l&=~In.Rotate)),t.thumbsConstraints=l}},t.prototype.renderSelector=function(e,t){var i=this.isProtectedOnChange;w()&&(this.isProtectedOnChange=!0);var n=new Zi,r=this.selectedItems,o=(r.constraints,this.diagramRenderer.rendererActions);if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(o,Nn.DrawSelectorBorder):this.removeConstraints(o,Nn.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===r.nodes.length&&0===r.connectors.length&&(r.rotateAngle=r.nodes[0].rotateAngle,r.pivot=r.nodes[0].pivot),r.wrapper.measure(n),r.wrapper.arrange(r.wrapper.desiredSize),r.width=r.wrapper.actualSize.width,r.height=r.wrapper.actualSize.height,r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,0!==r.rotateAngle){for(var a=0,s=r.nodes;a<s.length;a++){var l=s[a];l.offsetX=l.wrapper.offsetX,l.offsetY=l.wrapper.offsetY}for(var c=0,h=r.connectors;c<h.length;c++)h[c]}var d;this.spatialSearch.getPageBounds();d=qh(this.element.id);var p;if(p=Kh(this.element.id),r.thumbsConstraints=In.Default,r.annotation?this.updateThumbConstraints([r.annotation],r):(this.updateThumbConstraints(r.nodes,r),this.updateThumbConstraints(r.connectors,r,!0)),r.annotation)this.renderSelectorForAnnotation(r,d);else if(r.nodes.length+r.connectors.length===1){if(r.nodes[0]instanceof Lh){var u=r.nodes[0];el(this,u)&&(t||"UmlClassifier"===u.shape.type||u.parentId&&this.nameTable[u.parentId]&&"UmlClassifier"===this.nameTable[u.parentId].shape.type||((!u.container||"Canvas"!==u.container.type&&"Grid"!==u.container.type)&&(r.nodes[0].constraints&=~(En.Rotate|En.HideThumbs)),r.thumbsConstraints&=~In.Rotate));var f=!!t||!!(u.constraints&En.HideThumbs),g=!!("SwimLane"===u.shape.type||u.isLane||u.isPhase||t);this.diagramRenderer.renderResizeHandle(r.wrapper.children[0],d,r.thumbsConstraints,this.scroller.currentZoom,r.constraints,this.scroller.transform,void 0,ls(u),f,g)}else if(r.connectors[0]instanceof $a&&Ds(this.diagramRenderer.rendererActions)){var m=r.connectors[0];this.diagramRenderer.renderEndPointHandle(m,d,r.thumbsConstraints,r.constraints,this.scroller.transform,void 0!==m.sourceWrapper,void 0!==m.targetWrapper,!(!this.connectorEditingToolModule||!ds(m)))}}else this.diagramRenderer.renderResizeHandle(r.wrapper,d,r.thumbsConstraints,this.scroller.currentZoom,r.constraints,this.scroller.transform,void 0,ls(r));r.annotation||this.currentSymbol||this.diagramRenderer.renderUserHandler(r,d,this.scroller.transform,p)}this.isProtectedOnChange=i},t.prototype.updateSelector=function(){var e=new Zi,t=this.selectedItems,i=t.constraints;if(this.diagramActions&jn.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==t.wrapper&&t.wrapper.children&&t.wrapper.children.length)){if(t.wrapper.measure(e),t.wrapper.arrange(t.wrapper.desiredSize),0!==t.rotateAngle||t.rotateAngle!==t.wrapper.prevRotateAngle)for(var n=0,r=t.nodes;n<r.length;n++){var o=r[n];o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY}t.width=t.wrapper.actualSize.width,t.height=t.wrapper.actualSize.height,t.offsetX=t.wrapper.offsetX,t.offsetY=t.wrapper.offsetY;var a;a=qh(this.element.id);var s;s=Kh(this.element.id);var l=this.eventHandler.canHideResizers();if(t.thumbsConstraints=In.Default,t.annotation?this.updateThumbConstraints([t.annotation],t):(this.updateThumbConstraints(t.nodes,t),this.updateThumbConstraints(t.connectors,t,!0)),this.selectedItems.constraints&Cn.UserHandle&&!t.annotation&&!this.currentSymbol&&this.diagramRenderer.renderUserHandler(t,a,this.scroller.transform,s),t.annotation)this.renderSelectorForAnnotation(t,a);else if(t.nodes.length+t.connectors.length===1){if(t.connectors[0]instanceof $a&&Ds(this.diagramRenderer.rendererActions)){var c=t.connectors[0];this.diagramRenderer.renderEndPointHandle(c,a,t.thumbsConstraints,i,this.scroller.transform,void 0!==c.sourceWrapper,void 0!==c.targetWrapper,!(!this.connectorEditingToolModule||!ds(c)))}else if(t.nodes[0]instanceof Lh){var h=t.nodes[0];el(this,t.nodes[0])&&("UmlClassifier"===h.shape.type||h.parentId&&this.nameTable[h.parentId]&&"UmlClassifier"===this.nameTable[h.parentId].shape.type||((!h.container||"Canvas"!==h.container.type&&"Grid"!==h.container.type)&&(t.nodes[0].constraints&=~(En.HideThumbs|En.Rotate)),t.thumbsConstraints&=~In.Rotate));var d=!("SwimLane"!==h.shape.type&&!h.isLane&&!h.isPhase);this.diagramRenderer.renderResizeHandle(t.wrapper.children[0],a,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,l,ls(t.nodes[0]),!!(t.nodes[0].constraints&En.HideThumbs),d)}}else this.diagramActions&jn.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|Nn.PreventRenderSelector),this.diagramRenderer.renderResizeHandle(t.wrapper,a,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,l,ls(t)),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~Nn.PreventRenderSelector}},t.prototype.renderSelectorForAnnotation=function(e,t){this.diagramRenderer.renderResizeHandle(e.wrapper.children[0],t,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,void 0,ls(e.annotation))},t.prototype.drawSelectionRectangle=function(e,t,i,n){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(e,t,i,n,this.adornerLayer,this.scroller.transform)},t.prototype.renderHighlighter=function(e){var t=Gh(this.element.id);this.diagramRenderer.renderHighlighter(e,t,this.scroller.transform)},t.prototype.clearHighlighter=function(){var e=Gh(this.element.id),t=e.getElementById(e.id+"_highlighter");t&&t.parentNode.removeChild(t)},t.prototype.getNodesConnectors=function(e){for(var t=0;t<this.nodes.length;t++){var i=this.nodes[t];e.push(i)}for(t=0;t<this.connectors.length;t++){var n=this.connectors[t];e.push(n)}return e},t.prototype.clearSelectorLayer=function(){var e=Gh(this.element.id);if(this.currentSymbol){var t=e.getElementById("borderRect_symbol");t&&t.parentNode.removeChild(t)}else{var i=e.getElementById(this.adornerLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter();for(var n=qh(this.element.id).childNodes,r=void 0,o=n.length;o>0;o--)(r=n[o-1]).parentNode.removeChild(r);var a=Kh(this.element.id).childNodes,s=void 0;for(s=a.length;s>0;s--)a[s-1].parentNode.removeChild(a[s-1])}},t.prototype.getWrapper=function(e,t){var i;t=e.id+"_"+t;for(var n=e instanceof sr?e:this.getPortContainer(this.nameTable[e.id]),r=0;r<n.children.length;r++)t===n.children[r].id&&(i=n.children[r]);return i},t.prototype.getEndNodeWrapper=function(e,t,i){if("Bpmn"===e.shape.type&&e.wrapper.children[0]instanceof sr){if(!w()&&"Activity"===e.shape.shape||w()&&"Activity"===e.shadow.bpmnShape){if(i&&"Transaction"===e.shape.activity.subProcess.type&&t.sourcePortID){var n=t.sourcePortID,r=e.wrapper.children[0].children[0].children[2];if(r.children)for(var o=0,a=r.children;o<a.length;o++){var s=a[o];if(s.visible&&s.id===e.id+"_"+n)return s.children[0]}}return e.wrapper.children[0].children[0].children[0]}return e.wrapper.children[0].children[0]}return this.containsMargin(e.wrapper.children[0])||e.children?e.wrapper:e.wrapper.children[0]},t.prototype.containsMargin=function(e){return e.margin&&(0!==e.margin.left||0!==e.margin.top||0!==e.margin.right||0!==e.margin.bottom)},t.prototype.focusOutEdit=function(){this.endEdit()},t.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1},t.prototype.endEdit=function(){return su(this,void 0,void 0,(function(){var e,t,i,n,r,o,a,s,l,c,h,d,p,u,f,g,m,y,v,b,x,S,C;return lu(this,(function(P){switch(P.label){case 0:return this.diagramActions&jn.TextEdit?(e=void 0,t=void 0,i={},this.enableServerDataBinding(!1),w()&&(this.canEnableBlazorObject=!0),n=document.getElementById(this.element.id+"_editBox"),w()&&n||!w()?(r=n.value,ce.remove(n,"input",this.eventHandler.inputChange),ce.remove(n,"focusout",this.focusOutEdit),o=document.getElementById(this.element.id+"_editTextBoxDiv"),a=void 0,a=this.nameTable[this.activeLabel.parentId],s=Pc(a,this.activeLabel.id),l={oldValue:this.activeLabel.text,newValue:r,cancel:!1,element:a,annotation:s},w()&&this.textEdit&&(l=this.getBlazorTextEditArgs(l)),c=!1,o.parentNode.removeChild(o),h=void 0,this.bpmnModule?(a=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),h=this.bpmnModule.getTextAnnotationWrapper(a,this.activeLabel.id),(c=!!a)?o.textContent===r&&r===this.activeLabel.text?[3,4]:w()?[4,this.triggerEvent(Hn.textEdit,l)]:[3,2]:[3,4]):[3,4]):[3,9]):[3,9];case 1:return l=P.sent()||l,[3,3];case 2:this.triggerEvent(Hn.textEdit,l),P.label=3;case 3:l.cancel||this.bpmnModule.updateTextAnnotationContent(a,this.activeLabel,r,this),P.label=4;case 4:return c?[3,8]:(a=this.nameTable[this.activeLabel.parentId],!(d=Pc(a,this.activeLabel.id))||d instanceof hh?e=w()&&"Text"===a.shape.type?{shape:{textContent:a.shape.content}}:{shape:{content:a.shape.content}}:(u=Tc(a,d.id,!0),i[u]={content:d.content},e={annotations:i}),(p=this.eventHandler.isAddTextNode(a,!0))||o.textContent===r&&r===this.activeLabel.text?[3,7]:w()?[4,this.triggerEvent(Hn.textEdit,l)]:[3,6]);case 5:return l=P.sent()||l,[3,7];case 6:this.triggerEvent(Hn.textEdit,l),P.label=7;case 7:h||(h=this.getWrapper(a.wrapper,this.activeLabel.id)),d.content===r||l.cancel||(a.parentId&&"UmlClassifier"===this.nameTable[a.parentId].shape.type&&-1===r.indexOf("+")&&-1===r.indexOf("-")&&-1===r.indexOf("#")&&-1===r.indexOf("~")&&-1===a.id.indexOf("_umlClass_header")&&(r=" + "+r),(a.isLane||a.isPhase)&&this.protectPropertyChange(!0),d instanceof hh?t=w()&&"Text"===a.shape.type?{shape:{textContent:r}}:{shape:{content:r}}:(u=Tc(a,d.id,!0),(f={})[u]={content:r},t={annotations:f}),(g=this.getIndex(a,a.id))&&((m={})[g]=e,(y={})[g]=t,Rc(a)===Lh?this.onPropertyChanged({nodes:y},{nodes:m}):this.onPropertyChanged({connectors:y},{connectors:m})),this.protectPropertyChange(!0),w()&&"Text"===a.shape.type?a.shape.textContent=r:d.content=r,this.protectPropertyChange(!1),this.updateSelector(),(a.isLane||a.isPhase)&&this.protectPropertyChange(!1)),p&&(this.removeObjectsFromLayer(a),this.removeFromAQuad(a),delete this.nameTable[this.activeLabel.parentId],""!==r&&(this.clearSelection(),v=xd(a),a=this.add(v),this.updateDiagramObject(a),this.commandHandler.oldSelectedObjects=Bc(this),this.commandHandler.select(this.nameTable[a.id]),this.commandHandler.updateBlazorSelector())),P.label=8;case 8:if(this.selectedItems.nodes.length){if(b=this.nameTable[this.activeLabel.parentId],(x=this.nameTable[b.parentId])&&"SwimLane"===x.shape.type||"SwimLane"===b.shape.type)if("LaneHeaderParent","PhaseHeaderParent","SwimLane"===b.shape.type&&(x=this.nameTable[this.activeLabel.parentId],b=a),b.isLane||b.isPhase)for(S=b.isLane?x.shape.lanes:x.shape.phases,C=0;C<S.length;C++)S[C].id===(b.LaneHeaderParent||b.PhaseHeaderParent)&&(S[C].header.annotation.content=b.annotations[0].content);else b.isHeader&&x.shape.hasHeader&&(x.shape.header.annotation.content=b.annotations[0].content);this.dataBind()}h.visible=!0,this.updateDiagramObject(a),this.diagramActions=this.diagramActions&~jn.TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},this.commandHandler.getBlazorOldValues(),w()&&(this.canEnableBlazorObject=!1),this.enableServerDataBinding(!0),P.label=9;case 9:return[2]}}))}))},t.prototype.getIndex=function(e,t){for(var i=Rc(e)===Lh?this.nodes:this.connectors,n=0;n<i.length;n++)if(i[n].id.toString()===t.toString())return n.toString();return null},t.prototype.getBlazorTextEditArgs=function(e){var t=Rc(e.element)===$a?{connector:Vc(e.element)}:{node:Vc(e.element)},i={};return t.node?"Text"===t.node.shape.type?i.textNode=e.element.shape:i.nodeAnnotation=e.element.annotations[0]:i.connectorAnnotation=e.element.annotations[0],e={oldValue:e.oldValue,newValue:e.newValue,cancel:e.cancel,element:t,annotation:i}},t.prototype.canLogChange=function(){return!(!(this.diagramActions&jn.Render)||this.diagramActions&jn.ToolAction||this.diagramActions&jn.UndoRedo||this.diagramActions&jn.PublicMethod)},t.prototype.modelChanged=function(e,t){return!!(e.connectors||t.connectors||e.nodes||t.connectors||e.pageSettings||t.pageSettings||e.bridgeDirection||t.bridgeDirection)},t.prototype.resetDiagramActions=function(e){var t=!!e;this.diagramActions&jn.UndoRedo&&(!t||e===jn.UndoRedo)&&(this.diagramActions=this.diagramActions&~jn.UndoRedo),this.diagramActions&jn.PublicMethod&&(!t||e===jn.PublicMethod)&&(this.diagramActions=this.diagramActions&~jn.PublicMethod)},t.prototype.removeNode=function(e){if(this.removeObjectsFromLayer(e),this.removeFromAQuad(this.nameTable[e.id]),delete this.nameTable[e.id],e.children&&delete this.groupTable[e.id],w())for(var t=0;t<this.nodes.length;t++)e.id===this.nodes[t].id&&this.UpdateBlazorDiagramModel(e,"Node",t);this.UpdateBlazorDiagramModel(e,"Node",this.nodes.indexOf(e)),this.nodes.splice(this.nodes.indexOf(e),1)},t.prototype.deleteGroup=function(e){var t=[];e.children&&(t=this.commandHandler.getChildren(e,[])),this.UpdateBlazorDiagramModelCollection(e);for(var i=0,n=t;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}},t.prototype.updateObject=function(e,t,i){if(!(this.diagramActions&jn.ToolAction)){var n=e.wrapper.children[0].bounds;if(!this.commandHandler.checkBoundaryConstraints(void 0,void 0,n))if(e instanceof Lh){for(var r=t,o=0,a=Object.keys(i);o<a.length;o++){switch(c=a[o]){case"width":e.width=r.width;break;case"height":e.height=r.height;break;case"offsetX":e.offsetX=r.offsetX;break;case"offsetY":e.offsetY=r.offsetY;break;case"rotateAngle":e.rotateAngle=r.rotateAngle}}this.nodePropertyChange(e,i,t)}else{for(var s=0,l=Object.keys(i);s<l.length;s++){var c=l[s],h=t,d=e.sourcePoint,p=e.targetPoint;switch(c){case"sourcePoint":d.x=h.sourcePoint.x||d.x,d.y=h.sourcePoint.y||d.y;break;case"targetPoint":p.x=h.targetPoint.x||p.x,p.y=h.targetPoint.y||p.y}}this.connectorPropertyChange(e,i,t)}}},t.prototype.nodePropertyChangeExtend=function(e,t,i,n){return void 0!==i.style&&"Bpmn"!==e.shape.type&&(pc(i.style,e.wrapper.children[0]),n=!0),void 0!==i.shadow&&(this.updateShadow(e.shadow,i.shadow),n=!0),void 0!==i.constraints&&(t.constraints&En.Select&&!(i.constraints&En.Select)&&up(this,e)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),n=!0)),this.swimLaneNodePropertyChange(e,t,i,n),n},t.prototype.swimLaneNodePropertyChange=function(e,t,i,n){if("SwimLane"===e.shape.type&&!this.currentSymbol){if(t.shape){var r=i.shape,o=e.shape,a="Horizontal"===o.orientation,s=o.padding,l=t.shape,c=e.wrapper.children[0],h=void 0,d=void 0,p=void 0;if(l.lanes||l.phases){if(l.lanes)for(var u=0,f=Object.keys(r.lanes);u<f.length;u++){var g=f[u],m=Number(g),y=l.lanes[m],v=void 0,b=r.lanes[m];if(b&&b.header&&(p=o.lanes[m].header.id,h=y.header,d=b.header,this.nodePropertyChange(this.nameTable[p],h,d)),y.children)for(var w=0,x=Object.keys(y.children);w<x.length;w++){var S=x[w];p=o.lanes[m].children[Number(S)].id;var C=this.nameTable[p];h=y.children[Number(S)],d=b.children[Number(S)],this.nodePropertyChange(C,h,d)}y.width&&!a&&(v=o.phases&&o.phaseSize?m+1:m,c.updateColumnWidth(v,b.width,!0,s),this.updateDiagramElementQuad()),y.height&&a&&(v=o.header&&o.hasHeader?m+1:m,v+=o.phases&&o.phaseSize?1:0,c.updateRowHeight(v,b.height,!0,s),this.updateDiagramElementQuad())}if(r.phases)for(var P=0,O=Object.keys(r.phases);P<O.length;P++){var E=O[P],T=(m=Number(E),r.phases[m]),I=void 0,k=o.header&&o.hasHeader?1:0;if(T&&T.header&&(p=o.phases[m].header.id,h=l.phases[m].header,d=T.header,this.nodePropertyChange(this.nameTable[p],h,d)),T.offset){if(0===m)I=T.offset;else{var A=o.phases[m-1];(I=T.offset-A.offset)<=0&&(I=T.offset)}a?(c.updateColumnWidth(m,I,!0,s),Ol(e,this,c.rows[k].cells[m],m)):c.updateRowHeight(k+m,I,!0,s)}}}if(void 0!==r.phaseSize&&o.phases.length)if(0===r.phaseSize||0===l.phaseSize)if(l.phaseSize)a?(c.removeRow(o.header&&o.hasHeader?1:0),e.height=e.wrapper.height=c.height):(o.header&&o.hasHeader&&(c.rows[0].cells[1].children=c.rows[0].cells[0].children,c.rows[0].cells[1].columnSpan=c.rows[0].cells[0].columnSpan-1,c.rows[0].cells[0].children=[]),c.removeColumn(0));else{if(a){var M=new Gs;M.height=r.phaseSize,c.addRow(o.header&&o.hasHeader?1:0,M,!0),e.height=e.wrapper.height+=r.phaseSize}else{var D=new qs;D.width=r.phaseSize,c.addColumn(0,D,!0),o.header&&o.hasHeader&&(c.rows[0].cells[0].children=c.rows[0].cells[1].children,c.rows[0].cells[1].children=[],c.rows[0].cells[1].columnSpan=1,c.rows[0].cells[1].minWidth=void 0,c.rows[0].cells[0].columnSpan=o.lanes.length+1)}for(var L=0;L<o.phases.length;L++)""===o.phases[L].id&&(o.phases[L].id=md()),cl(c,this,e,o.header&&o.hasHeader?1:0,a,L)}else a?c.updateRowHeight(o.header&&o.hasHeader?1:0,r.phaseSize,!1):c.updateColumnWidth(0,r.phaseSize,!1);if(o.header&&o.hasHeader&&l.header){var R=c.rows[0].cells[0].children[0].id,j=this.nameTable[R];this.nodePropertyChange(j,l.header,r.header)}e.height=e.wrapper.height=c.height,e.width=e.wrapper.width=c.width}else if(t.constraints){var N=t.constraints&En.Select,z=i.constraints&En.Select;if(N!==z){r=e.shape;(j=this.nameTable[e.id+r.header.id]).constraints=z?j.constraints|En.Select:j.constraints&~En.Select;var B=void 0;if(r.phaseSize>0)for(var H=0;H<r.phases.length;H++)(B=this.nameTable[e.id+r.phases[H].id+"_header"]).constraints=z?B.constraints|En.Select:B.constraints&~En.Select;var _=void 0,W=void 0,F=r.phases.length||1;for(H=0;H<r.lanes.length;H++)for(var V=0;V<F;V++)(_=this.nameTable[e.id+r.lanes[H].id+V]).constraints=z?_.constraints|En.Select:_.constraints&~En.Select,0===V&&((W=this.nameTable[e.id+r.lanes[H].id+"_"+V+"_header"]).constraints=z?W.constraints|En.Select:W.constraints&~En.Select)}}n=!0}return n},t.prototype.insertValue=function(e,t){for(var i,n=t?this.oldNodeObjects:this.oldConnectorObjects,r=0;r<n.length;r++)n[r].id===e.id&&(i=!0);i||(t?this.oldNodeObjects.push(e):this.oldConnectorObjects.push(e))},t.prototype.nodePropertyChange=function(e,t,i,n,r,o){if(this.canEnableBlazorObject){var a=xd(e);this.insertValue(a,!0)}var s,l=e.wrapper.outerBounds,c=e.wrapper.bounds,h=!1;if(void 0!==i.width&&(e.children?e.container?e.wrapper.width=i.width:this.scaleObject(e,i.width,!0):(e.wrapper.children[0].width=i.width,s=!0,h=!0)),void 0!==i.height&&(e.children?e.container?e.wrapper.height=i.height:this.scaleObject(e,i.height,!1):(e.wrapper.children[0].height=i.height,s=!0,h=!0)),s=this.nodePropertyChangeExtend(e,t,i,s),void 0!==i.constraints&&us(t)!==us(i)&&(e.wrapper.children[0].shadow=us(e)?e.shadow:null),void 0!==i.offsetX){if("None"!==e.wrapper.flip){if(e.offsetX!==e.wrapper.offsetX&&void 0!==t.offsetX){var d=i.offsetX-t.offsetX;e.wrapper.offsetX=e.wrapper.offsetX+d,this.updateFlipOffset(e.wrapper,d,0,e.wrapper.flip)}}else e.wrapper.offsetX=i.offsetX;s=!0,h=!0}if(void 0!==i.offsetY){if("None"!==e.wrapper.flip){if(e.offsetY!==e.wrapper.offsetY&&void 0!==t.offsetY){var p=i.offsetY-t.offsetY;e.wrapper.offsetY=e.wrapper.offsetY+p,this.updateFlipOffset(e.wrapper,0,p,e.wrapper.flip)}}else e.wrapper.offsetY=i.offsetY;s=!0,h=!0}if(void 0!==i.pivot&&(e.wrapper.pivot=i.pivot,s=!0),void 0!==i.minWidth&&(e.wrapper.minWidth=e.wrapper.children[0].minWidth=i.minWidth,s=!0,h=!0),void 0!==i.minHeight&&(e.wrapper.minHeight=e.wrapper.children[0].minHeight=i.minHeight,s=!0,h=!0),void 0!==i.maxWidth&&(e.wrapper.maxWidth=i.maxWidth,s=!0,h=!0),void 0!==i.maxHeight&&(e.wrapper.maxHeight=i.maxHeight,s=!0,h=!0),void 0!==i.flip)if(e.wrapper.flip=i.flip,s=!0,h=!0,e.wrapper.elementActions&Tn.ElementIsGroup){if(zc(e.wrapper,e.offsetX,e.offsetY,this,i.flip),e&&e.children)for(var u=0,f=e.children;u<f.length;u++){var g=f[u],m=this.nameTable[g];m.wrapper.flip=i.flip,this.updatePorts(m,i.flip)}}else e.wrapper.children[0].flip=i.flip,this.updatePorts(e,i.flip);if(void 0!==i.rotateAngle&&(e.children&&r&&this.commandHandler.rotateObjects(e,[e],e.rotateAngle-e.wrapper.rotateAngle,{x:e.offsetX,y:e.offsetY},!1),e.wrapper.rotateAngle=i.rotateAngle,s=!0,h=!0),void 0!==i.backgroundColor&&(e.wrapper.style.fill=i.backgroundColor),void 0!==i.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==i.shape&&"Bpmn"!==e.shape.type&&(s=!0,gc(i,e,t,this),h=!0),i.margin&&(s=!0,this.updateMargin(e,i),h=!0),(void 0!==i.shape&&void 0===i.shape.type||void 0!==i.width||void 0!==i.height||void 0!==i.style)&&"Bpmn"===e.shape.type&&this.bpmnModule&&(s=!0,h=!0,this.bpmnModule.updateBPMN(i,t,e,this)),"UmlActivity"===e.shape.type&&(!w()&&"FinalNode"===e.shape.shape||w()&&"FinalNode"===e.shape.umlActivityShape)&&(s=!0,h=!0,this.updateUMLActivity(i,t,e,this)),(e.shape&&"UmlClassifier"===e.shape.type||e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type)&&(s=!0,h=!0),void 0!==i.ports)for(var y=0,v=Object.keys(i.ports);y<v.length;y++){var b=v[y],x=Number(b);s=!0;var S=i.ports[b],C=e.ports[x];this.updatePort(S,C,e.wrapper),h=!0}if(void 0!==i.annotation||void 0!==i.annotations||void 0!==i.width)for(var P=0,O=Object.keys(i.annotations||e.annotations);P<O.length;P++){b=O[P],x=Number(b);s=!0;S=void 0;S=i.annotation?i.annotation:i.annotations?i.annotations[b]:e.annotations;var E=e.annotations[x];if(E){var T=!!e.width;this.updateAnnotation(S,E,e.wrapper,e,T);var I=this.nameTable[e.parentId];if(I&&"SwimLane"===I.shape.type){if(e.isLane||e.isPhase)for(var k=e.isLane?I.shape.lanes:I.shape.phases,A=0;A<k.length;A++)if(k[A].id===(e.LaneHeaderParent||e.PhaseHeaderParent)){k[A].header.annotation.content=e.annotations[0].content,k[A].header.annotation.style=e.annotations[0].style;break}}}}if(void 0===i.expandIcon&&void 0===i.collapseIcon&&void 0===i.isExpanded||(this.updateIcon(e),this.updateDefaultLayoutIcons(e),void 0!==i.isExpanded&&this.commandHandler.expandNode(e,this),s=!0),void 0!==i.tooltip&&this.updateTooltip(e,i),s){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(e,{offsetX:t.offsetX||e.offsetX,offsetY:t.offsetY||e.offsetY},this),this.checkSelectedItem(e)&&e.wrapper.children[0]instanceof or&&e.wrapper.children[0].refreshTextElement(),e.wrapper.measure(new Zi(e.wrapper.bounds.width,e.wrapper.bounds.height),e.id,this.onLoadImageSize.bind(this)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateObject(e,t,i),"SwimLane"===e.shape.type&&!this.currentSymbol&&!(this.diagramActions&jn.ToolAction)){El(this,e);var M=e.wrapper.children[0],D=e.shape,L=M.columnDefinitions().length;if("Horizontal"===D.orientation){x=D.header&&D.hasHeader?1:0;Ol(e,this,M.rows[x].cells[L-1],L-1)}e.wrapper.measure(new Zi(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}if(this.diagramActions&jn.ToolAction&&!(this.diagramActions&jn.UndoRedo)||this.checkSelectedItem(e)&&this.updateSelector(),!1===l.equals(l,e.wrapper.outerBounds)&&this.updateQuad(e),n?e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length):this.commandHandler.connectorSegmentChange(e,c,void 0!==i.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(e,this),this.updateGroupOffset(e),e.parentId&&this.nameTable[e.parentId]){var R=this.nameTable[e.parentId];R.wrapper.measure(new Zi(R.wrapper.width,e.wrapper.height)),R.wrapper.arrange(R.wrapper.desiredSize),R.offsetX=R.wrapper.offsetX,R.offsetY=R.wrapper.offsetY}if(!1===c.equals(c,e.wrapper.bounds)&&(this.updateGroupSize(e),e.children&&this.updateGroupOffset(e)),"SwimLane"===e.shape.type&&!this.currentSymbol&&this.diagramActions&jn.Render)wl(ul(this,e.wrapper.children[0]),this);if(!this.preventNodesUpdate&&((!ws(this)||ws(this)&&this.scroller.oldCollectionObjects.indexOf(e.id)>-1)&&(this.diagramActions&jn.PreventZIndexOnDragging?this.updateDiagramObject(e,!0):this.updateDiagramObject(e)),!n&&h&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&kn.LineRouting&&"helper"!==e.id&&(this.diagramActions&jn.ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0)),this.updateConnectorEdges(e),"helper"!==e.id&&!(this.diagramActions&jn.ToolAction))))for(var j=this.spatialSearch.findObjects(e.wrapper.outerBounds),N=0;N<j.length;N++){var z=j[N];z instanceof $a&&this.connectorPropertyChange(j[N],{},{sourceID:z.sourceID,targetID:z.targetID,sourcePortID:z.sourcePortID,targetPortID:z.targetPortID,sourcePoint:z.sourcePoint,targetPoint:z.targetPoint})}"New"!==e.status&&this.diagramActions&&(e.status="Update")}if(!o){var B=e,H={element:B,cause:this.diagramActions,oldValue:t,newValue:i};w()&&this.propertyChange&&(H.element={node:Vc(B)},H.oldValue={node:Vc(t)},H.newValue={node:Vc(i)}),this.triggerEvent(Hn.propertyChange,H)}},t.prototype.updatePorts=function(e,t){if(e&&e.ports.length>0)for(var i=0,n=Object.keys(e.ports);i<n.length;i++){var r=n[i],o=Number(r),a=e.ports[o],s=this.getWrapper(e.wrapper,a.id);(s=Nc(s,t,a)).relativeMode="Point",s.measure(new Zi(s.width,s.height)),s.arrange(s.desiredSize)}},t.prototype.updateFlipOffset=function(e,t,i,n){if(e.hasChildren())for(var r=0,o=e.children;r<o.length;r++){var a=o[r];"Horizontal"!==n&&"Both"!==n||(a.flipOffset.x=a.flipOffset.x+t),"Vertical"!==n&&"Both"!==n||(a.flipOffset.y=a.flipOffset.y+i),(a instanceof sr||a instanceof nr)&&this.updateFlipOffset(a,t,i,n)}},t.prototype.updateUMLActivity=function(e,t,i,n){if(void 0!==e.width||void 0!==e.height){var r=i.wrapper.children[0].children[0];r.width=e.width,r.height=e.height;var o=i.wrapper.children[0].children[1];o.width=e.width/1.5,o.height=e.height/1.5}},t.prototype.updateConnectorProperties=function(e){if(this.preventConnectorsUpdate){-1===this.selectionConnectorsList.indexOf(e)&&this.selectionConnectorsList.push(e)}else{var t={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint,sourceID:e.sourceID,targetID:e.targetID,sourcePortID:e.sourcePortID,targetPortID:e.targetPortID};this.connectorPropertyChange(e,{},t,void 0,!0)}},t.prototype.updateConnectorEdges=function(e){if(e.inEdges.length>0)for(var t=0;t<e.inEdges.length;t++)this.updateConnectorProperties(this.nameTable[e.inEdges[t]]);if(e.outEdges.length>0)for(var i=0;i<e.outEdges.length;i++)this.updateConnectorProperties(this.nameTable[e.outEdges[i]]);e.parentId&&this.nameTable[e.parentId]&&this.updateConnectorEdges(this.nameTable[e.parentId])},t.prototype.connectorProprtyChangeExtend=function(e,t,i,n){return void 0!==i.type&&i.type!==t.type&&e.segments.length>0&&void 0===i.segments&&(e.segments=[]),void 0!==i.shape&&void 0!==e.shape&&e.shape&&"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(e,t,i,this),void 0!==e.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),!0):n},t.prototype.connectorPropertyChange=function(e,t,i,n,r){if(this.canEnableBlazorObject){var o=xd(e);this.insertValue(o,!1)}var a,s,l,c,h,d=e.wrapper.bounds,p=!1,u=[];if(p=this.connectorProprtyChangeExtend(e,t,i,p),void 0!==i.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==i.sourcePoint||void 0!==i.targetPoint||void 0!==i.sourceID||void 0!==i.targetID||void 0!==i.targetPadding||void 0!==i.sourcePortID||void 0!==i.targetPortID||void 0!==i.sourcePadding||void 0!==i.type||void 0!==i.segments||void 0!==i.flip){if(void 0!==i.sourceID&&i.sourceID!==t.sourceID||i.sourcePortID){var f=this.nameTable[e.sourceID];if(s=this.findInOutConnectPorts(f,!1),(!f||ms(f)||""!==e.sourcePortID&&ys(s))&&(e.sourceWrapper=f?this.getEndNodeWrapper(f,e,!0):void 0,e.sourcePortID&&void 0===i.sourcePortID&&(e.sourcePortWrapper=f?this.getWrapper(f.wrapper,e.sourcePortID):void 0),this.removePortEdges(this.nameTable[t.sourceID]||f,t.sourcePortID||e.sourcePortID,e.id,!1)),void 0!==i.sourceID&&void 0!==t.sourceID&&""!==t.sourceID){var g=this.nameTable[t.sourceID];void 0!==g&&g.outEdges&&-1!==g.outEdges.indexOf(e.id)&&vc(g.outEdges,e.id)}this.updateEdges(e)}if(void 0!==i.targetID&&i.targetID!==t.targetID){var m=this.nameTable[i.targetID];if(a=this.findInOutConnectPorts(m,!0),(!m||fs(m)||""!==e.targetPortID&&gs(a))&&(e.targetWrapper=m?this.getEndNodeWrapper(m,e,!1):void 0,e.targetPortID&&void 0===i.targetPortID&&(e.targetPortWrapper=m?this.getWrapper(m.wrapper,e.targetPortID):void 0),this.removePortEdges(this.nameTable[t.targetID]||m,t.targetPortID||e.targetPortID,e.id,!0)),void 0!==t&&void 0!==t.targetID&&""!==t.targetID){var y=this.nameTable[t.targetID];void 0!==y&&y.inEdges&&-1!==y.inEdges.indexOf(e.id)&&vc(y.inEdges,e.id)}this.updateEdges(e)}if(void 0!==i.sourcePortID&&i.sourcePortID!==t.sourcePortID)e.sourceID&&this.nameTable[e.sourceID]&&(l=this.nameTable[e.sourceID].wrapper),(!(f=this.nameTable[e.sourceID])||ms(f)||""!==e.sourcePortID&&ys(s))&&(e.sourcePortWrapper=l?this.getWrapper(l,i.sourcePortID):void 0);if(void 0!==i.targetPortID&&i.targetPortID!==t.targetPortID){m=this.nameTable[e.targetID];e.targetID&&this.nameTable[e.targetID]&&(c=this.nameTable[e.targetID].wrapper),(!m||fs(m)||""!==e.targetPortID&&gs(a))&&(e.targetPortWrapper=c?this.getWrapper(c,i.targetPortID):void 0)}void 0!==i.flip&&(e.flip=i.flip,jc(e)),"Orthogonal"===e.type&&this.lineRoutingModule&&this.diagramActions&&this.constraints&kn.LineRouting&&!(this.diagramActions&jn.ToolAction)&&(this.lineRoutingModule.renderVirtualRegion(this,!0),this.lineRoutingModule.refreshConnectorSegments(this,e,!1)),u=this.getPoints(e)}void 0!==i.style&&pc(i.style,e.wrapper.children[0]),(u.length>0||void 0!==i.sourceDecorator||void 0!==i.targetDecorator&&(-1!==(h=Object.keys(i.targetDecorator)).indexOf("shape")||-1!==h.indexOf("pathData")||-1!==h.indexOf("width")||-1!==h.indexOf("height"))||void 0!==i.cornerRadius)&&(bc(e,u.length>0?u:e.intermediatePoints,this.diagramActions),void 0!==i.type&&(p=!0),u.length>0&&(e.wrapper.measure(new Zi(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateConnectorAnnotation(e),this.updateObject(e,t,i))),(i.sourcePoint||i.targetPoint||i.segments)&&this.diagramActions===jn.Render&&(p=!0),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.commandHandler.updatePathElementOffset(e),n||this.updateBridging(),this.updateAnnotations(i,e),e.wrapper.measure(new Zi(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),!1===d.equals(d,e.wrapper.bounds)&&(this.updateQuad(e),this.updateGroupSize(e)),!0!==p||!this.checkSelectedItem(e)||this.diagramActions&jn.ToolAction&&!(this.diagramActions&jn.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!ws(this)||ws(this)&&this.scroller.oldCollectionObjects.indexOf(e.id)>-1)&&(this.diagramActions&jn.PreventZIndexOnDragging?this.updateDiagramObject(e,!0):this.updateDiagramObject(e)),this.diagramActions&&"New"!==e.status&&(e.status="Update"),this.triggerPropertyChange(r,e,t,i)},t.prototype.removePortEdges=function(e,t,i,n){if(e)for(var r=0;r<e.ports.length;r++){var o=e.ports[r];if(o.id===t)vc(n?o.inEdges:o.outEdges,i)}},t.prototype.getpropertyChangeArgs=function(e,t,i,n){return n.element={connector:Vc(e)},n.oldValue={connector:Vc(t)},n.newValue={connector:Vc(i)},n},t.prototype.triggerPropertyChange=function(e,t,i,n){if(!e){var r=t,o={element:Vc(r),cause:this.diagramActions,oldValue:Vc(i),newValue:Vc(n)};w()&&(o=this.getpropertyChangeArgs(r,i,n,o)),this.triggerEvent(Hn.propertyChange,o)}},t.prototype.findInOutConnectPorts=function(e,t){var i={};return e&&(i=Ec(e,t)),i},t.prototype.getPoints=function(e,t){return e.getConnectorPoints(e.type,t,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0)},t.prototype.updateNodeProperty=function(e,t,i){if(void 0===t)this.updateElementVisibility(e,this.nameTable[e.id],t);else{e.style.opacity=i;for(var n=0;n<e.children.length;n++)e.children[n]instanceof nr&&this.updateNodeProperty(e.children[n],void 0,i),e.children[n].style.opacity=i}},t.prototype.checkSelectedItem=function(e){var t=this.selectedItems,i=!1,n=[];return(n=n.concat(t.nodes,t.connectors)).length>0&&e.id===n[n.length-1].id&&(i=!0),i},t.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof nr)for(var i=0;i<e.children.length;i++)this.updateDiagramContainerVisibility(e.children[i],t);e.visible=t},t.prototype.updateElementVisibility=function(e,t,i){if(void 0!==i){if(e.visible=i,t instanceof Lh){if(t.children)for(var n=0,r=t.children;n<r.length;n++){var o=r[n];this.updateElementVisibility(this.nameTable[o].wrapper,this.nameTable[o],i)}else e.children[0].visible=i,this.updateDiagramContainerVisibility(e.children[0],i),"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(t,i,this);if(t.ports)for(var a=0,s=t.ports;a<s.length;a++){var l=s[a];if(l.visibility&xn.Visible)(g=this.getWrapper(e,l.id)).visible=i}if(t.annotations)for(var c=0,h=t.annotations;c<h.length;c++){var d=h[c];(g=this.getWrapper(e,d.id)).visible=i}}else for(var p=0;p<3;p++)e.children[p].visible=i;if(t.annotations)for(var u=0,f=t.annotations;u<f.length;u++){d=f[u];(g=this.getWrapper(e,d.id)).visible=i}if(t.expandIcon||t.collapseIcon){var g;if(g=this.getWrapper(e,"icon_content")){for(p=0;p<g.children.length;p++)g.children[p].visible=i;g.visible=i}t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length)}!1===i&&this.unSelect(this.nameTable[e.id]),(t instanceof Lh&&!this.preventNodesUpdate||t instanceof $a&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[e.id],void 0,!0)}},t.prototype.updateAnnotations=function(e,t){if(void 0!==e.annotations)for(var i=0,n=Object.keys(e.annotations);i<n.length;i++){var r=n[i],o=Number(r),a=e.annotations[r],s=t.annotations[o];this.updateAnnotation(a,s,t.wrapper,t)}},t.prototype.updateAnnotation=function(e,t,i,n,r){var o,a=!1;if(void 0!==(o=this.getWrapper(i,t.id))){if(void 0!==e.width&&void 0!==e.height&&(o.width=e.width,o.height=e.height,a=!0),void 0!==e.rotateAngle&&(o.rotateAngle=e.rotateAngle),!r||o instanceof Ta||o.refreshTextElement(),t instanceof Or&&void 0!==e.segmentAngle&&(o.rotateAngle=t.rotateAngle),t instanceof Pr&&void 0!==e.offset){var s=e.offset;a=!0;var l=void 0!==s.x?s.x:t.offset.x,c=void 0!==s.y?s.y:t.offset.y;o.setOffsetWithRespectToBounds(l,c,"Fraction"),o.relativeMode="Point"}else t instanceof Or&&(void 0!==e.offset||void 0!==e.segmentAngle)&&n.updateAnnotation(t,n.intermediatePoints,n.wrapper.bounds,o);if(t instanceof Or&&e.displacement&&(void 0===e.displacement.x&&void 0===e.displacement.y||(a=!0)),void 0!==e.margin&&(a=!0,void 0!==e.margin.bottom&&(o.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(o.margin.top=e.margin.top),void 0!==e.margin.left&&(o.margin.left=e.margin.left),void 0!==e.margin.right&&(o.margin.right=e.margin.right)),(a||r)&&(o.width=t.width||n.width,t.template&&(o.width=o.width||o.actualSize.width,o.height=t.height||n.height||o.actualSize.height)),void 0!==e.horizontalAlignment&&(o.horizontalAlignment=e.horizontalAlignment,a=!0),void 0!==e.verticalAlignment&&(o.verticalAlignment=e.verticalAlignment,a=!0),void 0!==e.visibility&&(o.visible=!(!i.visible||!e.visibility)),void 0!==e.constraints){o.constraints&On.Select&&!(e.constraints&On.Select)&&up(this,n,!1,o),o.constraints=e.constraints}void 0!==e.style&&pc(e.style,o),void 0!==e.hyperlink&&function(e,t,i){for(var n=t,r=n.hyperlink,o=0,a=Object.keys(e);o<a.length;o++){switch(a[o]){case"color":n.style.color=r.color=e.color;break;case"content":n.content=r.content=e.content||r.link;break;case"link":var s=i.style;n.style.color=e.link?r.color:s.color,n.style.textDecoration=e.link?r.textDecoration:i.style.textDecoration,n.content=e.link?r.content||e.link:i.content,r.link=e.link;break;case"textDecoration":n.style.textDecoration=r.textDecoration=e.textDecoration}}}(e.hyperlink,o,t),this.updateAnnotationContent(e,a,o,n,t,i),!0===a&&(o.measure(new Zi(o.width,o.height)),o.arrange(o.desiredSize)),o instanceof Ta||o.refreshTextElement()}},t.prototype.updateAnnotationContent=function(e,t,i,n,r,o){void 0!==e.content&&(i&&(!0,"UmlActivity"===n.shape.type&&(w&&"StructuredNode"===n.shape.umlActivityShape||!w&&"StructuredNode"===n.shape.shape)?i.content="<<"+e.content+">>":i.content=e.content),i instanceof Ta&&this.updateAnnotationWrapper(i,n,r,o)),void 0!==e.template&&(i.content=e.template,this.updateAnnotationWrapper(i,n,r,o))},t.prototype.updateAnnotationWrapper=function(e,t,i,n){for(var r=0,o=this.views;r<o.length;r++){var a=o[r];ld(e.id+"_groupElement",a),ld(e.id+"_html_element",a)}if(t instanceof Lh)e=t.initAnnotationWrapper(i,this.element.id);else if(t instanceof $a){var s=t.wrapper.children[0],l=new hn(s.offsetX-s.width/2,s.offsetY-s.height/2,s.width,s.height);e=t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,l,this.getDescription,this.element.id)}for(var c=0;c<n.children.length;c++)e.id===n.children[c].id&&n.children.splice(c,1,e)},t.prototype.updatePort=function(e,t,i){var n,r=!1;if(void 0!==(n=this.getWrapper(i,t.id))){if(void 0!==e.offset){r=!0;var o=void 0!==e.offset.x?e.offset.x:t.offset.x,a=void 0!==e.offset.y?e.offset.y:t.offset.y;n.setOffsetWithRespectToBounds(o,a,"Fraction"),n.relativeMode="Point"}if(void 0!==e.width&&(r=!0,n.width=e.width),void 0!==e.height&&(r=!0,n.height=e.height),void 0!==e.visibility&&(n.visible=!(!i.visible||!Cc(t,xn.Visible))),void 0!==e.margin&&(r=!0,void 0!==e.margin.bottom&&(n.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(n.margin.top=e.margin.top),void 0!==e.margin.right&&(n.margin.right=e.margin.right),void 0!==e.margin.left&&(n.margin.left=e.margin.left)),void 0!==e.horizontalAlignment&&(r=!0,n.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(r=!0,n.verticalAlignment=e.verticalAlignment),void 0!==e.style&&(void 0!==e.style.fill&&(n.style.fill=e.style.fill),void 0!==e.style.opacity&&(n.style.opacity=e.style.opacity),void 0!==e.style.strokeColor&&(n.style.strokeColor=e.style.strokeColor),void 0!==e.style.strokeWidth&&(n.style.strokeWidth=e.style.strokeWidth),void 0!==e.style.strokeDashArray&&(n.style.strokeDashArray=e.style.strokeDashArray)),void 0!==e.shape&&n){var s=Er(e.shape);n.data=s,n.canMeasurePath=!0}void 0!==e.pathData&&(n.data=String(e.pathData),r=!0),!0===r&&(n.measure(new Zi(n.width,n.height)),n.arrange(n.desiredSize))}},t.prototype.updateIcon=function(e){var t=this.getWrapper(e.wrapper,"icon_content"),i=this.diagramActions&jn.Render?this.element.id:void 0;if(t){if("SVG"===this.mode){var n=Yh(e.wrapper.id+"_icon_content",i);if(n){var r=Yh(n.id+"_rect",i),o=Yh(n.id+"_shape",i),a=Yh(o.id+"_native_element",i);a&&a.parentNode.removeChild(a),o.parentNode.removeChild(o),r.parentNode.removeChild(r),n.parentNode.removeChild(n)}}var s=e.wrapper.children.indexOf(t);e.wrapper.children.splice(s,1)}var l=this.getPortContainer(e);e.initIcons(this.getDescription,this.layout,l,this.element.id)},t.prototype.getPortContainer=function(e){if(e.children)for(var t=0;t<e.wrapper.children.length;t++)if(e.wrapper.children[t].id===e.id+"group_container")return e.wrapper.children[t];return e.wrapper},t.prototype.updateTooltip=function(e,t){void 0!==t.tooltip.content&&(e.tooltip.content=t.tooltip.content),void 0!==t.tooltip.position&&(e.tooltip.position=t.tooltip.position),void 0!==t.tooltip.height&&(e.tooltip.height=t.tooltip.height),void 0!==t.tooltip.width&&(e.tooltip.width=t.tooltip.width),void 0!==t.tooltip.showTipPointer&&(e.tooltip.showTipPointer=t.tooltip.showTipPointer)},t.prototype.updateQuad=function(e){this.spatialSearch.updateQuad(e.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},t.prototype.removeFromAQuad=function(e){if(e.children)for(var t=void 0,i=e.children,n=0;n<i.length;n++)(t=this.nameTable[i[n]])&&this.removeFromAQuad(t);this.spatialSearch.removeFromAQuad(e.wrapper),this.spatialSearch.updateBounds(e.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},t.prototype.updateGroupSize=function(e){var t;e.parentId&&(t=this.nameTable[e.parentId])&&(t.parentId?this.updateGroupSize(t):(t.wrapper.measure(new Zi),t.wrapper.arrange(t.wrapper.desiredSize),this.updateGroupOffset(t),this.updateDiagramObject(t)))},t.prototype.updatePage=function(){if(this.diagramActions&jn.Render&&!(this.diagramActions&jn.DragUsingMouse)){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var e=0,i=this.views;e<i.length;e++){var n=i[e],r=this.views[n];r instanceof t||r.updateView(r)}}this.diagramActions&jn.DragUsingMouse&&this.renderPageBreaks()},t.prototype.protectPropertyChange=function(e){this.isProtectedOnChange=e},t.prototype.getProtectPropertyChangeValue=function(){return this.isProtectedOnChange},t.prototype.enableServerDataBinding=function(e){w()&&(this.allowServerDataBinding=e,e&&(this.bulkChanges={}))},t.prototype.updateShadow=function(e,t){void 0!==t.angle&&(e.angle=t.angle),void 0!==t.color&&(e.color=t.color),void 0!==t.distance&&(e.distance=t.distance),void 0!==t.opacity&&(e.opacity=t.opacity)},t.prototype.updateMargin=function(e,t){void 0!==t.margin.top&&(e.margin.top=t.margin.top),void 0!==t.margin.bottom&&(e.margin.bottom=t.margin.bottom),void 0!==t.margin.left&&(e.margin.left=t.margin.left),void 0!==t.margin.right&&(e.margin.right=t.margin.right)},t.prototype.initDroppables=function(){var e,t,i=this,n={},r={};this.droppable=new mi(this.element),this.droppable.over=function(o){if(i.currentSymbol)o.event.touches&&o.event.touches.length&&i.eventHandler.mouseMove(o.event,o.event.touches);else{var a=null;if(!o.dragData&&"drag"===o.name){var s=document.getElementsByClassName("e-dragclone")[0];s&&(a=s)}if(o.dragData||a){var l=void 0,c=void 0;document.getElementById(i.element.id+"content").focus();var h=i.eventHandler.getMousePosition(o.event),d=void 0,p=a||o.dragData.helper,u=p.getAttribute("paletteId"),f=void 0,g=void 0,m=void 0;if(u){var y=document.getElementById(u).ej2_instances[0];i.droppable.sourceElement=y;if(y){var v=y.selectedSymbols;i.allowServerDataBinding=!1,d=xd(y.selectedSymbols),n=y.childTable;var b=v.wrapper.children[0].children[0];if(y.selectedSymbols instanceof Lh){"TextAnnotation"===v.shape.shape?(d.offsetX=h.x+11+(d.width||b.actualSize.width)/2,d.offsetY=h.y+11+(d.height||b.actualSize.height)/2):(d.offsetX=h.x+5+(d.width||b.actualSize.width)/2,d.offsetY=h.y+(d.height||b.actualSize.height)/2);var x=new Lh(i,"nodes",d,!0);"Bpmn"===x.shape.type&&x.shape.activity.subProcess.processes&&x.shape.activity.subProcess.processes.length&&(x.shape.activity.subProcess.processes=[]),f=x.dragSize,g=x.previewSize,m=y.symbolDragSize;var S=y.symbolPreview;if(x.width=f.width||m.width||g.width||S.width||x.width,x.height=f.height||m.height||g.height||S.height||x.height,"SwimLane"===x.shape.type){if(i.diagramActions|=jn.PreventHistory,x.shape.isLane){x.children=[],e={id:"header"+md()},"Horizontal"===x.shape.orientation?(e.width=x.shape.lanes[0].header.width,e.height=x.shape.lanes[0].height):(e.width=x.shape.lanes[0].width,e.height=x.shape.lanes[0].header.height),e.style=x.shape.lanes[0].header.style,e.offsetX=h.x+5+e.width/2,e.offsetY=h.y+e.height/2,i.diagramActions|=jn.PreventCollectionChangeOnDragOver,e=i.add(e),t={id:"body"+md()},"Horizontal"===x.shape.orientation?(t.width=x.shape.lanes[0].width-e.width,t.height=x.shape.lanes[0].height,t.offsetX=h.x+5+(x.shape.lanes[0].header.width+t.width/2),t.offsetY=h.y+t.height/2):(t.width=x.shape.lanes[0].width,t.height=x.shape.lanes[0].height-e.height,t.offsetX=h.x+5+t.width/2,t.offsetY=h.y+(x.shape.lanes[0].header.height+t.height/2)),t.style=x.shape.lanes[0].style,t=i.add(t);var C={id:"group"+md(),children:[e.id,t.id]};C.shape=x.shape,C.width=x.shape.lanes[0].width,C.height=x.shape.lanes[0].height,C.previewSize=x.previewSize,C.dragSize=x.dragSize,C.addInfo=x.addInfo,x=i.add(C),i.diagramActions&=~jn.PreventCollectionChangeOnDragOver}i.diagramActions&=~jn.PreventHistory}if(x.shape.isPhase&&((c="Horizontal"===x.shape.orientation)?(x.offsetX=h.x+5+(x.width||b.actualSize.width)/2,x.offsetY=h.y,x.shape.data="M20,"+x.height/2+" L"+(x.width-20)+","+x.height/2+"z",x.height=1):(x.offsetX=h.x+5,x.offsetY=h.y+(x.height||b.actualSize.height)/2,x.shape.data="M"+x.width/2+",20 L"+x.width/2+","+(x.height-20)+"z",x.width=1)),l=x,d.children){var P=d;r=i.getChildren(P,{},n),kc(P,-P.offsetX,-P.offsetY,r,!0,i)}}else if(y.selectedSymbols instanceof $a){l=new $a(i,"connectors",d,!0);var O=hn.toBounds([l.sourcePoint,l.targetPoint]),E=h.x-O.left,T=h.y-O.top;l.sourcePoint.x+=E,l.sourcePoint.y+=T,l.targetPoint.x+=E,l.targetPoint.y+=T}l.shape.isLane||(l.id+=md());var I={source:y,element:l,cancel:!1,diagram:i};if(w()&&(I=i.getBlazorDragEventArgs(I)),i.enterObject=l,i.enterTable=r,i.triggerEvent(Hn.dragEnter,I),l instanceof Lh&&"SwimLane"===l.shape.type&&l.shape.isLane){var k,A,M=I.element,D=M.shape.lanes[0];c="Horizontal"===M.shape.orientation,k=i.nameTable[l.children[0]],A=i.nameTable[l.children[1]],f=l.dragSize,g=l.previewSize,m=y.symbolDragSize,D.width=f.width||m.width||g.width||D.width,D.height=f.height||m.height||g.height||D.height,c?(e.width=D.header.width,e.height=D.height,t.width=D.width-e.width,t.height=D.height,t.offsetX=h.x+5+(D.header.width+A.width/2),t.offsetY=h.y+A.height/2):(e.width=D.width,e.height=D.header.height,t.width=D.width,t.height=D.height-e.height,t.offsetX=h.x+5+A.width/2,t.offsetY=h.y+(D.header.height+A.height/2)),e.offsetX=h.x+5+k.width/2,e.offsetY=h.y+k.height/2,l.width=D.width,l.height=D.height}l instanceof Lh&&l.shape.isPhase&&(c?l.height=1:l.width=1),i.activeLayer.lock||I.cancel||(i.preventDiagramUpdate=!0,l.children&&i.findChild(l,r),i.preventDiagramUpdate=!0,-1!==l.zIndex&&(l.zIndex=-1),i.initObject(l,void 0,void 0,!0),i.currentSymbol=l,"SVG"!==i.mode&&i.refreshDiagramLayer(),i.commandHandler.oldSelectedObjects=Bc(i),i.commandHandler.select(l),i.commandHandler.updateBlazorSelector(),i.eventHandler.mouseDown(o.event),i.eventHandler.mouseMove(o.event,o),i.preventDiagramUpdate=!1,i.updatePage(),p.style.opacity="0"),delete i.enterObject,delete i.enterTable}i.droppable.selectedSymbols=p,i.allowServerDataBinding=!0}}}},this.droppable.drop=function(e){return su(i,void 0,void 0,(function(){var t,i,n,r,o,a,s,l,c,h;return lu(this,(function(d){switch(d.label){case 0:return this.allowServerDataBinding=!1,t="sourceElement",this.currentSymbol?(n=!1,o=void 0,o=this.currentSymbol instanceof $a,e.event.touches&&this.eventHandler.mouseUp(e.event),a=void 0,void 0,void 0,l=void 0,l={source:this.droppable[t],element:this.currentSymbol,target:this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this,cancel:!1,position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},w()?(l={source:Vc(this.droppable[t]),element:Rc(this.currentSymbol)===$a?{connector:Vc(this.currentSymbol)}:{node:Vc(this.currentSymbol)},cancel:!1,target:{},position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},this.getDropEventArgs(l),[4,this.triggerEvent(Hn.drop,l)]):[3,2]):[3,4];case 1:return l=d.sent()||l,[3,3];case 2:this.triggerEvent(Hn.drop,l),d.label=3;case 3:return c=void 0,h="id",(c=xd(this.currentSymbol)).hasTarget=this.currentSymbol.hasTarget,this.removeFromAQuad(this.currentSymbol),this.removeObjectsFromLayer(this.nameTable[this.currentSymbol.id]),this.removeElements(this.currentSymbol),(this.currentSymbol.shape.isLane||this.currentSymbol.shape.isPhase)&&this.removeChildInNodes(this.currentSymbol),l.cancel&&ac(this.currentSymbol,this),this.currentSymbol.shape.isPhase&&(n=!0,r=this.currentSymbol.shape.orientation),delete this.nameTable[this.currentSymbol.id],this.currentSymbol=null,this.protectPropertyChange(!0),l.cancel?this.clearSelectorLayer():(this.startGroupAction(),c&&(c.shape.isLane||n)&&(n&&(c.shape.isPhase=n,c.shape.orientation=r),this.eventHandler.addSwimLaneObject(c)),"Bpmn"===c.shape.type&&c.shape.annotation&&c.hasTarget&&(s=c.shape.annotation.nodeId,c.shape.annotation.id=c.id,this.addTextAnnotation(c.shape.annotation,this.nameTable[s]),c.nodeId=""),c.shape.isLane||n||(c.children&&this.addChildNodes(c),l.target&&l.target instanceof Lh&&!o&&el(this,l.target)&&bs(l.target)?nl(this,l.target,c):i=this.add(c,!0),(c||i)&&xs(this)&&this.select([this.nameTable[c[h]]]))),this.protectPropertyChange(!1),a=this.nameTable[c[h]],c.hasTarget&&(c.nodeId=c.hasTarget,this.remove(c)),this.bpmnModule&&a instanceof Lh&&c.processId&&(a.processId=c.processId,this.bpmnModule.dropBPMNchild(this.nameTable[a.processId],a,this)),this.endGroupAction(),"SVG"!==this.mode&&this.refreshDiagramLayer(),delete this.droppable[t],[3,5];case 4:l={source:Vc(e.droppedElement),element:void 0,target:Vc(this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this),cancel:!1,position:void 0},w()&&(l={source:Vc(e.droppedElement),element:void 0,cancel:!1,position:void 0,target:{}},this.getDropEventArgs(l)),this.triggerEvent(Hn.drop,l),c=void 0,h="id",d.label=5;case 5:return"selectedSymbols",this.droppable.selectedSymbols&&ut(this.droppable.selectedSymbols),this.allowServerDataBinding=!0,[2]}}))}))},this.droppable.out=function(e){if(i.currentSymbol&&!i.eventHandler.focus){i.unSelect(i.currentSymbol),i.removeFromAQuad(i.currentSymbol),"SVG"!==i.mode&&"Native"===i.currentSymbol.shape.type&&i.removeElements(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),delete i.nameTable[i.currentSymbol.id];var t={element:Vc(i.currentSymbol),diagram:i};w()&&(t=i.getBlazorDragLeaveEventArgs(t)),i.triggerEvent(Hn.dragLeave,t),"SVG"!==i.mode?i.refreshDiagramLayer():i.removeElements(i.currentSymbol),i.currentSymbol=null;i.droppable.selectedSymbols.style.opacity="1";delete i.droppable.sourceElement,i.diagramRenderer.rendererActions=i.removeConstraints(i.diagramRenderer.rendererActions,Nn.DrawSelectorBorder),i.previousSelectedObject&&i.select(i.previousSelectedObject,i.previousSelectedObject.length>1),i.previousSelectedObject=null}}},t.prototype.getBlazorDragLeaveEventArgs=function(e){return e={diagramId:this.element.id,element:Rc(e.element)===$a?{connector:Vc(e.element)}:{node:Vc(e.element)}}},t.prototype.getDropEventArgs=function(e){if(this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode){var t=this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode;e.target=Rc(t)===$a?{connector:Vc(t)}:{node:Vc(t)}}else e.target.diagramId=this.element.id},t.prototype.removeChildInNodes=function(e){if(e){if(e.children)for(var t=0;t<e.children.length;t++)this.removeChildInNodes(this.nameTable[e.children[t]]);var i=this.nodes.indexOf(e);-1!==i&&this.nodes.splice(i,1)}},t.prototype.getBlazorDragEventArgs=function(e){return e={source:Vc(e.source),element:Rc(e.element)===$a?{connector:Vc(e.element)}:{node:Vc(e.element)},cancel:e.cancel,diagramId:this.element.id}},t.prototype.findChild=function(e,t){for(var i,n,r=0;r<e.children.length;r++)(i=t[e.children[r]])&&(i.children&&this.findChild(i,t),i.id=i.id+md(),t[i.id]=i,e.children[r]=i.id,n=new Lh(this,"nodes",i,!0),this.initObject(n,void 0,void 0,!0))},t.prototype.getChildren=function(e,t,i){for(var n,r=0;r<e.children.length;r++)(n=i[e.children[r]])&&(n.children&&(t=this.getChildren(n,t,i)),t[n.id]=xd(n));return t},t.prototype.addChildNodes=function(e){for(var t,i=0;i<e.children.length;i++)(t=this.nameTable[e.children[i]])&&(t.children&&this.addChildNodes(t),this.add(t,!0))},t.prototype.moveNode=function(e){for(var t,i=this.commandHandler.getObjectLayer(e.id),n=i.zIndex,r=i.objects.length,o=0;o<this.layers.length;o++)n===this.layers[o].zIndex&&(t=this.layers[o+1]);if(r>1)this.commandHandler.moveSvgNode(e.id,i.objects[r-2]),this.commandHandler.moveSvgNode(i.objects[r-2],e.id);else if(t){var a=this.commandHandler.getLayer(this.layerZIndexTable[t.zIndex]).objects[0];a?(this.commandHandler.moveSvgNode(e.id,a),this.commandHandler.updateNativeNodeIndex(e.id,a)):this.moveObjectsUp(e,i)}else this.moveObjectsUp(e,i)},t.prototype.moveObjectsUp=function(e,t){for(var i,n=this.layers.length-1;n>=0;n--)if(i=this.layers[n],t.id!==i.id){var r=this.commandHandler.getLayer(this.layerZIndexTable[i.zIndex]).objects[i.objects.length-1];if(r){this.commandHandler.moveSvgNode(e.id,r),this.commandHandler.moveSvgNode(r,e.id);break}}},t.prototype.insertData=function(e){return this.crudOperation(e,"create",this.getNewUpdateNodes("New"))},t.prototype.updateData=function(e){return this.crudOperation(e,"update",this.getNewUpdateNodes("Update"))},t.prototype.removeData=function(e){return this.crudOperation(e,"destroy",this.getDeletedNodes())},t.prototype.crudOperation=function(e,t,i){if(e){var n=this.parameterMap(e,!(e instanceof $a));if(n){var r=e instanceof $a?this.dataSourceSettings.connectionDataSource.crudAction[t]:this.dataSourceSettings.crudAction[t];this.raiseAjaxPost(JSON.stringify(n),r)}return n}var o=i;return this.processCrudCollection(o,this.dataSourceSettings.crudAction[t],this.dataSourceSettings.connectionDataSource.crudAction[t]),o},t.prototype.processCrudCollection=function(e,t,i){if(e.nodes){var n=[],r=void 0;for(r=0;r<e.nodes.length;r++)n.push(this.parameterMap(e.nodes[r],!0));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),t)}if(e.connectors){n=[],r=void 0;for(r=0;r<e.connectors.length;r++)n.push(this.parameterMap(e.connectors[r],!1));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),i)}},t.prototype.parameterMap=function(e,t){var i,n={},r=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(r.id&&(n[r.id]=e.id),r.sourcePointX&&r.sourcePointY&&(n[r.sourcePointX]=e.sourcePoint.x,n[r.sourcePointY]=e.sourcePoint.y),r.targetPointX&&r.targetPointY&&(n[r.targetPointX]=e.targetPoint.x,n[r.targetPointY]=e.targetPoint.y),r.sourceID&&(n[r.sourceID]=e.sourceID),r.targetID&&(n[r.targetID]=e.targetID),r.crudAction&&r.crudAction.customFields&&r.crudAction.customFields.length>0)for(i=0;i<r.crudAction.customFields.length;i++)n[r.crudAction.customFields[i]]=e[r.crudAction.customFields[i]];return n},t.prototype.getNewUpdateNodes=function(e){var t=[],i=[];for(var n in this.nameTable){var r=this.nameTable[n];r.status==e&&(r&&r instanceof $a?(r.status="None",i.push(r)):(r.status="None",t.push(r)))}return{nodes:t,connectors:i}},t.prototype.getDeletedNodes=function(){var e,t=[],i=[];for(e=0;e<this.crudDeleteNodes.length;e++){var n=this.crudDeleteNodes[e];n&&n.segments?i.push(n):n&&t.push(n)}return this.crudDeleteNodes=[],{nodes:t,connectors:i}},t.prototype.raiseAjaxPost=function(e,t){var i=new Q(t,"POST",!0,"application/json"),n=JSON.stringify(JSON.parse(e));i.send(n).then(),i.onSuccess=function(e){}},au([zt("100%")],t.prototype,"width",void 0),au([zt("SVG")],t.prototype,"mode",void 0),au([zt("100%")],t.prototype,"height",void 0),au([Bt({},Us)],t.prototype,"contextMenuSettings",void 0),au([zt(kn.Default)],t.prototype,"constraints",void 0),au([zt(An.Default)],t.prototype,"tool",void 0),au([zt("Top")],t.prototype,"bridgeDirection",void 0),au([zt("transparent")],t.prototype,"backgroundColor",void 0),au([Bt({},Gd)],t.prototype,"snapSettings",void 0),au([Bt({},$d)],t.prototype,"rulerSettings",void 0),au([Bt({},Wd)],t.prototype,"pageSettings",void 0),au([Bt({},Qp)],t.prototype,"serializationSettings",void 0),au([_t([],Lh)],t.prototype,"nodes",void 0),au([zt()],t.prototype,"drawingObject",void 0),au([_t([],$a)],t.prototype,"connectors",void 0),au([zt([])],t.prototype,"basicElements",void 0),au([Bt({},fa)],t.prototype,"tooltip",void 0),au([Bt({},op)],t.prototype,"dataSourceSettings",void 0),au([zt()],t.prototype,"addInfo",void 0),au([zt()],t.prototype,"historyManager",void 0),au([zt()],t.prototype,"nodeTemplate",void 0),au([zt()],t.prototype,"annotationTemplate",void 0),au([zt()],t.prototype,"userHandleTemplate",void 0),au([zt()],t.prototype,"getNodeDefaults",void 0),au([zt()],t.prototype,"nodeDefaults",void 0),au([zt()],t.prototype,"getConnectorDefaults",void 0),au([zt()],t.prototype,"connectorDefaults",void 0),au([zt()],t.prototype,"setNodeTemplate",void 0),au([zt()],t.prototype,"getDescription",void 0),au([zt()],t.prototype,"getCustomProperty",void 0),au([zt()],t.prototype,"getCustomTool",void 0),au([zt()],t.prototype,"getCustomCursor",void 0),au([_t([],tu)],t.prototype,"customCursor",void 0),au([zt()],t.prototype,"updateSelection",void 0),au([Bt({},ru)],t.prototype,"diagramSettings",void 0),au([Bt({},Hh)],t.prototype,"selectedItems",void 0),au([Bt({},Fd)],t.prototype,"scrollSettings",void 0),au([Bt({},lp)],t.prototype,"layout",void 0),au([Bt({},Vs)],t.prototype,"commandManager",void 0),au([Ft()],t.prototype,"dataLoaded",void 0),au([Ft()],t.prototype,"dragEnter",void 0),au([Ft()],t.prototype,"dragLeave",void 0),au([Ft()],t.prototype,"dragOver",void 0),au([Ft()],t.prototype,"click",void 0),au([Ft()],t.prototype,"historyChange",void 0),au([Ft()],t.prototype,"historyStateChange",void 0),au([Ft()],t.prototype,"doubleClick",void 0),au([Ft()],t.prototype,"textEdit",void 0),au([Ft()],t.prototype,"scrollChange",void 0),au([Ft()],t.prototype,"selectionChange",void 0),au([Ft()],t.prototype,"sizeChange",void 0),au([Ft()],t.prototype,"connectionChange",void 0),au([Ft()],t.prototype,"sourcePointChange",void 0),au([Ft()],t.prototype,"targetPointChange",void 0),au([Ft()],t.prototype,"propertyChange",void 0),au([Ft()],t.prototype,"positionChange",void 0),au([Ft()],t.prototype,"keyUp",void 0),au([Ft()],t.prototype,"keyDown",void 0),au([Ft()],t.prototype,"animationComplete",void 0),au([Ft()],t.prototype,"rotateChange",void 0),au([Ft()],t.prototype,"collectionChange",void 0),au([Ft()],t.prototype,"onUserHandleMouseDown",void 0),au([Ft()],t.prototype,"onUserHandleMouseUp",void 0),au([Ft()],t.prototype,"onUserHandleMouseEnter",void 0),au([Ft()],t.prototype,"onUserHandleMouseLeave",void 0),au([Ft()],t.prototype,"segmentCollectionChange",void 0),au([Ft()],t.prototype,"onImageLoad",void 0),au([Ft()],t.prototype,"expandStateChange",void 0),au([Ft()],t.prototype,"created",void 0),au([Ft()],t.prototype,"mouseEnter",void 0),au([Ft()],t.prototype,"mouseLeave",void 0),au([Ft()],t.prototype,"mouseOver",void 0),au([Ft()],t.prototype,"contextMenuOpen",void 0),au([Ft()],t.prototype,"contextMenuBeforeItemRender",void 0),au([Ft()],t.prototype,"contextMenuClick",void 0),au([Ft()],t.prototype,"commandExecute",void 0),au([_t([],Vp)],t.prototype,"layers",void 0),au([Ft()],t.prototype,"drop",void 0),t}(si),hu=(function(){function e(e){this.diagram=e}e.prototype.exportDiagram=function(e){var t,i,n,r,o="data",a=[],s=e.margin||{},l=e&&e.region?e.region:"Content";r=e&&e.mode?e.mode:"Download";var c=this.getDiagramBounds(l,e);e.bounds&&(i=!0,c.x=e.bounds.x?e.bounds.x:c.x,c.y=e.bounds.y?e.bounds.y:c.y,c.width=e.bounds.width||c.width,c.height=e.bounds.height||c.height),s={top:void 0!==s.top?s.top:25,bottom:void 0!==s.bottom?s.bottom:25,right:void 0!==s.right?s.right:25,left:void 0!==s.left?s.left:25};this.diagram.nodes;"PageSettings"!==l&&(c.x-=s.left,c.y-=s.top,c.width+=s.left+s.right,c.height+=s.top+s.bottom);var h=e.fileName||"diagram";if("SVG"!==e.format){if(null!==(o=this.setCanvas(e,c,s,r,i,l,h)))return o}else{t=e.format,e.bounds=c,e.margin=s;var d=n=this.diagramAsSvg(e,s);if("Data"===r)return w()&&"SVG"===e.format?(new XMLSerializer).serializeToString(d):n;var p=(new XMLSerializer).serializeToString(d);a.push(p)}if("Download"===r&&null!==o)for(var u=0;u<a.length;u++){var f=new Blob([a[u]],{type:"application/octet-stream"});if("msie"===le.info.name)window.navigator.msSaveOrOpenBlob(f,h+"."+t);else{var g=nd("a",{download:h+"."+t}),m=URL.createObjectURL(f);g.href=m;var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),g.dispatchEvent(y)}}return null},e.prototype.setCanvas=function(e,t,i,n,r,o,a){var s;e.bounds=t,e.region=o;this.setScaleValueforCanvas(e,t);var l=this.diagramAsCanvas({bounds:t,margin:i,region:o,scaleX:e.scaleX,scaleY:e.scaleY,scaleOffsetX:e.scaleOffsetX,scaleOffsetY:e.scaleOffsetY},r),c=s=l.toDataURL();return"Data"===n?s:(this.canvasMultiplePage(e,l,i,c,a),null)},e.prototype.canvasMultiplePage=function(e,t,i,n,r){var o=this,a=[],s=e.format||"JPG";if(e.multiplePage){if(e.pageHeight=e.pageHeight?e.pageHeight:this.diagram.pageSettings.height,e.pageWidth=e.pageWidth?e.pageWidth:this.diagram.pageSettings.width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,i=e.margin||{},e.pageOrientation&&("Landscape"===e.pageOrientation&&e.pageHeight>e.pageWidth||"Portrait"===e.pageOrientation&&e.pageWidth>e.pageHeight)){var l=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=l}e.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var c=nd("img",{id:this.diagram.element.id+"_printImage",src:n});c.onload=function(){a=o.getMultipleImage(c,e,!0),o.exportImage(a,r,s,n)}}else a=[n],this.exportImage(a,r,s,n)},e.prototype.exportImage=function(e,t,i,n){for(var r=[],o=e instanceof HTMLElement?0:e.length,a=0;a<o;a++){for(var s=e[a].replace(/^data:[a-z]*;,/,"").split(","),l=atob(s[1]),c=new ArrayBuffer(l.length),h=new Uint8Array(c),d=0;d<l.length;d++)h[d]=l.charCodeAt(d);r.push(c)}for(var p=function(e){var n=new Blob([r[e]],{type:"application/octet-stream"});if("msie"===le.info.name)window.navigator.msSaveOrOpenBlob(n,t+"."+i);else{var o=nd("a",{download:t+"."+i}),a=URL.createObjectURL(n);o.href=a;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout((function(){o.dispatchEvent(s)}),5*(e+1))}},u=0;u<r.length;u++)p(u)},e.prototype.getObjectsBound=function(e){for(var t,i=0,n=this.diagram.nodes;i<n.length;i++){var r=n[i];r.visible&&(("SVG"===e.format||r instanceof gr||r instanceof Ta)&&("SVG"!==e.format||r instanceof Ta)||(t=t?t.uniteRect(r.wrapper.outerBounds):r.wrapper.outerBounds))}for(var o=0,a=this.diagram.connectors;o<a.length;o++){var s=a[o];s.visible&&(t=t?t.uniteRect(s.wrapper.outerBounds):s.wrapper.outerBounds)}return t||new hn(0,0,0,0)},e.prototype.getDiagramBounds=function(e,t){var i=this.getObjectsBound(t),n=i.left,r=i.top,o=i.right-i.left,a=i.bottom-i.top;"Content"!==e&&(this.diagram.pageSettings&&this.diagram.pageSettings.multiplePage?(n=i.left,r=i.top,this.diagram.pageSettings.width&&(n=Math.floor(n/this.diagram.pageSettings.width)*this.diagram.pageSettings.width,o=Math.ceil(i.right/this.diagram.pageSettings.width)*this.diagram.pageSettings.width-n),this.diagram.pageSettings.height&&(r=Math.floor(r/this.diagram.pageSettings.height)*this.diagram.pageSettings.height,a=Math.ceil(i.bottom/this.diagram.pageSettings.height)*this.diagram.pageSettings.height-r),0===i.width&&null!==this.diagram.pageSettings.width&&(o=this.diagram.pageSettings.width),0===i.height&&null!==this.diagram.pageSettings.height&&(a=this.diagram.pageSettings.height)):(this.diagram.pageSettings.width&&(n=0,o=this.diagram.pageSettings.width),this.diagram.pageSettings.height&&(r=0,a=this.diagram.pageSettings.height)));var s=new hn;return s.x=n,s.y=r,s.width=o,s.height=a,s},e.prototype.setScaleValueforCanvas=function(e,t){var i="scaleX";e[i]=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||this.diagram.pageSettings.height,e.pageWidth=e.pageWidth||this.diagram.pageSettings.width;var n=e.pageOrientation||this.diagram.pageSettings.orientation;if(n||(n="Portrait"),"Portrait"===n){if(e.pageWidth>e.pageHeight){var r=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=r}}else if(e.pageHeight>e.pageWidth){r=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=r}e.pageWidth&&e.pageHeight&&!e.multiplePage&&(e.stretch="Meet");var o=e.pageHeight||t.height,a=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e[i]=a/t.width,e.scaleY=o/t.height,"Meet"===e.stretch?(e[i]=e.scaleY=Math.min(e[i],e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e[i])/2,e.scaleOffsetX=(e.pageWidth-t.width*e[i])/2):"Slice"===e.stretch&&(e[i]=e.scaleY=Math.max(e[i],e.scaleY)),t.width=a,t.height=o),t.x*=e[i],t.y*=e.scaleY},e.prototype.diagramAsSvg=function(e,t){var i=this.diagram.createSvg(this.diagram.element.id+"_diagram_svg",e.bounds.width,e.bounds.height);document.body.appendChild(i);var n=rd("g",{id:this.diagram.element.id+"_pageBackground"}),r=e&&e.region?e.region:"Content",o=this.getDiagramBounds(r,e),a=o.x,s=o.y,l=o.width,c=o.height;i.appendChild(n);var h={x:String(a),y:String(s),width:String(l),height:String(c)};hd(n,h),this.setTransform(n,e.bounds,t);var d=document.getElementById(this.diagram.element.id+"gradient_pattern");d&&i.appendChild(d),h={x:String(a),y:String(s),width:String(l+t.left+t.right),height:String(c+t.top+t.bottom)};var p=document.getElementById(this.diagram.element.id+"_backgroundImageLayer").cloneNode(!0);hd(p,h),i.appendChild(p),this.setTransform(p,o,t);var u=document.getElementById(this.diagram.element.id+"_backgroundLayerrect").cloneNode(!0);if(hd(u,h),i.appendChild(u),this.setTransform(u,o,t),"SVG"===this.diagram.mode){var f=void 0,g=void 0,m=Uh(this.diagram.element.id);for(i.appendChild(m.getElementById(this.diagram.diagramLayer.id).cloneNode(!0)),g=0;g<i.childNodes.length;g++)(f=i.childNodes[g]).id===this.diagram.element.id+"_diagramLayer"&&this.setTransform(f,o,t)}else{n=rd("g",{id:this.diagram.element.id+"_diagramLayer"}),i.appendChild(n),this.setTransform(n,e.bounds,t);var y=new Nd("",null,!0),v=id(this.diagram.element.id);this.diagram.renderDiagramElements(i,y,v,!1)}return document.body.removeChild(i),i},e.prototype.setTransform=function(e,t,i){e.setAttribute("transform","translate("+(-t.x+i.left)+", "+(-t.y+i.top)+")")},e.prototype.diagramAsCanvas=function(e,t){var i=e.bounds,n=e.margin,r=e&&e.region?e.region:"Content",o=this.getDiagramBounds(r,e),a=this.diagram.pageSettings.background.color,s=Rd.createCanvas(this.diagram.element.id+"_diagram",e.bounds.width,e.bounds.height),l=s.getContext("2d");l.translate(-i.x,-i.y),l.save(),l.fillStyle=this.diagram.pageSettings.background.color,i="Content"===r?o:i,l.fillRect(i.x,i.y,i.width,i.height);var c=this.diagram.pageSettings.background;if(c&&c.source){o=this.getDiagramBounds(r,e);var h=new Image;h.src=c.source;var d=o.width/h.width,p=o.height/h.height,u=o.x,f=o.y,g=o.width,m=o.height,y=this.isImageExportable(c);if("None"!==c.scale&&"None"!==c.align){var v="Meet"===c.scale?Math.min(d,p):Math.max(d,p);g=v*h.width,m=v*h.height,c.align.indexOf("xmid")>-1?u+=(o.width-g)/2:c.align.indexOf("xmax")>-1&&(u=u+o.width-g),c.align.indexOf("ymid")>-1?f+=(o.height-m)/2:c.align.indexOf("ymax")>-1&&(f=f+o.height-m),"none"!==this.diagram.pageSettings.background.color&&"transparent"!==this.diagram.pageSettings.background.color||(l.fillStyle="white",l.fillRect(o.x*e.scaleX,o.y*e.scaleY,o.width*e.scaleX,o.height*e.scaleY)),y&&l.drawImage(h,u,f,v*h.width,v*h.height)}else y&&l.drawImage(h,u,f,o.width,o.height)}else l.fillStyle="transparent"===a?"white":a,l.fillRect(o.x*e.scaleX-n.left,o.y*e.scaleY-n.top,o.width*e.scaleX+n.left+n.right,e.scaleY*o.height+n.top+n.bottom);var b=this.diagram.pageSettings.background.color,w=this.diagram.pageSettings.width;w&&(l.strokeStyle="none"===b?"transparent":b,l.lineWidth=w,l.strokeRect(o.x*e.scaleX,o.y*e.scaleY,o.width*e.scaleX,o.height*e.scaleY)),l.restore();var x=id(this.diagram.element.id),S=new Nd("",null,!1);return this.updateObjectValue(e.scaleX,e.scaleOffsetX,e.scaleOffsetY,!0),this.diagram.renderDiagramElements(s,S,x,!1,!0),this.updateObjectValue(e.scaleX,e.scaleOffsetX,e.scaleOffsetY,!1),s},e.prototype.updateWrapper=function(e,t,i,n,r){if(e&&e.length>0)for(var o=0;o<e.length;o++)e[o].children&&this.updateWrapper(e[o].children,t,i,n,r),e[o].exportScaleValue.x=t,e[o].exportScaleValue.y=t,e[o].exportScaleOffset.x=i,e[o].exportScaleOffset.y=n,e[o].isExport=r},e.prototype.updateObjectValue=function(e,t,i,n){for(var r,o=0;o<this.diagram.nodes.length;o++)r=this.diagram.nodes[o].wrapper,this.updateWrapper(r.children,e,t,i,n),r.exportScaleValue.x=e,r.exportScaleValue.y=e,r.exportScaleOffset.x=t,r.exportScaleOffset.y=i,r.isExport=n;for(var a=0;a<this.diagram.connectors.length;a++){r=this.diagram.connectors[a].wrapper;for(var s=0;s<r.children.length;s++)r.children[s].isExport=n,n&&(r.children[s].exportScaleValue.x=e,r.children[s].exportScaleValue.y=e,r.children[s].exportScaleOffset.x=t,r.children[s].exportScaleOffset.y=i)}},e.prototype.isImageExportable=function(e){var t,i=!0;if(e.source)try{var n=(t=Rd.createCanvas(this.diagram.element.id+"temp_canvas",100,100)).getContext("2d");n.save();var r=new Image;r.src=e.source,n.drawImage(r,0,0,100,100),n.restore(),t.toDataURL()}catch(o){i=!1}return i},e.prototype.getPrintCanvasStyle=function(e,t){var i=0,n=0,r=new Zi;if(i=e.width,n=e.height,(t.pageHeight||t.pageWidth)&&(n=t.pageHeight?t.pageHeight:n,i=t.pageWidth?t.pageWidth:i),t.pageOrientation&&("Landscape"===t.pageOrientation&&n>i||"Portrait"===t.pageOrientation&&i>n)){var o=i;i=n,n=o}return r.height=n,r.width=i,r},e.prototype.getMultipleImage=function(e,t,i){var n,r,o=[],a=nd("div",{}),s=this.getPrintCanvasStyle(e,t),l=t.margin,c=l.left,h=l.top,d=l.right,p=l.bottom,u=0;n=s.width+u,r=s.height+0;var f=0,g=0;if(t&&t.multiplePage){a.style.height="auto",a.style.width="auto";var m=e.height,y=e.width,v=0,b=0,w=void 0,x=0,S=0,C=void 0,P=void 0;do{do{x=s.width,S=s.height,f+s.width>=y&&(x=y-f),g+s.height>=m&&(S=m-g),(C=(P=Rd.createCanvas(this.diagram.element.id+"_multiplePrint",s.width,s.height)).getContext("2d")).drawImage(e,u+f+c,0+g+h,x-d-c,S-p-h,0+c,0+h,x-d-c,S-p-h),f+s.width>=y&&(f-=f-y),w=P.toDataURL(),C.restore(),f+=n,i?o.push(w):this.printImage(a,w,v+""+b,n+"px;",r+"px;"),v++}while(f<y);b++,v=u=f=0,g+s.height>=m&&(g-=g-m),g+=r}while(g<m)}else{var O,E,T=this.getPrintCanvasStyle(e,t);O=T.width,E=T.height;C=void 0,P=void 0,w=void 0;(C=(P=Rd.createCanvas(this.diagram.element.id+"_diagram",O,E)).getContext("2d")).drawImage(e,0+c,0+h,e.width-(d+c),e.height-(h+p),0+c,0+h,O-(d+c),E-(h+p)),w=P.toDataURL(),C.restore(),i?o.push(w):this.printImage(a,w,0)}return i?o:a},e.prototype.printImage=function(e,t,i,n,r){var o={class:"e-diagram-print-page",style:"width:"+n+"height:"+r},a=nd("img",o),s=nd("div",o);pd(a,o={id:this.diagram.element.id+"_multiplePrint_img"+i,style:"float:left",src:t}),s.appendChild(a),e.appendChild(s)},e.prototype.print=function(e){e.mode="Data";var t=this.exportDiagram(e);this.printImages(t,e)},e.prototype.printImages=function(e,t){var i=this,n={id:this.diagram.element.id+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var r=nd("img",n);r.onload=function(){var e=i.getMultipleImage(r,t),n=window.open("");null!=n&&e instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),n.document.write('<BODY onload="setTimeout(function(){window.print();}, 100)">'),n.document.write("<center>"+e.innerHTML+"</center>"),n.document.close())}},e.prototype.getDiagramContent=function(e){var t=document.getElementById(this.diagram.element.id+"content"),i=t.scrollLeft,n=t.scrollTop,r=this.diagram.scrollSettings.currentZoom,o=this.diagram.scroller.horizontalOffset,a=this.diagram.scroller.verticalOffset,s=Number(String(this.diagram.width).split("px")[0]),l=Number(String(this.diagram.height).split("px")[0]),c=this.getDiagramBounds("",{});this.diagram.scroller.zoom(1/r);var h,d;h=c.x,d=c.y,this.diagram.scroller.transform={tx:-h,ty:-d,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=-h,this.diagram.scroller.verticalOffset=-d,this.diagram.scroller.setSize(),this.diagram.setSize(c.width,c.height);var p=this.diagram.snapSettings.constraints;this.diagram.snapSettings.constraints=this.diagram.snapSettings.constraints&~Sn.ShowLines,this.diagram.dataBind(),this.diagram.clearSelection(),e=e||document.styleSheets;for(var u="",f=0;f<e.length;f++)(e[f].href||"string"===typeof e[f])&&(u+="<link href='"+(e[f].href||e[f])+"' rel='stylesheet' />");var g=document.getElementById(this.diagram.element.id+"content").innerHTML;return g=(g=u+"<body style=\"margin: 0px; padding: 0px\"><div style='margin-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;'>"+g+"</div></body>").replace(/ transform: t/g," -webkit-transform: t"),this.diagram.setSize(s,l),this.diagram.scroller.zoom(r/this.diagram.scrollSettings.currentZoom),this.diagram.snapSettings.constraints=p,this.diagram.dataBind(),i||n?this.diagram.setOffset(i,n):(this.diagram.scroller.transform={tx:o/this.diagram.scroller.currentZoom,ty:a/this.diagram.scroller.currentZoom,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=o,this.diagram.scroller.verticalOffset=a),this.diagram.renderSelector(!1),Uc()?g.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):g},e.prototype.exportImages=function(e,t){var i=this,n=t&&t.region?t.region:"Content",r=t.margin||{};r={top:isNaN(r.top)?0:r.top,bottom:isNaN(r.bottom)?0:r.bottom,left:isNaN(r.left)?0:r.left,right:isNaN(r.right)?0:r.right};var o=this.getDiagramBounds(n,{});t.bounds&&(o.x=isNaN(t.bounds.x)?o.x:t.bounds.x,o.y=isNaN(t.bounds.y)?o.y:t.bounds.y,o.width=t.bounds.width||o.width,o.height=t.bounds.height||o.height);var a=document.createElement("img");pd(a,{src:e});var s=this;a.onload=function(){var n=Rd.createCanvas(s.diagram.element.id+"innerImage",o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l=n.getContext("2d");if(l.fillStyle=s.diagram.pageSettings.background.color,l.fillRect(0,0,o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l.drawImage(a,0,0,o.width,o.height,r.left,r.top,o.width,o.height),e=n.toDataURL(),t.printOptions)s.printImages(e,t);else{l.restore();var c=t.fileName||"diagram";i.canvasMultiplePage(t,n,r,e,c)}}},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"PrintandExport"}}(),function(){function e(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"===typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,i,n){return(e=e||this.dataManager)?e.executeQuery(this,t,i,n):uu.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):uu.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return"function"===typeof t?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},e.prototype.distinct=function(e){return this.distincts="string"===typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.expand=function(e){return this.expands="string"===typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,i,n,r){t=t?t.toLowerCase():null;var o=null;return"string"===typeof e?o=new du(e,t,i,n,r):e instanceof du&&(o=e),this.queries.push({fn:"onWhere",e:o}),this},e.prototype.search=function(e,t,i,n,r){"string"===typeof t&&(t=[t]),i&&"none"!==i||(i="contains");var o=uu.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:n,ignoreAccent:r,comparer:o}}),this},e.prototype.sortBy=function(t,i,n){var r,o,a="ascending";if("string"===typeof t&&uu.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),i="descending"),i&&"string"!==typeof i||(a=i?i.toLowerCase():"ascending",i=uu.fnSort(i)),n){r=e.filterQueries(this.queries,"onSortBy");for(var s=0;s<r.length;s++)if("string"===typeof(o=r[s].e.fieldName)){if(o===t)return this}else if(o instanceof Array)for(var l=0;l<o.length;l++)if(o[l]===t||t.toLowerCase()===o[l]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:i,direction:a}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"===typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.isCountRequired=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter((function(e){return e.fn===t}))},e.filterQueryLists=function(e,t){for(var i=e.filter((function(e){return-1!==t.indexOf(e.fn)})),n={},r=0;r<i.length;r++)n[i[r].fn]||(n[i[r].fn]=i[r].e);return n},e}()),du=function(){function e(t,i,n,r,o){return void 0===r&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"===typeof t?(this.field=t,this.operator=i.toLowerCase(),this.value=n,this.ignoreCase=r,this.ignoreAccent=o,this.isComplex=!1,this.comparer=uu.fnOperators.processOperator(this.operator)):(t instanceof e&&n instanceof e||n instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[t],n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this}return e.and=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,i,n,r,o){return e.combine(this,t,i,n,"and",r,o)},e.or=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,i,n,r,o){return e.combine(this,t,i,n,"or",r,o)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],i=0,n=e.length;i<n;i++)t.push(this.fromJSONData(e[i]));return t}var r=e;return this.fromJSONData(r)},e.prototype.validate=function(e){var t,i,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,uu.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var r=0;r<n.length;r++)if(i=n[r].validate(e),t){if(!i)return!1}else if(i)return!0;return t},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}},e.combinePredicates=function(t,i){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],i,t.slice(1))},e.combine=function(t,i,n,r,o,a,s){return i instanceof e?e[o](t,i):"string"===typeof i?e[o](t,new e(i,n,r,a,s)):uu.throwError("Predicate - "+o+" : invalid arguments")},e.fromJSONData=function(t){for(var i=t.predicates||[],n=i.length,r=[],o=0;o<n;o++)r.push(this.fromJSONData(i[o]));return t.isComplex?new e(r[0],t.condition,r.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},e}(),pu={GroupGuid:"{271bbba0-1ee7}"},uu=function(){function e(){}return e.getValue=function(e,t){return"function"===typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.fnSort=function(t){return"ascending"===(t=t?e.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return f(e)&&f(t)||null===t||void 0===t?-1:"string"===typeof e?e.localeCompare(t):null===e||void 0===e?1:e-t},e.fnDescending=function(e,t){return f(e)&&f(t)?-1:null===t||void 0===t?1:"string"===typeof e?-1*e.localeCompare(t):null===e||void 0===e?-1:t-e},e.extractFields=function(e,t){for(var i={},n=0;n<t.length;n++)i=this.setValue(t[n],this.getObject(t[n],e),i);return i},e.select=function(e,t){for(var i=[],n=0;n<e.length;n++)i.push(this.extractFields(e[n],t));return i},e.group=function(t,i,n,r,o,a){r=r||1;var s=t;if(s.GroupGuid===pu.GroupGuid){for(var l=function(e){if(f(o))s[e].items=c.group(s[e].items,i,n,s.level+1,null,a),s[e].count=s[e].items.length;else{var t,r=o.filter((function(t){return t.key===s[e].key}));t=o.indexOf(r[0]),s[e].items=c.group(s[e].items,i,n,s.level+1,o[t].items,a),s[e].count=o[t].count}},c=this,h=0;h<s.length;h++)l(h);return s.childLevels+=1,s}var d={},p=[];p.GroupGuid=pu.GroupGuid,p.level=r,p.childLevels=0,p.records=s;for(var u=function(e){var t=g.getVal(s,e,i);if(f(a)||(t=a(t,i)),!d[t]&&(d[t]={key:t,count:0,items:[],aggregates:{},field:i},p.push(d[t]),!f(o))){var n=o.filter((function(e){return e.key===d[t].key}));d[t].count=n[0].count}d[t].count=f(o)?d[t].count+=1:d[t].count,d[t].items.push(s[e])},g=this,m=0;m<s.length;m++)u(m);if(n&&n.length){var y=function(t){for(var i={},r=void 0,a=n,s=0;s<n.length;s++)if(r=e.aggregates[n[s].type],f(o))r&&(i[a[s].field+" - "+a[s].type]=r(p[t].items,a[s].field));else{var l=o.filter((function(e){return e.key===p[t].key}));r&&(i[a[s].field+" - "+a[s].type]=r(l[0].items,a[s].field))}p[t].aggregates=i};for(m=0;m<p.length;m++)y(m)}return s.length&&p||s},e.buildHierarchy=function(e,t,i,n,r){var o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++){(a[s=this.getObject(e,n[o])]||(a[s]=[])).push(n[o])}for(o=0;o<i.length;o++){var s=this.getObject(r||e,i[o]);i[o][t]=a[s]}},e.getFieldList=function(e,t,i){if(void 0===i&&(i=""),void 0===t||null===t)return this.getFieldList(e,[],i);for(var n=e,r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];"object"!==typeof n[a]||n[a]instanceof Array?t.push(i+a):this.getFieldList(n[a],t,i+a+".")}return t},e.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf("."))return t[e];for(var i=t,n=e.split("."),r=0;r<n.length&&null!=i;r++)i=i[n[r]];return i}},e.setValue=function(e,t,i){var n,r,o=e.toString().split("."),a=i||{},s=a,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?s[r]=void 0===t?void 0:t:f(s[r])&&(s[r]={}),s=s[r];return a},e.sort=function(e,t,i){if(e.length<=1)return e;var n=parseInt((e.length/2).toString(),10),r=e.slice(0,n),o=e.slice(n);return r=this.sort(r,t,i),o=this.sort(o,t,i),this.merge(r,o,t,i)},e.ignoreDiacritics=function(t){return"string"!==typeof t?t:t.split("").map((function(t){return t in e.diacritics?e.diacritics[t]:t})).join("")},e.merge=function(e,t,i,n){for(var r,o=[];e.length>0||t.length>0;)r=e.length>0&&t.length>0?n?n(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,o.push(r.shift());return o},e.getVal=function(e,t,i){return i?this.getObject(i,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"===typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,i,n){if(t in e){var r=e[t](i,n);f(r)||(i=r)}return i},e.getAddParams=function(t,i,n){var r={};return e.callAdaptorFunction(t,"addParams",{dm:i,query:n,params:n.params,reqParams:r}),r},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(t){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),t=n[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]}))},e.isNull=function(e){return void 0===e||null===e},e.getItemFromComparer=function(t,i,n){var r,o,a,s=0,l="string"===typeof e.getVal(t,0,i);if(t.length)for(;f(r)&&s<t.length;)r=e.getVal(t,s,i),a=t[s++];for(;s<t.length;s++)f(o=e.getVal(t,s,i))||(l&&(r=+r,o=+o),n(r,o)>0&&(r=o,a=t[s]));return a},e.distinct=function(t,i,n){n=!f(n)&&n;var r,o=[],a={};return t.forEach((function(s,l){(r="object"===typeof t[l]?e.getVal(t,l,i):t[l])in a||(o.push(n?t[l]:r),a[r]=1)})),o},e.serverTimezoneOffset=null,e.timeZoneHandling=!0,e.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},e.aggregates={sum:function(t,i){for(var n,r=0,o="number"!==typeof e.getVal(t,0,i),a=0;a<t.length;a++)n=e.getVal(t,a,i),isNaN(n)||null===n||(o&&(n=+n),r+=n);return r},average:function(t,i){return e.aggregates.sum(t,i)/t.length},min:function(t,i){var n;return"function"===typeof i&&(n=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,n||e.fnAscending))},max:function(t,i){var n;return"function"===typeof i&&(n=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,n||e.fnDescending))},truecount:function(e,t){return new xu(e).executeLocal((new hu).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new xu(e).executeLocal((new hu).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},e.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},e.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},e.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},e.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},e.diacritics={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"},e.fnOperators={equal:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?e.toLowerCase(t)===e.toLowerCase(i):t===i},notequal:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),!e.fnOperators.equal(t,i,n)},lessthan:function(t,i,n){return n?e.toLowerCase(t)<e.toLowerCase(i):t<i},greaterthan:function(t,i,n){return n?e.toLowerCase(t)>e.toLowerCase(i):t>i},lessthanorequal:function(t,i,n){return n?e.toLowerCase(t)<=e.toLowerCase(i):t<=i},greaterthanorequal:function(t,i,n){return n?e.toLowerCase(t)>=e.toLowerCase(i):t>=i},contains:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?!f(t)&&!f(i)&&-1!==e.toLowerCase(t).indexOf(e.toLowerCase(i)):!f(t)&&!f(i)&&-1!==t.toString().indexOf(i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?t&&i&&e.startsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.startsWith(t,i)},endswith:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?t&&i&&e.endsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.endsWith(t,i)},processSymbols:function(t){var i=e.operatorSymbols[t];return i?e.fnOperators[i]:e.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){var i=e.fnOperators[t];return i||e.fnOperators.processSymbols(t)}},e.parse={parseJson:function(t){return"string"===typeof t?t=JSON.parse(t,e.parse.jsonReviver):t instanceof Array?e.parse.iterateAndReviveArray(t):"object"===typeof t&&null!==t&&e.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var i=0;i<t.length;i++)"object"===typeof t[i]&&null!==t[i]?e.parse.iterateAndReviveJson(t[i]):"string"!==typeof t[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[i])?t[i]=e.parse.parseJson(t[i]):t[i]=e.parse.jsonReviver("",t[i])},iterateAndReviveJson:function(t){for(var i,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];e.startsWith(o,"__")||("object"===typeof(i=t[o])?i instanceof Array?e.parse.iterateAndReviveArray(i):i&&e.parse.iterateAndReviveJson(i):t[o]=e.parse.jsonReviver(t[o],i))}},jsonReviver:function(t,i){if("string"===typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),r=e.timeZoneHandling?e.serverTimezoneOffset:null;if(n)return e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),r,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=i.indexOf("Z")>-1||i.indexOf("z")>-1,a=i.split(/[^0-9.]/);if(o)i=e.dateParse.toTimeZone(new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),e.serverTimezoneOffset,!1);else{var s=new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),l=parseInt(a[6],10),c=parseInt(a[7],10);if(isNaN(l)&&isNaN(c))return s;i.indexOf("+")>-1?s.setHours(s.getHours()-l,s.getMinutes()-c):s.setHours(s.getHours()+l,s.getMinutes()+c),i=e.dateParse.toTimeZone(s,e.serverTimezoneOffset,!1)}null==e.serverTimezoneOffset&&(i=e.dateParse.addSelfOffset(i))}}return i},isJson:function(t){return"string"===typeof t[0]?t:e.parse.parseJson(t)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(t,i){return e.isPlainObject(t)?e.parse.jsonReplacer(t,i):t instanceof Array?e.parse.arrayReplacer(t):t instanceof Date?e.parse.jsonReplacer({val:t},i).val:t},jsonReplacer:function(t,i){for(var n,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];if((n=t[a])instanceof Date){var s=n;null==e.serverTimezoneOffset?t[a]=e.dateParse.toTimeZone(s,null).toJSON():(s=new Date(+s+36e5*e.serverTimezoneOffset),t[a]=e.dateParse.toTimeZone(e.dateParse.addSelfOffset(s),null).toJSON())}}return t},arrayReplacer:function(t){for(var i=0;i<t.length;i++)e.isPlainObject(t[i])?t[i]=e.parse.jsonReplacer(t[i]):t[i]instanceof Date&&(t[i]=e.parse.jsonReplacer({date:t[i]}).date);return t},jsonDateReplacer:function(t,i){if("value"===t&&i){if("string"===typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(n)i=e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var r=i.split(/[^0-9]/);i=e.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(i instanceof Date)return i=e.dateParse.addSelfOffset(i),null===e.serverTimezoneOffset?e.dateParse.toTimeZone(e.dateParse.addSelfOffset(i),null).toJSON():(i=e.dateParse.toTimeZone(i,i.getTimezoneOffset()/60*2-e.serverTimezoneOffset,!1)).toJSON()}return i}},e.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(t,i,n){if(null===i)return t;var r=n?e.dateParse.toUTC(t):t;return new Date(+r-36e5*i)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),n=i>=0?"+":"-",r=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+n+r(i/60)+":"+r(i%60)}},e}(),fu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gu=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,i,n){return e},e}(),mu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fu(t,e),t.prototype.processQuery=function(e,t){for(var i,n,r=e.dataSource.json.slice(0),o=r.length,a=!0,s={},l=0;l<t.queries.length;l++)i=this[(n=t.queries[l]).fn].call(this,r,n.e,t),"onAggregates"===n.fn?s[n.e.field+" - "+n.e.type]=i:r=void 0!==i?i:r,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(a=!1),a&&(o=r.length);return t.isCountRequired&&(r={result:r,count:o,aggregates:s}),r},t.prototype.batchRequest=function(e,t,i){var n,r=t.deletedRecords.length;for(n=0;n<t.addedRecords.length;n++)this.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)this.update(e,i.key,t.changedRecords[n]);for(n=0;n<r;n++)this.remove(e,i.key,t.deletedRecords[n]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter((function(e){if(t)return t.validate(e)})):e},t.prototype.onAggregates=function(e,t){var i=uu.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&uu.getFieldList(e[0],t.fieldNames),e.filter((function(e){for(var i=0;i<t.fieldNames.length;i++)if(t.comparer.call(e,uu.getObject(t.fieldNames[i],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1}))):e},t.prototype.onSortBy=function(e,t,i){if(!e||!e.length)return e;var n,r=uu.getValue(t.fieldName,i);if(!r)return e.sort(t.comparer);if(r instanceof Array){for(var o=(r=r.slice(0)).length-1;o>=0;o--)r[o]&&(n=t.comparer,uu.endsWith(r[o]," desc")&&(n=uu.fnSort("descending"),r[o]=r[o].replace(" desc","")),e=uu.sort(e,r[o],n));return e}return uu.sort(e,r,t.comparer)},t.prototype.onGroup=function(e,t,i){if(!e||!e.length)return e;var n=hu.filterQueries(i.queries,"onAggregates"),r=[];if(n.length)for(var o=void 0,a=0;a<n.length;a++)o=n[a].e,r.push({type:o.type,field:uu.getValue(o.field,i)});return uu.group(e,uu.getValue(t.fieldName,i),r,null,null,t.comparer)},t.prototype.onPage=function(e,t,i){var n=uu.getValue(t.pageSize,i),r=(uu.getValue(t.pageIndex,i)-1)*n,o=r+n;return e&&e.length?e.slice(r,o):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(uu.getValue(t.start),uu.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,uu.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(uu.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?uu.select(e,uu.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t,i,n,r){return f(r)?e.dataSource.json.push(t):e.dataSource.json.splice(r,0,t)},t.prototype.remove=function(e,t,i,n){var r,o=e.dataSource.json;for("object"!==typeof i||i instanceof Date||(i=uu.getObject(t,i)),r=0;r<o.length&&uu.getObject(t,o[r])!==i;r++);return r!==o.length?o.splice(r,1):null},t.prototype.update=function(e,t,i,n){var r,o,a=e.dataSource.json;for(f(t)||(o=c(t,i)),r=0;r<a.length&&(f(t)||c(t,a[r])!==o);r++);return r<a.length?p(a[r],i):null},t}(gu),yu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fu(t,e),t.prototype.processQuery=function(e,t,i){var n,r,o=this.getQueryRequest(t),a=hu.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=t.params,l=e.dataSource.url,c=null,h=this.options,d={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in a?(n=a.onPage,r=((r=uu.getValue(n.pageIndex,t))-1)*(c=uu.getValue(n.pageSize,t))):"onRange"in a&&(r=(n=a.onRange).start,c=n.end-n.start);for(var p=0;p<o.sorts.length;p++)n=uu.getValue(o.sorts[p].e.fieldName,t),d.sorts.push(uu.callAdaptorFunction(this,"onEachSort",{name:n,direction:o.sorts[p].e.direction},t));i&&(n=this.getFiltersFrom(i,t))&&d.filters.push(uu.callAdaptorFunction(this,"onEachWhere",n.toJson(),t));for(p=0;p<o.filters.length;p++){d.filters.push(uu.callAdaptorFunction(this,"onEachWhere",o.filters[p].e.toJson(),t));for(var u=0,f="object"===typeof d.filters[p]?Object.keys(d.filters[p]):[];u<f.length;u++){var g=f[u];uu.isNull(d[g])&&delete d[g]}}for(p=0;p<o.searches.length;p++)n=o.searches[p].e,d.searches.push(uu.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},t));for(p=0;p<o.groups.length;p++)d.groups.push(uu.getValue(o.groups[p].e.fieldName,t));for(p=0;p<o.aggregates.length;p++)n=o.aggregates[p].e,d.aggregates.push({type:n.type,field:uu.getValue(n.field,t)});var m={};this.getRequestQuery(h,t,a,d,m),uu.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:s,reqParams:m});for(var y=0,v=Object.keys(m);y<v.length;y++){g=v[y];(uu.isNull(m[g])||""===m[g]||0===m[g].length)&&delete m[g]}h.skip in m&&h.take in m||null===c||(m[h.skip]=uu.callAdaptorFunction(this,"onSkip",r,t),m[h.take]=uu.callAdaptorFunction(this,"onTake",c,t));var b=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(m,uu.parse.jsonDateReplacer),url:l,pvtData:b,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(m,t,e),{type:"GET",url:(n=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+n).length?l.replace(/\/*$/,n):l,pvtData:b})},t.prototype.getRequestQuery=function(e,t,i,n,r){var o=r;o[e.from]=t.fromTable,e.apply&&t.distincts.length&&(o[e.apply]="onDistinct"in this?uu.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(o[e.expand]="onExpand"in this&&"onSelect"in i?uu.callAdaptorFunction(this,"onExpand",{selects:uu.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),o[e.select]="onSelect"in i&&!t.distincts.length?uu.callAdaptorFunction(this,"onSelect",uu.getValue(i.onSelect.fieldNames,t),t):"",o[e.count]=t.isCountRequired?uu.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",o[e.search]=n.searches.length?uu.callAdaptorFunction(this,"onSearch",n.searches,t):"",o[e.skip]="onSkip"in i?uu.callAdaptorFunction(this,"onSkip",uu.getValue(i.onSkip.nos,t),t):"",o[e.take]="onTake"in i?uu.callAdaptorFunction(this,"onTake",uu.getValue(i.onTake.nos,t),t):"",o[e.where]=n.filters.length||n.searches.length?uu.callAdaptorFunction(this,"onWhere",n.filters,t):"",o[e.sortBy]=n.sorts.length?uu.callAdaptorFunction(this,"onSortBy",n.sorts,t):"",o[e.group]=n.groups.length?uu.callAdaptorFunction(this,"onGroup",n.groups,t):"",o[e.aggregates]=n.aggregates.length?uu.callAdaptorFunction(this,"onAggregates",n.aggregates,t):"",o.param=[]},t.prototype.convertToQueryString=function(e,t,i){return""},t.prototype.processResponse=function(e,t,i,n,r,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("application/json")){var a=uu.timeZoneHandling;t&&!t.timeZoneHandling&&(uu.timeZoneHandling=!1),e=uu.parse.parseJson(e),uu.timeZoneHandling=a}var s=r,l=s.pvtData||{},c=e?e.groupDs:[];if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var h=JSON.parse(s.data);if(h&&"batch"===h.action&&e&&e.addedRecords)return o.addedRecords=e.addedRecords,o;e&&e.d&&(e=e.d);var d={};return e&&"count"in e&&(d.count=e.count),d.result=e&&e.result?e.result:e,this.getAggregateResult(l,e,d,c,i),uu.isNull(d.count)?d.result:{result:d.result,count:d.count,aggregates:d.aggregates}},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,i,n,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(u({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},uu.getAddParams(this,e,n)))}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,i,n){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(u({},{value:t,table:i,action:"insert"},uu.getAddParams(this,e,n)))}},t.prototype.remove=function(e,t,i,n,r){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(u({},{key:i,keyColumn:t,table:n,action:"remove"},uu.getAddParams(this,e,r)))}},t.prototype.update=function(e,t,i,n,r){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(u({},{value:i,action:"update",keyColumn:t,key:uu.getObject(t,i),table:n},uu.getAddParams(this,e,r)))}},t.prototype.getFiltersFrom=function(e,t){var i,n=t.fKey,r=n,o=t.key,a=[];"object"!==typeof e[0]&&(r=null);for(var s=0;s<e.length;s++)i="object"===typeof e[0]?uu.getObject(o||r,e[s]):e[s],a.push(new du(n,"equal",i));return du.or(a)},t.prototype.getAggregateResult=function(e,t,i,n,r){var o=t;if(t&&t.result&&(o=t.result),e&&e.aggregates&&e.aggregates.length){var a=e.aggregates,s=void 0,l=o,c={};t.aggregate&&(l=t.aggregate);for(var h=0;h<a.length;h++)(s=uu.aggregates[a[h].type])&&(c[a[h].field+" - "+a[h].type]=s(l,a[h].field));i.aggregates=c}if(e&&e.groups&&e.groups.length){var d=e.groups;for(h=0;h<d.length;h++){f(n)||(n=uu.group(n,d[h]));var p=hu.filterQueries(r.queries,"onGroup")[h].e;o=uu.group(o,d[h],e.aggregates,null,n,p.comparer)}i.result=o}return i},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=hu.filterQueries(e.queries,"onSortBy"),t.groups=hu.filterQueries(e.queries,"onGroup"),t.filters=hu.filterQueries(e.queries,"onWhere"),t.searches=hu.filterQueries(e.queries,"onSearch"),t.aggregates=hu.filterQueries(e.queries,"onAggregates"),t},t.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var i=0,n=e.params;i<n.length;i++){var r=n[i];if(t[r.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[r.key]=r.value,r.fn&&(t[r.key]=r.fn.call(e.query,r.key,e.query,e.dm)),t.params[r.key]=t[r.key]}},t}(gu),vu=function(e){function t(t){var i=e.call(this)||this;return i.options=u({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),u(i.options,t||{}),i}return fu(t,e),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,n){var r,o,a="",s=e.value,l=typeof s,c=e.field?t.getField(e.field):null;if(s instanceof Date&&(s="datetime'"+uu.parse.replacer(s)+"'"),"string"===l&&(s="'"+(s=encodeURIComponent(s))+"'",n&&(c="cast("+c+", 'Edm.String')"),uu.parse.isGuid(s)&&(o="guid"),e.ignoreCase&&(o||(c="tolower("+c+")"),s=s.toLowerCase())),r=uu.odBiOperator[e.operator])return a+=c,a+=r,o&&(a+=o),a+s;if("substringof"===(r=f(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?uu.odUniOperator[e.operator]:uu.odv4UniOperator[e.operator])){var h=s;s=c,c=h}return a+=r+"(",a+=c+",",o&&(a+=o),a+=s+")"},t.prototype.addParams=function(t){e.prototype.addParams.call(this,t),delete t.reqParams.params},t.prototype.onComplexPredicate=function(e,t,i){for(var n=[],r=0;r<e.predicates.length;r++)n.push("("+this.onEachWhere(e.predicates[r],t,i)+")");return n.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&uu.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],i=0;i<e.fields.length;i++)t.push(new du(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=du.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)i.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,i){uu.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,i,n,r,o){if(r&&"GET"===r.type&&!this.rootUrl&&e["odata.metadata"]){var a=e["odata.metadata"].split("/$metadata#");this.rootUrl=a[0],this.resourceTableName=a[1]}if(!f(e.d)){var s=i&&i.isCountRequired?e.d.results:e.d;if(!f(s))for(var l=0;l<s.length;l++)f(s[l].__metadata)||delete s[l].__metadata}var c=r&&r.pvtData,h=this.processBatchResponse(e,i,n,r,o);if(h)return h;var d=n&&r.getResponseHeader("DataServiceVersion"),p=null,u=d&&parseInt(d,10)||2;if(i&&i.isCountRequired){(e.__count||e["odata.count"])&&(p=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(p=e.__count||e["odata.count"])}3===u&&e.value&&(e=e.value),e.d&&(e=e.d),u<3&&e.results&&(e=e.results);var g={};return g.count=p,g.result=e,this.getAggregateResult(c,e,g,null,i),uu.isNull(p)?g.result:{result:g.result,count:g.count,aggregates:g.aggregates}},t.prototype.convertToQueryString=function(e,t,i){var n=[],r=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];n.push(s+"="+e[s])}return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!r?n:n.length?r+"?"+n:r||""},t.prototype.localTimeReplacer=function(e,t){for(var i=0,n=f(t)?[]:Object.keys(t);i<n.length;i++){var r=n[i];t[r]instanceof Date&&(t[r]=uu.dateParse.toLocalTime(t[r]))}return t},t.prototype.insert=function(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,t,i,n){var r;return r="string"!==typeof i||uu.parse.isGuid(i)?"("+i+")":"('"+i+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+r}},t.prototype.update=function(e,t,i,n,r,o){var a;return"PATCH"!==this.options.updateType||f(o)||(i=this.compareAndRemove(i,o,t)),a="string"!==typeof i[t]||uu.parse.isGuid(i[t])?"("+i[t]+")":"('"+i[t]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+a,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,i,n,r){var o=i.guid=uu.getGuid(this.options.batchPre),a=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var s={url:i.url,key:i.key,cid:1,cSet:uu.getGuid(this.options.changeSet)},l="--"+o+"\n";return l+="Content-Type: multipart/mixed; boundary="+s.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(t.addedRecords,s,e),l+=this.generateUpdateRequest(t.changedRecords,s,e,r?r.changedRecords:[]),l+=this.generateDeleteRequest(t.deletedRecords,s,e),l+=s.cSet+"--\n",{type:"POST",url:a,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:l+="--"+o+"--"}},t.prototype.generateDeleteRequest=function(e,t,i){if(!e)return"";var n={method:"DELETE ",url:function(e,t,i){var n=uu.getObject(i,e[t]);return"number"===typeof n||uu.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+e[t][i].toJSON()+")":"('"+n+"')"},data:function(e,t){return""}};return this.generateBodyContent(e,t,n,i)+"\n"},t.prototype.generateInsertRequest=function(e,t,i){if(!e)return"";var n={method:"POST ",url:function(e,t,i){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,n,i)},t.prototype.generateUpdateRequest=function(e,t,i,n){var r=this;if(!e)return"";e.forEach((function(e){return e=r.compareAndRemove(e,n.filter((function(i){return uu.getObject(t.key,i)===uu.getObject(t.key,e)}))[0],t.key)}));var o={method:this.options.updateType+" ",url:function(e,t,i){return"number"===typeof e[t][i]||uu.parse.isGuid(e[t][i])?"("+e[t][i]+")":e[t][i]instanceof Date?"("+e[t][i].toJSON()+")":"('"+e[t][i]+"')"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,o,i)},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,i,n){for(var r="",o=0;o<e.length;o++)r+="\n"+t.cSet+"\n",r+=this.options.changeSetContent+"\n\n",r+=i.method,"POST "===i.method?r+=(n.dataSource.insertUrl||n.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?r+=(n.dataSource.updateUrl||n.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(r+=(n.dataSource.removeUrl||n.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n"),r+="Accept: "+this.options.accept+"\n",r+="Content-Id: "+this.pvt.changeSet+++"\n",r+=this.options.batchChangeSetContentType+"\n",f(e[o]["@odata.etag"])?r+="\n":(r+="If-Match: "+e[o]["@odata.etag"]+"\n\n",delete e[o]["@odata.etag"]),r+=i.data(e,o);return r},t.prototype.processBatchResponse=function(e,t,i,n,r){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&uu.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var o=i.getResponseHeader("Content-Type"),a=void 0,s=void 0,l=e+"";if(o=o.substring(o.indexOf("=batchresponse")+1),(l=l.split(o)).length<2)return{};l=l[1];var c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);c&&l.replace(c[0],"");for(var h=c?c[1]:"",d=(l=l.split(h)).length;d>-1;d--)/\bContent-ID:/i.test(l[d])&&/\bHTTP.+201/.test(l[d])&&(a=parseInt(/\bContent-ID: (\d+)/i.exec(l[d])[1],10),r.addedRecords[a]&&(s=uu.parse.parseJson(/^\{.+\}/m.exec(l[d])[0]),u({},r.addedRecords[a],this.processResponse(s))));return r}return null},t.prototype.compareAndRemove=function(e,t,i){var n=this;return f(t)||Object.keys(e).forEach((function(r){r!==i&&"@odata.etag"!==r&&(uu.isPlainObject(e[r])?(n.compareAndRemove(e[r],t[r]),0===Object.keys(e[r]).filter((function(e){return"@odata.etag"!==e})).length&&delete e[r]):(e[r]===t[r]||e[r]&&t[r]&&e[r].valueOf()===t[r].valueOf())&&delete e[r])})),e},t}(yu),bu=(function(e){function t(t){var i=e.call(this,t)||this;return i.options=u({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),u(i.options,t||{}),i}fu(t,e),t.prototype.getModuleName=function(){return"ODataV4Adaptor"},t.prototype.onCount=function(e){return!0===e?"true":""},t.prototype.onPredicate=function(t,i,n){var r="",o=t.value,a=o instanceof Date;if(i instanceof hu)for(var s=this.getQueryRequest(i),l=0;l<s.filters.length;l++)s.filters[l].e.key===t.value&&(n=!0);return r=e.prototype.onPredicate.call(this,t,i,n),a&&(r=r.replace(/datetime'(.*)'$/,"$1")),uu.parse.isGuid(o)&&(r=r.replace("guid","").replace(/'/g,"")),r},t.prototype.onEachSearch=function(e){var t=this.pvt.searches||[];t.push(e.key),this.pvt.searches=t},t.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},t.prototype.onExpand=function(e){var t=this,i={},n={},r=e.expands.slice(),o=[];return e.selects.filter((function(e){return e.indexOf(".")>-1})).forEach((function(e){var t=e.split(".");t[0]in i||(i[t[0]]=[]),i[t[0]].push(t[1])})),Object.keys(i).forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r.forEach((function(e){n[e]=e in i?e+"("+t.options.select+"="+i[e].join(",")+")":e})),Object.keys(n).forEach((function(e){return o.push(n[e])})),o.join(",")},t.prototype.onDistinct=function(e){return"groupby(("+e.map((function(e){return vu.getField(e)})).join(",")+"))"},t.prototype.onSelect=function(t){return e.prototype.onSelect.call(this,t.filter((function(e){return-1===e.indexOf(".")})))},t.prototype.beforeSend=function(e,t,i){"POST"!==i.type&&"PUT"!==i.type&&"PATCH"!==i.type||t.setRequestHeader("Prefer","return=representation"),t.setRequestHeader("Accept",this.options.accept)},t.prototype.processResponse=function(t,i,n,r,o,a){if(o&&"GET"===o.type&&!this.rootUrl&&t["@odata.context"]){var s=t["@odata.context"].split("/$metadata#");this.rootUrl=s[0],this.resourceTableName=s[1]}var l=o&&o.pvtData,c=e.prototype.processBatchResponse.call(this,t,n,r,o,a);if(c)return c;var h=null;n&&n.isCountRequired&&"@odata.count"in t&&(h=t["@odata.count"]),t=f(t.value)?t:t.value;var d={};return d.count=h,d.result=t,this.getAggregateResult(l,t,d,null,n),uu.isNull(h)?d.result:{result:d.result,count:h,aggregates:d.aggregates}}}(vu),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}fu(t,e),t.prototype.getModuleName=function(){return"WebApiAdaptor"},t.prototype.insert=function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},t.prototype.remove=function(e,t,i,n){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},t.prototype.update=function(e,t,i,n){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},t.prototype.batchRequest=function(e,t,i){var n=this,r=i.guid=uu.getGuid(this.options.batchPre),o=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var a=[],s=function(n,o){t.addedRecords.forEach((function(o,s){var l=function(e,t,i){return""};a.push("--"+r),a.push("Content-Type: application/http; msgtype=request",""),a.push("POST /api/"+(e.dataSource.insertUrl||e.dataSource.crudUrl||i.url)+l(t.addedRecords,n,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",o?JSON.stringify(o):"")}))},l=0,c=t.addedRecords.length;l<c;l++)s(l);var h=function(o,s){t.changedRecords.forEach((function(s,l){n.options.updateType;var c=function(e,t,i){return""};a.push("--"+r),a.push("Content-Type: application/http; msgtype=request",""),a.push("PUT /api/"+(e.dataSource.updateUrl||e.dataSource.crudUrl||i.url)+c(t.changedRecords,o,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",s?JSON.stringify(s):"")}))};for(l=0,c=t.changedRecords.length;l<c;l++)h(l);var d=function(n,o){t.deletedRecords.forEach((function(o,s){var l=function(e,t,i){var n=uu.getObject(i,e[t]);return"number"===typeof n||uu.parse.isGuid(n)?"/"+n:n instanceof Date?"/"+e[t][i].toJSON():"/'"+n+"'"};a.push("--"+r),a.push("Content-Type: application/http; msgtype=request",""),a.push("DELETE /api/"+(e.dataSource.removeUrl||e.dataSource.crudUrl||i.url)+l(t.deletedRecords,n,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",o?JSON.stringify(o):"")}))};for(l=0,c=t.deletedRecords.length;l<c;l++)d(l);return a.push("--"+r+"--",""),{type:"POST",url:o,contentType:"multipart/mixed; boundary="+r,data:a.join("\r\n")}},t.prototype.beforeSend=function(e,t,i){t.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(e,t,i,n,r,o){var a=r&&r.pvtData,s=null,l={};if(r&&"post"!==r.type.toLowerCase()){var c=n&&r.getResponseHeader("DataServiceVersion"),h=c&&parseInt(c,10)||2;i&&i.isCountRequired&&(uu.isNull(e.Count)||(s=e.Count)),h<3&&e.Items&&(e=e.Items),l.count=s,l.result=e,this.getAggregateResult(a,e,l,null,i)}return l.result=l.result||e,uu.isNull(s)?l.result:{result:l.result,count:l.count,aggregates:l.aggregates}}}(vu),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}fu(t,e),t.prototype.processQuery=function(e,t,i){var n=(new yu).processQuery(e,t,i),r=uu.parse.parseJson(n.data),o={};if(r.param)for(var a=0;a<r.param.length;a++){var s=r.param[a],l=Object.keys(s)[0];o[l]=s[l]}o.value=r;return{data:JSON.stringify(o),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}}}(yu),function(e){function t(){var t=e.call(this)||this;return h("beforeSend",yu.prototype.beforeSend,t),t}return fu(t,e),t.prototype.insert=function(e,t,i,n,r){return this.pvt.position=r,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(u({},{value:t,table:i,action:"insert"},uu.getAddParams(this,e,n)))}},t.prototype.remove=function(t,i,n,r,o){return e.prototype.remove.call(this,t,i,n),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(u({},{key:n,keyColumn:i,table:r,action:"remove"},uu.getAddParams(this,t,o)))}},t.prototype.update=function(e,t,i,n,r){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(u({},{value:i,action:"update",keyColumn:t,key:i[t],table:n},uu.getAddParams(this,e,r)))}},t.prototype.processResponse=function(t,i,n,r,o,a,s){var l;if("add"===this.updateType&&e.prototype.insert.call(this,i,t,null,null,this.pvt.position),"update"===this.updateType&&e.prototype.update.call(this,i,this.updateKey,t),this.updateType=void 0,t.added)for(l=0;l<t.added.length;l++)e.prototype.insert.call(this,i,t.added[l]);if(t.changed)for(l=0;l<t.changed.length;l++)e.prototype.update.call(this,i,s.key,t.changed[l]);if(t.deleted)for(l=0;l<t.deleted.length;l++)e.prototype.remove.call(this,i,s.key,t.deleted[l]);return t},t.prototype.batchRequest=function(e,t,i,n,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(u({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},uu.getAddParams(this,e,n)))}},t.prototype.addParams=function(e){(new yu).addParams(e)},t}(mu)),wu=function(e){function t(t,i,n){var r=e.call(this)||this;r.isCrudAction=!1,r.isInsertAction=!1,f(t)||(r.cacheAdaptor=t),r.pageSize=n,r.guidId=uu.getGuid("cacheAdaptor");window.localStorage.setItem(r.guidId,JSON.stringify({keys:[],results:[]}));var o=r.guidId;return f(i)||setInterval((function(){var e;e=uu.parse.parseJson(window.localStorage.getItem(o));for(var t=[],n=0;n<e.results.length;n++){var r=+new Date,a=+new Date(e.results[n].timeStamp);e.results[n].timeStamp=r-a,r-a>i&&t.push(n)}for(n=0;n<t.length;n++)e.results.splice(t[n],1),e.keys.splice(t[n],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(e))}),i),r}return fu(t,e),t.prototype.generateKey=function(e,t){var i=this.getQueryRequest(t),n=hu.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=e;"onPage"in n&&(r+=n.onPage.pageIndex),i.sorts.forEach((function(e){r+=e.e.direction+e.e.fieldName})),i.groups.forEach((function(e){r+=e.e.fieldName})),i.searches.forEach((function(e){r+=e.e.searchKey}));for(var o=0;o<i.filters.length;o++){var a=i.filters[o];if(a.e.isComplex){var s=t.clone();s.queries=[];for(var l=0;l<a.e.predicates.length;l++)s.queries.push({fn:"onWhere",e:a.e.predicates[l],filter:t.queries.filter});r+=a.e.condition+this.generateKey(e,s)}else r+=a.e.field+a.e.operator+a.e.value}return r},t.prototype.processQuery=function(e,t,i){var n,r=this.generateKey(e.dataSource.url,t),o=(n=uu.parse.parseJson(window.localStorage.getItem(this.guidId)))?n.results[n.keys.indexOf(r)]:null;return null==o||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):o},t.prototype.processResponse=function(e,t,i,n,r,o){if(this.isInsertAction||r&&this.cacheAdaptor.options.batch&&uu.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,n,r,o);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var a=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,s={},l=(s=uu.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(a);for(-1!==l&&(s.results.splice(l,1),s.keys.splice(l,1)),s.results[s.keys.push(a)-1]={keys:a,result:e.result,timeStamp:new Date,count:e.count};s.results.length>this.pageSize;)s.results.splice(0,1),s.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(s)),e},t.prototype.beforeSend=function(e,t,i){!f(this.cacheAdaptor.options.batch)&&uu.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,n)},t.prototype.insert=function(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)},t.prototype.remove=function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,n)},t.prototype.batchRequest=function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)},t}(yu),xu=function(){function e(e,t,i){var n,r=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],e||this.dataSource||(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?n={json:e,offline:!0}:"object"===typeof e?(e.json||(e.json=[]),n={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof bu)&&!e.url,requiresFormat:e.requiresFormat}):uu.throwError("DataManager: Invalid arguments"),void 0!==n.requiresFormat||uu.isCors()||(n.requiresFormat=!!f(n.crossDomain)||n.crossDomain),void 0===n.dataType&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=t,n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new vu,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new hu),this.ready.then((function(e){r.dataSource.offline=!0,r.isDataAvailable=!0,n.json=e.result,r.adaptor=new mu}))):this.adaptor=n.offline?new mu:new vu,!n.jsonp&&this.adaptor instanceof vu&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,n.enableCaching&&(this.adaptor=new wu(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof hu||uu.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||uu.throwError("DataManager - executeLocal() : Json data is required to execute"),t=t||this.defaultQuery;var i=this.adaptor.processQuery(this,t);if(t.subQuery){var n=t.subQuery.fromTable,r=t.subQuery.lookups,o=t.isCountRequired?i.result:i;r&&r instanceof Array&&uu.buildHierarchy(t.subQuery.fKey,n,o,r,t.subQuery.key);for(var a=0;a<o.length;a++)o[a][n]instanceof Array&&(o[a]=u({},{},o[a]),o[a][n]=this.adaptor.processResponse(t.subQuery.using(new e(o[a][n].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(i,this,t)},e.prototype.executeQuery=function(t,i,n,r){var o=this;"function"===typeof t&&(r=n,n=i,i=t,t=null),t||(t=this.defaultQuery),t instanceof hu||uu.throwError("DataManager - executeQuery() : A query is required to execute");var a=new Su,s={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!f(this.adaptor.makeRequest)){var l=this.adaptor.processQuery(this,t);f(this.adaptor.makeRequest)?f(l.url)?(s=e.getDeferedArgs(t,l,s),a.resolve(s)):this.makeRequest(l,a,s,t):this.adaptor.makeRequest(l,a,s,t)}else e.nextTick((function(){var i=o.executeLocal(t);s=e.getDeferedArgs(t,i,s),a.resolve(s)}));return(i||n)&&a.promise.then(i,n),r&&a.promise.then(r,r),a.promise},e.getDeferedArgs=function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,i){return u({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)},e.prototype.makeRequest=function(e,t,i,n){var r=this,o=!!n.subQuerySelector,a=function(e){i.error=e,t.reject(i)},s=function(e,n,r,o,a,s,l){i.xhr=r,i.count=n?parseInt(n.toString(),10):0,i.result=e,i.request=o,i.aggregates=s,i.actual=a,i.virtualSelectRecords=l,t.resolve(i)},l=function(e,t){var l=new Su,c={parent:i};n.subQuery.isChild=!0;var h=r.adaptor.processQuery(r,n.subQuery,e?r.adaptor.processResponse(e):t),d=r.makeRequest(h,l,c,n.subQuery);return o||l.then((function(t){e&&(uu.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,e,t,n.subQuery.key),s(e,t.count,t.xhr))}),a),d},c=this.extendRequest(e,(function(e,t){-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&r.dateParse&&(e=uu.parse.parseJson(e));var i=r.adaptor.processResponse(e,r,n,t.httpRequest,t),a=0,c=null,h=e.virtualSelectRecords;n.isCountRequired&&(a=i.count,c=i.aggregates,i=i.result),n.subQuery?o||l(i,t):s(i,a,t.httpRequest,t.type,e,c,h)}),a),h=new Q(c);if(h.beforeSend=function(){r.beforeSend(h.httpRequest,h)},(c=h.send()).catch((function(e){return!0})),this.requests.push(h),o){var d=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});d&&d.length?Promise.all([c,l(null,d)]).then((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],a=r.adaptor.processResponse(i[0],r,n,r.requests[0].httpRequest,r.requests[0]),l=0;n.isCountRequired&&(l=a.count,a=a.result);var c=r.adaptor.processResponse(i[1],r,n.subQuery,r.requests[1].httpRequest,r.requests[1]);l=0,n.subQuery.isCountRequired&&(l=c.count,c=c.result),uu.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,a,c,n.subQuery.key),o=!1,s(a,l,r.requests[0].httpRequest)})):o=!1}return c},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,n=this.dataSource.headers,r=0;n&&r<n.length;r++){i=[];for(var o=0,a=Object.keys(n[r]);o<a.length;o++){var s=a[o];i.push(s),e.setRequestHeader(s,n[r][s])}}},e.prototype.saveChanges=function(e,t,i,n,r){var o=this;i instanceof hu&&(n=i,i=null);var a={url:i,key:t||this.dataSource.key},s=this.adaptor.batchRequest(this,e,a,n||new hu,r);if(this.dataSource.offline)return s;if(f(this.adaptor.doAjaxRequest)){var l=new Su,c=new Q(s);return c.beforeSend=function(){o.beforeSend(c.httpRequest,c)},c.onSuccess=function(t,i){l.resolve(o.adaptor.processResponse(t,o,null,i.httpRequest,i,e,a))},c.onFailure=function(e){l.reject([{error:e}])},c.send().catch((function(e){return!0})),l.promise}return this.adaptor.doAjaxRequest(s)},e.prototype.insert=function(e,t,i,n){t instanceof hu&&(i=t,t=null);var r=this.adaptor.insert(this,e,t,i,n);return this.dataSource.offline?r:f(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)},e.prototype.remove=function(e,t,i,n){"object"===typeof t&&(t=uu.getObject(e,t)),i instanceof hu&&(n=i,i=null);var r=this.adaptor.remove(this,e,t,i,n);return this.dataSource.offline?r:f(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)},e.prototype.update=function(e,t,i,n,r){i instanceof hu&&(n=i,i=null);var o=this.adaptor.update(this,e,t,i,n,r);return this.dataSource.offline?o:f(this.adaptor.doAjaxRequest)?this.doAjaxRequest(o):this.adaptor.doAjaxRequest(o)},e.prototype.doAjaxRequest=function(e){var t=this,i=new Su;e=u({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e);var n=new Q(e);return n.beforeSend=function(){t.beforeSend(n.httpRequest,n)},n.onSuccess=function(e,n){try{uu.parse.parseJson(e)}catch(r){e=[]}e=t.adaptor.processResponse(uu.parse.parseJson(e),t,null,n.httpRequest,n),i.resolve(e)},n.onFailure=function(e){i.reject([{error:e}])},n.send().catch((function(e){return!0})),i.promise},e}(),Su=function(){var e=this;this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i})),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)},Cu=(function(){function e(){this.dataTable={}}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"DataBinding"},e.prototype.initData=function(e,t){var i,n=e.dataManager||e.dataSource||{};(i=n.data||n.json||(n.dataSource?n.dataSource.json:void 0))&&0===i.length&&n.dataSource.data&&(i=n.dataSource.data),i&&i.length&&(this.applyDataSource(e,i,t),t.trigger("dataLoaded",{diagram:Vc(t)}))},e.prototype.initSource=function(e,t){var i,n=this,r=e,o=e;if(r.dataManager instanceof xu||r.dataSource instanceof xu){var a=(o.dataManager||o.dataSource).defaultQuery||new hu;(e.dataManager||e.dataSource).executeQuery(a).then((function(r){i=r.result,t.isDestroyed||(t.protectPropertyChange(!0),n.applyDataSource(e,i,t),t.refreshDiagram(),t.protectPropertyChange(!1),t.trigger("dataLoaded",{diagram:Vc(t)}))}))}},e.prototype.applyDataSource=function(e,t,i){var n,r,o;this.dataTable={};var a,s,l=[],c=[];if(void 0!==t){for(var h=0;h<t.length;h++)void 0===(n=t[h])[e.parentId]||null===n[e.parentId]||"object"!==typeof n[e.parentId]?void 0!==l[n[e.parentId]]?l[n[e.parentId]].items.push(n):l[n[e.parentId]]={items:[n]}:l=this.updateMultipleRootNodes(n,l,e,t),e.root===n[e.id]&&(r={items:[n]});if(r)c.push(r);else for(var d=0,p=Object.keys(l);d<p.length;d++){var u=p[d];u&&"undefined"!==u&&"''"!==u&&"null"!==u||c.push(l[u])}for(var f=0;f<c.length;f++)for(var g=0;g<c[f].items.length;g++)a=c[f].items[g],o=this.applyNodeTemplate(e,a,i),i.nodes.push(o),this.dataTable[a[e.id]]=o,void 0!==(s=l[o.data[e.id]])&&this.renderChildNodes(e,s,o.id,l,i)}this.dataTable=null},e.prototype.updateMultipleRootNodes=function(e,t,i,n){for(var r,o=e[i.parentId],a=0;a<o.length;a++)t[r=o[a]]?t[r].items.push(e):t[r]={items:[e]};return t},e.prototype.applyNodeTemplate=function(e,t,i){var n={id:md(),data:t},r=Ld(e.doBinding);r&&r(n,t,i);var o=new Lh(i,"nodes",n,!0);if(Kl(o,n,i.nodeDefaults),e.dataMapSettings)for(var a=void 0,s=[],l=[],c=0;c<e.dataMapSettings.length;c++){if(-1!==e.dataMapSettings[c].property.indexOf(".")){l=this.splitString(e.dataMapSettings[c].property);for(var h=0;h<l.length;h++)-1!==l[h].indexOf("[")&&(a=l[h].indexOf("["),s=l[h].split("["));if(a)if(l[2])o[s[0]][l[0].charAt(a+1)][l[1]][l[2]]=t[e.dataMapSettings[c].field];else{var d=t[e.dataMapSettings[c].field];o[s[0]][l[0].charAt(a+1)][l[1]]=d}else l[2]?o[l[0]][l[1]][l[2]]=t[e.dataMapSettings[c].field]:o[l[0]][l[1]]=t[e.dataMapSettings[c].field]}else{var p=e.dataMapSettings[c].property;o[p=p.charAt(0).toLowerCase()+p.slice(1)]=t[e.dataMapSettings[c].field]}a=0,s=[],l=[]}return this.collectionContains(o,i,e.id,e.parentId)?this.dataTable[t[e.id]]:o},e.prototype.splitString=function(e){var t=[];t=e.split(".");for(var i=0;i<t.length;i++)t[i]=t[i].charAt(0).toLowerCase()+t[i].slice(1);return t},e.prototype.renderChildNodes=function(e,t,i,n,r){for(var o,a,s,l=0;l<t.items.length;l++){o=t.items[l],s=this.applyNodeTemplate(e,o,r);var c=!1;this.collectionContains(s,r,e.id,e.parentId)?c=!0:(this.dataTable[o[e.id]]=s,r.nodes.push(s)),this.containsConnector(r,i,s.id)||r.connectors.push(this.applyConnectorTemplate(i,s.id,r)),c||void 0!==(a=n[s.data[e.id]])&&this.renderChildNodes(e,a,s.id,n,r)}},e.prototype.containsConnector=function(e,t,i){if(""!==t&&""!==i)for(var n=0;n<e.connectors.length;n++){var r=e.connectors[n];if(void 0!==r&&r.sourceID===t&&r.targetID===i)return!0}return!1},e.prototype.collectionContains=function(e,t,i,n){var r=this.dataTable[e.data[i]];return void 0!==r&&r.data[i]===e.data[i]&&r.data[n]===e.data[n]},e.prototype.applyConnectorTemplate=function(e,t,i){var n={id:md(),sourceID:e,targetID:t},r=new $a(i,"connectors",n,!0);return Kl(r,n,i.connectorDefaults),r}}(),{li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"});function Pu(e,t){var i={};if(f(e)||"string"===typeof e||"number"===typeof e||!f(e.isHeader))return e;for(var n=0,r=Object.keys(t);n<r.length;n++){var o=t[r[n]],a=f(o)||"string"!==typeof o?void 0:c(o,e);f(a)||(i[o]=a)}return i}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(e,t,i,n){return S(e,r(e,t,i,n),null,n)}function r(e,t,n,r){var o=[],a=u({},i,r);Cu=b(a.moduleName);for(var s=m(),l=0;l<t.length;l++)if(!f(t[l])){var c=void 0;if(a.itemCreating&&"function"===typeof a.itemCreating){var h={dataSource:t,curData:t[l],text:t[l],options:a};a.itemCreating(h)}if(c=n?v(e,t[l],void 0,null,null,[],null,s,l,r):x(e,t[l],void 0,null,null,r),a.itemCreated&&"function"===typeof a.itemCreated){h={dataSource:t,curData:t[l],text:t[l],item:c,options:a};a.itemCreated(h)}o.push(c)}return o}function o(n,r,o,a,s){var l=u({},i,o);Cu=b(l.moduleName);var c,g=u({},e.defaultMappedFields,l.fields),w=u({},t,l.ariaAttributes),S=[];a&&(w.level=a);var C,P,O=[];r&&r.length&&!f(h(r).item)&&!h(r).item.hasOwnProperty(g.id)&&(c=m());for(var E=0;E<r.length;E++){var T=Pu(r[E],g);if(!f(r[E])){if(l.itemCreating&&"function"===typeof l.itemCreating){var I={dataSource:r,curData:r[E],text:T[g.text],options:l,fields:g};l.itemCreating(I)}var k=r[E];l.itemCreating&&"function"===typeof l.itemCreating&&(T=Pu(r[E],g)),T.hasOwnProperty(g.id)&&!f(T[g.id])&&(c=T[g.id]);var A=[];if(l.showCheckBox&&(l.itemNavigable&&(T[g.url]||T[g.urlAttributes])?S.push(n("input",{className:Cu.check,attrs:{type:"checkbox"}})):A.push(n("input",{className:Cu.check,attrs:{type:"checkbox"}}))),!0===s)l.showIcon&&T.hasOwnProperty(g.iconCss)&&!f(T[g.iconCss])&&A.push(n("span",{className:Cu.icon+" "+T[g.iconCss]})),P=(C=v(n,k,T,g,l.itemClass,A,!(!k.hasOwnProperty("isHeader")||!k.isHeader),c,E,o)).querySelector("."+Cu.anchorWrap),l.itemNavigable&&S.length&&ct(S,C.firstElementChild);else{if((C=x(n,k,T,g,l.itemClass,o)).classList.add(Cu.level+"-"+w.level),C.setAttribute("aria-level",w.level.toString()),P=C.querySelector("."+Cu.anchorWrap),T.hasOwnProperty(g.tooltip)&&C.setAttribute("title",T[g.tooltip]),T.hasOwnProperty(g.htmlAttributes)&&T[g.htmlAttributes]&&d(C,T[g.htmlAttributes]),T.hasOwnProperty(g.enabled)&&!1===T[g.enabled]&&C.classList.add(Cu.disabled),T.hasOwnProperty(g.isVisible)&&!1===T[g.isVisible]&&(C.style.display="none"),T.hasOwnProperty(g.imageUrl)&&!f(T[g.imageUrl])&&!l.template){var M={src:T[g.imageUrl]};p(M,T[g.imageAttributes]);var D=n("img",{className:Cu.image,attrs:M});P?P.insertAdjacentElement("afterbegin",D):ct([D],C.firstElementChild)}if(l.showIcon&&T.hasOwnProperty(g.iconCss)&&!f(T[g.iconCss])&&!l.template){var L;L=n("div",{className:Cu.icon+" "+T[g.iconCss]}),P?P.insertAdjacentElement("afterbegin",L):ct([L],C.firstElementChild)}A.length&&ct(A,C.firstElementChild),l.itemNavigable&&S.length&&ct(S,C.firstElementChild),y(n,T,g,r,l,C,w.level)}if(P&&ot([C],[Cu.navigable]),l.itemCreated&&"function"===typeof l.itemCreated){I={dataSource:r,curData:r[E],text:T[g.text],item:C,options:l,fields:g};l.itemCreated(I)}S=[],O.push(C)}}return O}function a(e,t,n,r,a){var s=u({},i,n);return S(e,o(e,t,n,r,a),s.listClass,n)}function s(e,t){if(t&&e){return Array.prototype.slice.call(t).indexOf(e)}}function l(e,t,i){if(void 0===i&&(i=new hu),"Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function c(e,t){return new xu(e).executeLocal(t)}function h(e){for(var t={typeof:null,item:null},i=0;i<e.length;i++)if(!f(e[i]))return{typeof:typeof e[i],item:e[i]};return t}function d(e,t){var i={};p(i,t),i.class&&(ot([e],i.class.split(" ")),delete i.class),ft(e,i)}function g(e){for(var t={},i=e.attributes,n=0;n<i.length;n++)t[i[n].nodeName]=i[n].nodeValue;return t}function m(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function y(e,t,i,n,r,o,s){var l=t[i.child]||[],c=t[i.hasChildren];if(l.length&&(c=!0,o.classList.add(Cu.hasChild),r.processSubChild)){var h=a(e,l,r,++s);o.appendChild(h)}r.expandCollapse&&c&&!r.template&&(o.firstElementChild.classList.add(Cu.iconWrapper),("Left"===r.expandIconPosition?ct:ht)([e("div",{className:"e-icons "+r.expandIconClass})],o.querySelector("."+Cu.textContent)))}function v(e,n,r,o,a,s,l,c,h,p){var g,m,y=u({},i,p),v=u({},t,y.ariaAttributes),b=n,x=n;"string"!==typeof n&&"number"!==typeof n&&"boolean"!==typeof n&&(g=n,b="boolean"===typeof r[o.text]||"number"===typeof r[o.text]?r[o.text]:r[o.text]||"",x=r[o.value]),m=f(g)||f(r[o.id])||""===r[o.id]?c+"-"+h:c;var S=e("li",{className:(!0===l?Cu.group:Cu.li)+" "+(f(a)?"":a),id:m,attrs:""!==v.groupItemRole&&""!==v.itemRole?{role:!0===l?v.groupItemRole:v.itemRole}:{}});return g&&r.hasOwnProperty(o.enabled)&&"false"===r[o.enabled].toString()&&S.classList.add(Cu.disabled),l?S.innerText=b:(S.setAttribute("data-value",f(x)?"null":x),S.setAttribute("role","option"),g&&r.hasOwnProperty(o.htmlAttributes)&&r[o.htmlAttributes]&&d(S,r[o.htmlAttributes]),s.length&&!y.itemNavigable&&ht(s,S),g&&(r[o.url]||r[o.urlAttributes]&&r[o.urlAttributes].href)?S.appendChild(w(e,g,o,b,s,y.itemNavigable)):(s.length&&y.itemNavigable&&ht(s,S),S.appendChild(document.createTextNode(b)))),S}function b(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function w(e,t,i,n,r,o){var a,s=Pu(t,i),l={href:s[i.url]};if(s.hasOwnProperty(i.urlAttributes)&&s[i.urlAttributes]&&(p(l,s[i.urlAttributes]),l.href=s[i.url]?s[i.url]:s[i.urlAttributes].href),o){a=e("a",{className:Cu.text+" "+Cu.url});var c=e("div",{className:Cu.anchorWrap});r&&r.length&&ht(r,c),c.appendChild(document.createTextNode(n)),ht([c],a)}else a=e("a",{className:Cu.text+" "+Cu.url,innerHTML:n});return d(a,l),a}function x(e,n,r,o,a,s){var l,c,h,d=u({},i,s),p=u({},t,d.ariaAttributes),g=n;"string"!==typeof n&&"number"!==typeof n&&(h=n,g=r[o.text]||"",l=f(r._id)?r[o.id]:r._id,c=!(!n.hasOwnProperty("isHeader")||!n.isHeader)),s&&s.enableHtmlSanitizer&&(g=Ai.sanitize(g));var y=e("li",{className:(!0===c?Cu.group:Cu.li)+" "+(f(a)?"":a),attrs:""!==p.groupItemRole&&""!==p.itemRole?{role:!0===c?p.groupItemRole:p.itemRole}:{}});f(l)?y.setAttribute("data-uid",m()):y.setAttribute("data-uid",l);if(s&&s.removeBlazorID&&"object"===typeof n&&n.hasOwnProperty("BlazId")&&delete n.BlazId,c&&s&&s.groupTemplate)ht(ze(s.groupTemplate)(n,null,null,d.groupTemplateID,!!d.isStringTemplate),y);else if(!c&&s&&s.template){ht(ze(s.template)(n,null,null,d.templateID,!!d.isStringTemplate),y)}else{var v=e("div",{className:Cu.textContent,attrs:""!==p.wrapperRole?{role:p.wrapperRole}:{}});if(h&&(r[o.url]||r[o.urlAttributes]&&r[o.urlAttributes].href))v.appendChild(w(e,h,o,g,null,d.itemNavigable));else{var b=e("span",{className:Cu.text,attrs:""!==p.itemText?{role:p.itemText}:{}});s&&s.enableHtmlSanitizer?b.innerText=Ai.sanitize(g):b.innerHTML=g,v.appendChild(b)}y.appendChild(v)}return y}function S(e,n,r,o){var a=u({},i,o),s=u({},t,a.ariaAttributes),l=e("ul",{className:(Cu=b(a.moduleName)).ul+" "+(f(r)?"":r),attrs:""!==s.listRole?{role:s.listRole}:{}});return ht(n,l),l}e.createList=function(e,r,o,s){var l=u({},i,o),c=u({},t,l.ariaAttributes),d=h(r).typeof;return"string"===d||"number"===d?n(e,r,s,o):a(e,r,o,c.level,s)},e.createListFromArray=n,e.createListItemFromArray=r,e.createListItemFromJson=o,e.createListFromJson=a,e.getSiblingLI=function(e,t,n){if(Cu=b(i.moduleName),e&&e.length){var r,o,a=Array.prototype.slice.call(e);for(r=a[(o=t?s(t,a):!0===n?a.length:-1)+(!0===n?-1:1)];r&&(!lt(r)||r.classList.contains(Cu.disabled));)r=a[o+=!0===n?-1:1];return r}},e.indexOf=s,e.groupDataSource=function(t,i,n){void 0===n&&(n="None");var r=u({},e.defaultMappedFields,i),o=(new hu).group(r.groupBy),a=c(t,o=l(n,"key",o));t=[];for(var s=0;s<a.length;s++){var h=a[s].items,d={};d[r.text]=a[s].key,d.isHeader=!0;var p=r.text;"id"===p&&(d[p="text"]=a[s].key),d._id="group-list-item-"+(a[s].key?a[s].key.toString().trim():"undefined"),d.items=h,t.push(d);for(var f=0;f<h.length;f++)t.push(h[f])}return t},e.addSorting=l,e.getDataSource=c,e.createJsonFromElement=function t(n,r){var o=u({},i,r),a=u({},e.defaultMappedFields,o.fields),s=n.cloneNode(!0),l=[];s.classList.add("json-parent");var c=s.querySelectorAll(".json-parent>li");s.classList.remove("json-parent");for(var h=0;h<c.length;h++){for(var d=c[h],p=d.querySelector("a"),f=d.querySelector("ul"),y={},v=p?p.childNodes:d.childNodes,b=Object.keys(v),w=0;w<v.length;w++)v[Number(b[w])].hasChildNodes()||(y[a.text]=v[Number(b[w])].textContent);var x=g(d);x.id?(y[a.id]=x.id,delete x.id):y[a.id]=m(),Object.keys(x).length&&(y[a.htmlAttributes]=x),p&&(x=g(p),Object.keys(x).length&&(y[a.urlAttributes]=x)),f&&(y[a.child]=t(f,r)),l.push(y)}return l},e.renderContentTemplate=function(t,n,r,o,a){for(var s=t("ul",{className:(Cu=b(i.moduleName)).ul,attrs:{role:"presentation"}}),l=u({},i,a),c=u({},e.defaultMappedFields,o),h=ze(n),d=[],p=m(),g=0;g<r.length;g++){var y=Pu(r[g],c),v=r[g],w=v.isHeader,x=y[c.value];if(l.itemCreating&&"function"===typeof l.itemCreating){var S={dataSource:r,curData:v,text:x,options:l,fields:c};l.itemCreating(S)}l.itemCreating&&"function"===typeof l.itemCreating&&(x=(y=Pu(r[g],c))[c.value]);var C=t("li",{id:p+"-"+g,className:w?Cu.group:Cu.li,attrs:{role:"presentation"}});if(w)C.innerText=y[c.text];else ht(h(v,null,null,w?l.groupTemplateID:l.templateID,!!l.isStringTemplate),C),C.setAttribute("data-value",f(x)?"null":x),C.setAttribute("role","option");if(l.itemCreated&&"function"===typeof l.itemCreated){S={dataSource:r,curData:v,text:x,item:C,options:l,fields:c};l.itemCreated(S)}d.push(C)}return ht(d,s),s},e.renderGroupTemplate=function(t,n,r,o,a){for(var s=ze(t),l=u({},e.defaultMappedFields,r),c=u({},i,a),h=l.groupBy,d=0,p=o;d<p.length;d++){var f=p[d],g={};g[h]=f.textContent,f.innerHTML="",ht(s(g,null,null,c.groupTemplateID,!!c.isStringTemplate),f)}return o},e.generateId=m,e.generateUL=S,e.generateIcon=function(e,t,n,r){var o=u({},i,r);return Cu=b(o.moduleName),("Left"===o.expandIconPosition?ct:ht)([e("div",{className:"e-icons "+o.expandIconClass+" "+(f(n)?"":n)})],t.querySelector("."+Cu.textContent)),t}}(fp||(fp={}));var Ou=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Eu=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Tu=function(e){function t(t,i){return e.call(this,t,i)||this}return Ou(t,e),t.prototype.preRender=function(){this.browser=le.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=le.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=m("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new Ei(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),ce.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device");var i=mt(".e-"+t.id+"_nav.e-scroll-nav",t),n=mt(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){pt(e)}));for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var a=o[r];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),pt(this.scrollEle),i.length>0&&(pt(i[0]),f(i[1])||pt(i[1])),ce.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=mt(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),r=this.createElement("div",{id:t.concat("_right"),className:n}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});r.appendChild(o);var a=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:i});n.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),a=this.createElement("div",{id:t.concat("_left"),className:o+" e-overlay"});a.setAttribute("aria-disabled","true");var s=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});a.appendChild(s),n.appendChild(r),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new Ei(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),ce.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.scrollEle,r=this.element,o=t.classList;o.contains("e-scroll-nav")&&(o=t.querySelector(".e-nav-arrow").classList),this.contains(r,"e-rtl")&&this.browserCheck&&(e=-e);n.scrollLeft;!this.contains(r,"e-rtl")||this.browserCheck||this.ieCheck?o.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):o.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5;!function r(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),n-=.5,window.requestAnimationFrame(r))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(mt(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetWidth}));!function i(){var r,o;n.contains(n.element,"e-rtl")&&n.browserCheck?(r=-e,o=-10):(r=e,o=10),r<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+t:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(f(e)?t:e).querySelector(".e-nav-arrow");f(e)?bt(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):bt(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=this.element,r=this.element.querySelector(".e-scroll-left-nav"),o=this.element.querySelector(".e-scroll-right-nav"),a=this.element.querySelector(".e-scroll-left-overlay"),s=this.element.querySelector(".e-scroll-right-overlay"),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(a=this.element.querySelector(".e-scroll-right-overlay"),s=this.element.querySelector(".e-scroll-left-overlay")),a.style.width=l<40?l+"px":"40px",t.scrollWidth-Math.ceil(i+l)<40?s.style.width=t.scrollWidth-Math.ceil(i+l)+"px":s.style.width="40px"),0===l)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,o):this.arrowDisabling(o,r);else if(Math.ceil(i+l+.1)>=t.scrollWidth)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(o,r):this.arrowDisabling(r,o);else{var c=this.element.querySelector(".e-scroll-nav.e-overlay");c&&(c.classList.remove("e-overlay"),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Eu([zt(null)],t.prototype,"scrollStep",void 0),t=Eu([Vt],t)}(si),Iu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ku=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Au=function(e){function t(t,i){return e.call(this,t,i)||this}return Iu(t,e),t.prototype.preRender=function(){this.browser=le.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=le.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=m("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new Ei(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),ce.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),ce.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=rt("div",{className:"e-vscroll-content"}),t=rt("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",at([this.element],["e-vscroll","e-scroll-device"]);var i=mt(".e-"+t.id+"_nav.e-scroll-nav",t),n=mt(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){pt(e)}));for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var a=o[r];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),pt(this.scrollEle),i.length>0&&(pt(i[0]),f(i[1])||pt(i[1])),ce.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=mt(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=rt("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),r=rt("div",{id:t.concat("down"),className:n}),o=rt("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});r.appendChild(o);var a=rt("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=rt("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var r=rt("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),a=rt("div",{id:t.concat("_up"),className:o+" e-overlay"});a.setAttribute("aria-disabled","true");var s=rt("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});a.appendChild(s),n.appendChild(r),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new Ei(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),ce.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){this.element;var n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5;!function r(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),n-=.02,window.requestAnimationFrame(r))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(mt(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetHeight}));!function i(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+t:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(f(e)?t:e).querySelector(".e-nav-arrow");f(e)?bt(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):bt(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=(this.element,this.element.querySelector(".e-scroll-up-nav")),r=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),a=this.element.querySelector(".e-scroll-down-overlay"),s=t.scrollTop;if(s<=0&&(s=-s),this.isDevice&&(o.style.height=s<40?s+"px":"40px",t.scrollHeight-Math.ceil(i+s)<40?a.style.height=t.scrollHeight-Math.ceil(i+s)+"px":a.style.height="40px"),0===s)this.arrowDisabling(n,r);else if(Math.ceil(i+s+.1)>=t.scrollHeight)this.arrowDisabling(r,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},ku([zt(null)],t.prototype,"scrollStep",void 0),t=ku([Vt],t)}(si),Mu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Du=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Lu="e-focused",Ru="e-menu-header",ju="e-selected",Nu="e-menu-item",zu="e-menu-hide",Bu="e-menu-popup",Hu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),Du([zt("id")],t.prototype,"itemId",void 0),Du([zt("parentId")],t.prototype,"parentId",void 0),Du([zt("text")],t.prototype,"text",void 0),Du([zt("iconCss")],t.prototype,"iconCss",void 0),Du([zt("url")],t.prototype,"url",void 0),Du([zt("separator")],t.prototype,"separator",void 0),Du([zt("items")],t.prototype,"children",void 0),t}(ii),_u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),Du([zt(null)],t.prototype,"iconCss",void 0),Du([zt("")],t.prototype,"id",void 0),Du([zt(!1)],t.prototype,"separator",void 0),Du([_t([],t)],t.prototype,"items",void 0),Du([zt("")],t.prototype,"text",void 0),Du([zt("")],t.prototype,"url",void 0),t}(ii),Wu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),Du([zt("SlideDown")],t.prototype,"effect",void 0),Du([zt(400)],t.prototype,"duration",void 0),Du([zt("ease")],t.prototype,"easing",void 0),t}(ii),Fu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.navIdx=[],n.animation=new Gt({}),n.isTapHold=!1,n.tempItem=[],n}return Mu(t,e),t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:m(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=c("ej2_instances",this.element);at([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,h("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:m(this.getModuleName())}),ht([].slice.call(this.element.cloneNode(!0).children),e);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(e,i):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var n=this.element,r=c("ej2_instances",n),o=(e=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),a=0,s=n.attributes.length;a<s;a++)e.setAttribute(n.attributes[a].nodeName,n.attributes[a].nodeValue);n.parentNode.insertBefore(o,n),pt(n),n=e,o.appendChild(n),h("ej2_instances",r,n),this.clonedElement=o,this.element=n,this.element.id||(this.element.id=m(this.getModuleName()))}},t.prototype.render=function(){if(this.initialize(),this.renderItems(),this.isMenu&&this.template&&w()){var e=this.element.id+"Template";He(e),Object.keys(je).length&&u(this.tempItem,je[e],[],!0),Be(e,"Template",this)}this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&ot([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add("e-rtl"),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e))},t.prototype.renderItems=function(){if(!this.items.length){var e=fp.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),w()?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var t=this.createItems(this.items);if(ht(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu){var i=this.getWrapper();this.element.classList.contains("e-vertical")?this.addScrolling(i,this.element,"vscroll",i.offsetHeight,this.element.offsetHeight):this.addScrolling(i,this.element,"hscroll",i.offsetWidth,this.element.offsetWidth)}},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,i=mt(this.target),n=0,r=i.length;n<r;n++)t=i[n],this.isMenu?ce.add(t,"click",this.menuHeaderClickHandler,this):le.isIos?new Ei(t,{tapHold:this.touchHandler.bind(this)}):ce.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){ce.add(this.targetElement,"scroll",this.scrollHandler,this);for(var o=0,a=oa(this.targetElement);o<a.length;o++){var s=a[o];ce.add(s,"scroll",this.scrollHandler,this)}}}le.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),ce.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),ce.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),ce.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=qt(e,{selector:"."+Nu})},t.prototype.wireKeyboardEvent=function(e){var t={downarrow:"downarrow",uparrow:"uparrow",enter:"enter",leftarrow:"leftarrow",rightarrow:"rightarrow",escape:"escape"};this.isMenu&&(t.home="home",t.end="end"),new wi(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},t.prototype.mouseDownHandler=function(e){yt(e.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||yt(e.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,e)},t.prototype.keyBoardHandler=function(e){var t="",i=e.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Lu,ju],[yt(i,".e-"+this.getModuleName()+"-wrapper")]),n)switch(e.action){case"rightarrow":t="rightarrow",e.action="downarrow";break;case"leftarrow":t="leftarrow",e.action="uparrow";break;case"downarrow":t="downarrow",e.action="rightarrow";break;case"uparrow":t="uparrow",e.action=""}else if(this.enableRtl)switch(e.action){case"leftarrow":n=!0,t="leftarrow",e.action="rightarrow";break;case"rightarrow":n=!0,t="rightarrow",e.action="leftarrow"}switch(e.action){case"downarrow":case"uparrow":case"end":case"home":this.upDownKeyHandler(e);break;case"rightarrow":this.rightEnterKeyHandler(e);break;case"leftarrow":this.leftEscKeyHandler(e);break;case"enter":this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case"escape":this.leftEscKeyHandler(e)}n&&(e.action=t)},t.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),i="downarrow"===e.action||"home"===e.action?0:t.childElementCount-1,n=i,r=this.getLIByClass(t,Lu);r&&("end"!==e.action&&"home"!==e.action&&(n=this.getIdx(t,r)),r.classList.remove(Lu),"end"!==e.action&&"home"!==e.action&&("downarrow"===e.action?n++:n--,n===("downarrow"===e.action?t.childElementCount:-1)&&(n=i)));var o=t.children[n];n=this.isValidLI(o,n,e.action),t.children[n].classList.add(Lu),t.children[n].focus()},t.prototype.isValidLI=function(e,t,i){this.getWrapper();var n=this.getUlByNavIdx();return(e.classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(zu))&&("downarrow"===i||"rightarrow"===i?t++:t--),((e=n.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains(zu))&&(t=this.isValidLI(e,t,i)),t},t.prototype.getUlByNavIdx=function(e){if(void 0===e&&(e=this.navIdx.length),this.isMenu){var t=[this.getWrapper()].concat([].slice.call(mt("."+Bu)))[e];return f(t)?null:gt(".e-menu-parent",t)}return this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var t,i=this.getUlByNavIdx(),n=this.getLIByClass(i,Lu);if(n){var r=this.getIdx(i,n),o=this.navIdx.concat(r),a=this.getItem(o);a.items.length?(this.navIdx.push(r),this.keyType="right",this.action=e.action,this.openMenu(n,a,-1,-1,e)):"enter"===e.action&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([ju],[this.getWrapper()]):n.classList.remove(Lu),n.classList.add(ju),t={element:n,item:a,event:e},this.trigger("select",t),this.closeMenu(null,e))}},t.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):"escape"===e.action&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},t.prototype.closeMenu=function(e,t){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=null),this.isMenuVisible()){var n,r,o,a=void 0,s=void 0,l=this.getWrapper(),c=this.getPopups(),h=!1,d=this.isMenu?c.length+1:l.childElementCount;if(n=this.isMenu&&1!==d?gt(".e-ul",c[d-2]):mt(".e-menu-parent",l)[d-1],this.isMenu&&n.classList.contains("e-menu")&&((a=this.getLIByClass(n,ju))&&a.classList.remove(ju),h=!0),!h){var p=t&&t.target&&this.getLI(t.target);r=this.navIdx.length?this.getItem(this.navIdx):null,o=r?r.items:this.items,s={element:n,parentItem:this.isMenu&&w()?this.getMenuItemModel(r,e):r,items:o,event:t,cancel:!1},this.trigger("beforeClose",s,(function(a){var s,l,c,h,d,u,g="",m=!a.cancel;(m||i.isCMenu)&&(i.isMenu?(s=yt(n,"."+Bu),i.hamburgerMode&&(s.parentElement.style.minHeight="",yt(n,".e-menu-item").setAttribute("aria-expanded","false")),i.unWireKeyboardEvent(s),i.destroyScrollObj(x(s.children[0],Au),s.children[0]),(c=x(s,ra)).hide(),g=s.id,c.destroy(),pt(s)):i.toggleAnimation(n,!1),l={element:n,parentItem:r,items:o},i.trigger("onClose",l),i.navIdx.pop());var y=i.getWrapper()&&i.getUlByNavIdx();i.isCMenu&&(i.canOpen(t.target)&&i.openMenu(null,null,i.pageY,i.pageX,t),i.isCMenu=!1),i.isMenu&&y&&g.length&&(h=new RegExp("(.*)-ej2menu-"+i.element.id+"-popup").exec(g)[1],d=y.querySelector('[id="'+h+'"]'),u=p&&y.querySelector('[id="'+p.id+'"]'));var v=p&&p.querySelectorAll(".e-menu-item");if(m&&i.hamburgerMode&&e&&!v.length)i.afterCloseMenu(t);else if(m&&!i.hamburgerMode&&i.navIdx.length&&d&&!u)i.closeMenu(i.navIdx[i.navIdx.length-1],t);else if(m&&!e&&(i.hamburgerMode&&i.navIdx.length||1===i.navIdx.length))i.closeMenu(null,t);else if(m&&f(e)&&i.navIdx.length)i.closeMenu(null,t);else if(!m||i.isMenu||e||0!==i.navIdx.length||i.isMenusClosed)if(m&&i.isMenu&&t&&t.target&&0!==i.navIdx.length&&yt(t.target,".e-menu-parent.e-control"))i.closeMenu(0,t);else if(!m||"right"!==i.keyType&&"click"!==i.keyType){var b=i.getUlByNavIdx(),w=i.getLIByClass(b,ju);if(w&&(w.setAttribute("aria-expanded","false"),w.classList.remove(ju),p&&(w.classList.add(Lu),w.focus())),!m&&i.hamburgerMode&&p&&"false"===p.getAttribute("aria-expanded")&&"true"===p.getAttribute("aria-haspopup")){yt(p,".e-menu-parent.e-control")?i.navIdx=[]:i.navIdx.pop(),i.navIdx.push(i.cliIdx);var S=i.getItem(i.navIdx);p.setAttribute("aria-expanded","true"),i.openMenu(p,S,-1,-1,t)}}else i.afterCloseMenu(t);else i.isMenusClosed=!0,i.closeMenu(0,t);i.removeStateWrapper()}))}}},t.prototype.getMenuItemModel=function(e,t){if(f(e))return null;f(t)&&(t=0);var i=this.getFields(t);return{text:e[i.text],id:e[i.id],items:e[i.child],separator:e[i.separator],iconCss:e[i.iconCss],url:e[i.url]}},t.prototype.destroyScrollObj=function(e,t){e&&(e.destroy(),t.parentElement.appendChild(gt(".e-menu-parent",t)),pt(t))},t.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll("."+Bu)).forEach((function(i){e.getIndex(i.querySelector("."+Nu).id,!0).length&&t.push(i)})),t},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&lt(this.element).valueOf()},t.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var i=this.filter.split(" "),n=0,r=i.length;n<r;n++)if(yt(e,"."+i[n])){t=!0;break}}return t},t.prototype.openMenu=function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=this.targetElement);var a=this.getWrapper();this.lItem=e;var s=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,f(i)&&(i=-1),f(n)&&(n=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&le.isDevice){a.lastChild.style.display="none";var l={text:t[this.getField("text")].toString(),iconCss:"e-icons e-previous"},c=new _u(this.items[0],"items",l,!0),h=this.createItems([c]).children[0];h.classList.add(Ru),this.uList.insertBefore(h,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+Bu,id:e.id+"-ej2menu-"+s+"-popup"}),this.hamburgerMode?(i=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&ot([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.triggerBeforeOpen(e,this.uList,t,r,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,a.appendChild(this.uList),this.triggerBeforeOpen(e,this.uList,t,r,i,n,"none"))}else this.uList=this.element,this.uList.style.zIndex=aa(o||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,r,i,n,"none");if(this.isMenu&&this.template&&w()){var d=this.element.id+"Template";if(Object.keys(je).length){var p=je[d];this.tempItem=this.tempItem.concat(p),je[d]=this.tempItem}Be(d,"Template",this)}},t.prototype.calculateIndentSize=function(e,t){var i=getComputedStyle(t),n=parseInt(i.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?n*=2:n+=n/4,e.style.textIndent=n+"px";var r=e.querySelectorAll(".e-blankicon");if(r&&r.length)for(var o=e.querySelector(".e-menu-icon"),a=getComputedStyle(o),s=parseInt(a.marginRight,10)+o.offsetWidth+n,l=0;l<r.length;l++)r[l].style.textIndent=s+"px"},t.prototype.generatePopup=function(e,t,i,n){var r=this,o=new ra(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:function(){var e=gt(".e-menu-vscroll",o.element);e&&(e.style.height="inherit",e.style.maxHeight="");var t=gt(".e-ul",o.element);o.element.style.maxHeight="",t.focus(),r.triggerOpen(t)}});return o},t.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?Ai.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),r=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(n),t.appendChild(r),e.insertBefore(t,this.element)},t.prototype.openHamburgerMenu=function(e){if(this.hamburgerMode){this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")}},t.prototype.closeHamburgerMenu=function(e){var t=this;if(this.hamburgerMode){var i;i={element:this.element,parentItem:null,event:e,items:this.items,cancel:!1},this.trigger("beforeClose",i,(function(i){i.cancel||(t.closeMenu(null,e),t.element.classList.add("e-hide-menu"),t.trigger("onClose",{element:t.element,parentItem:null,items:t.items}))}))}},t.prototype.callFit=function(e,t,i,n,r){return Lo(e,null,{X:t,Y:i},{top:n,left:r})},t.prototype.triggerBeforeOpen=function(e,t,i,n,r,o,a){var s,l=this,c=(this.getIndex(e?e.id:null,!0),e?i[this.getField("children",this.navIdx.length-1)]:this.items),h={element:t,items:c,parentItem:this.isMenu&&w()?this.getMenuItemModel(i,this.navIdx.length-1):i,event:n,cancel:!1,top:r,left:o},d=a;this.trigger("beforeOpen",h,(function(r){switch(d){case"menu":if(l.hamburgerMode||(l.top=r.top,l.left=r.left),l.popupWrapper.style.display="block",l.hamburgerMode||(l.popupWrapper.style.maxHeight=l.popupWrapper.getBoundingClientRect().height+"px",l.addScrolling(l.popupWrapper,l.uList,"vscroll",l.popupWrapper.offsetHeight,l.uList.offsetHeight),l.checkScrollOffset(n)),l.hamburgerMode||l.left||l.top)l.popupObj.collision={X:"none",Y:"none"};else{if(l.popupObj.refreshPosition(l.lItem,!0),l.left=parseInt(l.popupWrapper.style.left,10),l.top=parseInt(l.popupWrapper.style.top,10),l.enableRtl&&(l.left=l.isNestedOrVertical?l.left-l.popupWrapper.offsetWidth-l.lItem.parentElement.offsetWidth+2:l.left-l.popupWrapper.offsetWidth+l.lItem.offsetWidth),s=Ro(l.popupWrapper,null,l.left,l.top),(l.isNestedOrVertical||l.enableRtl)&&(s.indexOf("right")>-1||s.indexOf("left")>-1)){l.popupObj.collision.X="none";var o=yt(l.lItem,".e-"+l.getModuleName()+"-wrapper").offsetWidth;l.left=l.enableRtl?So(l.lItem,l.isNestedOrVertical?"right":"left","top").left:l.left-l.popupWrapper.offsetWidth-o+2}((s=Ro(l.popupWrapper,null,l.left,l.top)).indexOf("left")>-1||s.indexOf("right")>-1)&&(l.left=l.callFit(l.popupWrapper,!0,!1,l.top,l.left).left),l.popupWrapper.style.left=l.left+"px"}l.popupWrapper.style.display="";break;case"none":l.top=r.top,l.left=r.left;break;case"hamburger":r.cancel||(l.element.classList.remove("e-hide-menu"),l.triggerOpen(l.element))}if("hamburger"!==d)if(r.cancel)l.isMenu?(l.popupObj.destroy(),pt(l.popupWrapper)):t.className.indexOf("e-ul")>-1&&pt(t),l.navIdx.pop();else if(l.isMenu)if(l.hamburgerMode)l.popupWrapper.style.top=l.top+"px",l.popupWrapper.style.left="0px",l.toggleAnimation(l.popupWrapper);else{l.wireKeyboardEvent(l.popupWrapper),qt(l.popupWrapper,{selector:"."+Nu}),l.popupWrapper.style.left=l.left+"px",l.popupWrapper.style.top=l.top+"px";var a="None"!==l.animationSettings.effect?{name:l.animationSettings.effect,duration:l.animationSettings.duration,timingFunction:l.animationSettings.easing}:null;l.popupObj.show(a,l.lItem)}else l.setPosition(l.lItem,l.uList,l.top,l.left),l.toggleAnimation(l.uList);if("right"===l.keyType){var c=l.getUlByNavIdx();e.classList.remove(Lu);var h;if(l.isMenu&&1===l.navIdx.length&&l.removeLIStateByClass([ju],[l.getWrapper()]),e.classList.add(ju),"enter"===l.action){var p={element:e,item:i,event:n};l.trigger("select",p)}e.focus(),c=l.getUlByNavIdx(),h=l.isValidLI(c.children[0],0,l.action),c.children[h].classList.add(Lu),c.children[h].focus()}}))},t.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i,n,r=f(e)?this.element:yt(e.target,"."+Nu),o=gt(".e-hscroll-bar",t);o.scrollLeft>r.offsetLeft&&(o.scrollLeft-=o.scrollLeft-r.offsetLeft),(i=o.scrollLeft+o.offsetWidth)<(n=r.offsetLeft+r.offsetWidth)&&(o.scrollLeft+=n-i)}},t.prototype.addScrolling=function(e,t,i,n,r){if(this.enableScrolling&&n<r){var o=this.createElement("div",{className:"e-menu-"+i});e.appendChild(o),o.appendChild(t),o.style.maxHeight=e.style.maxHeight;e.style.overflow="hidden","vscroll"===i?new Au({enableRtl:this.enableRtl},o).scrollStep=gt(".e-"+i+"-bar",e).offsetHeight/2:new Tu({enableRtl:this.enableRtl},o).scrollStep=gt(".e-"+i+"-bar",e).offsetWidth}},t.prototype.setPosition=function(e,t,i,n){if(this.toggleVisiblity(t),t===this.element||n>-1&&i>-1){if((o=Ro(t,null,n,i)).indexOf("right")>-1&&(n-=t.offsetWidth),o.indexOf("bottom")>-1)i=(r=this.callFit(t,!1,!0,i,n)).top-20;if((o=Ro(t,null,n,i)).indexOf("left")>-1)n=(r=this.callFit(t,!0,!1,i,n)).left}else if(le.isDevice)i=Number(this.element.style.top.replace("px","")),n=Number(this.element.style.left.replace("px",""));else{var r;i=(r=So(e,this.enableRtl?"left":"right","top")).top,n=r.left;var o,a=(o=Ro(t,null,this.enableRtl?n-t.offsetWidth:n,i)).indexOf("left")>-1||o.indexOf("right")>-1;a&&(n=(r=So(e,this.enableRtl?"right":"left","top")).left),(this.enableRtl||a)&&(n=this.enableRtl&&a?n:n-t.offsetWidth),o.indexOf("bottom")>-1&&(i=(r=this.callFit(t,!1,!0,i,n)).top)}this.toggleVisiblity(t,!1),t.style.top=i+"px",t.style.left=n+"px"},t.prototype.toggleVisiblity=function(e,t){void 0===t&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},t.prototype.createItems=function(e){var t=this,i=this.navIdx?this.navIdx.length:0,n=this.getFields(i);if(w()&&this.template&&e.length&&e[0].properties){var r=[];e.forEach((function(e,t){r.push({}),r[t][n.text]=e[n.text],e[n.id]||(e[n.id]=m("menuitem")),r[t][n.id]=e[n.id],r[t][n.iconCss]=e[n.iconCss],r[t][n.url]=e[n.url],r[t][n.child]=e[n.child],r[t][n.separator]=e[n.separator]})),e=r}var o=this.hasField(e,this.getField("iconCss",i)),a={showIcon:o,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(e){e.curData[e.fields[n.id]]||(e.curData[e.fields[n.id]]=m("menuitem")),e.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},t.isMenu&&!e.curData[t.getField("separator",i)]&&(e.curData.htmlAttributes["aria-label"]=e.curData[e.fields.text]),""===e.curData[e.fields[n.iconCss]]&&(e.curData[e.fields[n.iconCss]]=null)},itemCreated:function(e){if(e.curData[t.getField("separator",i)]&&(e.item.classList.add("e-separator"),e.item.removeAttribute("role")),!o||e.curData[e.fields.iconCss]||e.curData[t.getField("separator",i)]||e.item.classList.add("e-blankicon"),e.curData[e.fields.child]&&e.curData[e.fields.child].length){var n=t.createElement("span",{className:"e-icons e-caret"});e.item.appendChild(n),e.item.setAttribute("aria-haspopup","true"),e.item.setAttribute("aria-expanded","false"),t.isMenu||e.item.removeAttribute("role"),e.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(e.item.setAttribute("id",e.curData[e.fields.id].toString()),e.item.removeAttribute("data-uid"),e.item.classList.contains("e-level-1")&&e.item.classList.remove("e-level-1"),e.item.classList.contains("e-has-child")&&e.item.classList.remove("e-has-child"));var r={item:e.curData,element:e.item};t.trigger("beforeItemRender",r)}};this.setProperties({items:this.items},!0),this.isMenu&&(a.templateID=this.element.id+"Template");var s=fp.createList(this.createElement,e,a,!this.template);return s.setAttribute("tabindex","0"),this.isMenu&&s.setAttribute("role","menu"),s},t.prototype.moverHandler=function(e){var t=e.target;this.liTrgt=t;var i=this.getLI(t),n=i?yt(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),r=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup"),a=!1;if(n){if((""!==n.id?o.exec(n.id)[1]:n.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([Lu,ju],[this.getWrapper()]),!this.navIdx.length)return;a=!0}i&&yt(i,".e-"+this.getModuleName()+"-wrapper")&&!a?(this.removeLIStateByClass([Lu],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([Lu],this.isMenu?[r].concat(this.getPopups()):[r]),i.classList.add(Lu),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!a&&this.removeLIStateByClass([Lu],[n].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||t.parentElement===n||yt(t,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)?a&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([Lu],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},t.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=yt(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([Lu,ju],[e])}},t.prototype.removeLIStateByClass=function(e,t){for(var i,n=function(n){e.forEach((function(e){(i=gt("."+e,t[n]))&&i.classList.remove(e)}))},r=0;r<t.length;r++)n(r)},t.prototype.getField=function(e,t){void 0===t&&(t=0);var i=this.fields[e];return"string"===typeof i?i:i[t]?i[t].toString():i[i.length-1].toString()},t.prototype.getFields=function(e){return void 0===e&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i][t])return!0;return!1},t.prototype.menuHeaderClickHandler=function(e){yt(e.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))},t.prototype.clickHandler=function(e){if(this.isTapHold)this.isTapHold=!1;else{var t=this.getWrapper(),i=e.target,n=this.cli=this.getLI(i),r=new RegExp("-ej2menu-(.*)-popup"),o=n?yt(n,".e-"+this.getModuleName()+"-wrapper"):null,a=n&&o&&(this.isMenu?this.getIndex(n.id,!0).length>0:t.firstElementChild.id===o.firstElementChild.id);if(le.isDevice&&this.isMenu&&(this.removeLIStateByClass([Lu],[t].concat(this.getPopups())),this.mouseDownHandler(e)),n&&o&&this.isMenu){var s=o.id?r.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==s)return}if(a&&"click"===e.type&&!n.classList.contains(Ru)){this.setLISelected(n);var l=this.getIndex(n.id,!0),c={element:n,item:this.getItem(l),event:e};this.trigger("select",c)}if(a&&("mouseover"===e.type||le.isDevice||this.showItemOnClick)){var h=void 0;if(n.classList.contains(Ru))h=t.children[this.navIdx.length-1],this.toggleAnimation(h),(p=this.getLIByClass(h,ju))&&p.classList.remove(ju),pt(n.parentNode),this.navIdx.pop();else if(!n.classList.contains("e-separator")){this.showSubMenu=!0;var d=n.parentNode;if(this.cliIdx=this.getIdx(d,n),this.isMenu||!le.isDevice){var p,u=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),yt(d,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,d);if(this.navIdx[u]===this.cliIdx&&(this.showSubMenu=!1),u!==this.navIdx.length&&("mouseover"!==e.type||this.showSubMenu))(p=this.getLIByClass(d,ju))&&p.classList.remove(ju),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(n),this.closeMenu(u+1,e),this.showItemOnClick&&this.setLISelected(n)}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&yt(i,".e-menu-vscroll")){var f=yt(i,"."+Bu),g=Array.prototype.indexOf.call(this.getPopups(),f)+1;g<this.navIdx.length&&(this.closeMenu(g+1,e),this.removeLIStateByClass([Lu,ju],[f]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):"UL"===i.tagName&&(this.isMenu?!i.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(i.querySelector("."+Nu).id,!0).length:i.parentElement===t)||(n||this.removeLIStateByClass([ju],[t]),n&&n.querySelector(".e-caret")||this.closeMenu(null,e))}},t.prototype.afterCloseMenu=function(e){var t;if(this.showSubMenu){t=this.showItemOnClick&&0===this.navIdx.length?yt(e.target,".e-menu-parent.e-control"):yt(this.element,".e-menu-parent.e-control");var i=this.navIdx.concat(this.cliIdx),n=this.getItem(i);if(n&&n[this.getField("children",i.length-1)]&&n[this.getField("children",i.length-1)].length?(("mouseover"===e.type||le.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,n,null,null,e))):"mouseover"!==e.type&&this.closeMenu(null,e),!t){var r=this.getUlByNavIdx(),o=this.getLIByClass(r,ju);o&&(o.setAttribute("aria-expanded","false"),o.classList.remove(ju))}}this.keyType=""},t.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,ju);t&&t.classList.remove(ju),this.isMenu||e.classList.remove(Lu),e.classList.add(ju)},t.prototype.getLIByClass=function(e,t){for(var i=0,n=e.children.length;i<n;i++)if(e.children[i].classList.contains(t))return e.children[i];return null},t.prototype.getItemIndex=function(e,t){var i;i="string"===typeof e?e:e.id;var n=!1!==t;return this.getIndex(i,n)},t.prototype.setItem=function(e,t,i){var n=t||e.id,r=!1!==i,o=this.getIndex(n,r),a=this.getItem(o);a.iconCss=e.iconCss,a.id=e.id,a.text=e.text,a.url=e.url,a.separator=e.separator,a.items=e.items},t.prototype.getItem=function(e){var t=(e=e.slice()).pop();return this.getItems(e)[t]},t.prototype.getItems=function(e){for(var t=this.items,i=0;i<e.length;i++)t=t[e[i]][this.getField("children",i)];return t},t.prototype.setItems=function(e,t){var i=this.getItems(t);i.splice(0,i.length);for(var n=0;n<e.length;n++)i.splice(n,0,e[n])},t.prototype.getIdx=function(e,t,i){void 0===i&&(i=!0);var n=Array.prototype.indexOf.call(e.querySelectorAll("li"),t);return n=this.isMenu&&this.template&&w()?Array.prototype.indexOf.call(e.querySelectorAll(t.tagName),t):Array.prototype.indexOf.call(e.children,t),i&&e.children[0].classList.contains(Ru)&&n--,n},t.prototype.getLI=function(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:yt(e,"li.e-menu-item")},t.prototype.updateItemsByNavIdx=function(){for(var e=this.items,t=0,i=0;i<this.navIdx.length&&(e=e[i].items);i++){t++;var n=this.getUlByNavIdx(t);if(!n)break;this.updateItem(n,e)}},t.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},t.prototype.onPropertyChanged=function(e,t){for(var i=this,n=this.getWrapper(),r=function(r){switch(r){case"cssClass":t.cssClass&&at([n],t.cssClass.split(" ")),e.cssClass&&ot([n],e.cssClass.split(" "));break;case"enableRtl":n.classList.toggle("e-rtl");break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=e.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var a;o.element.classList.contains("e-vertical")?o.addScrolling(n,o.element,"vscroll",n.offsetHeight,o.element.offsetHeight):o.addScrolling(n,o.element,"hscroll",n.offsetWidth,o.element.offsetWidth),o.getPopups().forEach((function(e){a=gt(".e-ul",e),i.addScrolling(e,a,"vscroll",e.offsetHeight,a.offsetHeight)}))}else{var s=n.children[0];o.element.classList.contains("e-vertical")?o.destroyScrollObj(x(s,Au),s):o.destroyScrollObj(x(s,Tu),s),n.style.overflow="",n.appendChild(o.element),o.getPopups().forEach((function(e){s=e.children[0],i.destroyScrollObj(x(s,Au),s),e.style.overflow=""}))}break;case"items":var l=void 0,c=void 0,h=void 0;if(Object.keys(t.items).length){var d=Object.keys(e.items);for(p=0;p<d.length;p++)(c=o.getChangedItemIndex(e,[],Number(d[p]))).length<=o.getWrapper().children.length&&(l=c.pop(),h=o.getItems(c),o.insertAfter([h[l]],h[l].text),o.removeItem(h,c,l),o.setItems(h,c)),c.length=0}else{o.updateItem(o.element,o.items);for(var p=1,u=n.childElementCount;p<u;p++)pt(n.lastElementChild);o.isMenu&&w()?o.updateItemsByNavIdx():o.navIdx=[]}}},o=this,a=0,s=Object.keys(e);a<s.length;a++){r(s[a])}},t.prototype.updateItem=function(e,t){w()?e=this.removeChildElement(e):e.innerHTML="",[].slice.call(this.createItems(t).children).forEach((function(t){e.appendChild(t)}))},t.prototype.getChangedItemIndex=function(e,t,i){t.push(i);var n=Object.keys(e.items[i]).pop();if("items"===n){var r=e.items[i],o=Object.keys(r.items).pop();o&&this.getChangedItemIndex(r,t,Number(o))}else"isParentArray"===n&&t.length>1&&t.pop();return t},t.prototype.removeItem=function(e,t,i){e.splice(i,1);var n=this.getWrapper().children;t.length<n.length&&pt(n[t.length].children[i])},t.prototype.unWireEvents=function(e){void 0===e&&(e=this.target);var t=this.getWrapper();if(e){for(var i=void 0,n=void 0,r=mt(e),o=0,a=r.length;o<a;o++)i=r[o],this.isMenu?ce.remove(i,"click",this.menuHeaderClickHandler):le.isIos?(n=x(i,Ei))&&n.destroy():ce.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){ce.remove(this.targetElement,"scroll",this.scrollHandler);for(var s=0,l=oa(this.targetElement);s<l.length;s++){var c=l[s];ce.remove(c,"scroll",this.scrollHandler)}}}le.isDevice||(ce.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),ce.remove(document,"mousedown",this.delegateMouseDownHandler)),ce.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},t.prototype.unWireKeyboardEvent=function(e){var t=x(e,wi);t&&t.destroy()},t.prototype.toggleAnimation=function(e,t){var i,n,r=this;void 0===t&&(t=!0),"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(e){r.hamburgerMode?(n=e.element.parentElement,e.element.style.position="absolute",i=n.offsetHeight,e.element.style.maxHeight=e.element.offsetHeight+"px",n.style.maxHeight=""):(e.element.style.display="block",e.element.style.maxHeight=e.element.getBoundingClientRect().height+"px")},progress:function(e){r.hamburgerMode&&(n.style.minHeight=i+e.element.offsetHeight+"px")},end:function(e){r.hamburgerMode?(e.element.style.position="",e.element.style.maxHeight="",n.style.minHeight="",e.element.style.top="0px",e.element.children[0].focus(),r.triggerOpen(e.element.children[0])):r.end(e.element,t)}}):this.end(e,t)},t.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null,i={element:e,parentItem:t,items:t?t.items:this.items};this.trigger("onOpen",i)},t.prototype.end=function(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+Lu))e.querySelector("."+Lu).focus();else{var i=void 0;(i=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1])?i.querySelector("."+ju).focus():this.element.focus()}else if(e===this.element){var n=this.getLIByClass(this.element,Lu);n&&n.classList.remove(Lu);var r=this.getLIByClass(this.element,ju);r&&r.classList.remove(ju),e.style.display="none"}else pt(e)},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return yt(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,t,i,n,r,o){var a;void 0===i&&(i=this.items),void 0===n&&(n=[]),void 0===r&&(r=!1),void 0===o&&(o=0),o=r?o+1:0;for(var s=0,l=i.length;s<l;s++){if(a=i[s],(t?a[this.getField("itemId",o)]:a[this.getField("text",o)])===e){n.push(s);break}if(a[this.getField("children",o)]&&a[this.getField("children",o)].length){if(-1!==(n=this.getIndex(e,t,a[this.getField("children",o)],n,!0,o))[n.length-1]){n.unshift(s);break}s!==l-1&&n.pop()}else s===l-1&&n.push(-1)}return r||-1!==n[0]?n:[]},t.prototype.enableItems=function(e,t,i){var n,r,o;void 0===t&&(t=!0);for(var a,s="e-disabled",l=0;l<e.length;l++){if(o=this.getIndex(e[l],i),this.navIdx.length){if(1!==o.length){a=!1;for(var c=0,h=o.length-1;c<h;c++)if(o[c]!==this.navIdx[c]){a=!0;break}if(a)continue}}else if(1!==o.length)continue;r=o.pop(),(n=this.getUlByNavIdx(o.length))&&(t?this.isMenu?(n.children[r].classList.remove(s),n.children[r].removeAttribute("aria-disabled")):le.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove(s):n.children[r].classList.remove(s):this.isMenu?(n.children[r].classList.add(s),n.children[r].setAttribute("aria-disabled","true")):le.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add(s):n.children[r].classList.add(s))}},t.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},t.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},t.prototype.showHideItems=function(e,t,i){for(var n,r,o,a=0;a<e.length;a++)r=(o=this.getIndex(e[a],i)).pop(),(n=this.getUlByNavIdx(o.length))&&(t?le.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add(zu):n.children[r].classList.add(zu):le.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove(zu):n.children[r].classList.remove(zu))},t.prototype.removeItems=function(e,t){for(var i,n,r,o=0;o<e.length;o++)i=(n=this.getIndex(e[o],t)).pop(),r=this.getItems(n),this.removeItem(r,n,i)},t.prototype.insertAfter=function(e,t,i){this.insertItems(e,t,i)},t.prototype.insertBefore=function(e,t,i){this.insertItems(e,t,i,!1)},t.prototype.insertItems=function(e,t,i,n){var r,o,a,s,l;void 0===n&&(n=!0);for(var c=0;c<e.length;c++){o=(a=this.getIndex(t,i)).pop(),s=this.getItems(a),l=new _u(s[0],"items",e[c],!0),s.splice(n?o+1:o,0,l);var h=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(a.length<h.length){o=n?o+1:o,this.hasField(s,this.getField("iconCss",a.length-1)),r=this.createItems(s).children[o];var d=this.isMenu?gt(".e-menu-parent",h[a.length]):h[a.length];d.insertBefore(r,d.children[o])}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach((function(t){e.element.style.removeProperty(t)})),["role","tabindex","class","style"].forEach((function(t){"class"===t&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(t)&&e.element.getAttribute(t)||e.element.removeAttribute(t),e.isMenu&&"class"===t&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")}))},t.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),w()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t);else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)ot([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==t?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),w()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",ht([].slice.call(this.clonedElement.children),this.element),pt(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(pt(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):pt(t),e.prototype.destroy.call(this)}},Du([Ft()],t.prototype,"beforeItemRender",void 0),Du([Ft()],t.prototype,"beforeOpen",void 0),Du([Ft()],t.prototype,"onOpen",void 0),Du([Ft()],t.prototype,"beforeClose",void 0),Du([Ft()],t.prototype,"onClose",void 0),Du([Ft()],t.prototype,"select",void 0),Du([Ft()],t.prototype,"created",void 0),Du([zt("")],t.prototype,"cssClass",void 0),Du([zt(!1)],t.prototype,"showItemOnClick",void 0),Du([zt("")],t.prototype,"target",void 0),Du([zt("")],t.prototype,"filter",void 0),Du([zt(null)],t.prototype,"template",void 0),Du([zt(!1)],t.prototype,"enableScrolling",void 0),Du([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),Du([Bt({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Hu)],t.prototype,"fields",void 0),Du([_t([],_u)],t.prototype,"items",void 0),Du([Bt({duration:400,easing:"ease",effect:"SlideDown"},Wu)],t.prototype,"animationSettings",void 0),t=Du([Vt],t)}(si),Vu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Uu=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Yu=function(e){function t(t,i){return e.call(this,t,i)||this}return Vu(t,e),t.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||m("ej2-contextmenu"),e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),ft(this.element,{role:"context menu",tabindex:"0"}),this.element.style.zIndex=aa(this.element).toString()},t.prototype.open=function(t,i,n){e.prototype.openMenu.call(this,null,null,t,i,null,n)},t.prototype.close=function(){e.prototype.closeMenu.call(this)},t.prototype.onPropertyChanged=function(t,i){e.prototype.onPropertyChanged.call(this,t,i);for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}}},t.prototype.getModuleName=function(){return"contextmenu"},Uu([zt("")],t.prototype,"target",void 0),Uu([zt("")],t.prototype,"filter",void 0),Uu([_t([],_u)],t.prototype,"items",void 0),t=Uu([Vt],t)}(Fu),Xu=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))},Gu=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},qu=".e-diagramcontent",Zu="e-copy",Ku="e-paste",$u="e-undo",Qu="e-redo",Ju="e-cut",ef="e-group",tf="e-ungroup",nf="e-bringfront",rf="e-sendback",of="e-bringforward",af="e-sendbackward",sf="e-order";(function(){function e(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.serviceLocator=t,this.addEventListener()}e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=nd("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var e="#"+this.parent.element.id;this.contextMenu=new Yu({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu",animationSettings:{effect:"None"}}),this.contextMenu.appendTo(this.element)},e.prototype.getMenuItems=function(){var e=[],t=[],i=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var n=0,r=this.getDefaultItems();n<r.length;n++){var o=r[n];-1!==o.toLocaleLowerCase().indexOf("group")?"grouping"!==o.toLocaleLowerCase()&&i.push(this.buildDefaultItems(o)):-1!==o.toLocaleLowerCase().indexOf("order")?"order"!==o.toLocaleLowerCase()&&t.push(this.buildDefaultItems(o)):e.push(this.buildDefaultItems(o))}var a;if(i.length>0)(a=this.buildDefaultItems("grouping")).items=i,e.push(a);if(t.length>0)(a=this.buildDefaultItems("order")).items=t,e.push(a)}if(this.parent.contextMenuSettings.items)for(var s=0,l=this.parent.contextMenuSettings.items;s<l.length;s++){var c=l[s];e.push(c)}return e},e.prototype.contextMenuOpen=function(){this.isOpen=!0},e.prototype.BeforeItemRender=function(e){this.parent.trigger("contextMenuBeforeItemRender",e)},e.prototype.contextMenuItemClick=function(e){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger("contextMenuClick",e);var t=this.getKeyFromId(e.item.id);if(!e.cancel)switch(t){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof Yu&&this.updateItemStatus()},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.ensureItems=function(e,t){var i=this.getKeyFromId(e.id);this.defaultItems[i];-1!==this.getDefaultItems().indexOf(i)&&e.target&&(t||this.parent.checkMenu)&&!this.ensureTarget(e)&&this.hiddenItems.push(e.id)},e.prototype.contextMenuBeforeOpen=function(e){return Xu(this,void 0,void 0,(function(){var t,i,n,r,o,a,s,l,c,h;return Gu(this,(function(d){switch(d.label){case 0:for(this.parent.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.parent.checkMenu=e.cancel=!0),this.parent.checkMenu&&(this.hiddenItems=[]),(t=e).hiddenItems=[],i=0,n=e.items;i<n.length;i++)if(h=n[i],this.ensureItems(h,e.event),h.items.length)for(r=0,o=h.items;r<o.length;r++)a=o[r],this.ensureItems(a,e.event);return this.eventArgs=e.event,w()?[4,this.parent.trigger("contextMenuOpen",t)]:[3,2];case 1:return"string"===typeof(t=d.sent()||t)&&(t=JSON.parse(t)),[3,3];case 2:this.parent.trigger("contextMenuOpen",t),d.label=3;case 3:for(s=!0,this.hiddenItems=this.hiddenItems.concat(t.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0),l=this,c=0;c<e.items.length;c++)h=e.items[c],l.hiddenItems.indexOf(h.id)>-1&&l.contextMenu.hideItems([h.id],!0);for(c=0;c<l.contextMenu.items.length;c++)h=l.contextMenu.items[c],-1===l.hiddenItems.indexOf(h.id)&&(s=!1,l.contextMenu.showItems([h.id],!0));return s&&(t.cancel=s,this.hiddenItems=[]),this.parent.selectedItems.nodes.length&&this.parent.selectedItems.nodes[0].isPhase&&(e.cancel=!0),[2]}}))}))},e.prototype.ensureTarget=function(e){var t=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,i=!1;switch(this.getKeyFromId(e.id)){case"undo":i=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":i=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":i=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":i=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":i=!!(t>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":i=t>1;break;case"unGroup":i=!!(this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":i=!!t}return i},e.prototype.destroy=function(){this.contextMenu.destroy(),ut(this.element),this.removeEventListener()},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.generateID=function(e){return this.parent.element.id+"_contextMenu_"+e},e.prototype.getKeyFromId=function(e){return e.replace(this.parent.element.id+"_contextMenu_","")},e.prototype.buildDefaultItems=function(e){var t;switch(e){case"copy":t={target:qu,iconCss:Zu};break;case"cut":t={target:qu,iconCss:Ju};break;case"paste":t={target:qu,iconCss:Ku};break;case"undo":t={target:qu,iconCss:$u};break;case"redo":t={target:qu,iconCss:Qu};break;case"grouping":t={target:qu};break;case"group":t={target:qu,iconCss:ef};break;case"unGroup":t={target:qu,iconCss:tf};break;case"order":t={target:qu,iconCss:sf};break;case"bringToFrontOrder":t={target:qu,iconCss:nf};break;case"moveForwardOrder":t={target:qu,iconCss:of};break;case"sendToBackOrder":t={target:qu,iconCss:rf};break;case"sendBackwardOrder":t={target:qu,iconCss:af};break;case"selectAll":t={target:qu}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},e.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}}})(),function(){function e(){this.annotationObjects={}}Object.defineProperty(e.prototype,"textAnnotationConnectors",{get:function(){for(var e=[],t=0,i=Object.keys(this.annotationObjects);t<i.length;t++)for(var n=i[t],r=this.annotationObjects[n],o=0,a=Object.keys(r);o<a.length;o++){var s=a[o];e.push(r[s].connector)}return e},enumerable:!0,configurable:!0}),e.prototype.getTextAnnotationConn=function(e){var t=[];if("Bpmn"===e.shape.type&&0!==e.shape.annotations.length)for(var i=this.annotationObjects[e.id],n=0,r=Object.keys(i);n<r.length;n++){var o=r[n];t.push(i[o].connector)}return t},e.prototype.getSize=function(e,t){var i=new Zi(e.width,e.height);if(void 0===i.width||void 0===i.height){if(t instanceof dr||(i.width=i.width||50,i.height=i.height||50),t.actualSize.width&&t.actualSize.height)return t.actualSize;t.measure(new Zi),i.width=i.width||t.desiredSize.width,i.height=i.height||t.desiredSize.height,void 0!==e.maxWidth&&(i.width=Math.min(i.width,e.maxWidth)),void 0!==e.maxHeight&&(i.height=Math.min(i.height,e.maxHeight)),void 0!==e.minWidth&&(i.width=Math.max(i.width,e.minWidth)),void 0!==e.minHeight&&(i.height=Math.max(i.height,e.minHeight))}return i},e.prototype.initBPMNContent=function(e,t,i){var n=(w(),t.shape),r=w()?t.shape.bpmnShape:t.shape.shape;if("Event"===r&&(e=this.getBPMNEventShape(t,n.event)),"Gateway"===r&&(e=this.getBPMNGatewayShape(t)),"DataObject"===r&&(e=this.getBPMNDataObjectShape(t)),"Message"!==r&&"DataSource"!==r||(e=this.getBPMNShapes(t)),"Activity"===r&&(e=this.getBPMNActivityShape(t)),"TextAnnotation"===r&&(e=this.renderBPMNTextAnnotation(i,t,e)),n.annotations.length>0){for(var o=0;o<n.annotations.length&&n.annotations[o].text;o++)e.children.push(this.getBPMNTextAnnotation(t,i,n.annotations[o],e));e.style.strokeDashArray="2 2 6 2"}return e},e.prototype.getBPMNShapes=function(e){var t=new dr;this.setStyle(t,e),0!==(e.constraints&En.Shadow)&&(t.shadow=e.shadow);var i=lf(w()?e.shape.bpmnShape:e.shape.shape);return t.data=i,t.id=e.id+"_"+(w()?e.shape.bpmnShape:e.shape.shape),void 0!==e.width&&void 0!==e.height&&(t.width=e.width,t.height=e.height),t},e.prototype.getBPMNGatewayShape=function(e){var t=new sr,i=new dr;i.id=e.id+"_0_gateway",i.offsetX=e.offsetX,i.offsetY=e.offsetY,i.data="M 40 20 L 20 40 L 0 20 L 20 0 L 40 20 Z",this.setStyle(i,e);var n=new dr;n.id=e.id+"_1_gatewayType",n.style.opacity=e.style.opacity,n.style.strokeColor=e.style.strokeColor,n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object";var r,o=e.shape.gateway;r=hf(o.type),"EventBased"===o.type||"ExclusiveEventBased"===o.type||"ParallelEventBased"===o.type?n.style.fill="white":n.style.fill="black",n.data=r,t.style.fill="transparent",t.style.strokeColor="transparent",t.style.strokeWidth=0,t.children=[i,n];var a=this.getSize(e,i);return this.setSizeForBPMNGateway(e.shape.gateway,t,a.width,a.height),t},e.prototype.getBPMNDataObjectShape=function(e){var t=new sr,i=e.shape.dataObject,n=new dr;n.id=e.id+"_0_dataobj",n.data="M29.904,5 L7.853,5 L7.853,45 L42.147,45 L42.147,17.242,L29.932,5,L29.932,17.242,L42.147,17.242";var r=this.getSize(e,n);n.width=r.width,n.height=r.height,this.setStyle(n,e);var o=new dr;o.id=e.id+"_1_type",o.width=25,o.height=20,o.margin.left=5,o.margin.top=5,o.data="M 3 9.4 l 6 0 v 2.4 l 3.6 -4 L 9 4 v 2.5 H 3 V 9.4 Z",o.style.opacity=e.style.opacity;var a=new dr;switch(a.id=e.id+"_2_collection",a.width=7.5,a.height=15,a.style.fill="black",a.visible=!0,a.horizontalAlignment="Center",a.verticalAlignment="Bottom",a.relativeMode="Object",a.style.opacity=e.style.opacity,a.data="M 0 0 L 0.1 0 L 0.1 2 L 0 2 Z M 0.4 0 L 0.6 0 L 0.6 2 L0.4 2 Z M 0.9 0 L 1 0 L 1 2 L 0.9 2 Z",i.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}return!1===i.collection&&(a.visible=!1),t.style.fill="transparent",t.style.strokeColor="transparent",t.style.strokeWidth=0,t.children=[n,o,a],t},e.prototype.getBPMNTaskShape=function(e){var t=e.shape.activity.task,i=new sr,n=new tr;n.cornerRadius=10;var r=this.getSize(e,n);n.id=e.id+"_0_task",n.width=r.width,n.height=r.height,this.setStyle(n,e),void 0!==t.call&&!0===t.call&&(n.style.strokeWidth=4),i.width=r.width,i.height=r.height;var o,a=this.getTaskChildCount(e),s=12*a,l=r.width/2-s;o=1===a?l+8:l+8*(a-1);var c,h=new dr;if("Receive"===t.type||"Send"===t.type?(h.width=18,h.height=16):(h.width=20,h.height=20),h.id=e.id+"_1_tasktType",h.margin.left=5,h.margin.top=5,c=df(t.type),h.data=c,h.style.fill="transparent",h.style.opacity=e.style.opacity,i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i.children=[n,h],"Service"===t.type){var d=new dr;d.id=e.id+"_1_taskTypeService",d.data=c,d.margin.left=h.margin.left+9,d.margin.top=h.margin.top+9,d.style.fill="white",d.style.opacity=e.style.opacity,i.children.push(d)}var p,u=t.loop,f=new dr;p=pf(u),f.data=p,f.style.fill="black",f.visible="None"!==u,1===a&&(o=l+9),f.margin.left=o,!0===f.visible&&(o+=20),f.width=12,f.height=12,f.margin.bottom=5,f.id=e.id+"_2_loop",f.horizontalAlignment="Left",f.verticalAlignment="Bottom",f.setOffsetWithRespectToBounds(0,1,"Fraction"),f.relativeMode="Point",f.style.fill="transparent",h.style.opacity=e.style.opacity,i.children.push(f);var g=new dr;return g=this.getBPMNCompensationShape(e,g),!0===t.compensation?g.visible=!0:g.visible=!1,1===a&&(o=l+9),g.margin.left=o-3,o+=18,i.children.push(g),i},e.prototype.getBPMNEventShape=function(e,t,i,n){var r,o,a,s,l=new sr;n=n||e.id;var c="M164.1884,84.6909000000001C156.2414,84.6909000000001,149.7764,78.2259000000001,149.7764,70.2769000000001C149.7764,62.3279000000001,156.2414,55.8629000000001,164.1884,55.8629000000001C172.1354,55.8629000000001,178.6024,62.3279000000001,178.6024,70.2769000000001C178.6024,78.2259000000001,172.1354,84.6909000000001,164.1884,84.6909000000001",h=e.shape.event;if((!w()&&"Event"===e.shape.shape||w()&&"Event"===e.shape.bpmnShape)&&(r=h.event,o=h.trigger),a=t.width,s=t.height,i)a=a||20,s=s||20;else if(void 0===t.width||void 0===t.height){var d=new dr;d.data=c;var p=this.getSize(e,d);a=p.width,s=p.height}var u=e.shape.activity;if(!w()&&"Activity"===e.shape.shape||w()&&"Activity"===e.shape.bpmnShape){u.subProcess;r=t.event,o=t.trigger}var f=new dr;f.data=c,f.id=n+"_0_event",f.width=a,f.height=s,f.horizontalAlignment="Center",f.verticalAlignment="Center",f.relativeMode="Object",this.setStyle(f,e);var g=new dr;g.data=c,g.id=n+"_1_event",g.style.gradient=e.style.gradient,g.horizontalAlignment="Center",g.verticalAlignment="Center",g.relativeMode="Object",g.style.strokeColor=e.style.strokeColor,g.style.opacity=e.style.opacity;var m=new dr,y=cf(o);switch(m.data=y,m.id=n+"_2_trigger",m.horizontalAlignment="Center",m.verticalAlignment="Center",m.relativeMode="Object",m.style.strokeColor=e.style.strokeColor,m.style.opacity=e.style.opacity,r){case"Start":g.visible=!1;break;case"NonInterruptingStart":f.style.strokeDashArray="2 3",g.visible=!1;break;case"Intermediate":f.style.fill="white",f.style.gradient=null;break;case"NonInterruptingIntermediate":f.style.fill="white",f.style.gradient=null,f.style.strokeDashArray="2 3",g.style.strokeDashArray="2 3";break;case"ThrowingIntermediate":case"End":f.style.fill="End"!==r?"white":"black",f.style.gradient=null,m.style.fill="black",m.style.strokeColor="white"}return l.style.fill="transparent",l.style.strokeColor="transparent",l.style.strokeWidth=0,l.children=[f,g,m],this.setSizeForBPMNEvents(h,l,a,s),l},e.prototype.setEventVisibility=function(e,t){var i=e.shape.event.event,n=t[0],r=t[1];t[2];switch(i){case"Start":r.visible=!1;break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",r.visible=!1}},e.prototype.setSubProcessVisibility=function(e){var t=e.shape.activity.subProcess,i=t.events.length,n="Transaction"===e.shape.activity.subProcess.type?2:0,r=e.wrapper.children[0].children[0];if(!1===t.adhoc&&(r.children[3+n+i].visible=!1),!1===t.compensation&&(r.children[4+n+i].visible=!1),i>0)for(var o=0;o<i;o++)this.setEventVisibility(e,r.children[2+o].children)},e.prototype.getBPMNSubProcessShape=function(e){var t,i,n,r=new sr,o=new dr,a=(new sr,new dr),s=e.shape.activity,l=s.subProcess,c=this.getSubprocessChildCount(e),h=new tr;h.id=e.id+"_0_Subprocess",h.style.fill="transparent",h.cornerRadius=10;var d=this.getSize(e,h);h.width=d.width,h.height=d.height,r.children=[h],"Transaction"===s.subProcess.type&&this.getBPMNSubProcessTransaction(e,e.shape,r);var p=12*c,u=d.width/2;n=1===c?u-6:u-p/2-4*(c-1)/2,this.setStyle(h,e),0!==(e.constraints&En.Shadow)&&(r.shadow=e.shadow);var f=new dr;if(f.id=e.id+"_0_collapsed",f.width=12,f.height=12,f.style.fill="black",f.style.strokeColor=e.style.strokeColor,f.margin.bottom=5,f.horizontalAlignment="Left",f.verticalAlignment="Bottom",f.setOffsetWithRespectToBounds(0,1,"Fraction"),f.relativeMode="Point",f.data=lf("collapsedShape"),f.margin.left=n,!0!==l.collapsed||l.processes?f.visible=!1:f.visible=!0,!0===f.visible&&(n+=18),r.children.push(f),"Event"===l.type){h.style.strokeWidth=1,h.style.strokeDashArray="2 2",t=l.events;for(var g=0;g<t.length;g++)i=t[g],this.getBPMNSubEvent(i,e,r)}1===c&&(n=u+8),(a=this.getBPMNSubProcessLoopShape(e)).margin.left=n,!0===a.visible&&(n+=16),r.children.push(a),h.id=e.id+"_boundary","Default"===l.boundary&&(h.style.strokeWidth=1,h.style.strokeDashArray="1 0"),"Call"===l.boundary&&(h.style.strokeWidth=4,h.style.strokeDashArray="1 0"),"Event"===l.boundary&&(h.style.strokeWidth=1,h.style.strokeDashArray="2 2"),1===c&&(n=u+8),(o=this.getBPMNAdhocShape(e,o,l)).margin.left=n,!0===o.visible&&(n+=16),r.children.push(o);var m=new dr;return!0===l.compensation?m.visible=!0:m.visible=!1,1===c&&(n=u+8),(m=this.getBPMNCompensationShape(e,m)).margin.left=n,!0===m.visible&&(n+=16),r.children.push(m),r.style.strokeColor="transparent",r.style.strokeWidth=0,r.style.fill="transparent",r},e.prototype.getBPMNSubEvent=function(e,t,i,n){var r;i.children=i.children||[],r=this.getBPMNEventShape(t,e,!0,n),this.getBPMNSubprocessEvent(t,r,e),r.id=n||t.id+"_subprocessEvents",r.width=e.width||20,r.height=e.height||20,r.setOffsetWithRespectToBounds(e.offset.x,e.offset.y,"Fraction"),r.relativeMode="Point",r.margin=e.margin,r.horizontalAlignment=e.horizontalAlignment,r.verticalAlignment=e.verticalAlignment,r.style.fill="transparent",r.style.strokeColor="transparent",r.style.strokeWidth=0,i.children.push(r)},e.prototype.getBPMNSubProcessTransaction=function(e,t,i){var n=i.children[0].width,r=i.children[0].height,o=new tr;o.margin={left:3,right:0,top:3,bottom:0},o.id=e.id+"_0_Subprocess_innnerRect",o.cornerRadius=10,o.width=n-6,o.height=r-6,i.children.push(o);var a=new sr;a.id=e.id+"_transaction_events",a.style.gradient=e.style.gradient;var s=t.activity.subProcess.transaction;this.getBPMNSubEvent(s.success,e,a,e.id+"_success"),this.getBPMNSubEvent(s.cancel,e,a,e.id+"_cancel"),this.getBPMNSubEvent(s.failure,e,a,e.id+"_failure"),this.updateDiagramContainerVisibility(a.children[0],s.success.visible),this.updateDiagramContainerVisibility(a.children[1],s.cancel.visible),this.updateDiagramContainerVisibility(a.children[2],s.failure.visible),a.float=!0,a.width=n,a.height=r,a.style.fill=a.style.strokeColor="transparent",i.children.push(a)},e.prototype.getBPMNSubProcessLoopShape=function(e){var t,i,n=e.shape.activity,r=new dr;return i=pf(t=n.subProcess.loop),r.visible="None"!==t,r.id=e.id+"_loop",r.data=i,r.style.fill="black",r.width=12,r.height=12,r.horizontalAlignment="Left",r.verticalAlignment="Bottom",r.setOffsetWithRespectToBounds(0,1,"Fraction"),r.relativeMode="Point",r.margin.bottom=5,r.style.fill="transparent",r.style.strokeColor=e.style.strokeColor,r},e.prototype.drag=function(e,t,i,n){var r=n.nameTable[e.processId];e.margin.top+i>=0&&n.nodePropertyChange(e,{},{margin:{top:e.margin.top+i}}),e.margin.left+t>=0&&n.nodePropertyChange(e,{},{margin:{left:e.margin.left+t}});var o=this.getChildrenBound(r,e.id,n);this.updateSubProcessess(o,e,n),r.wrapper.measure(new Zi(void 0,void 0)),r.wrapper.arrange(r.wrapper.desiredSize),n.refreshCanvasLayers(),n.updateSelector(),this.updateDocks(e,n)},e.prototype.dropBPMNchild=function(e,t,i){if(t&&"Bpmn"===t.shape.type&&"Bpmn"===e.shape.type&&(!w()&&"TextAnnotation"!==t.shape.shape||w()&&"TextAnnotation"!==t.shape.bpmnShape)){var n=i.nameTable[e.id].shape.activity.subProcess;if(i.currentSymbol&&"Bpmn"===e.shape.type&&!n.collapsed)return void(t.processId=e.id);if(n.processes=n.processes||[],n.processes&&-1===n.processes.indexOf(t.id)&&!n.collapsed){n.processes.push(t.id);var r=xd(t),o=i.nameTable[t.id].wrapper,a=i.nameTable[e.id].wrapper;o.margin.top=o.offsetY-o.actualSize.height/2-(e.offsetY-e.actualSize.height/2),o.margin.left=o.offsetX-o.actualSize.width/2-(e.offsetX-e.actualSize.width/2),o.margin.top=o.margin.top<0?0:o.margin.top,o.margin.left=o.margin.left<0?0:o.margin.left,i.nameTable[t.id].processId=e.id,a.children.push(i.nameTable[t.id].wrapper);var s=this.getChildrenBound(e,t.id,i);this.updateSubProcessess(s,t,i),a.measure(new Zi(void 0,void 0)),a.arrange(a.desiredSize),i.refreshCanvasLayers(),i.updateSelector();for(var l=[],c=(l=l.concat(t.outEdges,t.inEdges)).length-1;c>=0;c--)-1===i.bpmnModule.textAnnotationConnectors.indexOf(i.nameTable[l[c]])&&i.remove(i.nameTable[l[c]]);var h={type:"PositionChanged",undoObject:{nodes:[r]},redoObject:{nodes:[xd(t)]},category:"Internal"};i.addHistoryEntry(h),"SVG"===i.mode&&t.zIndex<e.zIndex&&i.updateProcesses(t),this.updateDocks(t,i)}}},e.prototype.updateDocks=function(e,t){if("Bpmn"===e.shape.type&&e.shape.activity.subProcess.processes&&!e.shape.activity.subProcess.collapsed)for(var i=0,n=e.shape.activity.subProcess.processes;i<n.length;i++){var r=n[i],o=t.nameTable[r];o&&(t.updateConnectorEdges(o),o.wrapper.measure(new Zi(o.wrapper.width,o.wrapper.height)),o.wrapper.arrange(o.wrapper.desiredSize),o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length&&this.updateDocks(o,t))}},e.prototype.removeBpmnProcesses=function(e,t){var i=t.nameTable[e.processId];if("Bpmn"===e.shape.type&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var n=(r=e.shape.activity.subProcess.processes).length-1;n>=0;n--)t.remove(t.nameTable[r[n]]);if(i){t.removeDependentConnector(e);var r=i.shape.activity.subProcess.processes;this.removeChildFromBPMN(i.wrapper,e.id);var o=r.indexOf(e.id);r.splice(o,1)}},e.prototype.removeChildFromBPMN=function(e,t){for(var i=0,n=e.children;i<n.length;i++){var r=n[i];r.id===t?e.children.splice(e.children.indexOf(r),1):r.children&&this.removeChildFromBPMN(r,t)}},e.prototype.removeProcess=function(e,t){var i=t.nameTable[e];if(i){var n=t.nameTable[i.processId];if(n&&"Bpmn"===n.shape.type){var r=n.shape.activity.subProcess.processes;t.removeDependentConnector(i),this.removeChildFromBPMN(n.wrapper,e);var o=r.indexOf(e);r.splice(o,1),i.processId="",t.refreshDiagramLayer(),t.updateSelector()}}},e.prototype.addProcess=function(e,t,i){var n;e.id=e.id||md(),n=e.id;var r=i.nameTable[n];r||i.add(e),e.processId=t;var o=i.nameTable[t],a=o.shape.activity.subProcess;if(r&&o&&"Bpmn"===o.shape.type&&"Bpmn"===r.shape.type&&a.processes){r.processId=t;var s=o.shape.activity.subProcess.processes;if(s.indexOf(n)<0&&s.push(n),o.wrapper.children.push(r.wrapper),o.wrapper.measure(new Zi),o.wrapper.arrange(o.wrapper.desiredSize),i.bpmnModule.updateDocks(o,i),i.refreshDiagramLayer(),"SVG"===i.mode&&r.shape&&r.shape.activity&&!r.shape.activity.subProcess.processes)Yh(t+"_groupElement").appendChild(Yh(e.id+"_groupElement"))}},e.prototype.getChildrenBound=function(e,t,i){var n,r=e.shape.activity.subProcess.processes;if(r&&r.length)for(var o=0,a=r;o<a.length;o++){var s=a[o];t!==s&&(n=n?i.nameTable[s].wrapper.bounds.uniteRect(n):i.nameTable[s].wrapper.bounds)}return n||i.nameTable[t].wrapper.bounds},e.prototype.updateSubProcessess=function(e,t,i){var n,r,o,a,s=i.nameTable[t.processId],l={x:.5,y:.5};s.wrapper.bounds.left+t.margin.left+t.width>s.wrapper.bounds.right&&(o=!0),s.wrapper.bounds.top+t.margin.top+t.height>s.wrapper.bounds.bottom&&(a=!0),o&&(l.x=0),a&&(l.y=0);var c=s.wrapper.actualSize;o&&(n=(t.wrapper.margin.left+t.wrapper.bounds.width)/c.width),a&&(r=(t.wrapper.margin.top+t.wrapper.bounds.height)/c.height),(n>0||r>0)&&i.commandHandler.scale(i.nameTable[t.processId],n||1,r||1,l)},e.prototype.getBPMNCompensationShape=function(e,t){return t.id=e.id+"_0_compensation",t.width=12,t.height=12,t.margin.bottom=5,t.style.fill="transparent",t.style.strokeColor=e.style.strokeColor,t.horizontalAlignment="Left",t.verticalAlignment="Bottom",t.relativeMode="Object",t.data="M 22.462 18.754 l -6.79 3.92 l 6.79 3.92 V 22.89 l 6.415 3.705 v -7.841 l -6.415 3.705 V 18.754 Z M 28.331 19.701 v 5.947 l -5.149 -2.973 L 28.331 19.701 Z M 21.916 25.647 l -5.15 -2.973 l 5.15 -2.973 V 25.647 Z M 22.275 12.674 c -5.513 0 -9.999 4.486 -9.999 9.999 c 0 5.514 4.486 10.001 9.999 10.001 c 5.514 0 9.999 -4.486 9.999 -10.001 C 32.274 17.16 27.789 12.674 22.275 12.674 Z M 22.275 32.127  c -5.212 0 -9.453 -4.241 -9.453 -9.454 c 0 -5.212 4.241 -9.453 9.453 -9.453 c 5.212 0 9.453 4.241 9.453 9.453 C 31.728 27.887 27.487 32.127 22.275 32.127 Z",t},e.prototype.getBPMNActivityShape=function(e){var t,i=new sr,n=e.shape.activity,r=n.activity,o=n.subProcess;n.activity;return"Task"===r&&(t=this.getBPMNTaskShape(e)),"SubProcess"===r&&o&&(t=this.getBPMNSubProcessShape(e)),t.id=r+e.id,i.children=[t],i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i},e.prototype.getBPMNSubprocessEvent=function(e,t,i){var n,r;if(0!==i.annotations.length)for(var o=0;o<i.annotations.length;o++){var a=i.annotations[o];(n=e.initAnnotationWrapper(a)).width=i.width,n.height=i.height,t.children.push(n)}if(0!==i.ports.length)for(o=0;o<i.ports.length;o++){var s=i.ports[o];r=e.initPortWrapper(s),t.children.push(r)}},e.prototype.getBPMNAdhocShape=function(e,t,i){return t.id=e.id+"_0_adhoc",t.width=12,t.height=8,t.style.fill="black",t.style.strokeColor=e.style.strokeColor,t.margin.bottom=5,t.horizontalAlignment="Left",t.verticalAlignment="Bottom",t.relativeMode="Object",t.data="M 49.832 76.811 v -2.906 c 0 0 0.466 -1.469 1.931 -1.5 c 1.465 -0.031 2.331 1.219 2.897 1.688 s 1.06 0.75 1.526 0.75 c 0.466 0 1.548 -0.521 1.682 -1.208 s 0.083 3.083 0.083 3.083 s -0.76 0.969 -1.859 0.969 c -1.066 0 -1.865 -0.625 -2.464 -1.438 s -1.359 -0.998 -2.064 -0.906 C 50.598 75.467 49.832 76.811 49.832 76.811 Z",i&&!0===i.adhoc?t.visible=!0:t.visible=!1,t},e.prototype.getBPMNTextAnnotation=function(e,t,i,n){i.id=i.id||md(),i.nodeId=e.id;var r=new sr,o=new dr,a=new or;o.id=e.id+"_"+i.id+"_path",o.width=i.width,o.height=i.height,o.relativeMode="Object",a.id=e.id+"_"+i.id+"_text",a.content=i.text;var s=e.style;a.style={fontSize:s.fontSize,italic:s.italic,gradient:null,opacity:s.opacity,bold:s.bold,textWrapping:s.textWrapping,color:s.color,fill:"white",fontFamily:s.fontFamily,whiteSpace:s.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:s.strokeDashArray,textAlign:s.textAlign,textDecoration:s.textDecoration},a.horizontalAlignment="Center",a.verticalAlignment="Center",a.relativeMode="Object",a.margin={left:5,right:5,top:5,bottom:5},r.offsetX=e.offsetX+i.length*Math.cos(i.angle*(Math.PI/180)),r.offsetY=e.offsetY+i.length*Math.sin(i.angle*(Math.PI/180)),r.float=!0,r.transform=Mn.Self,r.id=e.id+"_textannotation_"+i.id,r.style.strokeColor="transparent",r.margin={left:10,right:10,top:10,bottom:10},r.relativeMode="Object",r.rotateAngle=0,r.children=[o,a];var l=new Lh(e.shape,"annotations",{id:r.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);l.ports=[{id:o.id+"_port",shape:"Square",offset:{x:0,y:.5}}],l.offsetX=r.offsetX,l.offsetY=r.offsetY,l.text=i.text,l.angle=i.angle,l.length=i.length,l.width=i.width,l.height=i.height,l.wrapper=r,r.children.push(l.initPortWrapper(l.ports[0]));var c=new hn(0,0,0,0),h=e.width||e.minWidth||0,d=e.height||e.minHeight||0;void 0!==h&&void 0!==d&&(c=new hn(e.offsetX-h/2,e.offsetY-d/2,h,d)),this.setAnnotationPath(c,r,{x:l.offsetX,y:l.offsetY},l,i.length,i.angle);var p={id:e.id+"_"+i.id+"_connector",constraints:Pn.Default&~(Pn.DragTargetEnd|Pn.Drag),sourceID:e.id,targetID:r.id,targetDecorator:{shape:"None"}},u=new $a(e.shape,"annotations",p,!0);u.targetPortID=l.ports[0].id,u.init(t),u.wrapper.float=!1,u.wrapper.transform=Mn.Self,n.children.push(u.wrapper),u.zIndex=1e4;var f=this.annotationObjects[e.id];f||(f={}),f[i.id]||(f[i.id]={});return f[i.id].node=l,f[i.id].connector=u,this.annotationObjects[e.id]=f,t.initObject(l,void 0,!1),l.zIndex=1e4,r},e.prototype.renderBPMNTextAnnotation=function(e,t,i){t.id=t.id||md();var n=new sr,r=new dr,o=new or;r.id="_"+t.id+"_path",r.width=t.width,r.height=t.height,r.relativeMode="Object",o.id=t.id+"_text",o.content=t.shape.annotation.text;var a=t.style;o.style={fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,bold:a.bold,textWrapping:a.textWrapping,color:a.color,fill:"white",fontFamily:a.fontFamily,whiteSpace:a.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textDecoration:a.textDecoration},o.horizontalAlignment="Left",o.verticalAlignment="Center",o.relativeMode="Object",o.margin={left:5,right:5,top:5,bottom:5},n.offsetX=t.offsetX+t.shape.annotation.length*Math.cos(t.shape.annotation.angle*(Math.PI/180)),n.offsetY=t.offsetY+t.shape.annotation.length*Math.sin(t.shape.annotation.angle*(Math.PI/180)),n.float=!0,n.id=t.id+"_textannotation_"+t.id,n.style.strokeColor="transparent",n.margin={left:10,right:10,top:10,bottom:10},n.relativeMode="Object",n.rotateAngle=0,n.children=[r,o];var s=new Lh(t.shape,"annotations",{id:n.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);s.ports=[{id:r.id+"_port",shape:"Square",offset:{x:0,y:.5}}],s.offsetX=n.offsetX,s.offsetY=n.offsetY,s.shape&&s.shape.annotation&&(s.text=t.shape.annotation.text,s.angle=t.shape.annotation.angle,s.length=t.shape.annotation.length),s.width=t.width,s.height=t.height,s.wrapper=n,n.children.push(s.initPortWrapper(s.ports[0]));var l=new hn(0,0,0,0),c=t.width||0,h=t.height||0;return void 0!==c&&void 0!==h&&(l=new hn(t.offsetX-c/2,t.offsetY-h/2,c,h)),this.setAnnotationPath(l,n,{x:s.offsetX,y:s.offsetY},s,t.length,t.angle),n},e.prototype.getTextAnnotationWrapper=function(e,t){if(e&&"Bpmn"===e.shape.type){if("TextAnnotation"===(w()?e.shape.bpmnShape:e.shape.shape))return e.wrapper.children[1];if(this.annotationObjects[e.id]&&this.annotationObjects[e.id][t]){var i=this.annotationObjects[e.id][t].node;return this.getTextAnnotationWrapper(i,t)}}return null},e.prototype.addAnnotation=function(e,t,i){var n=e.wrapper.children[0],r=e.shape;t.nodeId=e.id;var o=new xh(r,"annotations",t,!0);return r.annotations.push(o),n.children.push(this.getBPMNTextAnnotation(e,i,t,n)),e.wrapper.measure(new Zi),e.wrapper.arrange(e.wrapper.desiredSize),this.annotationObjects[e.id][t.id].connector},e.prototype.clearAnnotations=function(e,t){var i=e.shape;if(i.annotations.length)for(var n=i.annotations.length-1;n>=0;n--){var r=i.annotations[n];this.removeAnnotationObjects(e,r,t)}delete this.annotationObjects[e.id]},e.prototype.checkAndRemoveAnnotations=function(e,t){if("Bpmn"===e.shape.type)if(!w()&&"TextAnnotation"===e.shape.shape||w()&&"TextAnnotation"===e.shape.bpmnShape)for(var i=e.id.split("_"),n=i[i.length-1],r=i[i.length-3]||i[0],o=t.nameTable[r],a=o.shape,s=0,l=a.annotations;s<l.length;s++){var c=l[s];if(c.id===n)if(-1!==a.annotations.indexOf(c))return t.removeDependentConnector(e),this.removeAnnotationObjects(o,c,t),!0}else e.shape.annotations&&e.shape.annotations.length&&this.clearAnnotations(e,t);return!1},e.prototype.removeAnnotationObjects=function(e,t,i){var n=e.shape,r=n.annotations.indexOf(t);if(-1!==r){if(!(i.diagramActions&jn.UndoRedo)&&!(i.diagramActions&jn.Group)){var o={type:"CollectionChanged",changeType:"Remove",undoObject:xd(t),redoObject:xd(t),category:"Internal"};i.addHistoryEntry(o)}n.annotations.splice(r,1);var a=this.annotationObjects[e.id];if(a&&a[t.id]){var s=a[t.id].node,l=a[t.id].connector;i.removeElements(s),i.removeElements(l);var c=e.wrapper.children[0];r=c.children.indexOf(s.wrapper),c.children.splice(r,1),r=c.children.indexOf(l.wrapper),c.children.splice(r,1),i.removeFromAQuad(s),i.removeFromAQuad(l),delete i.nameTable[s.id],delete i.nameTable[l.id],delete a[t.id]}}},e.prototype.setAnnotationPath=function(e,t,i,n,r,o){var a,s,l=this.getAnnotationPathAngle(i,e),c="",h=t.children[0],d=t.children[2],p=t.children[1];h.horizontalAlignment="Stretch",h.verticalAlignment="Stretch",p.margin.left=p.margin.right=5,p.margin.top=p.margin.bottom=5,0===l?(c="M10,20 L0,20 L0,0 L10,0",h.width=10,h.horizontalAlignment="Left",d.setOffsetWithRespectToBounds(0,.5,"Fraction"),p.margin.top=p.margin.bottom=10,a=e.middleRight,s={x1:e.right,y1:e.top,x2:e.right,y2:e.bottom}):180===l?(c="M0,0 L10,0 L10,20 L0,20",h.width=10,h.horizontalAlignment="Right",d.setOffsetWithRespectToBounds(1,.5,"Fraction"),p.margin.top=p.margin.bottom=10,a=e.middleLeft,s={x1:e.left,y1:e.top,x2:e.left,y2:e.bottom}):90===l?(c="M20,10 L20,0 L0,0 L0,10",h.height=10,h.verticalAlignment="Top",d.setOffsetWithRespectToBounds(.5,0,"Fraction"),p.margin.left=p.margin.right=10,a=e.bottomCenter,s={x1:e.right,y1:e.bottom,x2:e.left,y2:e.bottom}):(c="M0,0 L0,10 L20,10 L20,0",h.height=10,h.verticalAlignment="Bottom",d.setOffsetWithRespectToBounds(.5,1,"Fraction"),p.margin.left=p.margin.right=10,a=e.topCenter,s={x1:e.right,y1:e.top,x2:e.left,y2:e.top});var u=e.center;a=ao(s,[u,Qi.transform(i,o,Math.max(e.width,e.height))],0,u),h.data=c,void 0!==r&&void 0!==o&&(a=Qi.transform(a,o,r),t.offsetX=n.offsetX=a.x,t.offsetY=n.offsetY=a.y)},e.prototype.isBpmnTextAnnotation=function(e,t){if(this.annotationObjects){var i=e.parentId,n=e.id,r=t.nameTable[i];return r&&"Bpmn"===r.shape.type&&this.annotationObjects[i]&&this.annotationObjects[i][n]?r:null}return null},e.prototype.updateTextAnnotationContent=function(e,t,i,n){var r=t.parentId,o=t.id;if(this.annotationObjects[r]&&this.annotationObjects[r][o])for(var a=0,s=e.shape.annotations;a<s.length;a++){var l=s[a];if(l.id===o){l.text=i;var c=this.annotationObjects[r][o].node.wrapper.children[1];c.content=i,c.visible=!0,e.wrapper.measure(new Zi),e.wrapper.arrange(e.wrapper.desiredSize)}}},e.prototype.updateQuad=function(e,t){var i,n=e.shape.annotations;if(n&&n.length>0)for(var r=0;r<n.length;r++)i=this.annotationObjects[e.id][n[r].id].node,t.updateQuad(i)},e.prototype.updateTextAnnotationProp=function(e,t,i){if("Bpmn"===e.shape.type){var n=e.shape.annotations;if(n&&n.length>0)for(var r=0;r<e.wrapper.children[0].children.length;r++)for(var o=0;o<n.length;o++){var a=e.wrapper.children[0].children[r].id.split("_");if(a[a.length-1]===n[o].id){var s=this.annotationObjects[e.id][n[o].id].node,l=this.annotationObjects[e.id][n[o].id].connector,c=(mo(l.targetPoint,e.wrapper.bounds,e.wrapper.bounds),l.sourcePoint);c={x:l.sourcePoint.x+e.offsetX-t.offsetX,y:l.sourcePoint.y+e.offsetY-t.offsetY},c=Qi.transform(c,n[o].angle,n[o].length),e.wrapper.children[0].children[r].offsetX=s.offsetX=c.x,e.wrapper.children[0].children[r].offsetY=s.offsetY=c.y,i.updateQuad(s)}}}},e.prototype.getSubprocessChildCount=function(e){var t,i=0,n=e.shape.activity.subProcess;return void 0!==(t=n.loop)&&"None"!==t&&i++,void 0!==n.compensation&&!0===n.compensation&&i++,void 0!==n.collapsed&&!0===n.collapsed&&i++,void 0!==n.adhoc&&!0===n.adhoc&&i++,i},e.prototype.getTaskChildCount=function(e){var t=0,i=e.shape.activity.task;return void 0!==i.compensation&&!0===i.compensation&&t++,void 0!==i.loop&&"None"!==i.loop&&t++,t},e.prototype.setStyle=function(e,t){e.style.fill=t.style.fill,e.style.strokeColor=t.style.strokeColor,e.style.strokeWidth=t.style.strokeWidth,e.style.strokeDashArray=t.style.strokeDashArray,e.style.opacity=t.style.opacity,e.style.gradient=t.style.gradient,0!==(t.constraints&En.Shadow)&&(e.shadow=t.shadow)},e.prototype.updateBPMN=function(e,t,i,n){var r=e.shape||{},o=i.wrapper.children[0],a=i.shape.shape||i.shape.bpmnShape,s=void 0!==e.width||void 0!==e.height;if((w()&&"Gateway"===r.bpmnShape||"Gateway"===r.shape)&&r.gateway)i.wrapper.children[0]=this.getBPMNGatewayShape(i);else if((w()&&"DataObject"===r.bpmnShape||"DataObject"===r.shape)&&r.dataObject)i.wrapper.children[0]=this.getBPMNDataObjectShape(i);else if((w()&&"Activity"===r.bpmnShape||"Activity"===r.shape)&&r.activity)i.wrapper.children[0]=this.getBPMNActivityShape(i);else if((w()&&"Event"===r.bpmnShape||"Event"===r.shape)&&r.event){var l=r.event;i.wrapper.children[0]=this.getBPMNEventShape(i,l)}else w()&&"Message"===r.bpmnShape||"Message"===r.shape||w()&&"DataSource"===r.bpmnShape||"DataSource"===r.shape?i.wrapper.children[0]=this.getBPMNShapes(i):void 0!==r.gateway||"Gateway"===a&&s?this.updateBPMNGateway(i,e):void 0!==r.dataObject||"DataObject"===a&&s?this.updateBPMNDataObject(i,e,t):void 0!==r.activity||"Activity"===a&&s?this.updateBPMNActivity(i,e,t,n):(void 0!==r.event||"Event"===a&&s)&&this.updateBPMNEvent(i,e,t);if(e.style&&(pc(e.style,o instanceof nr?!w()&&"Activity"===i.shape.shape||w()&&"Activity"===i.shape.bpmnShape?o.children[0].children[0]:o.children[0]:o),e.style&&e.style.strokeColor&&o.children.length>0))if((!w()&&"Activity"===i.shape.shape||w()&&"Activity"===i.shape.bpmnShape)&&"SubProcess"===i.shape.activity.activity){var c=o.children[0];this.updateBPMNStyle(c,e.style.strokeColor)}else(!w()&&"Gateway"===i.shape.shape||w()&&"Gateway"===i.shape.bpmnShape||!w()&&"Event"===i.shape.shape||w()&&"Event"===i.shape.bpmnShape)&&this.updateBPMNStyle(o,e.style.strokeColor)},e.prototype.updateBPMNStyle=function(e,t){for(var i=0;i<e.children.length;i++){pc({strokeColor:t},e.children[i])}},e.prototype.updateBPMNGateway=function(e,t){var i=e.shape,n=e.wrapper.children[0];if(i){pc(e.style,n.children[0]);var r=hf(i.gateway.type);n.children[1].data=r}void 0===t.width&&void 0===t.height||this.setSizeForBPMNGateway(e.shape.gateway,n,t.width||e.width,t.height||e.height)},e.prototype.updateBPMNDataObject=function(e,t,i){var n=t.shape,r=e.wrapper.children[0];if(n){var o=r.children[1],a=r.children[2];if(void 0!==t.style&&(pc(t.style,r.children[0]),o.style.opacity=e.style.opacity,a.style.opacity=e.style.opacity),n.dataObject){switch(n.dataObject.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}"None"===i.shape.dataObject.type&&(o.visible=!0),void 0!==t.shape.dataObject.collection&&(a.visible=n.dataObject.collection)}}void 0===t.width&&void 0===t.height||this.setSizeForBPMNDataObjects(e.shape.dataObject,r,t.width||e.width,t.height||e.height)},e.prototype.getEvent=function(e,t,i,n,r,o){switch(i){case"Start":r.visible=!1,n.style.strokeDashArray="",o.style.fill="white",o.style.strokeColor="black",n.style.fill="white";break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",o.style.fill="white",n.style.fill="white",o.style.strokeColor="black",r.visible=!1;break;case"Intermediate":n.style.strokeDashArray="",n.style.fill="white",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",this.updateEventVisibility(t,r);break;case"NonInterruptingIntermediate":n.style.fill="white",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",n.style.strokeDashArray="2 3",r.style.strokeDashArray="2 3",this.updateEventVisibility(t,r);break;case"ThrowingIntermediate":case"End":n.style.fill="End"!==i?"white":"black",n.style.strokeDashArray="",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="black",this.updateEventVisibility(t,r),o.style.strokeColor=e.style.fill}},e.prototype.updateEventVisibility=function(e,t){e.shape.activity&&e.shape.activity.subProcess&&e.shape.activity.subProcess.events&&void 0!==e.shape.activity.subProcess.events[0]&&void 0!==e.shape.activity.subProcess.events[0].event?"NonInterruptingStart"!==e.shape.activity.subProcess.events[0].event&&"Start"!==e.shape.activity.subProcess.events[0].event||(t.visible=!0):void 0!==e.shape.event&&("NonInterruptingStart"!==e.shape.event.event&&"Start"!==e.shape.event.event||(t.visible=!0))},e.prototype.updateBPMNEvent=function(e,t,i){var n,r=t.shape,o=e.wrapper.children[0];if(r){var a,s=o.children[0],l=o.children[1],c=o.children[2];void 0!==t.style&&(pc(e.style,o.children[0]),void 0===t.style.opacity&&void 0===t.style.strokeColor||(l.style.opacity=e.style.opacity,l.style.strokeColor=e.style.strokeColor)),a=r.event.event,n=r.event.trigger,void 0!==a&&this.getEvent(e,i,a,s,l,c),void 0!==n&&this.updateBPMNEventTrigger(e,t)}void 0===t.width&&void 0===t.height&&void 0===n||this.setSizeForBPMNEvents(e.shape.event,o,t.width||e.width,t.height||e.height)},e.prototype.updateBPMNEventTrigger=function(e,t){var i=e.shape,n=e.wrapper.children[0].children[2];n.canMeasurePath=!0,!t.style||void 0===t.style.strokeColor&&void 0===t.style.opacity||pc(e.style,n);var r=cf(i.event.trigger);n.data=r},e.prototype.updateBPMNActivity=function(e,t,i,n){var r=t.shape,o=e.wrapper.children[0],a=this.getSize(e,o.children[0].children[0]);if(r){var s=i.shape.activity.activity,l=e.shape.activity.activity;if("SubProcess"!==s&&"Task"!==s||"SubProcess"!==l&&"Task"!==l){if("Task"===l&&void 0!==r.activity.task){this.updateBPMNActivityTask(e,t);var c=this.getTaskChildCount(e),h=void 0,d=12*c,p=a.width/2-d;h=1===c?p+8:p+8*(c-1),void 0!==r.activity.task.loop&&this.updateBPMNActivityTaskLoop(e,t,h,c,p,2)}"SubProcess"===l&&void 0!==r.activity.subProcess&&this.updateBPMNActivitySubProcess(e,t,i,n)}else n.removeElements(e),e.wrapper.children[0]=this.getBPMNActivityShape(e);this.setSizeForBPMNActivity(e.shape.activity,o,t.width||a.width,t.height||a.height,e)}void 0===t.width&&void 0===t.height||this.setSizeForBPMNActivity(e.shape.activity,o,t.width||a.width,t.height||a.height,e)},e.prototype.updateBPMNActivityTask=function(e,t){for(var i=t.shape,n=e.wrapper.children[0].children[0],r=i.activity.task,o=0;o<n.children.length;o++){if(n.children[o].id===e.id+"_1_taskTypeService")n.children.splice(o,1),(s=document.getElementById(e.id+"_1_taskTypeService")).parentNode.removeChild(s)}if("Receive"===r.type||"Send"===r.type?n.children[1].height=14:n.children[1].height=20,void 0!==r.type){var a=df(r.type);if(n.children[1].data=a,"Service"===r.type){for(o=0;o<n.children.length;o++){var s;if(n.children[o].id===e.id+"_1_tasktType")n.children.splice(o,1),(s=document.getElementById(e.id+"_1_tasktType")).parentNode.removeChild(s)}var l=new dr;l.id=e.id+"_1_tasktType",l.margin.left=5,l.margin.top=5,l.data=a,l.style.fill="transparent",l.style.opacity=e.style.opacity,l.width=20,l.height=20,n.children.splice(1,0,l);var c=new dr;c.id=e.id+"_1_taskTypeService",c.data=a,c.margin.left=n.children[1].margin.left+9,c.margin.top=n.children[1].margin.top+9,c.style.fill="white",c.style.opacity=e.style.opacity,n.children.splice(2,0,c)}}void 0!==i.activity.task.call&&(!1!==i.activity.task.call?n.children[0].style.strokeWidth=4:n.children[0].style.strokeWidth=1),void 0!==i.activity.task.compensation&&(!0===i.activity.task.compensation?n.children[3].visible=!0:n.children[3].visible=!1)},e.prototype.updateBPMNActivityTaskLoop=function(e,t,i,n,r,o){var a,s,l=t.shape,c=e.wrapper.children[0].children[0],h=l.activity,d=0;if(void 0!==h.subProcess){var p=h.subProcess;d="Transaction"===h.subProcess.type?2:0,s=pf(a=p.loop),c.children[2+d].data=s,c.children[2+d].visible="None"!==a}else void 0!==h.task&&void 0!==h.task.loop&&(s=pf(h.task.loop),c.children[2].data=s,c.children[2].visible="None"!==h.task.loop);this.updateChildMargin(c,n,r,i,o+d)},e.prototype.updateChildMargin=function(e,t,i,n,r){if(1===t)for(var o=r;o<e.children.length;o++)2!==o&&!0===e.children[o].visible&&(e.children[o].margin.left=n,n=i+8);else{n=i+8*(t-1);for(o=r;o<e.children.length;o++)2!==o&&!0===e.children[o].visible&&(e.children[o].margin.left=n,n+=20)}},e.prototype.updateBPMNActivitySubProcess=function(e,t,i,n){var r,o=t.shape,a=e.wrapper.children[0],s=this.getSize(e,a.children[0].children[0]),l=o.activity.subProcess,c=this.getSubprocessChildCount(e),h=12*c,d=s.width/2-h;r=1===c?d+8:d+8*(c-1),pc(e.style,a.children[0].children[0]),void 0!==l.events&&this.updateBPMNSubProcessEvent(e,t,i,n),void 0!==l.adhoc&&this.updateBPMNSubProcessAdhoc(e,i,l,r,c,d),void 0!==l.boundary&&this.updateBPMNSubProcessBoundary(e,l),void 0!==l.collapsed&&this.updateBPMNSubProcessCollapsed(e,i,l,r,c,d,n),void 0!==l.compensation&&this.updateBPMNSubProcessCompensation(e,i,l,r,c,d),void 0!==l.loop&&this.updateBPMNSubProcessLoop(e,i,l,r,c,d),void 0!==l.transaction&&this.updateBPMNSubProcessTransaction(e,t,i,n)},e.prototype.updateBPMNSubProcessEvent=function(e,t,i,n){for(var r=t.shape,o=e.wrapper.children[0],a=o.children[0],s=(o.children[0].children.length,r.activity.subProcess),l=0,c=Object.keys(s.events);l<c.length;l++){var h=c[l],d=Number(h),p=a.children[d+2],u=e.shape.activity.subProcess.events[d];this.updateBPMNSubEvent(e,s.events[d],u,p,t,i,n)}},e.prototype.updateBPMNSubEvent=function(e,t,i,n,r,o,a){var s,l,c=e.wrapper.children[0],h=r.shape,d=n.children[0],p=n.children[1],u=n.children[2];if(r.style&&(void 0===r.style.strokeColor&&void 0===r.style.opacity||(c.children[0].children[1].style.strokeColor=r.style.strokeColor,c.children[0].children[1].style.opacity=r.style.opacity)),void 0!==h.activity.subProcess&&(s=t.event,l=t.trigger),void 0!==s&&this.getEvent(r,o,s,d,p,u),void 0!==l){r.style&&pc(r.style,c.children[0]);var f=cf(l);n.children[2].data=f}if(void 0===t.height&&void 0===t.width||this.getEventSize(t,n),void 0!==t.id&&(n.id=t.id),void 0!==t.margin&&(n.margin=t.margin),void 0!==t.horizontalAlignment&&(n.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(n.verticalAlignment=t.verticalAlignment),void 0!==t.offset&&(n.setOffsetWithRespectToBounds(i.offset.x,i.offset.y,"Fraction"),n.relativeMode="Point"),void 0!==t.annotations){var g=void 0,m=c.children[0].children[2];n.children[3]&&n.children.length>3&&(g=n.children[3],a.updateAnnotation(t.annotations[0],g,m))}if(void 0!==t.ports){var y=void 0,v=c.children[0].children[2];n.children[4]&&n.children.length>4&&(y=n.children[4],a.updatePort(t.ports[0],y,v))}void 0!==t.visible&&this.updateDiagramContainerVisibility(n,t.visible)},e.prototype.updateBPMNSubProcessTransaction=function(e,t,i,n){var r,o=t.shape.activity.subProcess.transaction,a=e.wrapper.children[0].children[0].children[2];void 0!==o.success&&(r=e.shape.activity.subProcess.transaction.success,this.updateBPMNSubEvent(e,o.success,r,a.children[0],t,i,n)),void 0!==o.cancel&&(r=e.shape.activity.subProcess.transaction.cancel,this.updateBPMNSubEvent(e,o.cancel,r,a.children[1],t,i,n)),void 0!==o.failure&&(r=e.shape.activity.subProcess.transaction.failure,this.updateBPMNSubEvent(e,o.failure,r,a.children[2],t,i,n));for(var s=0,l=e.outEdges;s<l.length;s++){var c=l[s],h=n.nameTable[c];switch(h.sourcePortID){case"success":o.success&&void 0!==o.success.visible&&n.connectorPropertyChange(h,{},{sourcePortID:"success"});break;case"cancel":o.cancel&&void 0!==o.cancel.visible&&n.connectorPropertyChange(h,{},{sourcePortID:"cancel"});break;case"failure":o.failure&&void 0!==o.failure.visible&&n.connectorPropertyChange(h,{},{sourcePortID:"failure"})}}},e.prototype.getEventSize=function(e,t){void 0!==e.height&&(t.height=e.height,t.children[0].height=e.height,t.children[1].height=.85*e.height,t.children[2].height=.54*e.height),void 0!==e.width&&(t.width=e.width,t.children[0].width=e.width,t.children[1].width=.85*e.width,t.children[2].width=.54*e.width)},e.prototype.updateBPMNSubProcessAdhoc=function(e,t,i,n,r,o){e.shape;var a=e.wrapper.children[0].children[0],s="Transaction"===e.shape.activity.subProcess.type?2:0;!1===i.adhoc?a.children[3+s].visible=!1:a.children[3+s].visible=!0,this.updateChildMargin(a,r,o,n,3+s)},e.prototype.updateBPMNSubProcessBoundary=function(e,t){e.shape;var i=e.wrapper.children[0].children[0].children[0];"Default"===t.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="1 0"),"Call"===t.boundary&&(i.style.strokeWidth=4,i.style.strokeDashArray="1 0"),"Event"===t.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="2 2")},e.prototype.updateElementVisibility=function(e,t,i){if(e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var n=e.shape.activity.subProcess.processes,r=n.length-1;r>=0;r--){var o=i.nameTable[n[r]];o.visible=t,i.updateElementVisibility(o.wrapper,o,t),t&&((!w()&&"Event"===o.shape.shape||w()&&"Event"===o.shape.bpmnShape)&&this.setEventVisibility(o,o.wrapper.children[0].children),"SubProcess"===o.shape.activity.activity&&this.setSubProcessVisibility(o));for(var a=o.inEdges.concat(o.outEdges),s=a.length-1;s>=0;s--){var l=i.nameTable[a[s]];l.visible=t,i.updateElementVisibility(l.wrapper,l,t)}}t&&((!w()&&"Event"===e.shape.shape||w()&&"Event"===e.shape.bpmnShape)&&this.setEventVisibility(e,e.wrapper.children[0].children),"SubProcess"===e.shape.activity.activity&&this.setSubProcessVisibility(e),"Task"===e.shape.activity.activity&&(!w()&&"Activity"===e.shape.shape||w()&&"Activity"===e.shape.bpmnShape)&&"None"===e.shape.activity.subProcess.loop&&(e.wrapper.children[0].children[0].children[3].visible=!1))},e.prototype.updateBPMNSubProcessCollapsed=function(e,t,i,n,r,o,a){var s=e.shape.activity.subProcess.events.length,l=e.wrapper.children[0].children[0],c="Transaction"===e.shape.activity.subProcess.type?3:1;!1===i.collapsed?(this.updateElementVisibility(e,!0,a),l.children[c+s].visible=!1):(this.updateElementVisibility(e,!1,a),l.children[c+s].visible=!0),this.updateChildMargin(l,r,o,n,3+s)},e.prototype.updateBPMNSubProcessCompensation=function(e,t,i,n,r,o){var a=e.wrapper.children[0].children[0],s="Transaction"===e.shape.activity.subProcess.type?2:0;!1===i.compensation?a.children[4+s].visible=!1:a.children[4+s].visible=!0,this.updateChildMargin(a,r,o,n,4+s)},e.prototype.updateBPMNSubProcessLoop=function(e,t,i,n,r,o){this.updateBPMNActivityTaskLoop(e,e,n,r,o,1)},e.prototype.updateBPMNConnector=function(e,t,i,n){var r=i.shape;return void 0!==r.sequence&&(e=this.getSequence(e,t,i,n)),void 0!==r.association&&(e=this.getAssociation(e,t,i,n)),void 0!==r.message&&(e=this.getMessage(e,t,i,n)),e},e.prototype.getSequence=function(e,t,i,n){if("Normal"===i.shape.sequence&&(n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}}}),e.wrapper.children[3].visible=!1),"Default"===i.shape.sequence){n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}});var r=new dr,o=(new dr,void 0);r=e.getSegmentElement(e,r);for(var a=e.intermediatePoints,s=0;s<a.length-1;s++)length+=e.distance(a[s],a[s+1]),o=e.findPath(a[s],a[s+1]);e.wrapper.children[3].data=o[0],e.wrapper.children[3].id=e.id+"_"+i.shape.sequence,e.wrapper.children[3].offsetX=o[1].x,e.wrapper.children[3].offsetY=o[1].y,e.wrapper.children[3].rotateAngle=45,e.wrapper.children[3].transform=Mn.Self}return"Conditional"===i.shape.sequence&&(n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Diamond",width:20,height:10,style:{fill:"white"}}}),e.wrapper.children[3].visible=!1),e},e.prototype.getAssociation=function(e,t,i,n){return"Default"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"Directional"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"BiDirectional"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Arrow",width:5,height:10,style:{fill:"white"}}}),e},e.prototype.getMessage=function(e,t,i,n){var r,o;if("Default"===t.shape.message){if(void 0!==i.shape.message){if("InitiatingMessage"===i.shape.message||"NonInitiatingMessage"===i.shape.message){var a=new dr;a=e.getSegmentElement(e,a);for(var s=e.intermediatePoints,l=0;l<s.length-1;l++){length+=e.distance(s[l],s[l+1]);var c=.5*length;length>=c&&(r=to(s[l],s[l+1]),o=Qi.transform(s[l],r,c))}}e.wrapper.children[3].id=e.id+"_"+i.shape.message,e.wrapper.children[3].width=25,e.wrapper.children[3].height=15,e.wrapper.children[3].data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.wrapper.children[3].horizontalAlignment="Center",e.wrapper.children[3].verticalAlignment="Center",e.wrapper.children[3].transform=Mn.Self,e.wrapper.children[3].style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white",e.wrapper.children[3].offsetX=o.x,e.wrapper.children[3].offsetY=o.y}}else"NonInitiatingMessage"===t.shape.message&&"InitiatingMessage"===t.shape.message||("Default"!==i.shape.message?e.wrapper.children[3].style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white":e.wrapper.children[3].visible=!1);return e},e.prototype.setSizeForBPMNEvents=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n;var r=t.children[1];r.width=.85*i,r.height=.85*n;var o=t.children[2];"Message"===e.trigger?(o.width=.54*i,o.height=.4*n):(o.width=.5*i,o.height=.5*n)},e.prototype.updateAnnotationDrag=function(e,t,i,n){var r=e.id.split("_");if("textannotation"===r[1])for(var o=void 0,a=0;a<e.inEdges.length;a++){var s=t.nameTable[e.inEdges[a]];s&&(o=t.nameTable[s.sourceID]);var l={x:e.offsetX+i,y:e.offsetY+n},c=s.sourcePoint,h=Qi.findLength(l,c),d=Qi.findAngle(c,l);if(o.shape.annotations)for(var p=0;p<o.shape.annotations.length;p++)if(o.shape.annotations[p].id===r[r.length-1])return o.shape.annotations[p].length=h,o.shape.annotations[p].angle=d,this.setAnnotationPath(o.wrapper.bounds,e.wrapper,l,e),!1}return!!e.processId&&(this.drag(e,i,n,t),!0)},e.prototype.getAnnotationPathAngle=function(e,t){var i=0;switch(mo(e,t,t)){case"Right":i=0;break;case"Left":i=180;break;case"Bottom":i=90;break;case"Top":i=270}return i},e.prototype.setSizeForBPMNGateway=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n,t.children[1].width=.45*i,t.children[1].height=.45*n},e.prototype.setSizeForBPMNDataObjects=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n},e.prototype.setSizeForBPMNActivity=function(e,t,i,n,r){t.children[0].width=i,t.children[0].height=n,t.children[0].children[0].width=i,t.children[0].children[0].height=n,"Transaction"===e.subProcess.type&&(t.children[0].children[1].width=Math.max(i-6,1),t.children[0].children[1].height=Math.max(n-6,1),t.children[0].children[2].width=i,t.children[0].children[2].height=n);var o,a,s=new tr,l=this.getSize(r,s),c=12*(a="Task"===e.activity?this.getTaskChildCount(r):this.getSubprocessChildCount(r)),h=(i||l.width)/2;o=1===a?h-6:h-c/2-4*(a-1)/2;for(var d=0;d<t.children[0].children.length;d++)t.children[0].children[d].visible&&(t.children[0].children[d].id.indexOf("_loop")>-1||t.children[0].children[d].id.indexOf("_0_compensation")>-1||t.children[0].children[d].id.indexOf("_0_adhoc")>-1||t.children[0].children[d].id.indexOf("_0_collapsed")>-1)&&(t.children[0].children[d].margin.left=o,o+=t.children[0].children[d].actualSize.width+4)},e.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof nr)for(var i=0;i<e.children.length;i++)this.updateDiagramContainerVisibility(e.children[i],t);e.visible=t},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Bpmn"}}();function lf(e){return uf[e.toString()]}function cf(e){return ff[e.toString()]}function hf(e){return gf[e.toString()]}function df(e){return mf[e.toString()]}function pf(e){return yf[e.toString()]}var uf={Event:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Message:"M0,0L19.8,12.8L40,0L0,0L0,25.5L40,25.5L40,0z",DataSource:"M 0 10.6 c 0 5.9 16.8 10.6 37.5 10.6 S 75 16.4 75 10.6 v 0 v 68.9 v -0.1 C 75 85.3 58.2 90 37.5 90 S 0 85.3 0 79.4 l 0 0.1 V 56 V 40.6 L 0 10.6 C 0 4.7 16.8 0 37.5 0 S 75 4.7 75 10.6 S 58.2 21.2 37.5 21.2S 0 16.5 0 10.6 l 0 6.7 v -0.2 c 0 5.9 16.8 10.6 37.5 10.6 S 75 22.9 75 17.1 v 6.8 v -0.1 c 0 5.9 -16.8 10.6 -37.5 10.6 S 0 29.6 0 23.8",SubProcess:"M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z",collapsedShape:"M 8.13789 15 H 0 V 0 H 8.13789 V 15 Z M 0.625991 13.75 H 7.51189 V 1.25 H 0.625991 V 13.75 Z M 2.18095 7.03125 L 5.95631 7.03125 L 5.95631 7.46875 L 2.18095 7.46875 Z M 3.8342 3.73 L 4.30369 3.73 L 4.30369 11.2687 L 3.8342 11.2687 Z"},ff={Message:"M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",Timer:"M40,20c0,8.654-5.496,16.024-13.189,18.81C24.685,39.58,22.392,40,20,40C8.954,40,0,31.046,0,20S8.954,0,20,0S40,8.954,40,20z M20,0 L20,2.583 L20,5.283 M10.027,2.681L11.659,5.507 L12.669,7.257 M2.731,9.989 L6.014,11.885 L7.307,12.631 M0.067,19.967 L2.667,19.967 L5.35,19.967M2.748,29.939 L5.731,28.217 L7.323,27.298 M10.056,37.236 L11.292,35.095 L12.698,32.66 M20.033,39.9 L20.033,36.417 L20.033,34.617M30.006,37.219 L28.893,35.292 L27.364,32.643 M37.302,29.911 L34.608,28.355 L32.727,27.269M39.967,19.933 L37.417,19.933 L34.683,19.933 M37.286,9.961 L34.583,11.521 L32.71,12.602 M29.977,2.664 L28.653,4.957 L27.336,7.24 M22.104,8.5 L19.688,20 L24.75,20 L31.604,20 L24.75,20 L19.688,20z",Error:"M 23.77 18.527 l -7.107 27.396 l 8.507 -17.247 L 36.94 40.073 l 6.394 -25.997 l -8.497 15.754 L 23.77 18.527 Z",Escalation:"M 30.001 8.098 L 11.842 43.543 l 18.159 -18.882 l 18.162 18.882 L 30.001 8.098 Z ",Cancel:"M 3.5 16 L 0 12.6 L 4.6 8 L 0 3.5 L 3.4 0 L 8 4.6 l 4.5 -4.5 L 16 3.5 L 11.5 8 l 4.5 4.5 l -3.4 3.5 L 8 11.4 L 3.5 16 Z",Compensation:"M 25.7086 0 L 0 25 L 25.7086 50 V 26.3752 L 50 50 V 0 L 25.7086 23.6248 V 0 Z ",Conditional:"M 0 0 H 16 V 16 H 0 z M 1.14 3.2 H 14.85 M 1.14 6.4 H 14.85 M 1.14 9.6 H 14.85 M 1.14 12.8 H 14.85",Link:"M 32.014 19.258 v 5.992 H 9.373 v 9.504 h 22.641 v 5.988 L 50.622 30 L 32.014 19.258 Z",Signal:"M 50 50 H 0 L 25.0025 0 L 50 50 Z",Terminate:"M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",Multiple:"M 17.784 48.889 H 42.21 l 7.548 -23.23 L 29.997 11.303 L 10.236 25.658 L 17.784 48.889 Z",Parallel:"M 27.276 49.986 h 5.58 v -17.15 h 17.146 V 27.17 h -17.15 l 0.004 -17.15 h -5.58 l -0.004 17.15 H 9.994 v 5.666 h 17.278 L 27.276 49.986 Z"},gf={None:"",Exclusive:"M 11.196 29.009 l 6.36 -9.712 l -5.764 -8.899 h 4.393 l 3.732 5.979 l 3.656 -5.979 h 4.354 l -5.789 9.039l 6.36 9.572 h -4.532 l -4.126 -6.437 l -4.139 6.437 H 11.196 Z",Inclusive:"M 20.323 31.333 c -6.625 0 -12.015 -5.39 -12.015 -12.015 s 5.39 -12.015 12.015 -12.015 s 12.016 5.39 12.016 12.015 S 26.948 31.333 20.323 31.333 Z M 20.323 9.303 c -5.522 0 -10.015 4.493 -10.015 10.015 s 4.492 10.015 10.015 10.015 s 10.016 -4.493 10.016 -10.015 S 25.846 9.303 20.323 9.303 Z",Parallel:"M 18.394 29.542 v -8.833 H 9.626 v -3.691 h 8.768 V 8.251 h 3.734 v 8.767 h 8.768 v 3.691 h -8.768 v 8.833 H 18.394 Z",Complex:"M29.198,19.063L23.089,19.063L27.794,14.358L26.38,12.944L21.223,18.101L21.223,10.443L19.223,10.443L19.223,17.976L14.022,12.776L12.608,14.19L17.48,19.063L10.365,19.063L10.365,21.063L18.261,21.063L12.392,26.932L13.806,28.346L19.223,22.929L19.223,30.225L21.223,30.225L21.223,22.805L25.925,27.507L27.339,26.093L22.309,21.063L29.198,21.063z",EventBased:"M 20.322 29.874 c -5.444 0 -9.873 -4.43 -9.873 -9.874 s 4.429 -9.874 9.873 -9.874 s 9.874 4.429 9.874 9.874 S 25.767 29.874 20.322 29.874 Z M 20.322 32.891 c -7.107 0 -12.89 -5.783 -12.89 -12.891 c 0 -7.107 5.782 -12.89 12.89 -12.89 c 7.108 0 12.891 5.783 12.891 12.89 C 33.213 27.108 27.431 32.891 20.322 32.891 Z M 24.191 25.386 h -7.984 l -2.469 -7.595 l 6.461 -4.693 l 6.461 4.693 L 24.191 25.386 Z",ExclusiveEventBased:"M 30 15 C 30 23.28 23.28 30 15 30 S 0 23.28 0 15 S 6.72 0 15 0 S 30 6.72 30 15 z M 15 5 L 5 12.5 L 8 22.5 H 22 L 25 12.5 z",ParallelEventBased:"M 35 17.5 C 35 27.16 27.16 35 17.5 35 S 0 27.16 0 17.5 S 7.84 0 17.5 0 S 35 7.84 35 17.5 z M 14.58 5.83 V 14.58 H 5.83 V 20.42 H 14.58 V 29.17 H 20.42 V 20.42 H 29.17 V 14.58 H 20.42 V 5.83 z"},mf={None:"",Service:"M 32.699 20.187 v -4.005 h -3.32 c -0.125 -0.43 -0.292 -0.83 -0.488 -1.21 l 2.373 -2.375 l -2.833 -2.83 l -2.333 2.333 c -0.44 -0.253 -0.9 -0.448 -1.387 -0.595 v -3.32 h -4.003 v 3.32 c -0.46 0.137 -0.890.322 -1.3 0.537 l -2.285 -2.275 l -2.833 2.83 l 2.285 2.278 c -0.235 0.42 -0.41 0.847 -0.547 1.307 h -3.33 v 4.005 h 3.33 c 0.148 0.488 0.343 0.955 0.588 1.395 l -2.325 2.325 l 2.822 2.832 l 2.373 -2.382 c 0.392 0.205 0.792 0.37 1.212 0.497 v 3.33 h 4.003 v -3.33 c 0.46 -0.138 0.89 -0.323 1.3 -0.547 l 2.43 2.432 l 2.822 -2.832 l -2.42 -2.422 c 0.222 -0.41 0.4 -0.85 0.535-1.297 H 32.699 Z M 22.699 21.987 c -2.1 0 -3.803 -1.703 -3.803 -3.803 c 0 -2.1 1.703 -3.803 3.803 -3.803 c 2.1 0 3.803 1.703 3.803 3.803 C 26.502 20.285 24.8 21.987 22.699 21.987 Z",Receive:"M 12.217 12.134 v 13.334 h 20 V 12.134 H 12.217 Z M 30.44 13.007 l -8.223 5.35 l -8.223 -5.35 H 30.44 Z M 13.09 24.594 V 13.459 l 9.127 5.94 l 9.127 -5.94 v 11.135 H 13.09 Z",Send:"M 45.7256 3.16055 L 25 23.4017 L 4.27442 3.16055 H 45.7256 Z M 47.8963 46.8413 H 2.10375 V 4.80813 L 25 27.1709 L 47.8963 4.80813 V 46.8413 Z",InstantiatingReceive:"M 16.306 17.39 v 8.79 h 13.198 v -8.79 H 16.306 Z M 28.375 17.946 l -5.47 3.558 l -5.47 -3.558 H 28.375 Z M 28.948 25.625 H 16.861 v -7.389 l 6.043 3.931 l 6.043 -3.931 V 25.625 Z M 22.905 11.785c -5.514 0 -9.999 4.486 -9.999 10 c 0 5.514 4.485 10 9.999 10 s 9.999 -4.486 9.999 -10 C 32.904 16.272 28.419 11.785 22.905 11.785 Z M 22.905 31.239 c -5.212 0 -9.453 -4.241 -9.453 -9.454c 0 -5.212 4.241 -9.453 9.453 -9.453 s 9.452 4.241 9.452 9.453 C 32.357 26.998 28.117 31.239 22.905 31.239 Z",Manual:"M 13.183 15.325 h 2.911 c 0.105 0 0.207 -0.043 0.281 -0.117 c 0.078 -0.074 0.117 -0.176 0.117 -0.281c 0 -0.753 0.718 -1.362 1.596 -1.362 h 2.579 c -0.117 0.227 -0.191 0.48 -0.195 0.757 c 0 0.433 0.168 0.851 0.46 1.144 c 0.008 0.004 0.015 0.011 0.019 0.015 c -0.289 0.285 -0.475 0.691 -0.479 1.148 c 0 0.433 0.168 0.846 0.46 1.139 c 0.011 0.012 0.023 0.02 0.035 0.032 c -0.301 0.281 -0.491 0.694 -0.495 1.155 c 0 0.432 0.168 0.847 0.46 1.143c 0.265 0.266 0.612 0.414 0.975 0.414 h 0.839 c 0.027 0.004 0.051 0.012 0.074 0.012 h 8.443 c 0.352 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.285 0.753 -0.636 0.753 h -6.687 c -0.019 0 -0.035 -0.008 -0.051 -0.008h -2.27 c -0.121 -0.835 -0.667 -1.187 -1.795 -1.187 h -2.158 c -0.223 0 -0.402 0.18 -0.402 0.403c 0 0.219 0.179 0.398 0.402 0.398 h 2.158 c 0.972 0 1.019 0.203 1.019 0.784 c 0 0.219 0.179 0.399 0.402 0.399 c 0.008 0 0.016 -0.004 0.027 -0.004 c 0.028 0.004 0.055 0.016 0.082 0.016 h 2.56 c 0.34 0.015 0.616 0.343 0.616 0.752c 0 0.418 -0.285 0.757 -0.636 0.761 h -0.004 h -6.442 c -0.878 0 -1.595 -0.639 -1.595 -1.427 v -0.683 c 0 -0.109 -0.043 -0.211 -0.114 -0.285 c -0.078 -0.074 -0.179 -0.117 -0.285 -0.117 h -0.004 l -2.989 0.027 c -0.223 0 -0.398 0.184 -0.398 0.402 c 0 0.219 0.179 0.395 0.398 0.395 h 0.004 l 2.591 -0.02 v 0.282 c 0 1.229 1.073 2.223 2.391 2.223 h 3.895 c 0.004 0 0.007 0.004 0.011 0.004 h 2.536 c 0.792 0 1.436 -0.698 1.436 -1.561 c 0 -0.273 -0.07 -0.53 -0.188 -0.752 h 5.49 c 0.792 0 1.436 -0.695 1.436 -1.553 c 0 -0.858 -0.644 -1.557 -1.436 -1.557h -3.566 c 0.121 -0.226 0.199 -0.487 0.199 -0.768 c 0 -0.468 -0.195 -0.882 -0.495 -1.167c 0.301 -0.285 0.495 -0.698 0.495 -1.163 c 0 -0.456 -0.191 -0.866 -0.483 -1.152 c 0.293 -0.285 0.483 -0.694 0.483 -1.151c 0 -0.858 -0.647 -1.557 -1.439 -1.557 h -8.373 c -1.167 0 -2.142 0.757 -2.352 1.76 l -2.548 -0.004 c -0.219 0 -0.399 0.18 -0.399 0.403 C 12.784 15.145 12.964 15.325 13.183 15.325 L 13.183 15.325 Z M 21.907 19.707 c -0.191 0 -0.328 -0.094 -0.41 -0.176 c -0.144 -0.145 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.418 0.289 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.008 h 0.051 c 0.351 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.286 0.753 -0.636 0.753 H 21.907 Z M 27.097 16.629 c 0 0.414 -0.286 0.753 -0.64 0.753 h -4.464 c -0.004 0 -0.004 0 -0.004 0 h -0.082c -0.191 0 -0.328 -0.098 -0.414 -0.18 c -0.14 -0.145 -0.222 -0.352 -0.222 -0.573 c 0 -0.413 0.285 -0.749 0.631 -0.753h 3.434 c 0 0 0 0 0.004 0 h 1.116 c 0.008 0 0.012 -0.004 0.02 -0.004 C 26.819 15.887 27.097 16.215 27.097 16.629L 27.097 16.629 Z M 27.097 14.322 c 0 0.41 -0.278 0.737 -0.62 0.749 c -0.008 0 -0.012 0 -0.016 0 h -3.637 c -0.008 0 -0.015 0.004 -0.023 0.004 h -0.886 c -0.004 0 -0.008 0 -0.012 0 c -0.187 0 -0.324 -0.094 -0.406 -0.176c -0.144 -0.144 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.414 0.293 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.004 h 0.051 C 26.811 13.565 27.097 13.905 27.097 14.322 L 27.097 14.322 Z M 27.097 14.322",BusinessRule:"M 32.844 13.245 h -0.089 v 0 H 13.764 v -0.015 h -1.009 v 16.989 h 0.095 v 0.011 h 19.716 v -0.011 h 0.278 V 13.245 Z M 31.844 14.229 v 4.185 h -18.08 v -4.185 H 31.844 Z M 18.168 25.306 v 3.938 h -4.404 v -3.938 H 18.168 Z M 13.764 24.322 v -4.923 h 4.404 v 4.923 H 13.764 Z M 19.177 25.306 h 12.667 v 3.938 H 19.177 V 25.306 Z M 19.177 24.322v -4.923 h 12.667 v 4.923 H 19.177 Z",User:"M 21.762 21.935 c 2.584 0 4.687 -2.561 4.687 -5.703 c 0 -3.147 -2.103 -5.703 -4.687 -5.703 c -1.279 0 -2.475 0.61-3.363 1.721 c -0.855 1.071 -1.327 2.484 -1.324 3.983 C 17.075 19.374 19.178 21.935 21.762 21.935 L 21.762 21.935 ZM 21.762 11.779 c 1.894 0 3.436 1.995 3.436 4.452 c 0 2.453 -1.541 4.452 -3.436 4.452 c -1.895 0 -3.44 -1.999 -3.44 -4.452C 18.323 13.774 19.864 11.779 21.762 11.779 L 21.762 11.779 Z M 25.699 21.309 c -0.348 0 -0.626 0.277 -0.626 0.626 c 0 0.344 0.277 0.622 0.626 0.622 c 2.136 0 3.875 1.74 3.875 3.879 c 0 0.272 -0.227 0.498 -0.501 0.498 H 14.447 c -0.274 0 -0.497 -0.223 -0.497 -0.498 c 0 -2.139 1.736 -3.879 3.872 -3.879 c 0.344 0 0.625 -0.277 0.625 -0.622 c 0 -0.348 -0.28 -0.626-0.625 -0.626 c -2.826 0 -5.124 2.297 -5.124 5.126 c 0 0.965 0.784 1.749 1.748 1.749 h 14.626 c 0.964 0 1.748 -0.7841.748 -1.749 C 30.822 23.606 28.524 21.309 25.699 21.309 L 25.699 21.309 Z M 22.217 9.832 c 0.448 -0.263 0.924 -0.396 1.419 -0.396 c 1.895 0 3.436 1.995 3.436 4.452 c 0 0.439 -0.048 0.873 -0.143 1.284 c -0.08 0.336 0.128 0.672 0.464 0.751 c 0.048 0.012 0.098 0.019 0.143 0.019 c 0.284 0 0.541 -0.195 0.608 -0.483 c 0.119 -0.506 0.18 -1.034 0.18 -1.571c 0 -3.147 -2.102 -5.703 -4.687 -5.703 c -0.711 0 -1.419 0.198 -2.054 0.573 c -0.296 0.174 -0.397 0.559 -0.219 0.855C 21.536 9.911 21.921 10.009 22.217 9.832 L 22.217 9.832 Z M 27.697 18.81 c -0.345 0 -0.626 0.277 -0.626 0.622 c 0 0.348 0.281 0.626 0.626 0.626 c 2.137 0 3.75 1.782 3.75 3.918 c 0 0.07 -0.013 0.141 -0.043 0.205 c -0.14 0.314 0.0030.684 0.318 0.823 c 0.082 0.037 0.167 0.055 0.253 0.055 c 0.241 0 0.466 -0.141 0.57 -0.373 c 0.101 -0.226 0.153 -0.464 0.153-0.714 C 32.699 21.15 30.523 18.81 27.697 18.81 L 27.697 18.81 Z M 27.697 18.81",Script:"M 22.453 15.04 c 0 0 -1.194 -3.741 2.548 -3.774 c 0 0 2.497 0.126 1.766 4.321 c -0.008 0.043 -0.015 0.086 -0.024 0.13c -0.806 4.323 -2.516 8.42 -3.193 10.581 h 3.904 c 0 0 0.983 4.581 -2.549 4.968 H 13.292 c 0 0 -3.097 -1.42 -1.517 -5.323 l 3 -10.839 H 11.84 c 0 0 -1.129 -2.902 1.709 -3.806 l 11.425 -0.032 l -0.73 0.355 l -1.193 1.726 L 22.453 15.04 Z M 22.409 12.597 c 0 0 -0.242 0.483 -0.278 0.98 h -9.098 c 0 0 -0.06 -0.871 0.714 -1.041 L 22.409 12.597 Z M 26.341 27.734c 0 0 -0.13 2.678 -2.226 1.871 c 0 0 -0.823 -0.565 -0.758 -1.855 L 26.341 27.734 Z M 22.905 15.008 c 0 0 0.653 -0.258 0.709-1.501 c 0 0 0.145 -1.144 1.483 -0.693 c 0 0 0.808 0.355 0.259 2.404 c 0 0 -2.226 8.5 -3.032 10.339 c 0 0 -1.064 2.646 0.096 4.226 h -8.581 c 0 0 -1.806 -0.452 -0.741 -3.613 c 0 0 2.935 -9.549 3.193 -11.162 L 22.905 15.008 Z"},yf={None:"",Standard:"M 52.002 73.379 c -2.494 -2.536 -6.55 -2.534 -9.043 0 c -1.208 1.228 -1.874 2.861 -1.874 4.598 c 0 1.225 0.337 2.395 0.957 3.411 l -1.167 1.186 l 2.071 0.458 l 2.071 0.458 l -0.45 -2.106 l -0.45 -2.106 l -1.292 1.314c -1.119 -2.065 -0.842 -4.709 0.877 -6.458 c 2.084 -2.119 5.475 -2.117 7.557 0 c 2.083 2.119 2.083 5.565 0 7.685c -0.976 0.992 -2.272 1.557 -3.65 1.59 l 0.025 1.068 c 1.65 -0.041 3.2 -0.716 4.368 -1.903 c 1.208 -1.228 1.874 -2.861 1.874 -4.597 C 53.875 76.24 53.209 74.607 52.002 73.379 Z",ParallelMultiInstance:"M 51.5,69.5 L52.5,69.5 L52.5,84.5 L51.5 84.5 Z M 46.5,69.5 L47.5,69.5 L47.5,84.5 L46.5 84.5 Z M 41.5,69.5 L42.5,69.5 L42.5,84.5 L41.5 84.5 Z  ",SequenceMultiInstance:"M 40.375,71.5 L 55.375,71.5 L 55.375,72.5 L 40.375,72.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,81.5 L 55.375,81.5L 55.375,82.5 L 40.375,82.5 Z"},vf=(function(){function e(){}e.prototype.updateBridging=function(e,t){var i,n=[];if(e.bridges=[],function(e,t){return e.constraints&Pn.Bridging?e.constraints&Pn.Bridging:e.constraints&Pn.InheritBridging?t.constraints&kn.Bridging:0}(e,t)){var r=this.getPoints(e);i=hn.toBounds(r);for(var o=e.bridgeSpace,a=t.bridgeDirection,s=-1,l=t.connectors,c=0;c<l.length;c++){var h=l[c];if(e&&h&&e.id!==h.id){var d=this.getPoints(h),p=hn.toBounds(d);if(this.intersectsRect(i,p)){var u=this.intersect(r,d,!1,a,!0);if(u.length>0)for(var f=0;f<u.length;f++){var g=0,m=0,y=0,v=0,b=this.getLengthAtFractionPoint(e,u[f]);if(-1!==b.pointIndex){m=b.lengthFractionIndex,g=b.fullLength,y=b.segmentIndex,v=b.pointIndex;var w=this.getPointAtLength(m-o/2,r),x=this.getPointAtLength(m+o/2,r);(m+o/2)/g,this.isEmptyPoint(x)&&(x=w);var S,C=void 0;S=e.sourcePoint,C="Straight"===e.type?e.targetPoint:e.intermediatePoints[v];var P=this.angleCalculation(S,C);if(n.length){var O;O=e.sourcePoint;var E=Math.abs(this.lengthCalculation(O,x)),T=-1;s=-1;for(var I=0;I<n[y].bridges.length;I++){s++;var k=n[y].bridges[I];if(E<Math.abs(this.lengthCalculation(O,k.endPoint))){T=s;break}}if(T>=0){var A=void 0;(A=this.createSegment(w,x,P,a,v,e,t)).target=h.id,n[y].bridges.splice(T,0,A),n[y].bridges.join(),n[y].bridgeStartPoint.splice(T,0,w),n[y].bridgeStartPoint.join(),n[y].segmentIndex=y}else{A=void 0;(A=this.createSegment(w,x,P,a,v,e,t)).target=h.id,n[y].bridges.push(A),n[y].bridgeStartPoint.push(w),n[y].segmentIndex=y}}else if(!isNaN(w.x)&&!isNaN(w.y)&&!this.isEmptyPoint(x)){var M=void 0,D={bridges:[],bridgeStartPoint:[],segmentIndex:y};(M=this.createSegment(w,x,P,a,v,e,t)).target=h.id;var L=[];L.push(w),[].push(x),n[y]=D,n[y].bridges.push(M),n[y].bridgeStartPoint=L,n[y].segmentIndex=y}}}}}}0!==n.length&&this.firstBridge(n,e,o)}},e.prototype.firstBridge=function(e,t,i){for(var n=0;n<e.length;n++){for(var r=e[n],o=1;o<r.bridges.length;o++)if(Qi.findLength(r.bridges[o].endPoint,r.bridges[o-1].endPoint)<i){r.bridges[o-1].endPoint=r.bridges[o].endPoint;var a=r.bridges[o-1],s=this.createBridgeSegment(a.startPoint,a.endPoint,a.angle,i,a.sweep);r.bridges[o-1].path=s,r.bridges.splice(o,1),r.bridgeStartPoint.splice(o,1),o--}t.sourcePoint;for(var l=0;l<r.bridges.length;l++){(a=r.bridges[l]).endPoint,t.bridges.push(a)}}},e.prototype.createSegment=function(e,t,i,n,r,o,a){var s,l,c={angle:0,endPoint:{x:0,y:0},target:"",path:"",segmentPointIndex:-1,startPoint:{x:0,y:0},sweep:1,rendered:!1};return l=this.sweepDirection(i,n,o,a),s=this.createBridgeSegment(e,t,i,o.bridgeSpace,l),c.path=s,c.startPoint=e,c.endPoint=t,c.angle=i,c.segmentPointIndex=r,c.sweep=l,c},e.prototype.createBridgeSegment=function(e,t,i,n,r){return"A "+n/2+" "+n/2+" "+i+" , 1 "+r+" "+t.x+","+t.y},e.prototype.sweepDirection=function(e,t,i,n){var r,o=Math.abs(e);switch(t){case"Top":case"Bottom":r=1,o>=0&&o<=90&&(r=0);break;case"Left":case"Right":r=1,e<0&&e>=-180&&(r=0)}return"Right"!==t&&"Bottom"!==t||(r=0===r?1:0),r},e.prototype.getPointAtLength=function(e,t){for(var i,n=0,r={x:0,y:0},o=0;o<t.length;o++){var a=t[o];if(i){var s=this.lengthCalculation(i,a);if(n+s>e){var l=e-n,c=Qi.findAngle(i,a),h=l*Math.cos(c*Math.PI/180),d=l*Math.sin(c*Math.PI/180);r={x:i.x+h,y:i.y+d};break}n+=s,i=a}else i=a}return r},e.prototype.getPoints=function(e){var t=[];if(e.intermediatePoints&&("Straight"===e.type||"Orthogonal"===e.type))for(var i=0;i<e.intermediatePoints.length;i++)t.push(e.intermediatePoints[i]);return t},e.prototype.intersectsRect=function(e,t){return t.x<e.x+e.width&&e.x<t.x+t.width&&t.y<e.y+e.height&&e.y<t.y+t.height},e.prototype.intersect=function(e,t,i,n,r){i&&t.length>=2&&(t.splice(0,1),t.splice(0,1));for(var o=[],a=0;a<e.length-1;a++){var s=this.inter1(e[a],e[a+1],t,r,n);if(s.length>0)for(var l=0;l<s.length;l++)o.push(s[l]);i&&t.length>=1&&t.splice(0,1)}return o},e.prototype.inter1=function(e,t,i,n,r){for(var o=[],a=0;a<i.length-1;a++){var s=Jl(e,t,i[a],i[a+1]);if(!this.isEmptyPoint(s)){var l=this.angleCalculation(e,t),c=this.angleCalculation(i[a],i[a+1]);switch(l=this.checkForHorizontalLine(l),c=this.checkForHorizontalLine(c),r){case"Left":case"Right":l>c&&o.push(s);break;case"Top":case"Bottom":l<c&&o.push(s)}l===c&&n&&o.push(s)}}return o},e.prototype.checkForHorizontalLine=function(e){var t=Math.abs(e);return t>90?180-t:t},e.prototype.isEmptyPoint=function(e){return 0===e.x&&0===e.y},e.prototype.getLengthAtFractionPoint=function(e,t){for(var i=100,n=-1,r=0,o=-1,a=0,s=0,l=e.sourcePoint,c=l,h=[],d=0;d<e.intermediatePoints.length;d++){var p=e.intermediatePoints[d];h.push(p)}for(var u=0;u<h.length;u++){var f=h[u],g=this.getSlope(f,l,t,e);g<i&&(i=g,s=r+this.lengthCalculation(t,c),o=a,n=u),r+=Qi.findLength(f,l),l=f,c=f}return a++,{lengthFractionIndex:s,fullLength:r,segmentIndex:o,pointIndex:n}},e.prototype.getSlope=function(e,t,i,n){var r=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),a=(i.y-e.y)/(t.y-e.y),s=(i.x-e.x)/(t.x-e.x);if(!isFinite(a)||!isFinite(s)||isNaN(a)||isNaN(s)){if(e.x===t.x){if(e.y===t.y)return 1e4;if(e.y>i.y&&i.y>t.y||e.y<i.y&&i.y<t.y)return Math.abs(e.x-i.x)}else if(e.y===t.y&&(e.x>i.x&&i.x>t.x||e.x<i.x&&i.x<t.x))return Math.abs(e.y-i.y)}else if((e.x>=i.x&&i.x>=t.x||e.x<=i.x&&i.x<=t.x||r<3)&&(e.y>=i.y&&i.y>=t.y||e.y<=i.y&&i.y<=t.y||o<3))return Math.abs(a-s);return 1e4},e.prototype.angleCalculation=function(e,t){var i=e.x-t.x,n=e.y-t.y;return Math.atan2(n,i)*(180/Math.PI)},e.prototype.lengthCalculation=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Bridging"}}(),function(){function e(e){this.line=[],this.diagram=e}e.prototype.canSnap=function(){return 0!==(this.diagram.snapSettings.constraints&(Sn.SnapToObject|Sn.SnapToLines))},e.prototype.snapPoint=function(e,t,i,n,r,o,a){var s=this.diagram.snapSettings,l=this.diagram.scroller.currentZoom,c={x:0,y:0},h=wd(t.wrapper),d={snapped:!1,offset:0},p={snapped:!1,offset:0};if(this.diagram.snapSettings.constraints&Sn.SnapToObject){var u=void 0;(u=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),u.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(u),this.snapObject(e,t,u,d,p,r,o===a)}var f=h.x+r.x,g=h.y+r.y,m=h.x+h.width+r.x,y=h.y+h.height+r.y,v=s.verticalGridlines.scaledIntervals,b=this.round(m,v,l),w=this.round(f,v,l);v=s.horizontalGridlines.scaledIntervals;var x=this.round(g,v,l),S=this.round(y,v,l),C=h.x+h.width,P=h.y+h.height;return d.snapped?this.diagram.snapSettings.constraints&Sn.SnapToObject?c.x=d.offset:c.x=a.x-o.x:this.diagram.snapSettings.constraints&Sn.SnapToVerticalLines?Math.abs(r.x)>=1&&(i?Math.abs(b-C)>Math.abs(w-h.x)?c.x+=w-h.x:c.x+=b-C:Math.abs(b-C)<Math.abs(w-h.x)?c.x+=b-C:c.x+=w-h.x):c.x=a.x-o.x,p.snapped?c.y=p.offset:this.diagram.snapSettings.constraints&Sn.SnapToHorizontalLines?Math.abs(r.y)>=1&&(n?Math.abs(S-P)>Math.abs(x-h.y)?c.y+=x-h.y:c.y+=S-P:Math.abs(S-P)<Math.abs(x-h.y)?c.y+=S-P:c.y+=x-h.y):c.y=a.y-o.y,c},e.prototype.round=function(e,t,i){i=1===i?Math.pow(2,Math.floor(Math.log(i)/Math.log(2))):i;var n=0,r=0;for(r=0;r<t.length;r++)n+=t[r];var o=e%(n/=i),a=Math.floor(Math.abs(e)/n)*n;if(a!==e)if(e>=0)for(r=0;r<t.length;r++){if(o<=t[r]/i)return a+(o<t[r]/(2*i)?0:t[r]/i);a+=t[r]/i,o-=t[r]/i}else for(a*=-1,r=t.length-1;r>=0;r--){if(Math.abs(o)<=t[r]/i)return a-(Math.abs(o)<t[r]/(2*i)?0:t[r]/i);a-=t[r]/i,o+=t[r]/i}return e},e.prototype.snapObject=function(e,t,i,n,r,o,a){var s,l,c,h=null,d=this.diagram.scroller,p=this.diagram.snapSettings,u=[],f=[],g=[],m=[],y=wd(t.wrapper),v=e.scroller.currentZoom,b=-d.horizontalOffset,w=-d.verticalOffset,x=p.snapObjectDistance/v,S=new hn(0,0,d.viewPortWidth,d.viewPortHeight),C=new hn(b/v,y.y-x-5,S.width/v,y.height+2*x+10),P=new hn(y.x-x-5,w/v,y.width+2*x+10,S.height/v);S=new hn(b/v,w/v,S.width/v,S.height/v);var O,E,T,I=this.findNodes(e.spatialSearch,t,P,S),k=e.nameTable;for(O=0;O<I.length;O++)E=I[O],this.canBeTarget(e,E)&&(this.diagram.nameTable[E.id]instanceof $a||!this.canConsider(k,t,E)||((T=E.bounds).height+T.y<o.y+y.y?g.push({obj:E,distance:Math.abs(y.y+o.y-T.y-T.height)}):T.y>y.y+o.y+y.height&&m.push({obj:E,distance:Math.abs(y.y+o.y+y.height-T.y)}),(null==h||h>Math.abs(T.y-y.y-o.y))&&(Math.abs(T.x+T.width/2-(y.x+y.width/2+o.x))<=x?(l=this.createSnapObject(T,y,"centerX"),h=Math.abs(T.y-y.y)):Math.abs(T.x+T.width-(y.x+y.width+o.x))<=x?(l=this.createSnapObject(T,y,"right"),h=Math.abs(T.y-y.y)):Math.abs(T.x-(y.x+o.x))<=x?(l=this.createSnapObject(T,y,"left"),h=Math.abs(T.y-y.y)):Math.abs(T.x-(y.x+y.width+o.x))<=x?(l=this.createSnapObject(T,y,"rightLeft"),h=Math.abs(T.y-y.y)):Math.abs(T.x+T.width-(y.x+o.x))<=x&&(l=this.createSnapObject(T,y,"leftRight"),h=Math.abs(T.y-y.y)))));I=this.findNodes(e.spatialSearch,t,C,S);for(var A=0;A<I.length;A++)E=I[A],this.canBeTarget(e,E)&&(this.diagram.nameTable[E.id]instanceof $a||!this.canConsider(k,t,E)||((T=E.bounds).x+T.width<y.x+o.x&&(u[u.length]={obj:E,distance:Math.abs(y.x+o.x-T.x-T.width)}),T.x>y.x+o.x+y.width&&(f[f.length]={obj:E,distance:Math.abs(y.x+o.x+y.width-T.x)}),(null==s||s>Math.abs(T.x-y.x-o.x))&&(Math.abs(T.y+T.height/2-(y.y+y.height/2+o.y))<=x?(c=this.createSnapObject(T,y,"centerY"),s=Math.abs(T.x-y.x)):Math.abs(T.y-y.y-o.y)<=x?(c=this.createSnapObject(T,y,"top"),s=Math.abs(T.x-y.x)):Math.abs(T.y+T.height-(y.y+y.height+o.y))<=x?(c=this.createSnapObject(T,y,"bottom"),s=Math.abs(T.x-y.x)):Math.abs(T.y+T.height-y.y-o.y)<=x?(c=this.createSnapObject(T,y,"topBottom"),s=Math.abs(T.x-y.x)):Math.abs(T.y-(y.y+y.height+o.y))<=x&&(c=this.createSnapObject(T,y,"bottomTop"),s=Math.abs(T.x-y.x)))));this.createGuidelines(e,l,c,i,n,r,a),n.snapped||this.createHSpacingLines(e,i,t,u,f,n,r,a,o,x),r.snapped||this.createVSpacingLines(e,i,t,g,m,n,r,a,o,x)},e.prototype.snapConnectorEnd=function(e){var t=this.diagram.snapSettings,i=this.diagram.scroller.currentZoom;return t.constraints&Sn.SnapToLines&&(e.x=this.round(e.x,t.verticalGridlines.scaledIntervals,i),e.y=this.round(e.y,t.horizontalGridlines.scaledIntervals,i)),e},e.prototype.canBeTarget=function(e,t){return t=this.diagram.nameTable[t.id],!up(this.diagram,t,!1)},e.prototype.snapSize=function(e,t,i,n,r,o,a,s){var l,c,h,d,p=this.diagram.snapSettings,u=this.diagram.scroller,f=wd(a.wrapper),g=e.nameTable,m=[],y=[],v=e.scroller.currentZoom,b=-u.horizontalOffset,w=-u.verticalOffset,x=p.snapObjectDistance/v,S=new hn(0,0,u.viewPortWidth,u.viewPortHeight),C=new hn(b/v,(f.y-5)/v,S.width/v,(f.height+10)/v),P=new hn((f.x-5)/v,w/v,(f.width+10)/v,S.height/v);S=new hn(b/v,w/v,S.width/v,S.height/v);var O,E,T,I=[],k=this.findNodes(e.spatialSearch,a,P,S,I);for(O=0;O<k.length;O++)E=k[O],!this.canConsider(g,a,E)||this.diagram.nameTable[E.id]instanceof $a||(T=E.bounds,(null==l||l>Math.abs(T.y-f.y))&&(t.left?Math.abs(f.x+r-T.x)<=x?(h=this.createSnapObject(T,f,"left"),l=Math.abs(T.y-f.y)):Math.abs(f.x+r-T.x-T.width)<=x&&(h=this.createSnapObject(T,f,"leftRight"),l=Math.abs(T.y-f.y)):t.right&&(Math.abs(f.x+r+f.width-T.x-T.width)<=x?(h=this.createSnapObject(T,f,"right"),l=Math.abs(T.y-f.y)):Math.abs(f.x+r+f.width-T.x)<=x&&(h=this.createSnapObject(T,f,"rightLeft"),l=Math.abs(T.y-f.y)))));k=this.findNodes(e.spatialSearch,a,C,S);for(var A=0;A<k.length;A++){var M=k[A];if(this.canConsider(g,a,M)&&!(this.diagram.nameTable[M.id]instanceof $a)){var D=M.bounds;(null==c||c>Math.abs(D.x-f.x))&&(i.top?Math.abs(f.y+o-D.y)<=x?(d=this.createSnapObject(D,f,"top"),c=Math.abs(D.x-f.x)):Math.abs(f.y+o-D.y-D.height)<=x&&(d=this.createSnapObject(D,f,"topBottom"),c=Math.abs(D.x-f.x)):i.bottom&&(Math.abs(f.y+f.height+o-D.y-D.height)<=x?(d=this.createSnapObject(D,f,"bottom"),c=Math.abs(D.x-f.x)):Math.abs(f.y+f.height+o-D.y)<=x&&(d=this.createSnapObject(D,f,"bottomTop"),c=Math.abs(D.x-f.x))))}}for(O=0;O<I.length;O++)if(E=I[O],this.canConsider(g,a,E)){var L=E.bounds,R=t.left?-r:r,j=Math.abs(f.width+R-L.width),N=void 0;j<=x&&(N=t.left?-L.width+f.width:L.width-f.width,m[m.length]={source:E,difference:j,offset:N}),R=i.top?-o:o;var z=Math.abs(f.height+R-L.height);z<=x&&(N=i.top?-L.height+f.height:L.height-f.height,y[y.length]={source:E,difference:z,offset:N})}if(!e.getTool)this.createGuidelines(e,h,d,n,t,i,s);!t.snapped&&m.length>0&&(t.left||t.right)&&this.addSameWidthLines(e,n,m,t,s,a),!i.snapped&&y.length>0&&(i.top||i.bottom)&&this.addSameHeightLines(e,n,y,i,s,a)},e.prototype.snapTop=function(e,t,i,n,r,o,a,s){var l,c=r;t.top=!0,e.left=e.right=!1;var h=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&Sn.SnapToObject&&!o.rotateAngle&&(l=s.y-s.height*o.pivot.y+r-(o.offsetY-o.height*o.pivot.y),this.snapSize(this.diagram,e,t,i,n,l,this.diagram.selectedItems,a)),t.snapped)c=r-l+t.offset;else if(this.diagram.snapSettings.constraints&Sn.SnapToHorizontalLines){var d=s.y-s.height*o.pivot.y,p=d+r;c=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,h)-d}return c},e.prototype.snapRight=function(e,t,i,n,r,o,a,s){var l,c=n;e.right=!0,t.top=t.bottom=!1;var h=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&Sn.SnapToObject&&!o.rotateAngle&&(l=s.x+s.width*(1-o.pivot.x)+n-(o.offsetX+o.width*(1-o.pivot.x)),this.snapSize(this.diagram,e,t,i,l,r,this.diagram.selectedItems,a)),e.snapped)c=n-l+e.offset;else if(this.diagram.snapSettings.constraints&Sn.SnapToVerticalLines){var d=s.x+s.width*(1-o.pivot.x),p=d+n;c=this.round(p,this.diagram.snapSettings.verticalGridlines.scaledIntervals,h)-d}return c},e.prototype.snapLeft=function(e,t,i,n,r,o,a,s){var l=n,c=0;e.left=!0,t.top=t.bottom=!1;var h=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&Sn.SnapToObject&&!o.rotateAngle&&(c=s.x-s.width*o.pivot.x+n-(o.offsetX-o.width*o.pivot.x),this.snapSize(this.diagram,e,t,i,c,r,this.diagram.selectedItems,a)),e.snapped)l=n-c+e.offset;else if(this.diagram.snapSettings.constraints&Sn.SnapToVerticalLines){var d=s.x-s.width*o.pivot.x,p=d+n;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,h)-d}return l},e.prototype.snapBottom=function(e,t,i,n,r,o,a,s){var l=r;t.bottom=!0,e.left=e.right=!1;var c=this.diagram.scroller.currentZoom,h=0;if(this.diagram.snapSettings.constraints&Sn.SnapToObject&&!o.rotateAngle&&(h=s.y+s.height*(1-o.pivot.y)+r-(o.offsetY+o.height*(1-o.pivot.y)),this.snapSize(this.diagram,e,t,i,n,h,this.diagram.selectedItems,a)),wd(o instanceof or||o instanceof Ta?o:o.wrapper),t.snapped)l=r-h+t.offset;else if(this.diagram.snapSettings.constraints&Sn.SnapToHorizontalLines){var d=s.y+s.height*(1-o.pivot.y),p=d+r;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-d}return l},e.prototype.createGuidelines=function(e,t,i,n,r,o,a){return t&&(r.offset=t.offsetX,r.snapped=!0,a||(t.type,this.renderAlignmentLines(t.start,t.end,n,e.scroller.transform))),i&&(o.offset=i.offsetY,o.snapped=!0,a||(i.type,this.renderAlignmentLines(i.start,i.end,n,e.scroller.transform))),n},e.prototype.renderAlignmentLines=function(e,t,i,n){e={x:(e.x+n.tx)*n.scale,y:(e.y+n.ty)*n.scale},t={x:(t.x+n.tx)*n.scale,y:(t.y+n.ty)*n.scale};var r={stroke:"#07EDE1",strokeWidth:1,startPoint:{x:e.x,y:e.y},endPoint:{x:t.x,y:t.y},fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:md()},o=0;for(this.line.push(r),o=0;o<this.line.length;o++)this.diagram.diagramRenderer.drawLine(i,this.line.pop())},e.prototype.createHSpacingLines=function(e,t,i,n,r,o,a,s,l,c){var h=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var d,p,u,f,g=[],m=wd(i.wrapper);if(n.length>0&&(g[g.length]=n[0],h=(d=n[0].obj.bounds).y,n.length>1?(u=n[1].obj.bounds,f=d.x-u.x-u.width,Math.abs(f-n[0].distance)<=c?h=this.findEquallySpacedNodesAtLeft(n,f,h,g):f=n[0].distance):f=n[0].distance),this.sortByDistance(g,"distance"),g[g.length]={obj:i,distance:0},h=m.y<h||!h?m.y:h,r.length>0){var y=void 0;if(h=(p=r[0].obj.bounds).y<h?p.y:h,r.length>1&&(y=(u=r[1].obj.bounds).x-p.x-p.width),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=c){var v=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=v:f+=v,g[g.length]=r[0]}else 1===n.length&&(d=void 0,g.splice(0,1),g[g.length]=r[0],f=y);else f=y,g[g.length]=r[0];r.length>1&&p.x+p.width<u.x&&(h=this.findEquallySpacedNodesAtRight(r,y,h,g,c))}if(g.length>2){this.addHSpacingLines(e,t,g,s,h);var b=0;s&&(b=l.x),d?o.offset=f-Math.abs(m.x+b-d.x-d.width)+b:p&&(o.offset=Math.abs(m.x+m.width+b-p.x)-f+b),o.snapped=!0}},e.prototype.createVSpacingLines=function(e,t,i,n,r,o,a,s,l,c){var h=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var d,p,u,f,g,m=[],y=wd(i.wrapper);if(n.length>0&&(m[m.length]=n[0],h=(d=n[0].obj.bounds).x+d.width,n.length>1?(u=n[1].obj.bounds,f=d.y-u.y-u.height,Math.abs(f-n[0].distance)<=c?h=this.findEquallySpacedNodesAtTop(n,f,h,m):f=n[0].distance):f=n[0].distance),this.sortByDistance(m,"distance"),m[m.length]={obj:i,distance:0},h=y.x+y.width>h||!h?y.x+y.width:h,r.length>0){if(h=(p=r[0].obj.bounds).x+p.width>h?p.x+p.width:h,r.length>1&&(g=(u=r[1].obj.bounds).y-p.y-p.height),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=c){var v=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=v:f+=v,m[m.length]=r[0]}else 1===n.length&&(d=void 0,m.splice(0,1),m[m.length]=r[0],f=g);else f=g,m[m.length]=r[0];r.length>1&&u.y>p.y+p.height&&(h=this.findEquallySpacedNodesAtBottom(r,g,h,m,c))}if(m.length>2){this.addVSpacingLines(e,t,m,s,h);var b=0;s&&(b=l.y),d?a.offset=f-Math.abs(y.y+b-d.y-d.height)+b:p&&(a.offset=Math.abs(y.y+y.height+b-p.y)-f+b),a.snapped=!0}},e.prototype.addHSpacingLines=function(e,t,i,n,r){var o,a,s;if(!n)for(o=0;o<i.length-1;o++){var l=i[o].obj instanceof Hh?wd(i[o].obj.wrapper):i[o].obj.bounds,c=i[o+1].obj instanceof Hh?wd(i[o+1].obj.wrapper):i[o+1].obj.bounds;a={x:l.x+l.width,y:r-15},s={x:c.x,y:r-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform)}},e.prototype.addVSpacingLines=function(e,t,i,n,r){var o,a;if(!n)for(var s=0;s<i.length-1;s++){var l=i[s].obj instanceof Hh?wd(i[s].obj.wrapper):i[s].obj.bounds,c=i[s+1].obj instanceof Hh?wd(i[s+1].obj.wrapper):i[s+1].obj.bounds;o={x:r+15,y:l.y+l.height},a={x:r+15,y:c.y},this.renderSpacingLines(o,a,t,this.getAdornerLayerSvg(),e.scroller.transform)}},e.prototype.addSameWidthLines=function(e,t,i,n,r,o){this.sortByDistance(i,"offset");var a,s,l,c=wd(o.wrapper),h=i[0],d=h.source.bounds,p=[];for(p.push(i[0]),l=1;l<i.length;l++)i[l].source.bounds.width===d.width&&p.push(i[l]);if(!r)for(a={x:c.x+h.offset,y:c.y-15},s={x:c.x+c.width+h.offset,y:c.y-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform),l=0;l<p.length;l++)a={x:(c=p[l].source.bounds).x,y:c.y-15},s={x:c.x+c.width,y:c.y-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform);n.offset=h.offset,n.snapped=!0},e.prototype.addSameHeightLines=function(e,t,i,n,r,o){this.sortByDistance(i,"offset");var a,s,l,c=wd(o.wrapper),h=i[0],d=h.source.bounds,p=[];for(p.push(i[0]),l=0;l<i.length;l++)i[l].source.bounds.height===d.height&&p.push(i[l]);if(!r)for(a={x:c.x+c.width+15,y:c.y+h.offset},s={x:c.x+c.width+15,y:c.y+h.offset+c.height},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform),l=0;l<p.length;l++)a={x:(c=p[l].source.bounds).x+c.width+15,y:c.y},s={x:c.x+c.width+15,y:c.y+c.height},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform);n.offset=h.offset,n.snapped=!0},e.prototype.renderSpacingLines=function(e,t,i,n,r){var o,a,s=new dr,l={};e={x:(e.x+r.tx)*r.scale,y:(e.y+r.ty)*r.scale},t={x:(t.x+r.tx)*r.scale,y:(t.y+r.ty)*r.scale},e.x===t.x?(o="M"+(e.x-5)+" "+(e.y+5)+"L"+e.x+" "+e.y+"L"+(e.x+5)+" "+(e.y+5)+"zM"+(t.x-5)+" "+(t.y-5)+" L"+t.x+" "+t.y+" L"+(t.x+5)+" "+(t.y-5)+"z",a={startPoint:{x:e.x-8,y:e.y-1},endPoint:{x:e.x+8,y:e.y-1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:md()},s.data=o,l.data=s.data,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=md(),this.diagram.diagramRenderer.drawPath(i,l),this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),a={startPoint:{x:t.x-8,y:t.y+1},endPoint:{x:t.x+8,y:t.y+1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:this.getAdornerLayerSvg().id+"spacing"},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())):(o="M"+(e.x+5)+" "+(e.y+5)+" L"+e.x+" "+e.y+" L"+(e.x+5)+" "+(e.y-5)+"zM"+(t.x-5)+" "+(t.y-5)+" L"+t.x+" "+t.y+" L"+(t.x-5)+" "+(t.y+5)+"z",s.data=o,l.data=o,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=md(),this.diagram.diagramRenderer.drawPath(i,l),a={visible:!0,opacity:1,id:md(),startPoint:{x:e.x-1,y:e.y-8},endPoint:{x:e.x-1,y:e.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),a={width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:md(),startPoint:{x:t.x+1,y:t.y-8},endPoint:{x:t.x+1,y:t.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0"},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())),a={startPoint:{x:e.x,y:e.y},endPoint:{x:t.x,y:t.y},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:md()},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())},e.prototype.createSnapObject=function(e,t,i){var n;switch(i){case"left":n={start:{x:e.x,y:Math.min(e.y,t.y)},end:{x:e.x,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x-t.x,offsetY:0,type:"sideAlign"};break;case"right":n={type:"sideAlign",start:{x:e.x+e.width,y:Math.min(e.y,t.y)},offsetX:e.x+e.width-t.x-t.width,offsetY:0,end:{x:e.x+e.width,y:Math.max(e.y+e.height,t.y+t.height)}};break;case"top":n={offsetY:e.y-t.y,offsetX:0,type:"sideAlign",start:{x:Math.min(e.x,t.x),y:e.y},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y}};break;case"bottom":n={type:"sideAlign",offsetY:e.y+e.height-t.y-t.height,offsetX:0,end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height},start:{x:Math.min(e.x,t.x),y:e.y+e.height}};break;case"topBottom":n={start:{x:Math.min(e.x,t.x),y:e.y+e.height},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height},offsetY:e.y+e.height-t.y,offsetX:0,type:"sideAlign"};break;case"bottomTop":n={start:{x:Math.min(e.x,t.x),y:e.y},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y},offsetY:e.y-t.y-t.height,offsetX:0,type:"sideAlign"};break;case"leftRight":n={start:{x:e.x+e.width,y:Math.min(e.y,t.y)},end:{x:e.x+e.width,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x+e.width-t.x,offsetY:0,type:"sideAlign"};break;case"rightLeft":n={start:{x:e.x,y:Math.min(e.y,t.y)},end:{x:e.x,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x-t.x-t.width,offsetY:0,type:"sideAlign"};break;case"centerX":n={start:{x:e.x+e.width/2,y:Math.min(e.y,t.y)},end:{x:e.x+e.width/2,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x+e.width/2-(t.x+t.width/2),offsetY:0,type:"centerAlign"};break;case"centerY":n={start:{x:Math.min(e.x,t.x),y:e.y+e.height/2},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height/2},offsetY:e.y+e.height/2-(t.y+t.height/2),offsetX:0,type:"centerAlign"}}return n},e.prototype.snapAngle=function(e,t){var i=this.diagram.snapSettings.snapAngle,n=t%(i||0);return n>=i/2?t+i-n:t-n},e.prototype.canConsider=function(e,t,i){return!this.diagram.selectedItems.nodes.length||this.diagram.selectedItems.nodes[0].id!==i.id},e.prototype.findNodes=function(e,t,i,n,r){for(var o,a,s=[],l=e.findQuads(r?n:i),c=0;c<l.length;c++){var h=l[c];if(h.objects.length>0)for(var d=0;d<h.objects.length;d++)o=h.objects[d],this.diagram.nameTable[o.id]instanceof $a||!o.visible||"SwimLane"===this.diagram.nameTable[o.id].shape.type||this.diagram.nameTable[o.id].isLane||this.diagram.nameTable[o.id].isPhase||this.diagram.nameTable[o.id].isHeader||(a=wd(o),-1===s.indexOf(o)&&this.intersectsRect(i,a)&&s.push(o),r&&r.indexOf(o)&&this.intersectsRect(n,a)&&r.push(o))}return s},e.prototype.intersectsRect=function(e,t){return t.x<e.x+e.width&&e.x<t.x+t.width&&t.y<e.y+e.height&&e.y<t.y+t.height},e.prototype.getAdornerLayerSvg=function(){return this.diagram.diagramRenderer.adornerSvgLayer},e.prototype.removeGuidelines=function(e){var t=this.getAdornerLayerSvg().getElementById("_SnappingLines"),i=this.getAdornerLayerSvg().getElementById("pivotLine");t&&t.parentNode.removeChild(t),i&&i.parentNode.removeChild(i)},e.prototype.sortByDistance=function(e,t,i){var n,r,o;if(i)for(n=0;n<e.length;n++)for(r=n+1;r<e.length;r++)e[n][t]>e[r][t]&&(o=e[n],e[n]=e[r],e[r]=o);else for(n=0;n<e.length;n++)for(r=n+1;r<e.length;r++)e[n][t]<e[r][t]&&(o=e[n],e[n]=e[r],e[r]=o)},e.prototype.findEquallySpacedNodesAtLeft=function(e,t,i,n){var r,o,a,s;for(s=1;s<e.length&&(r=e[s-1].obj.bounds,o=e[s].obj.bounds,a=r.x-o.x-o.width,Math.abs(a-t)<=1);s++)n[n.length]=e[s],o.y<i&&(i=o.y);return i},e.prototype.findEquallySpacedNodesAtRight=function(e,t,i,n,r){var o,a,s,l,c=e[0].distance;if(Math.abs(t-c)<=r)for(var h=0;h<e.length-1&&(o=e[h].obj,a=e[h+1].obj.bounds,s=o.bounds,l=a.x-s.x-s.width,Math.abs(l-t)<=1);h++)n[n.length]=e[h+1],s.y<i&&(i=s.y);return i},e.prototype.findEquallySpacedNodesAtTop=function(e,t,i,n){for(var r,o,a,s=1;s<e.length&&(r=e[s-1].obj.bounds,o=e[s].obj.bounds,a=r.y-o.y-o.height,Math.abs(a-t)<=1);s++)n[n.length]=e[s],o.x+o.width>i&&(i=o.x+o.width);return i},e.prototype.findEquallySpacedNodesAtBottom=function(e,t,i,n,r){var o,a,s,l,c=e[0].distance;if(Math.abs(t-c)<=r)for(var h=0;h<e.length-1&&(o=e[h].obj,a=e[h+1].obj.bounds,s=o.bounds,l=a.y-s.y-s.height,Math.abs(l-t)<=1);h++)n[n.length]=e[h+1],s.x+s.width>i&&(i=s.x+s.width);return i},e.prototype.getLayer=function(){var e;return this.diagram.snapSettings.constraints&Sn.SnapToObject&&((e=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),e.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(e)),e},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Snapping"}}(),function(){function e(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0}e.prototype.initHistory=function(e){e.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:e.addHistoryEntry.bind(e),undo:Function,redo:Function,startGroupAction:e.startGroupAction.bind(e),endGroupAction:e.endGroupAction.bind(e),canLog:null,undoStack:[],redoStack:[],stackLimit:e.historyManager?e.historyManager.stackLimit:void 0}},e.prototype.addHistoryEntry=function(e,t){var i=null;if(t.historyManager.canLog&&!0===t.historyManager.canLog(e).cancel)return;if(t.historyManager&&t.historyManager.canUndo&&t.historyManager.currentEntry&&((i=t.historyManager.currentEntry).next?i.previous&&(i.next.previous=null,i.next=e,e.previous=i):(i.next=e,e.previous=i)),t.historyManager.currentEntry=e,t.historyManager.stackLimit){if("StartGroup"===e.type||"EndGroup"===e.type){var n="EndGroup"===e.type;this.setEntryLimit(n)}this.hasGroup||0!==this.groupCount||(this.historyCount<t.historyManager.stackLimit?this.historyCount++:this.applyLimit(t.historyManager.currentEntry,t.historyManager.stackLimit,t))}this.getHistoryList(t),t.historyManager.canUndo=!0,t.historyManager.canRedo=!1},e.prototype.applyLimit=function(e,t,i,n){if(e&&e.previous){if("StartGroup"===e.type||"EndGroup"===e.type){var r="StartGroup"===e.type;this.setEntryLimit(r)}this.hasGroup||0!==this.groupCount||t--,0===t?(n&&this.limitHistoryStack(e.previous,i),i.historyManager.stackLimit<this.historyCount&&(this.historyCount=i.historyManager.stackLimit),delete e.previous):e.previous&&this.applyLimit(e.previous,t,i,n)}this.groupCount=0},e.prototype.clearHistory=function(e){var t=e.historyManager;t.currentEntry=void 0,t.canUndo=!1,t.canRedo=!1,this.historyCount=0,this.groupCount=0,e.historyManager.undoStack=[],e.historyManager.redoStack=[]},e.prototype.setEntryLimit=function(e){e?this.groupCount--:this.groupCount++,this.hasGroup=e?!e:e},e.prototype.limitHistoryStack=function(e,t){"StartGroup"!==e.type&&"EndGroup"!==e.type&&(this.removeFromStack(t.historyManager.undoStack,e),this.removeFromStack(t.historyManager.redoStack,e)),e.previous&&this.limitHistoryStack(e.previous,t)},e.prototype.removeFromStack=function(e,t){if(e.length)for(var i=0;i<=e.length;i++)if(e[i].undoObject===t.undoObject&&e[i].redoObject===t.redoObject){e.splice(i,1);break}},e.prototype.undo=function(e){var t=this.getUndoEntry(e),i=0;if(t)if("Internal"===t.category)"EndGroup"===t.type?(i++,this.groupUndo=!0):this.undoEntry(t,e),this.groupUndo&&(this.undoGroupAction(t,e,i),this.groupUndo=!1);else{w()||e.historyManager.undo(t);var n={entryType:"undo",oldValue:t.undoObject,newValue:t.redoObject};w()&&(n={entryType:"undo",oldValue:this.getHistoryChangeEvent(t.undoObject,t.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(t.redoObject,t.blazorHistoryEntryType)}),e.triggerEvent(Hn.historyStateChange,n)}},e.prototype.getHistoryChangeEvent=function(e,t){var i={};switch(t){case"Node":i.node=e;break;case"Connector":i.connector=e;break;case"Selector":i.selector=e;break;case"Diagram":i.diagram=e;break;case"ShapeAnnotation":i.shapeAnnotation=e;break;case"PathAnnotation":i.pathAnnotation=e;break;case"PortObject":i.pointPortModel=e;break;case"Object":i.object=e}return i},e.prototype.getHistoryList=function(e){var t,i,n=[],r=[],o=e.historyManager.currentEntry;for(o=e.historyManager.currentEntry,e.historyManager.canUndo||0===e.historyManager.undoStack.length?this.getHistroyObject(n,o):this.getHistroyObject(r,o);o&&o.previous;)t=o.previous,this.getHistroyObject(n,t),o=o.previous;for(o=e.historyManager.currentEntry;o&&o.next;)i=o.next,this.getHistroyObject(r,i),o=o.next;e.historyManager.undoStack=n,e.historyManager.redoStack=r},e.prototype.getHistroyObject=function(e,t){t&&"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.push({redoObject:t.redoObject?t.redoObject:null,undoObject:t.undoObject?t.undoObject:null,type:t.type?t.type:null,category:t.category?t.category:null})},e.prototype.undoGroupAction=function(e,t,i){for(;0!==i;)this.undoEntry(e,t),"StartGroup"===(e=this.getUndoEntry(t)).type?i--:"EndGroup"===e.type&&i++;i=0},e.prototype.undoEntry=function(e,t){var i,n;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&"LabelCollectionChanged"!==e.type&&(i=e.undoObject,n=e.undoObject),"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.undoStack.length>0){var r=t.historyManager.undoStack.splice(0,1);t.historyManager.redoStack.splice(0,0,r[0]),n=e.undoObject}switch(t.protectPropertyChange(!0),t.diagramActions|=jn.UndoRedo,e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,t,e);break;case"RotationChanged":this.recordRotationChanged(i,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(i,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!1);break;case"CollectionChanged":e.isUndo=!0,this.recordCollectionChanged(e,t),e.isUndo=!1;break;case"LabelCollectionChanged":e.isUndo=!0,this.recordLabelCollectionChanged(e,t),e.isUndo=!1;break;case"PortCollectionChanged":e.isUndo=!0,this.recordPortCollectionChanged(e,t),e.isUndo=!1;break;case"Group":this.unGroup(e,t);break;case"UnGroup":this.group(e,t);break;case"SegmentChanged":this.recordSegmentChanged(i,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":e.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(e,t,!1),e.isUndo=!1;break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(e,t,!1)}if(t.diagramActions&=~jn.UndoRedo,t.protectPropertyChange(!1),t.historyChangeTrigger(e,"Undo"),n){var o=this.checkNodeObject(n,t);if(o){var a=Ld(t.updateSelection);a&&a(o,t)}}},e.prototype.checkNodeObject=function(e,t){var i;if(e.id)i=t.nameTable[e.id];else if(e.nodes&&e.nodes.length>0||e.connectors&&e.connectors.length>0)for(var n=0,r=e.nodes.length>0?e.nodes:e.connectors;n<r.length;n++)i=r[n],i=t.nameTable[i.id];else{var o=e.nodes?e.nodes:e.connectors;if(o)for(var a=0,s=Object.keys(o);a<s.length;a++){var l=s[a],c=Number(l);i=e.nodes?t.nodes[c]:t.connectors[c]}}return i},e.prototype.group=function(e,t){t.add(e.undoObject)},e.prototype.unGroup=function(e,t){e.redoObject=xd(e.undoObject);var i=e.undoObject;t.commandHandler.unGroup(i)},e.prototype.ignoreProperty=function(e){return"zIndex"===e||"wrapper"===e},e.prototype.getProperty=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];this.ignoreProperty(r)||(t[r]instanceof Object?this.getProperty(e[r],t[r]):e[r]=t[r])}},e.prototype.recordLaneOrPhaseCollectionChanged=function(e,t,i){var n=e.redoObject,r=e.undoObject;if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))t.remove(n);else if(n.isPhase){var o=t.nameTable[n.parentId];t.addPhases(o,[r])}else{var a=Cl(o=t.nameTable[n.parentId],n);t.addLanes(o,[r],a)}t.clearSelection()},e.prototype.recordAnnotationChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject;if(t.canEnableBlazorObject){var r=xd(t.nameTable[n.id]);t.insertValue(r,r instanceof Lh)}var o=Pc(n,e.objectId),a=t.commandHandler.getAnnotationChanges(t.nameTable[n.id],o),s=t.nameTable[n.id],l=Pc(s,e.objectId);l.offset=o.offset,l.margin=o.margin,l.width=o.width,l.height=o.height,l.rotateAngle=o.rotateAngle,l.margin=o.margin,s instanceof Lh?t.nodePropertyChange(s,{},a):t.connectorPropertyChange(s,{},a)},e.prototype.recordChildCollectionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject,r=t.nameTable[n.parentId],o=t.nameTable[n.id];r?nl(t,r,o,!i,"AddNodeToLane"===e.historyAction):(o.parentId&&((r=t.nameTable[o.parentId]).children.splice(r.children.indexOf(o.id),1),r.wrapper.children.splice(r.wrapper.children.indexOf(o.wrapper),1)),""!==n.parentId&&((r=t.nameTable[n.parentId]).children.push(n.id),r.wrapper.children.push(o.wrapper)),o.parentId=n.parentId,t.removeElements(o),t.updateDiagramObject(o))},e.prototype.recordStackPositionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject;if(n.source){var r=t.nameTable[n.source.parentId];r&&(n.target?(r.wrapper.children.splice(n.targetIndex,1),r.wrapper.children.splice(n.sourceIndex,0,n.source.wrapper)):void 0!==n.sourceIndex?(t.nameTable[n.source.id]||t.add(n.source),r.wrapper.children.splice(n.sourceIndex,0,t.nameTable[n.source.id].wrapper),t.nameTable[n.source.id].parentId=r.id):(r.wrapper.children.splice(r.wrapper.children.indexOf(t.nameTable[n.source.id].wrapper),1),t.nameTable[n.source.id].parentId=""),i&&"UmlClassifier"===r.shape.type&&t.remove(n.source),r.wrapper.measure(new Zi),r.wrapper.arrange(r.wrapper.desiredSize),t.updateDiagramObject(r),t.updateSelector())}},e.prototype.recordGridSizeChanged=function(e,t,i,n){var r=i?e.redoObject:e.undoObject,o=i?e.undoObject:e.redoObject;if(r.parentId){var a=t.nameTable[r.parentId],s=t.nameTable[r.id],l=a.wrapper.bounds.x,c=a.wrapper.bounds.y;if("SwimLane"===a.shape.type){var h=a.wrapper.children[0],d=a.shape.padding;Sl(t,o,a,r),n?(h.updateRowHeight(r.rowIndex,r.wrapper.actualSize.height,!0,d),a.height=a.wrapper.height=h.height):(h.updateColumnWidth(r.columnIndex,r.wrapper.actualSize.width,!0,d),a.width=a.wrapper.width=h.width,r.isPhase&&(s.maxWidth=s.wrapper.maxWidth=r.wrapper.actualSize.width)),fl(a);var p=l-a.wrapper.bounds.x,u=c-a.wrapper.bounds.y;t.drag(a,p,u),t.clearSelection(),t.updateDiagramObject(a)}}},e.prototype.recordLanePositionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject;if(n.source){var r=t.nameTable[n.source.parentId];r&&"SwimLane"===r.shape.type&&(xl(t,n.target,n.source),t.clearSelection())}},e.prototype.recordPortChanged=function(e,t,i){var n=i?e.redoObject.nodes[0]:e.undoObject.nodes[0];if(t.canEnableBlazorObject){var r=xd(t.nameTable[n.id]);t.insertValue(r,!0)}var o=Oc(n,e.objectId),a=t.commandHandler.getPortChanges(t.nameTable[n.id],o),s=t.nameTable[n.id];Oc(s,e.objectId).offset=o.offset,t.nodePropertyChange(s,{},a),s.parentId&&t.updateConnectorEdges(t.nameTable[s.parentId])},e.prototype.recordPropertyChanged=function(e,t,i){var n=e.redoObject,r=e.undoObject;this.getProperty(t,i?n:r),i?t.onPropertyChanged(n,r):t.onPropertyChanged(r,n),t.diagramActions=t.diagramActions|jn.UndoRedo},e.prototype.recordOrderCommandChanged=function(e,t,i){var n=e.redoObject,r=e.undoObject;t.commandHandler.orderCommands(i,i?n:r,e.type),t.diagramActions=t.diagramActions|jn.UndoRedo},e.prototype.recordSegmentChanged=function(e,t){var i,n=0;if(e.connectors&&e.connectors.length>0)for(n=0;n<e.connectors.length;n++)i=e.connectors[n],this.segmentChanged(i,t)},e.prototype.segmentChanged=function(e,t){var i=t.nameTable[e.id];i.segments=e.segments,t.commandHandler.updateEndPoint(i)},e.prototype.recordPositionChanged=function(e,t){var i,n,r=0;if(e.nodes&&e.nodes.length>0)for(r=0;r<e.nodes.length;r++)i=e.nodes[r],this.positionChanged(i,t);if(e.connectors&&e.connectors.length>0)for(r=0;r<e.connectors.length;r++)n=e.connectors[r],this.connectionChanged(n,t)},e.prototype.positionChanged=function(e,t){var i=t.nameTable[e.id];if(e.processId&&!i.processId&&t.addProcess(e,e.processId),!e.processId&&i.processId&&t.removeProcess(e.id),i.processId){var n=e.margin.left-i.margin.left,r=e.margin.top-i.margin.top;t.drag(i,n,r)}else{if(i.parentId){var o=t.nameTable[i.parentId];o.isLane&&(e.wrapper.offsetX=e.width/2+(o.wrapper.bounds.x+e.margin.left),e.wrapper.offsetY=e.height/2+(o.wrapper.bounds.y+e.margin.top))}n=e.wrapper.offsetX-i.offsetX,r=e.wrapper.offsetY-i.offsetY;t.drag(i,n,r)}t.bpmnModule&&t.bpmnModule.updateDocks(i,t)},e.prototype.recordSizeChanged=function(e,t,i){var n,r,o=0;if(e&&e.nodes&&e.nodes.length>0)for(o=0;o<e.nodes.length;o++)if((r=e.nodes[o]).children&&!r.container)for(var a=t.commandHandler.getAllDescendants(r,[]),s=0;s<a.length;s++){var l=i.childTable[a[s].id];Rc(l)===Lh?(this.sizeChanged(l,t,i),this.positionChanged(l,t)):this.connectionChanged(l,t,i)}else this.sizeChanged(r,t),this.positionChanged(r,t);if(e&&e.connectors&&e.connectors.length>0){var c=e.connectors;for(o=0;o<c.length;o++)n=c[o],this.connectionChanged(n,t)}},e.prototype.sizeChanged=function(e,t,i){var n=t.nameTable[e.id],r=e.wrapper.actualSize.width/n.wrapper.actualSize.width,o=e.wrapper.actualSize.height/n.wrapper.actualSize.height;i&&i.childTable&&(i.childTable[e.id]=xd(n)),t.scale(n,r,o,{x:e.wrapper.offsetX/n.wrapper.offsetX,y:e.wrapper.offsetY/n.wrapper.offsetY})},e.prototype.recordRotationChanged=function(e,t,i){var n,r,o=0,a=t.selectedItems;if(a.rotateAngle=e.rotateAngle,a&&a.wrapper&&(a.wrapper.rotateAngle=e.rotateAngle),e&&e.nodes&&e.nodes.length>0)for(o=0;o<e.nodes.length;o++)n=e.nodes[o],this.rotationChanged(n,t),this.positionChanged(n,t);if(e&&e.connectors&&e.connectors.length>0)for(o=0;o<e.connectors.length;o++)r=e.connectors[o],this.connectionChanged(r,t)},e.prototype.rotationChanged=function(e,t){var i=t.nameTable[e.id];t.rotate(i,e.rotateAngle-i.rotateAngle)},e.prototype.recordConnectionChanged=function(e,t){var i=e.connectors[0];this.connectionChanged(i,t)},e.prototype.connectionChanged=function(e,t,i){var n,r=t.nameTable[e.id];e.sourcePortID!==r.sourcePortID&&(t.removePortEdges(t.nameTable[r.sourceID],r.sourcePortID,r.id,!1),r.sourcePortID=e.sourcePortID,t.connectorPropertyChange(r,{},{sourcePortID:e.sourcePortID})),e.targetPortID!==r.targetPortID&&(t.removePortEdges(t.nameTable[r.targetID],r.targetPortID,r.id,!0),r.targetPortID=e.targetPortID,t.connectorPropertyChange(r,{},{targetPortID:e.targetPortID})),e.sourceID!==r.sourceID&&(""===e.sourceID?vc((n=t.nameTable[r.sourceID]).outEdges,e.id):((n=t.nameTable[e.sourceID]).outEdges.push(e.id),t.updatePortEdges(n,e,!1)),r.sourceID=e.sourceID,t.connectorPropertyChange(r,{},{sourceID:e.sourceID})),e.targetID!==r.targetID&&(""===e.targetID?vc((n=t.nameTable[r.targetID]).inEdges,e.id):((n=t.nameTable[e.targetID]).inEdges.push(e.id),t.updatePortEdges(n,e,!0)),r.targetID=e.targetID,t.connectorPropertyChange(r,{},{targetID:e.targetID})),i&&i.childTable&&(i.childTable[e.id]=xd(r));var o=e.sourcePoint.x-r.sourcePoint.x,a=e.sourcePoint.y-r.sourcePoint.y;0===o&&0===a||t.dragSourceEnd(r,o,a);var s=e.targetPoint.x-r.targetPoint.x,l=e.targetPoint.y-r.targetPoint.y;0===s&&0===l||t.dragTargetEnd(r,s,l),t.updateSelector(),"SVG"!==t.mode&&t.refreshDiagramLayer()},e.prototype.recordCollectionChanged=function(e,t){var i=e.undoObject;if(e&&e.changeType){if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))i.nodeId?t.remove(t.nameTable[i.nodeId+"_textannotation_"+i.id]):(t.remove(i),t.clearSelectorLayer());else{if(t.clearSelectorLayer(),i.parentId){var n=t.nameTable[i.parentId];n?t.addChild(n,i):t.add(i)}else i.nodeId?t.addTextAnnotation(i,t.nameTable[i.nodeId]):t.nameTable[i.id]||(i&&i.shape&&"SwimLane"===i.shape.type&&e.isUndo&&Dl(i,void 0,void 0,void 0,void 0,!0),t.add(i));i.processId&&t.nameTable[i.processId]&&t.addProcess(i,i.processId)}"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.recordLabelCollectionChanged=function(e,t){var i=e.undoObject,n=e.redoObject,r=t.nameTable[n.id];if(e&&e.changeType){"Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removeLabels(r,[i]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addLabels(r,[i])),"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.recordPortCollectionChanged=function(e,t){var i=e.undoObject,n=e.redoObject,r=t.nameTable[n.id];if(e&&e.changeType){"Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removePorts(r,[i]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addPorts(r,[i])),"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.redo=function(e){var t=this.getRedoEntry(e),i=0;if(t)if("Internal"===t.category)"StartGroup"===t.type?(i++,this.groupUndo=!0):this.redoEntry(t,e),this.groupUndo&&(this.redoGroupAction(t,e,i),this.groupUndo=!1);else{w()||e.historyManager.redo(t);var n={entryType:"redo",oldValue:t.redoObject,newValue:t.undoObject};w()&&(n={entryType:"undo",oldValue:this.getHistoryChangeEvent(t.redoObject,t.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(t.undoObject,t.blazorHistoryEntryType)}),e.triggerEvent(Hn.historyStateChange,n)}},e.prototype.redoGroupAction=function(e,t,i){for(;0!==i;)this.redoEntry(e,t),"EndGroup"===(e=this.getRedoEntry(t)).type?i--:"StartGroup"===e.type&&i++;i=0},e.prototype.redoEntry=function(e,t){var i,n;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&(i=e.redoObject,n=e.redoObject),t.diagramActions|=jn.UndoRedo,"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.redoStack.length>0){var r=t.historyManager.redoStack.splice(0,1);t.historyManager.undoStack.splice(0,0,r[0]),n=e.redoObject}switch(t.protectPropertyChange(!0),e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,t,e);break;case"RotationChanged":this.recordRotationChanged(i,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(i,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!0);break;case"CollectionChanged":this.recordCollectionChanged(e,t);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(e,t);break;case"PortCollectionChanged":this.recordPortCollectionChanged(e,t);break;case"Group":this.group(e,t);break;case"UnGroup":this.unGroup(e,t);break;case"SegmentChanged":this.recordSegmentChanged(i,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(e,t,!0);break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(e,t,!0)}if(t.protectPropertyChange(!1),t.diagramActions&=~jn.UndoRedo,t.historyChangeTrigger(e,"Redo"),n){var o=this.checkNodeObject(n,t);if(o){var a=Ld(t.updateSelection);a&&a(o,t)}}},e.prototype.getUndoEntry=function(e){var t,i=null,n=e.historyManager;return n.canUndo&&(i=n.currentEntry,(t=n.currentEntry.previous)?(n.currentEntry=t,n.canRedo||(n.canRedo=!0)):(n.canRedo=!0,n.canUndo=!1)),i},e.prototype.getRedoEntry=function(e){var t,i=null,n=e.historyManager;return n.canRedo&&((t=n.currentEntry.previous||n.canUndo?n.currentEntry.next:n.currentEntry)&&(n.currentEntry=t,n.canUndo||(n.canUndo=!0),t.next||(n.canRedo=!1,n.canUndo=!0)),i=n.currentEntry),i},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"UndoRedo"}}(),function(){function e(){this.protectChange=!1}e.prototype.expand=function(e,t,i,n){var r=this,o={},a=0;if(n.realActions=n.realActions|zn.AnimationClick,o[0]=setInterval((function(){return a++,r.layoutAnimation(t,o,6===a,n,i)}),20),i.isExpanded){var s=.2;this.protectChange=n.isProtectedOnChange,n.protectPropertyChange(!1);var l={};if(e){this.updateOpacity(i,s,n);l[0]=setInterval((function(){n.allowServerDataBinding=!1,s<=1?r.updateOpacity(i,s,n):clearInterval(l[0]),s+=.2,n.allowServerDataBinding=!0}),20)}}},e.prototype.layoutAnimation=function(e,t,i,n,r){if(!i)for(var o=0;o<e.objects.length;o++){var a=n.nameTable[e.objects[o].id];a.offsetX+=e.objects[o].differenceX/5,a.offsetY+=e.objects[o].differenceY/5}if(i){clearInterval(t[0]),n.realActions=n.realActions&~zn.AnimationClick,n.refreshCanvasLayers(),n.protectPropertyChange(!0),n.triggerEvent(Hn.animationComplete,void 0),n.organizationalChartModule.isAnimation=!1,n.layout.fixedNode="",n.protectPropertyChange(this.protectChange);var s={element:Vc(xd(r)),state:!!r.isExpanded};n.triggerEvent(Hn.expandStateChange,s),n.lineRoutingModule&&n.constraints&kn.LineRouting&&n.resetSegments()}},e.prototype.updateOpacity=function(e,t,i){for(var n=0;n<e.outEdges.length;n++){var r=i.nameTable[e.outEdges[n]],o=i.nameTable[r.targetID];r.style.opacity=t;for(var a=0;a<r.wrapper.children.length;a++)r.wrapper.children[a].style.opacity=t,o.style.opacity=t,o.wrapper instanceof nr&&i.updateNodeProperty(o.wrapper,void 0,t);this.updateOpacity(o,t,i)}},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LayoutAnimate"}}(),function(){function e(){this.size=20,this.intermediatePoints=[],this.gridCollection=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.considerWalkable=[]}e.prototype.lineRouting=function(e){var t=e.connectors.length;if(this.renderVirtualRegion(e),t>0)for(var i=0;i<t;i++){var n=e.connectors[i];"Orthogonal"===n.type&&n.visible&&this.refreshConnectorSegments(e,n,!0)}},e.prototype.renderVirtualRegion=function(e,t){var i=this.size;(e.spatialSearch.pageTop<0||e.spatialSearch.pageLeft<0)&&(i=this.size+this.size/2);var n=e.spatialSearch.pageRight+i,r=e.spatialSearch.pageBottom+i,o=e.spatialSearch.pageLeft-i,a=e.spatialSearch.pageTop-i;if(o=o<0?o-20:0,a=a<0?a-20:0,t&&(this.width!==n-o||this.height!==r-a||this.diagramStartX!==o||this.diagramStartY!==a)||void 0===t){this.width=n-o,this.height=r-a,this.diagramStartX=o,this.diagramStartY=a,this.gridCollection=[],this.noOfRows=this.width/this.size,this.noOfCols=this.height/this.size;for(var s=this.size,l=this.diagramStartX<0?this.diagramStartX:0,c=this.diagramStartY<0?this.diagramStartY:0,h=0;h<this.noOfCols;h++){for(var d=0;d<this.noOfRows;d++){0===h&&this.gridCollection.push([0]);var p={x:l,y:c,width:s,height:s,gridX:d,gridY:h,walkable:!0,tested:void 0,nodeId:[]};this.gridCollection[d][h]=p,l+=s}l=this.diagramStartX<0?this.diagramStartX:0,c+=s}}var u=this.findNodes(e.nodes);this.updateNodesInVirtualRegion(u)},e.prototype.findNodes=function(e){for(var t,i=[],n=0;n<e.length;n++)"SwimLane"===(t=e[n]).shape.type||t.isLane||t.isPhase||t.isHeader||!t.visible||i.push(t);return i},e.prototype.updateNodesInVirtualRegion=function(e){for(var t=this.size,i=this.diagramStartX<0?this.diagramStartX:0,n=this.diagramStartY<0?this.diagramStartY:0,r=0;r<this.noOfCols;r++){for(var o=0;o<this.noOfRows;o++){var a=this.gridCollection[o][r],s=new hn(i,n,this.size,this.size),l=void 0,c=void 0;for(a.walkable=!0,a.tested=void 0,a.nodeId=[],c=0;c<e.length;c++)e[c].wrapper.bounds&&(l=this.intersectRect(s,e[c].wrapper.bounds)),l&&(a.nodeId.push(e[c].id),a.walkable=!1,""!==e[c].parentId&&(a.parentNodeId=e[c].parentId));i+=t}i=this.diagramStartX<0?this.diagramStartX:0,n+=t}},e.prototype.intersectRect=function(e,t){return!(t.left>=e.right||t.right<=e.left||t.top>=e.bottom||t.bottom<=e.top)},e.prototype.findEndPoint=function(e,t,i){var n,r;if(t&&""!==e.sourcePortID||!t&&""!==e.targetPortID){r=mo(n=t?{x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY}:{x:e.targetPortWrapper.offsetX,y:e.targetPortWrapper.offsetY},void 0,t?e.sourceWrapper.bounds:e.targetWrapper.bounds);var o=t?e.sourcePortWrapper.bounds:e.targetPortWrapper.bounds;n=i?"Top"===r?{x:o.topCenter.x,y:o.topCenter.y}:"Left"===r?{x:o.middleLeft.x,y:o.middleLeft.y}:"Right"===r?{x:o.middleRight.x,y:o.middleRight.y}:{x:o.bottomCenter.x,y:o.bottomCenter.y}:{x:o.center.x,y:o.center.y}}else n=t&&this.startNode||!t&&this.targetNode?t?{x:this.startNode.wrapper.offsetX,y:this.startNode.wrapper.offsetY}:{x:this.targetNode.wrapper.offsetX,y:this.targetNode.wrapper.offsetY}:t?{x:e.sourcePoint.x,y:e.sourcePoint.y}:{x:e.targetPoint.x,y:e.targetPoint.y};return n},e.prototype.refreshConnectorSegments=function(e,t,i){var n,r,o,a,s,l,c,h,d,p,u,f=t.sourceID,g=t.targetID,m=t.sourcePortID,y=t.targetPortID;if(function(e,t){var i=0;return e.constraints&Pn.LineRouting?i=e.constraints&Pn.LineRouting:e.constraints&Pn.InheritLineRouting&&(i=t.constraints&kn.LineRouting),i}(t,e)){this.startNode=e.nameTable[f],this.targetNode=e.nameTable[g],this.intermediatePoints=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.startGrid=void 0,this.targetGrid=void 0;for(var v=0;v<this.noOfCols;v++)for(var b=0;b<this.noOfRows;b++)this.gridCollection[b][v].tested=this.gridCollection[b][v].parent=void 0,this.gridCollection[b][v].previousDistance=this.gridCollection[b][v].afterDistance=void 0,this.gridCollection[b][v].totalDistance=void 0;n=this.findEndPoint(t,!0),r=this.findEndPoint(t,!1);for(v=0;v<this.noOfRows;v++)for(b=0;b<this.noOfCols;b++){o=this.gridCollection[v][b];var w=new hn(o.x,o.y,o.width,o.height);if(!w.containsPoint(n)||this.startGrid||-1===o.nodeId.indexOf(f)&&""!==f||(this.startGrid=(m&&this.startGrid,o)),!w.containsPoint(r)||this.targetGrid||-1===o.nodeId.indexOf(g)&&""!==g||(this.targetGrid=(y&&this.targetGrid,o)),!m&&this.startNode){var x=this.startNode.wrapper.bounds;w.containsPoint(x.topCenter)&&!a&&(a=o),w.containsPoint(x.middleLeft)&&!l&&(l=o),w.containsPoint(x.middleRight)&&!c&&(c=o),w.containsPoint(x.bottomCenter)&&!s&&(s=o)}if(!y&&this.targetNode){x=this.targetNode.wrapper.bounds;w.containsPoint(x.topCenter)&&!d&&(d=o),w.containsPoint(x.middleLeft)&&!u&&(u=o),w.containsPoint(x.middleRight)&&!h&&(h=o),w.containsPoint({x:x.bottomCenter.x,y:x.bottomCenter.y})&&!p&&(p=o)}}this.findEdgeBoundary(m,l,c,a,s,!0),this.findEdgeBoundary(y,u,h,d,p,!1),this.startGrid.totalDistance=0,this.startGrid.previousDistance=0,this.intermediatePoints.push({x:this.startGrid.gridX,y:this.startGrid.gridY}),this.startArray.push(this.startGrid),this.checkObstacles(t);e:for(;this.startArray.length>0;){var S=this.startArray.pop();for(v=0;v<this.targetGridCollection.length;v++){var C=this.targetGridCollection[v];if(S.gridX===C.gridX&&S.gridY===C.gridY){if(this.getIntermediatePoints(S),this.updateConnectorSegments(e,this.intermediatePoints,this.gridCollection,t,i)){this.considerWalkable=[];break e}this.targetGridCollection.splice(this.targetGridCollection.indexOf(C),1),S=this.startArray.pop()}}this.findPath(S)}}},e.prototype.findEdgeBoundary=function(e,t,i,n,r,o){var a,s=o?this.sourceGridCollection:this.targetGridCollection;if(!e&&(o?this.startNode:this.targetNode)){for(var l=t.gridX;l<=i.gridX;l++)(1===(a=this.gridCollection[l][t.gridY]).nodeId.length&&(l===t.gridX||l===i.gridX)||l!==t.gridX&&l!==i.gridX)&&s.push(a);for(l=n.gridY;l<=r.gridY;l++)(1===(a=this.gridCollection[n.gridX][l]).nodeId.length&&(l===n.gridY||l===r.gridY)||l!==n.gridY&&l!==r.gridY)&&-1===s.indexOf(a)&&s.push(a)}else s.push(o?this.startGrid:this.targetGrid)},e.prototype.checkObstacles=function(e){var t,i=this.findNearestNeigbours(this.startGrid,this.gridCollection,!0);0===i.length&&(""!==e.sourcePortID?"Top"===(t=mo({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},void 0,e.sourceWrapper.bounds))?this.resetGridColl(this.startGrid,"top",!0):"Right"===t?this.resetGridColl(this.startGrid,"right",!0):"Bottom"===t?this.resetGridColl(this.startGrid,"bottom",!0):this.resetGridColl(this.startGrid,"left",!0):(this.resetGridColl(this.startGrid,"top",!0),this.resetGridColl(this.startGrid,"right",!0),this.resetGridColl(this.startGrid,"bottom",!0),this.resetGridColl(this.startGrid,"left",!0)));0===(i=this.findNearestNeigbours(this.targetGrid,this.gridCollection,!1)).length&&(""!==e.targetPortID?"Top"===(t=mo({x:e.targetPortWrapper.offsetX,y:e.targetPortWrapper.offsetY},void 0,e.targetWrapper.bounds))?this.resetGridColl(this.targetGrid,"top",!0):"Right"===t?this.resetGridColl(this.targetGrid,"right",!0):"Bottom"===t?this.resetGridColl(this.targetGrid,"bottom",!0):this.resetGridColl(this.targetGrid,"left",!0):(this.resetGridColl(this.targetGrid,"top",!1),this.resetGridColl(this.targetGrid,"right",!1),this.resetGridColl(this.targetGrid,"bottom",!1),this.resetGridColl(this.targetGrid,"left",!1)))},e.prototype.getIntermediatePoints=function(e){var t;for(this.intermediatePoints=[];e;)this.intermediatePoints.push({x:e.gridX,y:e.gridY}),e=e.parent;this.intermediatePoints.reverse(),this.intermediatePoints[0].x===this.intermediatePoints[1].x?this.intermediatePoints[0].y<this.intermediatePoints[1].y?(t=this.neigbour(this.startGrid,"bottom",void 0,!0),this.intermediatePoints[0].y+=t-1):(t=this.neigbour(this.startGrid,"top",void 0,!0),this.intermediatePoints[0].y-=t-1):this.intermediatePoints[0].x<this.intermediatePoints[1].x?(t=this.neigbour(this.startGrid,"right",void 0,!0),this.intermediatePoints[0].x+=t-1):(t=this.neigbour(this.startGrid,"left",void 0,!0),this.intermediatePoints[0].x-=t-1)},e.prototype.updateConnectorSegments=function(e,t,i,n,r){var o,a,s,l,c,h,d,p,u,f=[],g=[],m=n.targetWrapper,y=n.sourceWrapper,v=this.findEndPoint(n,!0);""===n.targetPortID&&n.targetWrapper||(a=this.findEndPoint(n,!1,!0));for(var b=0;b<t.length;b++)s=(c=i[t[b].x][t[b].y]).x+c.width/2,l=c.y+c.height/2,g.push({x:s,y:l}),b>=1&&(p=g[g.length-2].x!==g[g.length-1].x?g[g.length-2].x>g[g.length-1].x?"Left":"Right":g[g.length-2].y>g[g.length-1].y?"Top":"Bottom"),b>=2&&u===p&&g.splice(g.length-2,1),u=p;for(var w=0;w<g.length-1;w++)g[w].x!==g[w+1].x?(0===w&&""===n.sourcePortID&&y&&(v=g[w].x>g[w+1].x?y.bounds.middleLeft:y.bounds.middleRight),w===g.length-2&&""===n.targetPortID&&m&&(a=g[w].x>g[w+1].x?m.bounds.middleRight:m.bounds.middleLeft),0===w&&v&&(g[w].x=v.x,g[w].y=g[w+1].y=v.y),w===g.length-2&&a&&(a.x-g[w+1].x<0&&Math.abs(a.x-g[w].x)<n.targetDecorator.width+1&&(g[w].x=g[w-1].x-=this.size/2),a.x-g[w+1].x>0&&Math.abs(a.x-g[w].x)<n.targetDecorator.width+1&&(g[w].x=g[w-1].x+=this.size/2),g[w+1].x=a.x,g[w].y=g[w+1].y=a.y)):(0===w&&y&&(v=g[w].y>g[w+1].y?y.bounds.topCenter:y.bounds.bottomCenter),w===g.length-2&&""===n.targetPortID&&m&&(a=g[w].y>g[w+1].y?m.bounds.bottomCenter:m.bounds.topCenter),0===w&&v&&(g[w].y=v.y,g[w].x=g[w+1].x=v.x),w===g.length-2&&a&&(a.y-g[w+1].y<0&&Math.abs(a.y-g[w].y)<n.targetDecorator.height+1&&(g[w].y=g[w-1].y-=this.size/2),a.y-g[w+1].y>0&&Math.abs(a.y-g[w].y)<n.targetDecorator.width+1&&(g[w].y=g[w-1].y+=this.size/2),g[w+1].y=a.y,g[w].x=g[w+1].x=a.x));for(w=0;w<g.length-1;w++)g[w].x!==g[w+1].x?g[w].x>g[w+1].x?(h="Left",d=g[w].x-g[w+1].x):(h="Right",d=g[w+1].x-g[w].x):g[w].y>g[w+1].y?(h="Top",d=g[w].y-g[w+1].y):(h="Bottom",d=g[w+1].y-g[w].y),o={type:"Orthogonal",length:d,direction:h},f.push(o);var x=f[f.length-1];return 1===f.length&&(x.length-=20),x.length<10&&2===f.length&&(f.pop(),f[0].length-=20,x=f[0]),(("Top"===x.direction||"Bottom"===x.direction)&&x.length>n.targetDecorator.height+1||("Right"===x.direction||"Left"===x.direction)&&x.length>n.targetDecorator.width+1)&&(n.segments=f,r&&e.connectorPropertyChange(n,{},{type:"Orthogonal",segments:f}),!0)},e.prototype.findPath=function(e){for(var t,i=[],n=this.findNearestNeigbours(e,this.gridCollection,!0),r=0;r<n.length;r++)if(null!==(t=this.findIntermediatePoints(n[r].gridX,n[r].gridY,e.gridX,e.gridY,this.targetGrid.gridX,this.targetGrid.gridY))){var o=this.gridCollection[t.x][t.y],a=this.octile(Math.abs(t.x-e.gridX),Math.abs(t.y-e.gridY)),s=e.previousDistance+a;o.previousDistance&&!(o.previousDistance>s)||t.x===e.gridX&&t.y===e.gridY||(i.push(t),o.previousDistance=s,o.afterDistance=o.afterDistance||this.manhattan(Math.abs(t.x-this.targetGrid.gridX),Math.abs(t.y-this.targetGrid.gridY)),o.totalDistance=o.previousDistance+o.afterDistance,o.parent=e)}if(i.length>0)for(r=0;r<i.length;r++){o=this.gridCollection[i[r].x][i[r].y];-1===this.startArray.indexOf(o)&&this.startArray.push(o)}this.sorting(this.startArray)},e.prototype.sorting=function(e){for(var t=!1;!t;){t=!0;for(var i=1;i<e.length;i+=1)if(e[i-1].totalDistance<e[i].totalDistance){t=!1;var n=e[i-1];e[i-1]=e[i],e[i]=n}}return e},e.prototype.octile=function(e,t){var i=Math.SQRT2-1;return t>e?i*e+t:i*t+e},e.prototype.manhattan=function(e,t){return e+t},e.prototype.findNearestNeigbours=function(e,t,i){var n=[],r=e.parent;if(r){var o=(e.gridX-r.gridX)/Math.max(Math.abs(e.gridX-r.gridX),1),a=(e.gridY-r.gridY)/Math.max(Math.abs(e.gridY-r.gridY),1);0!==o?(this.isWalkable(e.gridX,e.gridY-1,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX][e.gridY-1])&&n.push(t[e.gridX][e.gridY-1]),this.isWalkable(e.gridX,e.gridY+1,!0)&&this.sourceGridCollection.indexOf(t[e.gridX][e.gridY+1])&&n.push(t[e.gridX][e.gridY+1]),this.isWalkable(e.gridX+o,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX+o][e.gridY])&&n.push(t[e.gridX+o][e.gridY])):0!==a&&(this.isWalkable(e.gridX-1,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX-1][e.gridY])&&n.push(t[e.gridX-1][e.gridY]),this.isWalkable(e.gridX+1,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX+1][e.gridY])&&n.push(t[e.gridX+1][e.gridY]),this.isWalkable(e.gridX,e.gridY+a,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX][e.gridY+a])&&n.push(t[e.gridX][e.gridY+a]))}else this.neigbour(e,"top",n,i),this.neigbour(e,"right",n,i),this.neigbour(e,"bottom",n,i),this.neigbour(e,"left",n,i);return n},e.prototype.neigbour=function(e,t,i,n){for(var r,o=1;o>0;){var a="top"===t||"bottom"===t?e.gridX:"left"===t?e.gridX-o:e.gridX+o,s="right"===t||"left"===t?e.gridY:"top"===t?e.gridY-o:e.gridY+o;if((r=this.gridCollection[a][s])&&(n&&-1===this.sourceGridCollection.indexOf(r)||!n&&-1===this.targetGridCollection.indexOf(r)))return i&&this.isWalkable(a,s)&&i.push(r),o;if(!(a>0&&s>0))break;o++}return null},e.prototype.resetGridColl=function(e,t,i){for(var n,r=1;r>0;){var o="top"===t||"bottom"===t?e.gridX:"left"===t?e.gridX-r:e.gridX+r,a="right"===t||"left"===t?e.gridY:"top"===t?e.gridY-r:e.gridY+r;if((n=this.gridCollection[o][a])&&(i&&-1===this.sourceGridCollection.indexOf(n)||!i&&-1===this.targetGridCollection.indexOf(n))){if(this.isWalkable(o,a))break;var s=this.gridCollection[o][a];this.considerWalkable.push(s)}if(!(o>0&&a>0))break;"top"===t||"left"===t?r--:r++}return null},e.prototype.isWalkable=function(e,t,i){if(e>=0&&e<this.noOfRows&&t>=0&&t<this.noOfCols){var n=this.gridCollection[e][t];if(n&&(n.walkable||(1===n.nodeId.length||2===n.nodeId.length&&n.parentNodeId)&&(-1!==this.sourceGridCollection.indexOf(n)||-1!==this.targetGridCollection.indexOf(n)||-1!==this.considerWalkable.indexOf(n)))&&(i&&!n.parent||!i))return!0}return!1},e.prototype.findIntermediatePoints=function(e,t,i,n,r,o){for(var a=e-i,s=t-n,l=e,c=t,h=0;h<this.targetGridCollection.length;h++)if(e===this.targetGridCollection[h].gridX&&t===this.targetGridCollection[h].gridY)return{x:e,y:t};if(!this.isWalkable(e,t))return null;var d=this.gridCollection[e][t];if(d.tested)return{x:e,y:t};if(d.tested=!0,0!==a&&(a=a>0?1:-1,this.isWalkable(l,c-1)&&!this.isWalkable(l-a,c-1)||this.isWalkable(l,c+1)&&!this.isWalkable(l-a,c+1)))return{x:e,y:t};if(0!==s){if(s=s>0?1:-1,this.isWalkable(l-1,c)&&!this.isWalkable(l-1,c-s)||this.isWalkable(l+1,c)&&!this.isWalkable(l+1,c-s))return{x:e,y:t};if(this.findIntermediatePoints(l+1,c,l,c,r,o)||this.findIntermediatePoints(l-1,c,l,c,r,o))return{x:e,y:t}}return this.findIntermediatePoints(l+a,c+s,l,c,r,o)},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LineRouting"}}(),function(){function e(){this.isAnimation=!1}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"OrganizationalChart"},e.prototype.updateLayout=function(e,t,i,n,r,o){var a={type:i.type,nameTable:t,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,getLayoutInfo:Ld(i.getLayoutInfo),layoutInfo:i.layoutInfo,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};return this.doLayout(a,e,n,r,o),a},e.prototype.doLayout=function(e,t,i,n,r){var o,a,s=[];for(e.nameTable[e.root]&&e.firstLevelNodes.push(e.nameTable[e.root]),a=0;a<t.length;a++)if(!(o=t[a]).excludeFromLayout&&((e.graphNodes[o.id]=this.setUpLayoutInfo(e,o)).tree.hasSubTree=!1,!e.nameTable[e.root]&&(!o.inEdges||!o.inEdges.length))){o.parentId||o.processId||s.push(o),o.data&&String(o.data[n])===e.root&&e.firstLevelNodes.push(o)}for(0===e.firstLevelNodes.length&&(e.firstLevelNodes=s),a=0;a<e.firstLevelNodes.length;a++){o=e.firstLevelNodes[a];this.updateEdges(e,o,1,r,t)}if(e.firstLevelNodes.length>0){e.rootNode=e.firstLevelNodes[0];var l=0,c=0,h=void 0,d=void 0,p=void 0,u=void 0,f=void 0;for(a=0;a<e.firstLevelNodes.length;a++){f=this.updateTree(e,l,c,e.firstLevelNodes[a],0,e.firstLevelNodes[a-1]);var g=e.graphNodes[e.firstLevelNodes[a].id];f.y=Math.min(f.y,g.y),f.x=Math.min(f.x,g.x),-1!==e.orientation.indexOf("Left")?c=f.right+e.horizontalSpacing:l=f.right+e.horizontalSpacing,0===a?(h=f.x,u=f.y,p=f.right,d=f.bottom):(h=Math.min(h,f.x),u=Math.min(u,f.y),p=Math.max(p,f.right),d=Math.max(d,f.bottom))}for(this.updateAnchor(e,{x:h,y:u,right:p,bottom:d},i),a=0;a<e.firstLevelNodes.length;a++)this.updateNodes(e,e.firstLevelNodes[a],0);for(a=0;a<e.firstLevelNodes.length;a++)this.updateConnectors(e,e.firstLevelNodes[a],1)}},e.prototype.getBounds=function(e){var t=e.offsetX-e.actualSize.width*e.pivot.x,i=e.offsetY-e.actualSize.height*e.pivot.y;return new hn(t,i,e.actualSize.width,e.actualSize.height)},e.prototype.updateTree=function(e,t,i,n,r,o,a){var s,l,c,h,d={};if(s=this.getDimensions(e,n,t,i,r),d=e.graphNodes[n.id],e.maxLevel=Math.max(e.maxLevel,r),l=r,(h=this.hasChild(e,n))||d.tree.assistants.length){var p=void 0,u=void 0,f=void 0,g=void 0,m=void 0,y=void 0;y=s.y+s.height+e.verticalSpacing,d.tree.assistants.length&&(l=(c=this.setDepthSpaceForAssitants(e,n,y,s.height,r,e.verticalSpacing)).level,y=c.bottom),d.tree.assistants.length||"Horizontal"===d.tree.orientation||(y=s.y+s.height+e.verticalSpacing/2),d.tree.children.length&&(p="Horizontal"!==d.tree.orientation||"Balanced"===d.tree.type&&1!==d.tree.children.length?"Balanced"===d.tree.type?this.updateHorizontalTreeWithMultipleRows(e,n,o,s.x,y,l):this.updateVerticalTree(e,n,s.x,y,l,a):this.updateHorizontalTree(e,n,o,s.x,y,l)),d.y&&d.y>s.y||(d.y=s.y),d.mid&&(t=d.mid),d.tree.assistants.length&&(m=void 0!==t?t:s.x,g=this.setBreadthSpaceForAssistants(e,n,s,m,y,r),h||(t=((u=p=g).x+u.right)/2-s.width/2,p=u),f=g?g.canMoveBy:void 0),d.x=t,d.translate||(d.treeWidth=p.right-p.x);var v={layout:e,shape:n,shapeBounds:{x:t,y:s.y,right:t+s.width,bottom:s.y+s.height},treeBounds:p,dim:s,level:r};return this.translateSubTree(v,f,void 0!==o,a),d.firstChild&&"string"!==typeof d.firstChild&&(d.firstChild.x+=d.subTreeTranslation),n.treeBounds=p,p}return n.treeBounds=this.updateLeafNode(e,n,o,s,r,a),n.treeBounds},e.prototype.updateLeafNode=function(e,t,i,n,r,o){var a,s=e.graphNodes[t.id];s.x=n.x,s.y&&s.y>n.y||(s.y=n.y,s.maxLevel=Math.max(r,s.maxLevel||0)),a={x:n.x,y:n.y,right:n.x+n.width,bottom:n.y+n.height},s.maxLevel=Math.max(s.maxLevel||0,r);var l={layout:e,shape:t,shapeBounds:a,treeBounds:a,dim:n,level:r};return this.translateSubTree(l,void 0,void 0!==i,o),{x:s.x,y:s.y,right:s.x+n.width,bottom:s.y+n.height}},e.prototype.setUpLayoutInfo=function(e,t){var i={subTreeTranslation:0};return"OrganizationalChart"===e.type?i.tree={orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:i.tree={orientation:"Horizontal",type:"Center",enableRouting:!0},i.tree.children=[],i.tree.assistants=[],i.tree.level=0,i.translate=!0,i},e.prototype.translateSubTree=function(e,t,i,n){var r=e.layout,o=e.shape,a=e.shapeBounds,s=e.treeBounds,l=e.level,c=e.dim,h=r.graphNodes[o.id],d=r.nameTable[h.firstChild?h.firstChild.child:h.tree.children[0]],p=d?r.graphNodes[d.id]:null,u=this.hasChild(r,o),f=this.findIntersectingLevels(r,a,l,h.actualLevel),g=this.findIntersectingLevels(r,s,l,h.actualLevel),m=[];f.length&&h.translate?(h.intersect=f,this.spaceLeftFromPrevSubTree(r,o,a),h.canMoveBy=h.diff,void 0!==t&&(h.canMoveBy=Math.min(t,h.canMoveBy)),d&&void 0!==p.canMoveBy&&(p.canMoveBy>=h.canMoveBy&&(h.translated=!0),h.canMoveBy=Math.min(h.canMoveBy,p.canMoveBy)),i&&(h.x-=h.canMoveBy,h.subTreeTranslation-=h.canMoveBy,u&&(this.shiftSubordinates(r,g,h.canMoveBy),s.x=Math.min(s.x,h.x),s.right=Math.max(s.right,h.x+c.width),s.bottom=Math.max(s.bottom,h.y+c.height),s.x-=h.canMoveBy,s.right-=h.canMoveBy),d&&p.canMoveBy>h.canMoveBy?h.canMoveBy=p.canMoveBy-h.canMoveBy:d&&void 0!==h.canMoveBy&&(h.canMoveBy=0))):(u&&(s.x=Math.min(s.x,a.x),s.right=Math.max(s.right,a.x+c.width),s.bottom=Math.max(s.bottom,h.y+c.height)),h.translate||(h.canMoveBy=0,h.subTreeTranslation=0)),n||(a={x:h.x,y:c.y,right:h.x+c.width,bottom:c.y+c.height},m.push({rBounds:a}),this.updateRearBounds(r,o,m,l))},e.prototype.updateRearBounds=function(e,t,i,n,r){var o,a,s,l,c,h,d=!0,p={};if(t&&(r=(p=e.graphNodes[t.id]).intersect,d=!p.tree.children.length&&!p.tree.assistants.length),l=i[0].rBounds,c=i[i.length-1].rBounds,r&&r.length){for(h=(o=e.levels[r[0]].rBounds).bottom,o.y<l.y&&(o.bottom=l.y,i.splice(0,0,{rBounds:o})),h>c.bottom?i.push({rBounds:{x:o.x,right:o.right,y:l.bottom,bottom:h}}):(o=e.levels[r[r.length-1]].rBounds,d&&o.bottom>c.bottom&&(o.y=c.bottom,i.push({rBounds:o}))),a=r[0],s=i.length-1;s>=0;s--)e.levels.splice(a,0,i[s]);a+=i.length,e.levels.splice(a,r.length)}else for(a=this.findLevel(e,i[i.length-1].rBounds,n),s=i.length-1;s>=0;s--)e.levels.splice(a,0,i[s])},e.prototype.shiftSubordinates=function(e,t,i){var n;if(0!==i)for(n=0;n<t.length;n++)e.levels[t[n]].rBounds&&(e.levels[t[n]].rBounds.x-=i,e.levels[t[n]].rBounds.right-=i)},e.prototype.setDepthSpaceForAssitants=function(e,t,i,n,r,o){var a,s,l,c,h=e.graphNodes[t.id],d={};for(c=i,s=0;s<h.tree.assistants.length;s++)(d=e.graphNodes[h.tree.assistants[s]])&&(d.tree.children=d.tree.assistants=[],d.y=i,a=(l=e.nameTable[h.tree.assistants[s]]).actualSize.height,-1!==e.orientation.indexOf("Left")&&(a=l.actualSize.width),c=i+a+o/2,e.maxLevel=r+1,s%2===1&&s!==h.tree.assistants.length-1&&(i=c,r++));return{level:e.maxLevel,bottom:i+a+o}},e.prototype.setBreadthSpaceForAssistants=function(e,t,i,n,r,o){var a,s,l,c,h,d,p,u={},f=e.graphNodes[t.id],g=o,m={x:0,y:0,right:0,bottom:0};for(c=0;c<f.tree.assistants.length;c++)(u=e.graphNodes[f.tree.assistants[c]])&&(a=(l=e.nameTable[f.tree.assistants[c]]).actualSize.width,-1!==e.orientation.indexOf("Left")&&(a=l.actualSize.height),h=c%2===0?n+i.width/2-20-a:n+i.width/2+20,s=this.updateTree(e,h,u.y,e.nameTable[f.tree.assistants[c]],g+1),this.hasChild(e,t)||(0===c?m=s:this.uniteRects(m,s)),c%2===0&&u.prevBounds&&(d=void 0===d?u.canMoveBy:Math.min(d,u.canMoveBy)),c%2!==1&&c!==f.tree.assistants.length-1||(p=this.findIntersectingLevels(e,s,g+1),this.updateRearBounds(e,null,[{rBounds:s}],g+1,p),g++));return m&&(m.canMoveBy=d),m},e.prototype.getDimensions=function(e,t,i,n,r){var o,a;if(o=t.actualSize.width,a=t.actualSize.height,-1!==e.orientation.indexOf("Left")){if(!r){var s;s=i,i=n,n=s}a=t.actualSize.width,o=t.actualSize.height}return{x:i,y:n,width:o,height:a}},e.prototype.hasChild=function(e,t){var i=e.graphNodes[t.id];return i?i.tree.children&&i.tree.children.length:0},e.prototype.updateHorizontalTree=function(e,t,i,n,r,o){var a;a=this.getDimensions(e,t,n,r,o);var s,l={},c=(l=e.graphNodes[t.id]).tree.type;s=o;var h,d,p,u,f,g,m,y,v,b,w,x,S,C,P,O=0;if(O=n,h=r,e.levels.slice(0,e.levels.length),this.hasChild(e,t)){var E;for(E=-1!==e.orientation.indexOf("Left"),S=0;S<l.tree.children.length;S++){if(d=(u=e.nameTable[l.tree.children[S]]).actualSize.width,p=u.actualSize.height,g=E?p:d,m=E?d:p,e.levels[s+1]?e.levels[s+1].rBounds:null,f=this.updateTree(e,O,h,u,s+1,e.nameTable[l.tree.children[S-1]]),C=e.graphNodes[u.id],l.maxLevel=Math.max(l.maxLevel||0,C.maxLevel||0),v={x:C.x,y:C.y,right:C.x+g,bottom:C.y+m},0===S&&(y={x:Math.min(C.x,f.x),y:Math.min(C.y,f.y),right:f.right,bottom:f.bottom},P=C),x?(x.x=v.x,x.y=v.y,v.right>x.right&&(x.right=v.right),x.bottom=v.bottom):x=v,0===S&&(l.firstChild={x:C.x,canMoveBy:C.canMoveBy,child:u.id}),this.hasChild(e,u))if(!l.firstChild||l.firstChild.x>=C.firstChild.x){C.firstChild&&l.firstChild.canMoveBy<C.canMoveBy&&(l.firstChild.canMoveBy=w,C.canMoveBy=w,w=l.firstChild.canMoveBy,e.graphNodes[l.firstChild.child].canMoveBy=w);var T=void 0!==w?w:C.canMoveBy;l.firstChild={x:C.firstChild.x,canMoveBy:T,child:u.id}}else C.firstChild&&C.translated&&l.firstChild.canMoveBy>C.canMoveBy&&(l.firstChild.canMoveBy=e.graphNodes[l.firstChild.child].canMoveBy=C.canMoveBy);b=b?Math.max(C.maxLevel,b):C.maxLevel,this.uniteRects(y,f),O=0!==S&&!this.hasChild(e,u)&&C.subTreeTranslation<0?f.right-C.subTreeTranslation+e.horizontalSpacing:f.right+e.horizontalSpacing}isNaN(void 0)||(P.canMoveBy=void 0),l.mid=(P.x+x.right)/2-a.width/2,"Left"===c?l.mid=v.right-a.width:"Right"===c&&(l.mid=n)}return y},e.prototype.updateHorizontalTreeWithMultipleRows=function(e,t,i,n,r,o){var a,s,l,c,h,d,p,u,f,g,m,y=this.getDimensions(e,t,n,r,o),v=e.graphNodes[t.id],b=(v.tree.type,o),w=n,x=r,S=(e.levels.slice(0,e.levels.length),0);if(this.hasChild(e,t)){var C=-1!==e.orientation.indexOf("Left"),P=void 0,O=this.splitChildrenInRows(e,t),E=5===v.tree.children.length&&3===O[0].length,T=[],I=[];E?I=O:this.splitRows(O,T,I);var k={leftTree:T,rows:O,rightTree:I,dimensions:y},A=this.updateLeftTree(e,k,t,n,x,b);h=k.bounds;var M=void 0,D=(A||0)+(void 0!==A?e.horizontalSpacing/2:0);void 0!==A&&(v.mid=D-y.width/2,M=A+e.horizontalSpacing),x=r;var L=void 0;for(L=[],f=0;f<I.length;f++)for(w=O[f].length%2===1&&f===I.length-1||E?n:M||n,0!==f&&(x=L[f-1].bottom+e.verticalSpacing),u=0;u<I[f].length;u++)d=(a=e.nameTable[I[f][u]]).actualSize.width,p=a.actualSize.height,c=C?p:d,C?d:p,(s=e.graphNodes[a.id]).actualLevel=b+1+f,0===u&&T[f]&&T[f].length&&(s.translate=!1),E&&1===f&&(0===u&&g+c+e.horizontalSpacing<=m&&(P=!0,w=g-c/2),P&&1===u&&(w=m-c/2)),l=this.updateTree(e,w,x,a,b+1,e.nameTable[I[f][u-1]]),E&&u<=2&&0===f&&1===u&&(g=l.x-e.horizontalSpacing/2,m=l.x+c+e.horizontalSpacing/2),0===u?L[f]={x:l.x,y:l.y,right:l.right,bottom:l.bottom}:this.uniteRects(L[f],l),h||(h={x:L[f].x,y:L[f].y,right:L[f].right,bottom:L[f].bottom}),this.uniteRects(h,L[f]),w=l.right+e.horizontalSpacing,(!v.firstChild||(f===I.length-1&&O[f].length%2===1||E)&&0===u&&void 0!==s.canMoveBy&&S>s.canMoveBy)&&(S=Math.min(S,s.canMoveBy||0),v.firstChild={x:s.x,child:a.id,canMoveBy:s.canMoveBy}),k.leftCenter=g,k.rightCenter=m,k.align=P,k.level=b,k.rightBounds=L,this.alignRowsToCenter(e,f,t,k,M)}return h},e.prototype.updateLeftTree=function(e,t,i,n,r,o){for(var a,s,l,c,h,d=t.leftTree,p=e.graphNodes[i.id],u=[],f=-1!==e.orientation.indexOf("Left"),g=0;g<d.length&&d[g].length;g++){a=n,u[g-1]&&(r=u[g-1].bottom+e.verticalSpacing);for(var m=0;m<d[g].length;m++){var y=e.nameTable[d[g][m]],v=(f?y.actualSize.height:y.actualSize.width,f?y.actualSize.width:y.actualSize.height,e.graphNodes[y.id]);v.actualLevel=o+1+g,c=this.updateTree(e,a,r,y,o+1,e.nameTable[d[g][m-1]]),0===m?u[g]={x:c.x,y:c.y,right:c.right,bottom:c.bottom}:this.uniteRects(u[g],c),0===g&&0===m?(s=v.canMoveBy,p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}):0===m&&void 0!==v.canMoveBy&&s>v.canMoveBy&&(s=Math.min(s,v.canMoveBy||0),p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}),a=c.right+e.horizontalSpacing}l=0===g?u[g].right:Math.max(l,u[g].right)}for(g=0;g<d.length&&d[g].length;g++){if(l!==u[g].right){var b=l-u[g].right;for(m=0;m<d[g].length;m++){e.nameTable[d[g][m]];e.graphNodes[d[g][m]].x+=b}}0===g?h={x:u[0].x,y:u[0].y,right:u[0].right,bottom:u[0].bottom}:this.uniteRects(h,u[g])}return t.bounds=h,l},e.prototype.alignRowsToCenter=function(e,t,i,n,r){var o,a,s,l=e.graphNodes[i.id],c=n.rows,h=n.rightTree,d=n.leftCenter,p=n.rightCenter,u=n.align,f=n.rightBounds,g=n.dimensions,m=n.level,y=5===l.tree.children.length&&3===c[0].length;if(y&&1===t&&(o=f[0].right-f[0].x>=f[1].right-f[1].x?0:1),t===c.length-1&&(c[t].length%2===1||y&&1===t)){a=h[t][Math.floor(h[t].length/2)];var v;v=e.nameTable[a];var b,w=e.graphNodes[a].x,x=e.graphNodes[a].y;b=this.getDimensions(e,v,w,x,m+1),s=void 0,!u&&y?(1===o&&(t=0),s=(f[o].x+f[o].right)/2-(f[t].x+f[t].right)/2,0===t&&(l.mid+=s)):y||void 0===r||(s=r-e.horizontalSpacing/2-(w+b.width/2)),void 0!==s&&this.updateRearBoundsOfTree(e,h[t],s,g),y&&(l.mid=(p+d)/2+(0===t?s:0)-g.width/2),void 0===l.mid&&e.graphNodes[a]&&(l.mid=w),u=!1,t++}},e.prototype.updateRearBoundsOfTree=function(e,t,i,n){for(var r=0;r<t.length;r++){var o=e.graphNodes[t[r]];e.nameTable[t[r]];if(o.x+=i,o.canMoveBy+=i,r===t.length-1){var a={x:o.x,y:o.y,right:o.x+n.width,bottom:o.y+n.height},s=this.findIntersectingLevels(e,a,o.actualLevel);this.updateRearBounds(e,null,[{rBounds:a}],o.actualLevel,s)}}},e.prototype.splitRows=function(e,t,i){for(var n=0;n<e.length;n++){t[n]=[],i[n]=[];var r=void 0;if(r=e[n].length,e[n].length%2!==1){r=Math.ceil(e[n].length/2);for(var o=0;o<r;o++)t[n].push(e[n][o])}for(var a=t[n].length;a<e[n].length;a++)i[n].push(e[n][a])}},e.prototype.updateVerticalTree=function(e,t,i,n,r,o){this.getDimensions(e,t,i,n,r);var a,s,l,c,h,d,p,u,f,g,m,y,v,b,w=e.graphNodes[t.id],x=e.nameTable[w.tree.children[0]],S=-1!==e.orientation.indexOf("Left"),C="Left"===w.tree.type?-1:0,P=i,O=n;m=r;var E,T=[],I=[];for(y=0;y<w.tree.children.length;y++){if("Alternate"===w.tree.type&&(b=y%2===0&&w.tree.children.length>2?"Left":"Right",C=y%2===0&&w.tree.children.length>2?-1:0),P=i+this.findOffset(e,t,w,b),a=e.nameTable[w.tree.children[y]],c=S?a.actualSize.height:a.actualSize.width,h=S?a.actualSize.width:a.actualSize.height,l=this.updateTree(e,P+C*c,O,a,r+1,void 0,!0),u={x:(s=e.graphNodes[a.id]).x,y:s.y,right:s.x+c,bottom:s.y+h},0===y?(this.uniteRects(l,u),p=l):this.uniteRects(p,l),!s.prevBounds||"Alternate"===w.tree.type&&y%2===1&&w.tree.children.length>2||(E=void 0!==E?Math.min(s.canMoveBy,E):s.canMoveBy),w.maxLevel=Math.max(w.maxLevel||0,s.maxLevel||0),"Alternate"===w.tree.type&&w.tree.children.length>2&&y%2===0?(0!==y&&(O=d.bottom+e.verticalSpacing/2),I.push({rBounds:u}),s.levelBounds&&(I=I.concat(s.levelBounds))):(O="Alternate"===w.tree.type&&w.tree.children.length>2?Math.max(l.bottom,d.bottom)+e.verticalSpacing/2:l.bottom+e.verticalSpacing/2,r=w.maxLevel,T.push({rBounds:u}),g?this.uniteRects(g,u):g={x:s.x,y:s.y,right:s.x+c,bottom:s.y+h},s.levelBounds&&(T=T.concat(s.levelBounds))),0===y&&(w.firstChild={x:s.x,canMoveBy:s.canMoveBy,child:a.id}),this.hasChild(e,a))if(!w.firstChild||w.firstChild.x>=s.firstChild.x){if(s.firstChild&&w.firstChild.canMoveBy<s.canMoveBy){var k=w.firstChild.canMoveBy;s.canMoveBy=k,e.graphNodes[w.firstChild.child].canMoveBy=k,w.firstChild.canMoveBy=k}w.firstChild={x:s.firstChild.x,canMoveBy:void 0!==E?E:s.canMoveBy,child:a.id}}else s.firstChild&&s.translated&&w.firstChild.canMoveBy>s.canMoveBy&&(w.firstChild.canMoveBy=e.graphNodes[w.firstChild.child].canMoveBy=s.canMoveBy);d=u}return o?w.levelBounds=T:("Alternate"===w.tree.type&&w.tree.children.length>2&&(f={x:I[0].rBounds.x,y:I[0].rBounds.y,right:I[I.length-1].rBounds.right,bottom:I[I.length-1].rBounds.bottom},v=this.findIntersectingLevels(e,f,m+1),this.updateRearBounds(e,null,I,m+1,v)),v=this.findIntersectingLevels(e,g||p,m+1),this.updateRearBounds(e,null,g?T:[{rBounds:p}],m+1,v)),isNaN(E)||(e.graphNodes[x.id].canMoveBy=E),w.childBounds=p,w.mid=i,p},e.prototype.splitChildrenInRows=function(e,t){var i,n;n=4;var r,o=[];r=(i=e.graphNodes[t.id]).tree.children.length;var a=this.extend(i.tree.children);if(i.tree.rows){var s;s=i.tree.children.length;var l;n=(l=Math.ceil(s/i.tree.rows))%2===0?l:l+1}else 3===i.tree.children.length||4===i.tree.children.length?n=2:5===i.tree.children.length&&(n=3);for(;r>0;)o[o.length]=a.splice(0,n),(r-=n)<n&&(n=r);return o},e.prototype.extend=function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i},e.prototype.findOffset=function(e,t,i,n){var r=0,o=-1!==e.orientation.indexOf("Left")?t.actualSize.height:t.actualSize.width,a=n||i.tree.type;switch(r=i.tree.offset||20,"Alternate"===i.tree.type&&r>=e.horizontalSpacing&&(r=e.horizontalSpacing/2),a){case"Left":r=o/2-r;break;case"Right":r+=o/2}return r},e.prototype.uniteRects=function(e,t){e.x=Math.min(e.x,t.x),e.right=Math.max(e.right,t.right),e.bottom=Math.max(e.bottom,t.bottom)},e.prototype.spaceLeftFromPrevSubTree=function(e,t,i){var n,r,o,a,s;for(n=e.graphNodes[t.id],s=e.horizontalSpacing,a=0;a<n.intersect.length;a++)o=e.levels[n.intersect[a]].rBounds,r=i.x-(o.right+s),(void 0===n.diff||r<n.diff)&&(n.diff=r,n.prevBounds=e.levels[n.intersect[a]].rBounds)},e.prototype.findIntersectingLevels=function(e,t,i,n){var r,o,a,s;(r={x:t.x,y:t.y,right:t.right,bottom:t.bottom}).y-=e.verticalSpacing/2,r.bottom+=e.verticalSpacing/2,o=[],s=void 0!==n?n:i,a=e.levels[s]?e.levels[s].rBounds:null;do{if(a&&(r.y<a.y&&r.bottom>a.y||r.y<a.bottom&&a.bottom<r.bottom||r.y>=a.y&&r.bottom<=a.bottom||r.y<a.y&&r.bottom>a.bottom)){o.splice(0,0,s)}else if(a&&a.bottom<r.y)break;s--,a=e.levels[s]?e.levels[s].rBounds:null}while(s>=0);s=(void 0!==n?n:i)+1,a=e.levels[s]?e.levels[s].rBounds:null;do{if(a&&(r.y<a.y&&r.bottom>a.y||r.y<a.bottom&&a.bottom<r.bottom||r.y>=a.y&&r.bottom<=a.bottom||r.y<a.y&&r.bottom>a.bottom))o.push(s);else if(a&&a.y>r.bottom)break;s++,a=e.levels[s]?e.levels[s].rBounds:null}while(s<=e.levels.length);return o},e.prototype.findLevel=function(e,t,i){var n,r,o;for(n=t,r=0,o=e.levels[r]?e.levels[r].rBounds:null;r<e.levels.length;){if(o&&n.bottom<o.y)return r;r++,o=e.levels[r]?e.levels[r].rBounds:null}return r},e.prototype.getParentNode=function(e,t){return e.nameTable[e.nameTable[t.inEdges[0]].sourceID]},e.prototype.updateEdges=function(e,t,i,n,r){var o,a;if(o=e.graphNodes[t.id],t.outEdges&&t.outEdges.length&&(t.isExpanded||n===jn.Render))for(a=0;a<t.outEdges.length;a++){var s;(s=e.nameTable[e.nameTable[t.outEdges[a]].targetID])&&!s.excludeFromLayout&&(-1===o.tree.children.indexOf(s.id)&&o.tree.children.push(s.id),s.outEdges&&s.outEdges.length&&s.isExpanded&&(o.tree.hasSubTree=!0),this.updateEdges(e,s,i+1,n,r))}o.tree.level=i,o.tree.hasSubTree&&(o.tree.orientation="Horizontal",o.tree.type="Center"),(e.getLayoutInfo||e.layoutInfo)&&"OrganizationalChart"===e.type&&(e.getLayoutInfo?e.getLayoutInfo(t,o.tree):function(e,t,i,n){var r;if(t)for(var o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];if(r=t[s],"getAssistantDetails"===s){if(n.data.Role===t[s].root)for(var l=t[s].assistants,c=0;c<l.length;c++)for(var h=0;h<i.length;h++)i[h].data.Role===l[c]&&(e.assistants.push(i[h].id),e.children.splice(0,1))}else r&&(e[s]=t[s])}!e.hasSubTree&&t.canEnableSubTree&&(e.orientation=n.layoutInfo.orientation,e.type=n.layoutInfo.type,n.layoutInfo.offset!==e.offset&&void 0!==n.layoutInfo.offset&&(e.offset=n.layoutInfo.offset)),n.layoutInfo.hasSubTree=e.hasSubTree}(o.tree,e.layoutInfo,r,t),"Balanced"===o.tree.type&&o.tree.hasSubTree&&(o.tree.type="Center",o.tree.orientation="Horizontal")),e.level&&"Alternate"!==o.tree.type&&i>=e.level&&(o.tree.hasSubTree=!1)},e.prototype.updateAnchor=function(e,t,i){var n,r,o,a=0,s=0,l=0,c=0,h=new hn(0,0,i.x,i.y);o=e.bounds?e.bounds:h;var d=e.orientation;if(e.fixedNode){a=(r=e.nameTable[e.fixedNode]).actualSize.width,s=r.actualSize.height,e.anchorX=r.offsetX,e.anchorY=r.offsetY;var p=r.pivot;for(e.anchorX+="RightToLeft"===e.orientation?a*p.x:-a*p.x,e.anchorY+="BottomToTop"===e.orientation?s*p.y:-s*p.y,n=r,l=0;n.inEdges.length;)n=this.getParentNode(e,n),l+=e.graphNodes[n.id].subTreeTranslation||0;-1!==e.orientation.indexOf("Left")?(c=e.graphNodes[r.id].y,"LeftToRight"===d?e.anchorX-=c:e.anchorX+=c,e.anchorY-=e.graphNodes[r.id].x+l):(c=e.graphNodes[r.id].y,e.anchorX-=e.graphNodes[r.id].x+l,"TopToBottom"===d?e.anchorY-=c:e.anchorY+=c)}else if("TopToBottom"===d||"BottomToTop"===d){switch(e.horizontalAlignment){case"Left":e.anchorX=o.x-t.x+e.margin.left;break;case"Right":e.anchorX=o.x+o.width-e.margin.right-t.right;break;case"Auto":case"Center":e.anchorX=o.x+o.width/2-(t.x+t.right)/2}switch(e.verticalAlignment){case"Auto":case"Top":var u;u=o.y+e.margin.top,e.anchorY="TopToBottom"===d?u:t.bottom+u;break;case"Bottom":var f;f=o.y+o.height-e.margin.bottom,e.anchorY="TopToBottom"===d?f-t.bottom:f;break;case"Center":var g=void 0;g=o.y+o.height/2,e.anchorY="TopToBottom"===e.orientation?g-(t.y+t.bottom)/2:g+(t.y+t.bottom)/2}}else{switch(e.horizontalAlignment){case"Auto":case"Left":var m;m=o.x+e.margin.left,e.anchorX="LeftToRight"===d?m:t.bottom+m;break;case"Right":var y;y=o.x+o.width-e.margin.right,e.anchorX="LeftToRight"===d?y-t.bottom:y;break;case"Center":g=void 0;g=o.width/2+o.x,e.anchorX="LeftToRight"===e.orientation?g-(t.y+t.bottom)/2:g+(t.y+t.bottom)/2}switch(e.verticalAlignment){case"Top":e.anchorY=o.y+e.margin.top-t.x;break;case"Auto":case"Center":e.anchorY=o.y+o.height/2-(t.right+t.x)/2;break;case"Bottom":e.anchorY=o.y+o.height-e.margin.bottom-t.right}}},e.prototype.updateConnectors=function(e,t,i){var n,r,o,a;if(r=e.graphNodes[t.id],t.outEdges.length)for(n=0;n<t.outEdges.length;n++)(a=e.nameTable[t.outEdges[n]]).points=[],o=e.nameTable[a.targetID],a.visible&&(a.visited=!0,e.getConnectorSegments?e.getConnectorSegments(a):r&&-1!==r.tree.children.indexOf(a.targetID)&&(a.segments=[],"OrganizationalChart"===e.type&&"Orthogonal"===a.type&&this.updateSegments(e,a,t,o,n)),o&&(o.isExpanded||this.hasChild(e,o))&&this.updateConnectors(e,o,i+1));if(r&&r.tree.assistants.length)for(n=0;n<r.tree.assistants.length;n++)o=e.nameTable[r.tree.assistants[n]],a=e.nameTable[o.inEdges[0]],this.get3Points(e,t,o,a),(o.isExpanded||this.hasChild(e,o))&&this.updateConnectors(e,o,i+1)},e.prototype.updateSegments=function(e,t,i,n,r){var o=e.graphNodes[i.id];o.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(e,i,n,t):"Horizontal"===o.tree.orientation&&"Balanced"===o.tree.type?this.updateSegmentsForBalancedTree(e,t,i,n,r):"Horizontal"===o.tree.orientation?this.updateSegmentsForHorizontalOrientation(e,i,n,t):o.tree.offset<5?this.get5Points(e,i,n,t):this.get3Points(e,i,n,t)},e.prototype.updateSegmentsForBalancedTree=function(e,t,i,n,r){var o,a=e.graphNodes[i.id];if(5===a.tree.children.length&&r>2){o=a.tree.children[1],isNaN(e.graphNodes[o].treeWidth)&&(e.graphNodes[o].treeWidth=e.nameTable[o].actualSize.width);var s=3!==r?1:-1;-1!==e.orientation.indexOf("Left")?e.nameTable[o].offsetY-e.graphNodes[o].treeWidth/2-e.verticalSpacing*s/2:e.nameTable[o].offsetX+e.graphNodes[o].treeWidth/2+e.horizontalSpacing*s/2,this.getSegmentsForMultipleRows(e,i,n,t)}else a.tree.children.length>5?r<4?this.getSegmentsForMultipleRows(e,i,n,t):this.updateSegmentsForHorizontalOrientation(e,i,n,t):4===a.tree.children.length?r<2?this.getSegmentsForMultipleRows(e,i,n,t):this.updateSegmentsForHorizontalOrientation(e,i,n,t):this.getSegmentsForMultipleRows(e,i,n,t)},e.prototype.get3Points=function(e,t,i,n){var r=[],o=this.getBounds(t),a=this.getBounds(i);if(-1!==e.orientation.indexOf("Top")){var s=0===e.orientation.indexOf("Top")?o.bottomCenter:o.topCenter,l=t.offsetX>i.offsetX?a.middleRight:a.middleLeft;r.push(s,{x:o.bottomCenter.x,y:l.y},l)}else{s=0===e.orientation.indexOf("Left")?o.middleRight:o.middleLeft,l=t.offsetY>i.offsetY?a.bottomCenter:a.topCenter;r.push(s,{x:a.bottomCenter.x,y:o.middleRight.y},l)}this.getSegmentsFromPoints(r,n)},e.prototype.get5Points=function(e,t,i,n){var r,o,a,s,l=[],c=this.getBounds(t),h=this.getBounds(i);e.graphNodes[t.id];-1!==e.orientation.indexOf("Top")?(r=t.offsetY<i.offsetY?c.bottomCenter:c.topCenter,s=e.verticalSpacing/4*(t.offsetY<i.offsetY?1:-1),a=e.horizontalSpacing/2*(t.offsetX>i.offsetX?1:-1),o=t.offsetX>i.offsetX?h.middleRight:h.middleLeft,l.push(r,{x:r.x,y:r.y+s},{x:o.x+a,y:r.y+s},{x:o.x+a,y:o.y},o)):(r=t.offsetX>i.offsetX?c.middleLeft:c.middleRight,o=t.offsetY>i.offsetY?h.bottomCenter:h.topCenter,a=e.horizontalSpacing/4*(t.offsetX<i.offsetX?1:-1),s=e.verticalSpacing/2*(t.offsetY>i.offsetY?1:-1),l.push(r,{x:r.x+a,y:r.y},{x:r.x+a,y:r.y+s},{x:o.x,y:r.y+s},o)),this.getSegmentsFromPoints(l,n)},e.prototype.getSegmentsFromPoints=function(e,t){for(var i,n=[],r=0;r<e.length-2;r++)(i=new _a(t,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(e[r],e[r+1]),i.length=Qi.distancePoints(e[r],e[r+1]),n.push(i);t.segments=n},e.prototype.getSegmentsForMultipleRows=function(e,t,i,n){var r,o,a=[],s=this.getBounds(i),l=this.getBounds(t);switch(e.orientation){case"TopToBottom":r={x:l.bottomCenter.x,y:l.bottomCenter.y+e.verticalSpacing/4},(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(l.bottomCenter,r),o.length=Qi.distancePoints(l.bottomCenter,r),a.push(o);break;case"BottomToTop":r={x:l.bottomCenter.x,y:l.topCenter.y-e.verticalSpacing/4},(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(l.topCenter,r),o.length=Qi.distancePoints(l.topCenter,r),a.push(o);break;case"LeftToRight":if(r={x:l.middleRight.x+e.verticalSpacing/4,y:l.middleRight.y},(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(l.middleRight,r),o.length=Qi.distancePoints(l.middleRight,r),a.push(o),s.center.y!==l.center.y){var c={x:l.middleRight.x+e.verticalSpacing/4,y:s.middleLeft.y};(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(r,c),o.length=Qi.distancePoints(r,c),a.push(o)}break;case"RightToLeft":if(r={x:l.middleLeft.x-e.verticalSpacing/4,y:l.middleRight.y},(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(l.middleLeft,r),o.length=Qi.distancePoints(l.middleLeft,r),a.push(o),s.center.y!==l.center.y){var h={x:l.middleLeft.x-e.verticalSpacing/4,y:s.middleLeft.y};(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(h,h),o.length=Qi.distancePoints(h,h),a.push(o)}}n.segments=a},e.prototype.updateSegmentsForHorizontalOrientation=function(e,t,i,n){var r,o,a=[],s=this.getBounds(t),l=this.getBounds(i);switch(e.orientation){case"TopToBottom":r={x:s.bottomCenter.x,y:l.topCenter.y-e.verticalSpacing/2},(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(s.bottomCenter,r),o.length=Qi.distancePoints(s.bottomCenter,r),a.push(o);break;case"BottomToTop":r={x:s.topCenter.x,y:l.bottomCenter.y+e.verticalSpacing/2},(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(s.topCenter,r),o.length=Qi.distancePoints(s.topCenter,r),a.push(o);break;case"LeftToRight":if(r={x:l.middleLeft.x-e.verticalSpacing/2,y:s.middleRight.y},(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(s.middleRight,r),o.length=Qi.distancePoints(s.middleRight,r),a.push(o),l.center.y!==s.center.y){var c={x:l.middleLeft.x-e.verticalSpacing/2,y:l.middleLeft.y};(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(r,c),o.length=Qi.distancePoints(r,c),a.push(o)}break;case"RightToLeft":if(r={x:l.middleRight.x+e.verticalSpacing/2,y:s.middleRight.y},(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(s.middleLeft,r),o.length=Qi.distancePoints(s.middleLeft,r),a.push(o),l.center.y!==s.center.y){var h={x:l.middleRight.x+e.verticalSpacing/2,y:l.middleLeft.y};(o=new _a(n,"segments",{type:"Orthogonal"},!0)).direction=Qi.direction(r,h),o.length=Qi.distancePoints(r,h),a.push(o)}}return n.segments=a,[]},e.prototype.updateNodes=function(e,t,i,n,r,o){var a,s,l,c,h,d;if(t&&!t.excludeFromLayout){l=t.actualSize.width,c=t.actualSize.height,h=e.anchorX,d=e.anchorY,"LeftToRight"===e.orientation?(h+=e.graphNodes[t.id].y+l/2,d+=e.graphNodes[t.id].x+i+c/2):"RightToLeft"===e.orientation?(h-=e.graphNodes[t.id].y+l/2,d+=e.graphNodes[t.id].x+i+c/2):"TopToBottom"===e.orientation?(h+=e.graphNodes[t.id].x+i+l/2,d+=e.graphNodes[t.id].y+c/2):(h+=e.graphNodes[t.id].x+i+l/2,d-=e.graphNodes[t.id].y+c/2),e.graphNodes&&(h+=r=r||0,d+=o=o||0,this.isAnimation||(t.offsetX=h,t.offsetY=d));var p={id:t.id,differenceX:h-t.offsetX,differenceY:d-t.offsetY};e.objects.push(p);var u=void 0;if(u=[],this.hasChild(e,t))for(a=0;a<e.graphNodes[t.id].tree.children.length;a++)s=e.nameTable[e.graphNodes[t.id].tree.children[a]],this.updateNodes(e,s,i+(e.graphNodes[t.id].subTreeTranslation||0),n,r,o),u.push(s);if(e.graphNodes[t.id].tree.assistants.length)for(a=0;a<e.graphNodes[t.id].tree.assistants.length;a++)s=e.nameTable[e.graphNodes[t.id].tree.assistants[a]],this.updateNodes(e,s,i+(e.graphNodes[t.id].subTreeTranslation||0),null,r,o)}},e}()),bf=(function(){function e(){this.isAnimation=!1}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"MindMapChart"},e.prototype.updateLayout=function(e,t,i,n,r,o){var a;if(a=this.checkRoot(e,i,r,o,t))i.fixedNode=a;else for(var s=0,l=e;s<l.length;s++){if(!(m=l[s]).excludeFromLayout&&(!m.inEdges||!m.inEdges.length)){i.fixedNode=m.id;break}}var c=t[i.fixedNode],h=this.findFirstLevelNodes(c,i,t),d=[],p=[],u=Ld(i.getBranch);u=u||Ld(this.getBranch);for(var f=0,g=h;f<g.length;f++){var m,y=u(m=g[f],h);"Left"===(y=m&&m.branch?m.branch:y)?d.push(m):p.push(m)}var v=new hn(0,0,n.x,n.y);t[i.fixedNode].offsetX=v.x+v.width/2,t[i.fixedNode].offsetY=v.y+v.height/2,d.length&&this.updateMindMapBranch(e,p,t,i,n,r,"Left"),p.length&&this.updateMindMapBranch(e,d,t,i,n,r,"Right")},e.prototype.checkRoot=function(e,t,i,n,r){for(var o=0,a=e;o<a.length;o++){var s=a[o];if(!s.excludeFromLayout){if(s.data&&(s.data[i].toString()===n||s.data[i].toString()===t.root))return s.id;if(!s.data&&s.id===t.root)return s.id}}return""},e.prototype.updateMindMapBranch=function(e,t,i,n,r,o,a){var s;(s={type:"HierarchicalTree",horizontalSpacing:n.verticalSpacing,verticalSpacing:n.horizontalSpacing,verticalAlignment:n.verticalAlignment,horizontalAlignment:n.horizontalAlignment,fixedNode:n.fixedNode,getLayoutInfo:Ld(n.getLayoutInfo),layoutInfo:n.layoutInfo,margin:n.margin,root:n.fixedNode}).orientation="Left"===a?"LeftToRight":"RightToLeft",this.excludeFromLayout(t,i,!0),(new vf).updateLayout(e,i,s,r,o),this.excludeFromLayout(t,i,!1)},e.prototype.getBranch=function(e,t){return t.indexOf(e)%2===0?"Left":"Right"},e.prototype.excludeFromLayout=function(e,t,i){for(var n=0,r=e;n<r.length;n++){t[r[n].id].excludeFromLayout=i}},e.prototype.findFirstLevelNodes=function(e,t,i){var n=[];if(e&&e.outEdges.length)for(var r=0,o=e.outEdges;r<o.length;r++){var a=o[r];n.push(i[i[a].targetID])}return n}}(),function(){function e(){}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"RadialTree"},e.prototype.updateLayout=function(e,t,i,n){var r={type:i.type,nameTable:t,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},layoutNodes:[],orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};this.doLayout(r,e,t,n)},e.prototype.doLayout=function(e,t,i,n){for(var r,o=0;o<t.length;o++)(r=t[o]).excludeFromLayout||(e.graphNodes[r.id]=this.setUpLayoutInfo(e,r),r.inEdges&&r.inEdges.length||e.firstLevelNodes.push(r));e.root&&i[e.root]?e.centerNode=i[e.root]:e.firstLevelNodes.length&&(e.centerNode=e.firstLevelNodes[0],e.root=e.centerNode.id),e.centerNode&&(this.updateEdges(e,e.centerNode,0,i),this.depthFirstAllignment(e,e.centerNode,0,0),this.populateLevels(e),this.transformToCircleLayout(e),this.updateAnchor(e,n),this.updateNodes(e,e.centerNode,i))},e.prototype.updateEdges=function(e,t,i,n){var r=e.graphNodes[t.id];e.layoutNodes.push(r),r.level=i,r.visited=!0,e.maxLevel=Math.max(e.maxLevel,i);for(var o=0;o<t.outEdges.length;o++){var a=n[n[t.outEdges[o]].targetID];a.excludeFromLayout||a.visited||(r.children.push(a),this.updateEdges(e,a,i+1,n))}},e.prototype.depthFirstAllignment=function(e,t,i,n){var r,o=e.graphNodes[t.id];if(o.children.length){n+=300;for(var a=0;a<o.children.length;a++)i=(r=this.depthFirstAllignment(e,o.children[a],i,n)).x,n=r.y;o.children=o.children.sort((function(t,i){return e.graphNodes[t.id].x-e.graphNodes[i.id].x}));var s=e.graphNodes[o.children[0].id].min,l=e.graphNodes[o.children[o.children.length-1].id].max;if(o.x=s+(l-s)/2,i=l+e.horizontalSpacing,o.segmentOffset=l+e.horizontalSpacing,o.x-=o.width/2,o.y-=o.height/2,o.min=s,o.max=l,o.x<s&&o.visited){o.x=s,i=o.x+o.width/2-(l-s)/2,o.visited=!1;for(a=0;a<o.children.length;a++)r=this.depthFirstAllignment(e,o.children[a],i,n);o.visited=!0,i=o.x+o.width+e.horizontalSpacing}i=i<(l=e.graphNodes[o.children[o.children.length-1].id].segmentOffset)?l:i,n-=300,o.y=n}else o.x=i,o.y=n,o.min=i,o.max=i+o.width,i+=o.width+e.horizontalSpacing;return{x:i,y:n}},e.prototype.populateLevels=function(e){var t=[],i=Math.min.apply(Math,e.layoutNodes.map((function(e){return e.x}))),n=Math.max.apply(Math,e.layoutNodes.map((function(t){return t.x+t.width+e.horizontalSpacing})))-i;e.levels=[];for(var r=function(r){var o={};t=(t=e.layoutNodes.filter((function(e){return e.level===r?e:null}))).sort((function(e,t){return e.x-t.x})),o.min=t[0].x,o.max=t[t.length-1].x+t[t.length-1].width+e.horizontalSpacing,o.actualCircumference=0,o.height=0;for(var a=0;a<t.length;a++)t[a].height>o.height&&(o.height=t[a].height),o.actualCircumference+=Math.max(t[a].width,t[a].height),a!==t.length-1&&(o.actualCircumference+=e.horizontalSpacing);o.circumference=o.max-o.min,o.actualCircumference<o.circumference&&(o.circumference=(o.circumference+o.actualCircumference)/2),o.radius=o.circumference/(2*Math.PI)+o.height,o.nodes=[],r>1&&e.levels[r-1].radius+e.levels[r-1].height>=o.radius&&(o.radius=e.levels[r-1].radius+e.levels[r-1].height);for(var s=0;s<t.length;s++)t[s].ratio=Math.abs(t[s].x+t[s].width/2-i)/n,o.nodes.push(t[s]);e.levels.push(o)},o=0;o<=e.maxLevel;o++)r(o)},e.prototype.transformToCircleLayout=function(e){var t=e.graphNodes[e.centerNode.id];t.x=0,t.y=0;for(var i=1;i<e.levels.length;i++)for(var n=0;n<e.levels[i].nodes.length;n++){var r=e.levels[i].nodes[n];r.x=Math.cos(360*r.ratio*Math.PI/180)*(e.levels[i].radius+e.verticalSpacing*i),r.y=Math.sin(360*r.ratio*Math.PI/180)*(e.levels[i].radius+e.verticalSpacing*i),e.anchorX=Math.min(e.anchorX,r.x),e.anchorY=Math.min(e.anchorY,r.y)}},e.prototype.updateAnchor=function(e,t){e.anchorX=e.centerNode.offsetX||t.x/2,e.anchorY=e.centerNode.offsetY||t.y/2},e.prototype.updateNodes=function(e,t,i){var n=e.graphNodes[t.id],r=n.x+e.anchorX,o=n.y+e.anchorY;t.offsetX+=r,t.offsetY+=o;for(var a=0;a<n.children.length;a++){var s=n.children[a];this.updateNodes(e,i[s.id],i)}},e.prototype.setUpLayoutInfo=function(e,t){var i={};return i.name=t.id,i.x=0,i.y=0,i.min=0,i.max=0,i.width=t.actualSize.width,i.height=t.actualSize.height,i.children=[],i.level=0,i.ratio=0,i.visited=!1,i}}(),function(){function e(e){this.velocityX=0,this.velocityY=0,this.nodes=[],this.graphNode=e;var t=xf(this.graphNode);this.location=t.center,this.nodes=[],e.treeInfo.parents||(e.treeInfo.parents=[]),e.treeInfo.children||(e.treeInfo.children=[]),this.nodes=e.treeInfo.parents.concat(e.treeInfo.children)}return e.prototype.applyChanges=function(){this.graphNode.treeInfo.center=this.location},e}()),wf=(function(){function e(){this.cdCOEF=.442,this.cfMAXVELOCITY=50,this.cnMAXITERACTION=1e3,this.cnSPRINGLENGTH=100,this.mszMaxForceVelocity={width:this.cfMAXVELOCITY,height:this.cfMAXVELOCITY},this.springLength=0,this.springFactor=this.cdCOEF,this.maxIteration=this.cnMAXITERACTION,this.springLength=this.cnSPRINGLENGTH}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"SymmetricalLayout"},e.prototype.doGraphLayout=function(e){var t=this.selectedNode;t.treeInfo.Bounds=e.getModelBounds(e.nodes);var i=t.treeInfo.GraphNodes,n=this.convertGraphNodes(i),r=n.length;r=Math.min(this.maxIteration,r*r*r),this.preLayoutNodes(n,t.treeInfo.Bounds);for(var o=0,a=r;o<a;o++)this.makeSymmetricLayout(n),this.appendForces(n);this.resetGraphPosition(n,t)},e.prototype.preLayoutNodes=function(e,t){for(var i=Math.max(t?t.width:25,t?t.height:25),n=i/2,r=i/2,o=2*Math.PI/e.length,a=o,s=0;s<e.length;s++){var l=e[s];this.getForceNode(l).location={x:n+i*Number(Math.cos(a).toFixed(2)),y:r+i*Number(Math.sin(a).toFixed(2))},a-=o}},e.prototype.doLayout=function(e){this.selectedNode=e.selectedNode,this.doGraphLayout(e)},e.prototype.makeSymmetricLayout=function(e){for(var t,i,n=0;n<e.length;n++){for(var r=e[n],o=(t=this.getForceNode(r)).nodes,a=0;a<o.length;a++){Sf((f=o[a]).id,e)&&this.calcNodesForce(t,this.getForceNode(f))}for(var s=0,l=o.length;s<l&&!(l<2);s++){var c=this.getForceNode(o[s]),h=s+1>=l?this.getForceNode(o[0]):this.getForceNode(o[s+1]),d=360/o.length/2*Math.PI/180,p=2*this.springLength*Math.sin(d);this.calcRelatesForce(c,h,p)}for(var u=0;u<e.length;u++){var f;Sf((f=e[u]).id,o)||f.id===r.id||(i=this.getForceNode(f),this.updateNeigbour(t,i))}}},e.prototype.appendForces=function(e){for(var t=null,i=0;i<e.length;i++){var n=e[i],r=(t=this.getForceNode(n)).location;r.x+=Math.min(t.velocityX,this.mszMaxForceVelocity.width),r.y+=Math.min(t.velocityY,this.mszMaxForceVelocity.height),t.velocityX=0,t.velocityY=0,t.location=r}},e.prototype.resetGraphPosition=function(e,t){for(var i,n={width:Number.MAX_VALUE,height:Number.MAX_VALUE},r=null,o=0;o<e.length;o++){i=e[o];var a={x:(r=this.getForceNode(i)).location.x-i.actualSize.width/2,y:r.location.y-i.actualSize.height/2};n.width=Math.min(n.width,a.x),n.height=Math.min(n.height,a.y)}for(o=0;o<e.length;o++){i=e[o],(a=(r=this.getForceNode(i)).location).x-=n.width-(t.treeInfo.location?t.treeInfo.location.x:0),a.y-=n.height-(t.treeInfo.location?t.treeInfo.location.y:0),r.location=a,r.applyChanges()}},e.prototype.convertGraphNodes=function(e){for(var t=[],i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(e[r]){var o=e[r],a=new bf(o);o.treeInfo.tag=a,t.push(o)}}return t},e.prototype.getForceNode=function(e){return e.treeInfo.tag},e.prototype.updateNeigbour=function(e,t){if(null!=t&&null!=e){var i=this.pointDistance(e.location,t.location),n=this.lineAngle(e.location,t.location),r=.9*this.springLength;i<r&&this.calcForce(i,r,n,t)}},e.prototype.lineAngle=function(e,t){var i=0,n=t.x-e.x,r=t.y-e.y;return 0===n?i=r<=0?3*Math.PI/2:Math.PI/2:0===r?i=n<0?Math.PI:0:(i=Math.atan(r/n),n<0&&r>0||n<0&&r<0?i=Math.PI+i:n>0&&r<0&&(i=2*Math.PI+i)),i},e.prototype.pointDistance=function(e,t){var i=0,n=t.x-e.x,r=t.y-e.y,o=n*n+r*r;return o>0&&(i=Math.sqrt(o)),i},e.prototype.calcRelatesForce=function(e,t,i){var n=this.pointDistance(e.location,t.location),r=this.lineAngle(e.location,t.location);n<i&&this.calcForce(n,i,r,t)},e.prototype.updateLayout=function(e,t,i,n,r,o){(new wf).updateLayout(e,t,i,n,r,o)},e.prototype.calcNodesForce=function(e,t){var i=this.pointDistance(e.location,t.location),n=this.lineAngle(e.location,t.location);(i>this.springLength||i<this.springLength)&&this.calcForce(i,this.springLength,n,t)},e.prototype.calcForce=function(e,t,i,n){var r=n.nodes.length,o=e-t,a=this.springFactor/(r*r)*Math.sqrt(r);if(0!==o){var s=o*a,l=Math.cos(i)*s,c=Math.sin(i)*s;n.velocityX-=l,n.velocityY-=c}}}(),function(){function e(){this.visitedStack=[],this.cycleEdgesCollection=[],this.graphObjects=[],this.passedNodes=[]}return e.prototype.updateLayout=function(e,t,i,n,r,o){this.nameTable=n,this.nodes=e,this.connectors=t;var a=e;a.length>0&&(this.mhelperSelectedNode=xd(a[0]));for(var s=0,l=e;s<l.length;s++){var c=void 0;(c=g=l[s]).treeInfo={},c.treeInfo.graphType="Node",this.graphObjects.push(c)}for(var h=0,d=t;h<d.length;h++){var p=void 0;(p=d[h]).treeInfo={},p.treeInfo.graphType="Connector",this.graphObjects.push(p)}this.updateLayout1(this.graphObjects,i);for(var u=this.getModelBounds(a),f=0;f<a.length;f++){var g=a[f],m=(o.x-u.width)/2,y=r.margin||{};y.left=y.left||0,y.right=y.right||0,y.top=y.top||0,y.bottom=y.bottom||0,r.margin.left&&(y.left=r.margin.left),r.margin.top&&(y.top=r.margin.top);var v=g.treeInfo.tag.location.x-(g.offsetX-g.actualSize.width/2)-u.x+m+y.left,b=g.treeInfo.tag.location.y-(g.offsetY-g.actualSize.height/2)-u.y+y.top;g.offsetX+=v,g.offsetY+=b,delete g.treeInfo}return!0},e.prototype.getModelBounds=function(e){e=e.slice();for(var t,i=null,n=null,r=0;r<e.length;r++){var o=xf(t=e[r]);i=new hn(t.treeInfo.tag?t.treeInfo.tag.location.x:o.x,t.treeInfo.tag?t.treeInfo.tag.location.y:o.y,t.actualSize.width,t.actualSize.height),n=n?n.uniteRect(i):i}return n},e.prototype.updateLayout1=function(e,t){this.detectCyclesInGraph(e);var i=e.length;if(i>0){for(var n=[],r=[],o=[],a=0;a<e.length;a++){var s=e[a];void 0===s.treeInfo.isCycleEdge&&(s.treeInfo.isCycleEdge=!1),"Connector"!==s.treeInfo.graphType||s.treeInfo.isCycleEdge?"Connector"===s.treeInfo.graphType?n.push(s):o.push(s):r.push(s)}for(r=r.concat(o),r=n.concat(r);i>this.dictionaryLength(this.passedNodes);)if(this.getNodesToPosition(r),null!=this.selectedNode){t.doLayout(this),this.selectedNode=null,this.visitedStack=[];for(var l=0,c=this.cycleEdgesCollection;l<c.length;l++){c[l].treeInfo.isCycleEdge=!1}}this.passedNodes=null,this.selectedNode=null}return!1},e.prototype.getNodesToPosition=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(!Sf(i.id,this.passedNodes)){i&&this.selectNodes(i);break}}},e.prototype.selectNodes=function(e){var t=e;"Connector"===e.treeInfo.graphType?this.exploreGraphEdge(e):null!=t&&this.addNode(e,"passed")&&(this.addNode(e,"selected"),this.isConnectedToAnotherNode(t)?(this.selectedNode={treeInfo:{}},this.selectedNode.treeInfo.LeftMargin=10,this.selectedNode.treeInfo.TopMargin=10,this.selectConnectedNodes(t)):this.selectedNode=e)},e.prototype.selectConnectedNodes=function(e){var t=this.selectedNode;t.treeInfo.GraphNodes||(t.treeInfo.GraphNodes={});var i=e;if(null!=i&&this.addNode(i,"passed")){var n=i.id;if(this.dictionaryContains(t.treeInfo.GraphNodes,i)){var r=t.treeInfo.GraphNodes[n];r.treeInfo.Added&&(r.treeInfo.Added=!1,this.getConnectedRelatives(r),this.exploreRelatives(e))}else{var o=this.addGraphNode(i);this.getConnectedRelatives(o),this.exploreRelatives(e)}}},e.prototype.exploreRelatives=function(e){this.exploreRelatives1(e,"Parents"),this.exploreRelatives1(e,"Children")},e.prototype.exploreRelatives1=function(e,t){var i=[];"Parents"===t?i=e.inEdges:"Children"===t&&(i=e.outEdges);for(var n=0;n<i.length;n++){var r=this.nameTable[i[n]];if(this.addNode(r,"passed")){var o=this.nameTable[r.sourceID],a=this.nameTable[r.targetID];"Parents"===t&&null!=o&&Sf(o.id,this.nodes)?this.selectConnectedNodes(this.nameTable[r.sourceID]):"Children"===t&&null!=a&&Sf(a.id,this.nodes)&&this.selectConnectedNodes(this.nameTable[r.targetID])}}},e.prototype.getConnectedRelatives=function(e){this.getConnectedParents(e),this.getConnectedChildren(e)},e.prototype.dictionaryContains=function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++)if(i[n]===t.id)return!0;return!1},e.prototype.dictionaryLength=function(e){return Object.keys(e).length},e.prototype.getConnectedChildren=function(e){for(var t=this.selectedNode,i=e,n=0;n<i.outEdges.length;n++){var r=this.nameTable[i.outEdges[n]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.targetID];if(Sf(o.id,this.nodes)&&null!=o&&o.visible){var a=void 0;this.dictionaryContains(t.treeInfo.GraphNodes,o)?a=t.treeInfo.GraphNodes[o.id]:(a=this.addGraphNode(o)).treeInfo.Added=!0,e.treeInfo.children||(e.treeInfo.children=[]),a.treeInfo.parents||(a.treeInfo.parents=[]),this.setNode(a.treeInfo.parents,e),this.findNode(e.treeInfo.children,a.id)<0&&e.treeInfo.children.push(a)}}}},e.prototype.getConnectedParents=function(e){for(var t=this.selectedNode,i=e,n=0;n<i.inEdges.length;n++){var r=this.nameTable[i.inEdges[n]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.sourceID];if(Sf(o.id,this.nodes)&&null!=o&&o.visible){var a=void 0;this.dictionaryContains(t.treeInfo.GraphNodes,o)?a=t.treeInfo.GraphNodes[o.id]:(a=this.addGraphNode(o)).treeInfo.Added=!0,e.treeInfo.parents||(e.treeInfo.parents=[]),a.treeInfo.children||(a.treeInfo.children=[]),this.setNode(a.treeInfo.children,e),this.findNode(e.treeInfo.parents,a.id)<0&&e.treeInfo.parents.push(a)}}}},e.prototype.setNode=function(e,t){var i=this.findNode(e,t.id);i>=0&&i<e.length?e[i]=t:e.push(t)},e.prototype.findNode=function(e,t){var i=-1;if(null!=e&&""!==t)for(var n=0,r=e.length;n<r;n++){var o=e[n];if("string"===typeof o&&o===t){i=n;break}if(null!=o&&o.id===t){i=n;break}}return i},e.prototype.addGraphNode=function(e){var t=this.selectedNode;t.treeInfo.GraphNodes||(t.treeInfo.GraphNodes={});var i=e;if(null!=t){t.treeInfo.GraphNodes[i.id]=i;var n=this.mhelperSelectedNode;null!=n&&e.id===n.id&&(this.mhelperSelectedNode=i)}return i},e.prototype.isConnectedToAnotherNode=function(e){var t=!1;return e.inEdges.concat(e.outEdges).length>0&&(null!=e.inEdges&&e.inEdges.length>0&&(t=this.searchEdgeCollection(e.inEdges,"FromNode")),!t&&null!=e.outEdges&&e.outEdges.length>0&&(t=this.searchEdgeCollection(e.outEdges,"ToNode"))),t},e.prototype.searchEdgeCollection=function(e,t){for(var i=!1,n=0;n<e.length-1;n++){var r=this.nameTable[e[n]];if(this.addNode(r,"passed")&&(!r.treeInfo.isCycleEdge&&("FromNode"===t&&null!=this.nameTable[r.sourceID]||"ToNode"===t&&null!=this.nameTable[r.targetID]))){i=!0;break}}return i},e.prototype.exploreGraphEdge=function(e){var t=e;if(null!=t&&!t.treeInfo.isCycleEdge&&this.addNode(e,"passed")){this.addNode(e,"selected");var i=this.nameTable[t.sourceID],n=this.nameTable[t.targetID];null!=i?this.selectNodes(i):null!=n?this.selectNodes(n):this.selectedNode=e}},e.prototype.addNode=function(e,t){var i=e;return"passed"!==t&&i.visible||this.dictionaryContains(this.passedNodes,i)||(this.passedNodes[i.id]=i),!!i.visible},e.prototype.detectCyclesInGraph=function(e){for(var t=[],i=[],n=0;n<e.length;n++)"Connector"!==e[n].treeInfo.graphType&&t.push(e[n]);if(t.length>0)for(i.push(t[0]),this.visitedStack.push(t[0]);i.length>0;){var r=i[i.length-1],o=this.getUnVisitedChildNodes(r);if(o.length>0){var a=o[0],s=o[o.length-1];Sf(a.id,this.visitedStack)?(s.treeInfo.isCycleEdge=!0,this.cycleEdgesCollection.push(s)):(i.push(a),this.visitedStack.splice(0,0,a))}else i.pop()}},e.prototype.getUnVisitedChildNodes=function(e){var t=[];if(e.outEdges.length>0){for(var i=0;i<e.outEdges.length;i++){var n=this.nameTable[e.outEdges[i]];if(!Sf(n.id,this.visitedStack)){var r=this.nameTable[n.targetID];return null!=r&&t.push(r),t.push(n),this.visitedStack.splice(0,0,n),t}}return t}return t},e}());function xf(e){var t=e.offsetX-e.actualSize.width*e.pivot.x,i=e.offsetY-e.actualSize.height*e.pivot.y;return new hn(t,i,e.actualSize.width,e.actualSize.height)}function Sf(e,t){for(var i=0;i<t.length;i++)if(t[i].id===e)return!0;return!1}!function(){function e(){}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ComplexHierarchicalTree"},e.prototype.doLayout=function(e,t,i,n){(new Cf).doLayout(e,t,i,n)},e.prototype.getLayoutNodesCollection=function(e){for(var t,i=[],n=0;n<e.length;n++)(t=e[n]).inEdges.length+t.outEdges.length>0&&!t.parentId&&!t.processId&&i.push(t);return i}}();var Cf=function(){function e(){this.nameTable={},this.crossReduction=new Of}return e.prototype.createVertex=function(e,t,i,n,r,o){return{value:t,geometry:{x:i,y:n,width:r,height:o},name:t,vertex:!0,inEdges:e.inEdges.slice(),outEdges:e.outEdges.slice()}},e.prototype.getEdges=function(e){var t=[];if(e){for(var i=0;e.inEdges.length>0&&i<e.inEdges.length;i++)t.push(this.nameTable[e.inEdges[i]]);for(i=0;e.outEdges.length>0&&i<e.outEdges.length;i++)t.push(this.nameTable[e.outEdges[i]])}return t},e.prototype.findRoots=function(e){for(var t=[],i=null,n=-1e5,r=0,o=Object.keys(e);r<o.length;r++){for(var a=e[o[r]],s=this.getEdges(a),l=0,c=0,h=0;h<s.length;h++){this.getVisibleTerminal(s[h],!0).name===a.name?l++:c++}0===c&&l>0&&t.push(a);var d=l-c;d>n&&(n=d,i=a)}return 0===t.length&&null!=i&&t.push(i),t},e.prototype.getVisibleTerminal=function(e,t){var i=this.nameTable[e.targetID];t&&(i=this.nameTable[e.sourceID]);for(var n=0;n<this.vertices.length;n++)if(this.vertices[n].name===i.id)return this.vertices[n];return null},e.prototype.traverse=function(e,t,i,n,r,o){if(null!=e){var a=e.name;if(null==o||null!=o[a]){null==n[a]&&(n[a]=e),null!=o&&delete o[a];for(var s=this.getEdges(e),l=[],c=0;c<s.length;c++)l[c]=this.getVisibleTerminal(s[c],!0)===e;for(c=0;c<s.length;c++)if(!t||l[c]){for(var h=this.getVisibleTerminal(s[c],!l[c]),d=1,p=0;p<s.length;p++)if(p!==c){var u=l[p];this.getVisibleTerminal(s[p],!u)===h&&(u?d++:d--)}d>=0&&(n=this.traverse(h,t,s[c],n,r,o))}}else if(null==n[a])for(c=0;c<r.length;c++){var f=r[c];if(null!=f[a]){for(var g=0,m=Object.keys(f);g<m.length;g++){var y=m[g];n[y]=f[y]}return r.splice(c,1),n}}}return n},e.prototype.getModelBounds=function(e){e=e.slice();for(var t=null,i=null,n=0;n<e.length;n++)if(t=e[n].geometry,i){var r=Math.max(i.x+i.width,t.x+t.width),o=Math.max(i.y+i.height,t.y+t.height);i.x=Math.min(i.x,t.x),i.y=Math.min(i.y,t.y),i.width=r-i.x,i.height=o-i.y}else i={x:t.x,y:t.y,width:t.width,height:t.height};return i},e.prototype.doLayout=function(e,t,i,n){this.nameTable=t;var r={horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,orientation:i.orientation,marginX:i.margin.left,marginY:i.margin.top};this.vertices=[];for(var o={},a=0;a<e.length;a++){var s=this.createVertex(e[a],e[a].id,0,0,e[a].actualSize.width,e[a].actualSize.height);this.vertices.push(s),o[s.name]=s}var l,c=[];l=this.findRoots(o);for(a=0;a<l.length;a++){var h={};c.push(h),this.traverse(l[a],!0,null,h,c,o)}var d={marginX:0,marginY:0};for(a=0;a<c.length;a++){h=c[a];for(var p=[],u=0,f=Object.keys(h);u<f.length;u++){var g=f[u];p.push(h[g])}var m=new Pf(this,p,l,r);this.cycleStage(m),this.layeringStage(m),this.crossingStage(m),d=this.placementStage(m,d.marginX,d.marginY)}var y=this.getModelBounds(this.vertices);this.updateMargin(i,r,y,n);for(a=0;a<this.vertices.length;a++){var v=this.vertices[a];if(v){var b=this.nameTable[v.name];b.offsetX=0,b.offsetY=0;var w=v.geometry.x-(b.offsetX-b.actualSize.width/2)+r.marginX,x=v.geometry.y-(b.offsetY-b.actualSize.height/2)+r.marginY,S=w,C=x;"BottomToTop"===r.orientation?C=y.height-x:"RightToLeft"===r.orientation&&(S=y.width-w),b.offsetX+=S-b.offsetX,b.offsetY+=C-b.offsetY}}for(a=0;a<this.vertices.length;a++)this.isNodeOverLap(this.nameTable[this.vertices[a].name],i)},e.prototype.calculateRectValue=function(e){var t={x:0,y:0,right:0,bottom:0,height:0,width:0};return t.x=e.offsetX-e.actualSize.width/2,t.right=e.offsetX+e.actualSize.width/2,t.y=e.offsetY-e.actualSize.height/2,t.bottom=e.offsetY+e.actualSize.height/2,t},e.prototype.isNodeOverLap=function(e,t){for(var i={x:0,y:0,right:0,bottom:0,height:0,width:0},n=0;n<this.vertices.length;n++){var r,o={x:0,y:0,width:0,height:0};r=this.nameTable[this.vertices[n].value],e.id!==r.id&&0!==r.offsetX&&0!==r.offsetY&&(i=this.calculateRectValue(e),o=this.calculateRectValue(r),this.isIntersect(o,i,t)&&("TopToBottom"===t.orientation||"BottomToTop"===t.orientation?e.offsetX+=t.horizontalSpacing:e.offsetY+=t.verticalSpacing,this.isNodeOverLap(e,t)))}},e.prototype.isIntersect=function(e,t,i){return!(Math.floor(e.right+i.horizontalSpacing)<=Math.floor(t.x)||Math.floor(e.x-i.horizontalSpacing)>=Math.floor(t.right)||Math.floor(e.y-i.verticalSpacing)>=Math.floor(t.bottom)||Math.floor(e.bottom+i.verticalSpacing)<=Math.floor(t.y))},e.prototype.updateMargin=function(e,t,i,n){var r,o={x:0,y:0,width:n.x,height:n.y},a=i.x,s=i.y,l=i.x+i.width,c=i.y+i.height;if(r=e.bounds?e.bounds:o,"TopToBottom"===t.orientation||"BottomToTop"===t.orientation){switch(e.horizontalAlignment){case"Auto":case"Left":t.marginX=r.x-a+e.margin.left;break;case"Right":t.marginX=r.x+r.width-e.margin.right-l;break;case"Center":t.marginX=r.x+r.width/2-(a+l)/2}switch(e.verticalAlignment){case"Top":var h;h=r.y+e.margin.top,t.marginY="TopToBottom"===t.orientation?h:-h;break;case"Bottom":var d;d=r.y+r.height-e.margin.bottom,t.marginY="TopToBottom"===t.orientation?d-c:-(d-c);break;case"Auto":case"Center":var p=void 0;p=r.y+r.height/2,t.marginY="TopToBottom"===t.orientation?p-(s+c)/2:(s+c)/2-p}}else{switch(e.horizontalAlignment){case"Auto":case"Left":var u;u=r.x+e.margin.left,t.marginX="LeftToRight"===t.orientation?u:-u;break;case"Right":var f;f=r.x+r.width-e.margin.right,t.marginX="LeftToRight"===t.orientation?f-l:l-f;break;case"Center":p=void 0;p=r.width/2+r.x,t.marginX="LeftToRight"===t.orientation?p-(s+c)/2:(a+l)/2-p}switch(e.verticalAlignment){case"Top":t.marginY=r.y+e.margin.top-a;break;case"Auto":case"Center":t.marginY=r.y+r.height/2-(s+c)/2;break;case"Bottom":t.marginY=r.y+r.height-e.margin.bottom-c}}},e.prototype.placementStage=function(e,t,i){var n=this.coordinateAssignment(t,i,parent,e);return n.model=e,n.widestRankValue=null,this.placementStageExecute(n),{marginX:n.marginX+e.layout.horizontalSpacing,marginY:n.marginY+e.layout.verticalSpacing}},e.prototype.coordinateAssignment=function(e,t,i,n){var r={};return"TopToBottom"===n.layout.orientation||"BottomToTop"===n.layout.orientation?(r.horizontalSpacing=n.layout.horizontalSpacing,r.verticalSpacing=n.layout.verticalSpacing):(r.horizontalSpacing=n.layout.verticalSpacing,r.verticalSpacing=n.layout.horizontalSpacing),r.orientation="north",r.marginX=r.marginX=e,r.marginY=r.marginY=t,r},e.prototype.calculateWidestRank=function(e,t,i){var n=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(n=!0);var r=-e.verticalSpacing,o=0;e.rankSizes=[],e.rankOffset=[];for(var a=i.maxRank;a>=0;a--){for(var s=0,l=i.ranks[a],c=n?e.marginY:e.marginX,h=0;h<l.length;h++){var d=l[h];if(this.crossReduction.isVertex(d)){var p=d;if(p.cell&&(p.cell.inEdges||p.cell.outEdges)){var u=this.nameTable[p.cell.name];p.width=u.actualSize.width,p.height=u.actualSize.height,s=Math.max(s,n?p.width:p.height)}}else if(d){var f=d,g=1;null!=f.edges&&(g=f.edges.length),d.width=10*(g-1)}n&&(d.height||(d.height=0)),c+=(n?d.height:d.width)/2,this.setXY(d,a,c,!!n),this.setTempVariable(d,a,c),(c+=(n?d.height:d.width)/2+e.horizontalSpacing)>e.widestRankValue&&(e.widestRankValue=c,e.widestRank=a),e.rankSizes[a]=c}e.rankOffset[a]=r;var m=s/2+o/2+e.verticalSpacing;o=s,"north"===e.orientation||"west"===e.orientation?r+=m:r-=m;for(h=0;h<l.length;h++){var y=l[h];this.setXY(y,a,r,!n)}}},e.prototype.setTempVariable=function(e,t,i){this.crossReduction.isVertex(e)?e.temp[0]=i:e.temp[t-e.minRank-1]=i},e.prototype.setXY=function(e,t,i,n){e&&e.cell&&(e.cell.inEdges||e.cell.outEdges?n?e.y[0]=i:e.x[0]=i:n?e.y[t-e.minRank-1]=i:e.x[t-e.minRank-1]=i)},e.prototype.rankCoordinates=function(e,t,i,n){var r=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(r=!0);for(var o=n.ranks[t],a=0,s=(r?e.marginY:e.marginX)+(e.widestRankValue-e.rankSizes[t])/2,l=0;l<o.length;l++){var c=o[l];if(this.crossReduction.isVertex(c)){var h=this.nameTable[c.cell.name];c.width=h.actualSize.width,c.height=h.actualSize.height,a=Math.max(a,c.height)}else{var d=c,p=1;null!=d.edges&&(p=d.edges.length),r?c.height=10*(p-1):c.width=10*(p-1)}var u=(r?c.height:c.width)/2;s+=u,this.setXY(c,t,s,!!r),this.setTempVariable(c,t,s),s+=u+e.horizontalSpacing}},e.prototype.initialCoords=function(e,t,i){this.calculateWidestRank(e,t,i);for(var n=e.widestRank;n>=0;n--)n<i.maxRank&&this.rankCoordinates(e,n,t,i);for(n=e.widestRank+1;n<=i.maxRank;n++)n>0&&this.rankCoordinates(e,n,t,i)},e.prototype.isAncestor=function(e,t){if(null!=t&&null!=e.hashCode&&null!=t.hashCode&&e.hashCode.length<t.hashCode.length){if(e.hashCode===t.hashCode)return!0;if(null==e.hashCode||null==e.hashCode)return!1;for(var i=0;i<e.hashCode.length;i++)if(e.hashCode[i]!==t.hashCode[i])return!1;return!0}return!1},e.prototype.weightedCellSorter=function(e,t){var i={};return i.cell=e||null,i.weightedValue=t||0,i.visited=!1,i.rankIndex=null,i},e.prototype.minNode=function(e,t){for(var i=[],n={map:{}},r=[],o=0;o<=t.maxRank;o++){r[o]=t.ranks[o];for(var a=0;a<r[o].length;a++){var s=r[o][a],l=this.weightedCellSorter(s,o);l.rankIndex=a,l.visited=!0,i.push(l),t.setDictionaryForSorter(n,s,l,!0)}}for(var c=10*i.length,h=0;i.length>0&&h<=c;){var d=i.shift(),p=d.cell,u=d.weightedValue,f=d.rankIndex,g=this.crossReduction.getConnectedCellsOnLayer(p,u),m=this.crossReduction.getConnectedCellsOnLayer(p,u,!0),y=g.length,v=m.length,b=this.medianXValue(e,g,u+1),w=this.medianXValue(e,m,u-1),x=y+v,S=this.crossReduction.getTempVariable(p,u),C=S;x>0&&(C=(b*y+w*v)/x),1===y&&1===v?C=w*v/v:1===y&&(C=b*y/y);var P=!1,O=void 0;if(C<S-1)if(0===f)O=C,P=!0;else{var E=r[u][f-1],T=this.crossReduction.getTempVariable(E,u);(T=T+E.width/2+e.intraCellSpacing+p.width/2)<C?(O=C,P=!0):T<this.crossReduction.getTempVariable(p,u)-1&&(O=T,P=!0)}else if(C>S+1){if(f===r[u].length-1)O=C,P=!0;else{var I=r[u][f+1],k=this.crossReduction.getTempVariable(I,u);(k=k-I.width/2-e.intraCellSpacing-p.width/2)>C?(O=C,P=!0):k>this.crossReduction.getTempVariable(p,u)+1&&(O=k,P=!0)}}P&&(this.setTempVariable(p,u,O),this.updateNodeList(i,n,g,t),this.updateNodeList(i,n,m,t)),this.crossReduction.isVertex(d.cell)&&(d.visited=!1),h++}},e.prototype.updateNodeList=function(e,t,i,n){for(var r=0;r<i.length;r++){var o=i[r],a=n.getDictionaryForSorter(t,o);null!=a&&!1===a.visited&&(a.visited=!0,e.push(a))}},e.prototype.medianXValue=function(e,t,i){if(0===t.length)return 0;for(var n=[],r=0;r<t.length;r++)n[r]=this.crossReduction.getTempVariable(t[r],i);if(n.sort((function(e,t){return e-t})),t.length%2===1)return n[Math.floor(t.length/2)];var o=t.length/2;return(n[o-1]+n[o])/2},e.prototype.placementStageExecute=function(e){var t=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(t=!0),e.jettyPositions={};var i=e.model;t?e.currentYDelta=0:e.currentXDelta=0,this.initialCoords(e,{model:i},i),this.minNode(e,i);var n=1e8;e.maxIterations||(e.maxIterations=8);for(var r=0;r<e.maxIterations;r++){if((t?e.currentYDelta:e.currentXDelta)<n){for(var o=0;o<i.ranks.length;o++)for(var a=i.ranks[o],s=0;s<a.length;s++){var l=a[s];this.setXY(l,o,this.crossReduction.getTempVariable(l,o),!!t)}n=t?e.currentYDelta:e.currentXDelta}t?e.currentYDelta=0:e.currentXDelta=0}this.setCellLocations(e,i)},e.prototype.setCellLocations=function(e,t){for(var i=this.getValues(t.vertexMapper),n=0;n<i.length;n++)this.setVertexLocation(e,i[n])},e.prototype.garphModelsetVertexLocation=function(e,t,i,n){e.model;var r=t.geometry,o=null;return null!=r&&(o={x:i,y:n,width:r.width,height:r.height},r.x===i&&r.y===n||(t.geometry=o)),o},e.prototype.setVertexLocation=function(e,t){var i=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(i=!0);var n=t.cell,r=t.x[0]-t.width/2,o=t.y[0]-t.height/2;this.garphModelsetVertexLocation(e,n,r,o),i?(e.marginY||(e.marginY=0),e.marginY=Math.max(e.marginY,o+t.height)):(e.marginX||(e.marginX=0),e.marginX=Math.max(e.marginX,r+t.width))},e.prototype.getValues=function(e){var t=[];if(e.map)for(var i=0,n=Object.keys(e.map);i<n.length;i++){var r=n[i];t.push(e.map[r])}return t},e.prototype.crossingStage=function(e){this.crossReduction.execute(e)},e.prototype.layeringStage=function(e){this.initialRank(e),this.fixRanks(e)},e.prototype.initialRank=function(e){for(var t=e.startNodes,i=e.getDictionaryValues(e.vertexMapper),n=t.slice();t.length>0;){for(var r=(d=t[0]).connectsAsTarget,o=d.connectsAsSource,a=!0,s=1e8,l=0;l<r.length;l++){if(5270620!==(f=r[l]).temp[0]){a=!1;break}var c=f.source;s=Math.min(s,c.temp[0]-1)}if(a){if(d.temp[0]=s,e.maxRank||(e.maxRank=1e8),e.maxRank=Math.min(e.maxRank,s),null!=o)for(l=0;l<o.length;l++){(f=o[l]).temp[0]=5270620,-1===(c=f.target).temp[0]&&(t.push(c),c.temp[0]=-2)}t.shift()}else{var h=t.shift();if(t.push(d),h===d&&1===t.length)break}}for(l=0;l<i.length;l++)i[l].temp[0]-=e.maxRank;for(l=0;l<n.length;l++)for(var d,p=0,u=(r=(d=n[l]).connectsAsSource,0);u<r.length;u++){var f;c=(f=r[u]).target;d.temp[0]=Math.max(p,c.temp[0]+1),p=d.temp[0]}e.maxRank=1e8-e.maxRank},e.prototype.fixRanks=function(e){e.fixRanks()},e.prototype.cycleStage=function(e){var t={};e.startNodes=[];for(var i=e.getDictionaryValues(e.vertexMapper),n=[],r=0;r<i.length;r++)i[r].temp[0]=-1,n[i[r].id]=i[r];var o=null;if(null!=e.roots){var a=e.roots;o=[];for(r=0;r<a.length;r++)o[r]=e.getDictionary(e.vertexMapper,a[r]),null!=o[r]&&e.startNodes.push(o[r])}e.visit("removeParentConnection",o,!0,null,{seenNodes:t,unseenNodes:n});var s=e.clone(t,null,!0);e.visit("removeNodeConnection",n,!0,s,{seenNodes:t,unseenNodes:n})},e.prototype.remove=function(e,t){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),e},e.prototype.invert=function(e,t){var i=e.source;e.source=e.target,e.target=i,e.isReversed=!e.isReversed},e.prototype.getEdgesBetween=function(e,t,i){i=null!=i&&i;for(var n=this.getEdges(e),r=[],o=0;o<n.length;o++){var a=this.getVisibleTerminal(n[o],!0),s=this.getVisibleTerminal(n[o],!1);(a===e&&s===t||!i&&a===t&&s===e)&&r.push(n[o])}return r},e}(),Pf=function(){function e(e,t,i,n){this.multiObjectIdentityCounter=0,this.dfsCount=0,this.hierarchicalUtil=new Cf,this.roots=i,this.vertexMapper={map:{}};var r=[];this.layout=n,this.maxRank=1e8,this.hierarchicalLayout=e,this.createInternalCells(e,t,r);for(var o=0;o<t.length;o++){for(var a=r[o].connectsAsSource,s=0;s<a.length;s++){var l=a[s],c=l.edges;if(null!=c&&c.length>0){var h=c[0],d=e.getVisibleTerminal(h,!1),p=this.getDictionary(this.vertexMapper,d);r[o]===p&&(d=e.getVisibleTerminal(h,!0),p=this.getDictionary(this.vertexMapper,d)),null!=p&&r[o]!==p&&(l.target=p,0===p.connectsAsTarget.length&&(p.connectsAsTarget=[]),p.connectsAsTarget.indexOf(l)<0&&p.connectsAsTarget.push(l))}}r[o].temp[0]=1}}return e.prototype.createInternalCells=function(e,t,i){for(var n=0;n<t.length;n++){i[n]={x:[],y:[],temp:[],cell:t[n],id:t[n].name,connectsAsTarget:[],connectsAsSource:[]},this.setDictionary(this.vertexMapper,t[n],i[n]);var r=e.getEdges(t[n]);i[n].connectsAsSource=[];for(var o=0;o<r.length;o++){var a=e.getVisibleTerminal(r[o],!1);if(a!==t[n]){var s=e.getEdgesBetween(t[n],a,!1),l=e.getEdgesBetween(t[n],a,!0);if(null!=s&&s.length>0&&2*l.length>=s.length){for(var c={x:[],y:[],temp:[],edges:s,ids:[]},h=0;h<s.length;h++)c.ids.push(s[h].id);c.source=i[n],i[n].connectsAsSource||(i[n].connectsAsSource=[]),i[n].connectsAsSource.indexOf(c)<0&&i[n].connectsAsSource.push(c)}}}i[n].temp[0]=0}},e.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var i=null;if(null!=this.roots){var n=this.roots;i=[];for(t=0;t<n.length;t++){var r=n[t],o=this.getDictionary(this.vertexMapper,r);i[t]=o}}this.visit("updateMinMaxRank",i,!1,null,{seenNodes:null,unseenNodes:null,rankList:e})},e.prototype.updateMinMaxRank=function(e,t,i){i.seenNodes,i.unseenNodes;var n=i.parent,r=i.root,o=i.edge,a=i.rankList;if((r.maxRank||0===r.maxRank||(r.maxRank=-1),r.minRank||0===r.minRank||(r.minRank=-1),0===t&&r.maxRank<0&&r.minRank<0&&(a[r.temp[0]].push(r),r.maxRank=r.temp[0],r.minRank=r.temp[0],r.temp[0]=a[r.maxRank].length-1),null!=n&&null!=o)&&n.maxRank-r.maxRank>1){o.maxRank=n.maxRank,o.minRank=r.maxRank,o.temp=[],o.x=[],o.y=[];for(var s=o.minRank+1;s<o.maxRank;s++)a[s].push(o),this.hierarchicalUtil.setTempVariable(o,s,a[s].length-1)}},e.prototype.setDictionary=function(e,t,i){var n=t.name,r=e.map[n];return e.map[n]=i,r},e.prototype.setDictionaryForSorter=function(e,t,i,n){var r=t.id,o=e.map[r];return e.map[r]=i,o},e.prototype.getDictionary=function(e,t){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=t.name;return i?e.map[i]:t.layoutObjectId?e.map[t.layoutObjectId]:(t.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,t.layoutObjectId)},e.prototype.getDictionaryForSorter=function(e,t){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=t.id;return i?e.map[i]:t.layoutObjectId?e.map[t.layoutObjectId]:(t.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,t.layoutObjectId)},e.prototype.getDictionaryValues=function(e){for(var t=[],i=0,n=Object.keys(e.map);i<n.length;i++){var r=n[i];t.push(e.map[r])}return t},e.prototype.visit=function(e,t,i,n,r){r.seenNodes,r.unseenNodes,r.rankList;if(null!=t){for(var o=0;o<t.length;o++){var a=t[o];null!=a&&(null==n&&(n=new Object),r.parent=null,r.root=a,r.edge=null,i?(a.hashCode=[],a.hashCode[0]=this.dfsCount,a.hashCode[1]=o,this.extendedDfs(e,n,o,0,r)):this.depthFirstSearch(e,n,0,r))}this.dfsCount++}},e.prototype.depthFirstSearch=function(e,t,i,n){n.seenNodes,n.unseenNodes,n.rankList,n.parent;var r=n.root;n.edge;if(null!=r){var o=r.id;if(null==t[o]){t[o]=r,this.updateConnectionRank(e,i,0,n);for(var a=r.connectsAsSource.slice(),s=0;s<a.length;s++){var l=a[s],c=l.target;n.parent=r,n.root=c,n.edge=l,this.depthFirstSearch(e,t,i+1,n)}}else this.updateConnectionRank(e,i,1,n)}},e.prototype.updateConnectionRank=function(e,t,i,n){var r=n.parent,o=n.root,a=n.edge;if("removeParentConnection"===e||"removeNodeConnection"===e){var s="removeNodeConnection"===e;this.removeConnectionEdge(r,o,a,t,n,s)}"updateMinMaxRank"===e&&this.updateMinMaxRank(t,i,n)},e.prototype.removeConnectionEdge=function(e,t,i,n,r,o){var a=r.seenNodes,s=r.unseenNodes;r.rankList;this.hierarchicalUtil.isAncestor(t,e)&&(this.hierarchicalUtil.invert(i,0),this.hierarchicalUtil.remove(i,e.connectsAsSource),o?(t.connectsAsSource.push(i),e.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,t.connectsAsTarget)):(e.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,t.connectsAsTarget),t.connectsAsSource.push(i))),a[t.id]=t,delete s[t.id]},e.prototype.extendedDfs=function(e,t,i,n,r){r.seenNodes,r.unseenNodes,r.rankList;var o=r.parent,a=r.root;r.edge;if(null!=a){if(null!=o&&(null==a.hashCode||a.hashCode[0]!==o.hashCode[0])){var s=o.hashCode.length+1;a.hashCode=o.hashCode.slice(),a.hashCode[s-1]=i}var l=a.id;if(null==t[l]){t[l]=a,this.updateConnectionRank(e,n,0,r);for(var c=a.connectsAsSource.slice(),h=0;h<c.length;h++){var d=c[h],p=d.target;r.parent=a,r.root=p,r.edge=d,this.extendedDfs(e,t,h,n+1,r)}}else this.updateConnectionRank(e,n,1,r)}},e.prototype.clone=function(e,t,i){if(i=null!=i&&i,null!=e&&"function"===typeof e.constructor){for(var n=e.constructor(),r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];"layoutObjectId"!==a&&(null==t||t.indexOf(a)<0)&&(i||"object"!==typeof e[a])&&(n[a]=e[a])}return n}return null},e}(),Of=function(){function e(){}return e.prototype.calculateCrossings=function(e){for(var t=e.ranks.length,i=0,n=1;n<t;n++)i+=this.calculateRankCrossing(n,e);return i},e.prototype.getTempVariable=function(e,t){return e?this.isVertex(e)?e.temp[0]:e.temp[t-e.minRank-1]:0},e.prototype.calculateRankCrossing=function(e,t){for(var i=0,n=t.ranks[e],r=t.ranks[e-1],o=[],a=0;a<n.length;a++){for(var s=n[a],l=this.getTempVariable(s,e),c=this.getConnectedCellsOnLayer(s,e,!0),h=[],d=0;d<c.length;d++){var p=c[d],u=this.getTempVariable(p,e-1);h.push(u)}h.sort((function(e,t){return e-t})),o[l]=h}var f=[];for(a=0;a<o.length;a++)f=f.concat(o[a]);for(var g=1;g<r.length;)g<<=1;var m=2*g-1;g-=1;var y=[];for(a=0;a<m;++a)y[a]=0;for(a=0;a<f.length;a++){var v=f[a]+g;for(++y[v];v>0;)v%2&&(i+=y[v+1]),++y[v=v-1>>1]}return i},e.prototype.execute=function(e){this.nestedBestRanks=[];for(var t=0;t<e.ranks.length;t++)this.nestedBestRanks[t]=e.ranks[t].slice();var i=0,n=this.calculateCrossings(e);for(t=0;t<24&&i<2;t++){this.weightedMedian(t,e);var r=this.calculateCrossings(e);if(r<n){n=r,i=0;for(var o=0;o<this.nestedBestRanks.length;o++)for(var a=e.ranks[o],s=0;s<a.length;s++){var l=a[s],c=this.nestedBestRanks[o][l.temp[0]],h=!0;l.edges&&c&&!c.edges&&(h=!1),c&&h&&(this.nestedBestRanks[o][l.temp[0]]=l)}}else{i++;for(o=0;o<this.nestedBestRanks.length;o++)for(a=e.ranks[o],s=0;s<a.length;s++){l=a[s];this.setTempVariable(l,o,s)}}if(0===n)break}var d=[],p=[];for(t=0;t<e.maxRank+1;t++)p[t]=[],d[t]=p[t];for(t=0;t<this.nestedBestRanks.length;t++)for(o=0;o<this.nestedBestRanks[t].length;o++)p[t].push(this.nestedBestRanks[t][o]);e.ranks=d},e.prototype.isVertex=function(e){return!(!e||!e.cell||!e.cell.inEdges&&!e.cell.outEdges)},e.prototype.weightedMedian=function(e,t){var i=e%2===0;if(i)for(var n=t.maxRank-1;n>=0;n--)this.medianRank(n,i);else for(n=1;n<t.maxRank;n++)this.medianRank(n,i)},e.prototype.getConnectedCellsOnLayer=function(e,t,i){void 0===i&&(i=!1);var n="nextLayerConnectedCells",r="connectsAsTarget";if(i&&(n="previousLayerConnectedCells",r="connectsAsSource"),e){if(this.isVertex(e)){if(null==e[n]){e[n]=[],e[n][0]=[];for(var o=0;o<e[r].length;o++){var a=e[r][o];void 0===a.maxRank&&(a.maxRank=-1),-1===a.maxRank||(i?a.minRank===t-1:a.maxRank===t+1)?e[n][0].push(i?a.target:a.source):e[n][0].push(a)}}return e[n][0]}if(null==e[n]){e[n]=[];for(o=0;o<e.temp.length;o++)e[n][o]=[],o===(i?0:e.temp.length-1)?e[n][o].push(i?e.target:e.source):e[n][o].push(e)}return e[n][t-e.minRank-1]}return null},e.prototype.medianValue=function(e,t){for(var i=[],n=0,r=0;r<e.length;r++){var o=e[r];i[n++]=this.getTempVariable(o,t)}if(i.sort((function(e,t){return e-t})),n%2===1)return i[Math.floor(n/2)];if(2===n)return(i[0]+i[1])/2;var a=n/2,s=i[a-1]-i[0],l=i[n-1]-i[a];return(i[a-1]*l+i[a]*s)/(s+l)},e.prototype.setTempVariable=function(e,t,i){e&&(e.temp[0]=i)},e.prototype.medianRank=function(e,t){for(var i=this.nestedBestRanks[e].length,n=[],r=[],o=0;o<i;o++){var a=this.nestedBestRanks[e][o],s={medianValue:0};s.cell=a;var l=void 0,c=void 0;c=t?e+1:e-1,null!=(l=t?this.getConnectedCellsOnLayer(a,e):this.getConnectedCellsOnLayer(a,e,!0))&&0!==l.length?(s.medianValue=this.medianValue(l,c),n.push(s)):r[this.getTempVariable(a,e)]=!0}n.sort(this.compare);for(o=0;o<i;o++)if(null==r[o]&&n.length>0){a=n.shift().cell;this.setTempVariable(a,e,o)}},e.prototype.compare=function(e,t){if(null!=e&&null!=t){if(t.medianValue>e.medianValue)return-1;if(t.medianValue<e.medianValue)return 1}return 0},e}(),Ef=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tf=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},If="e-acrdn-item",kf="e-acrdn-header",Af="e-acrdn-panel",Mf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ef(t,e),Tf([zt("SlideDown")],t.prototype,"effect",void 0),Tf([zt(400)],t.prototype,"duration",void 0),Tf([zt("linear")],t.prototype,"easing",void 0),t}(ii),Df=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ef(t,e),Tf([Bt({effect:"SlideUp",duration:400,easing:"linear"},Mf)],t.prototype,"collapse",void 0),Tf([Bt({effect:"SlideDown",duration:400,easing:"linear"},Mf)],t.prototype,"expand",void 0),t}(ii),Lf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ef(t,e),Tf([zt(null)],t.prototype,"content",void 0),Tf([zt(null)],t.prototype,"header",void 0),Tf([zt(null)],t.prototype,"cssClass",void 0),Tf([zt(null)],t.prototype,"iconCss",void 0),Tf([zt(!1)],t.prototype,"expanded",void 0),Tf([zt(!0)],t.prototype,"visible",void 0),Tf([zt(!1)],t.prototype,"disabled",void 0),t}(ii),Rf=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},n}return Ef(t,e),t.prototype.destroy=function(){var t=this,i=this.element;if(e.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(i.children).forEach((function(e){e.classList.contains("blazor-template")||i.removeChild(e)})),this.trgtEle)for(;this.ctrlTem.firstElementChild;)i.appendChild(this.ctrlTem.firstElementChild);i.classList.remove("e-acrdn-root"),i.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach((function(e){t.element.removeAttribute(e)})),!this.isNested&&Jt&&this.removeRippleEffect()},t.prototype.preRender=function(){var e=yt(this.element,"."+Af);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),f(e)?this.element.classList.add("e-acrdn-root"):(e.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,"e-rtl")},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.render=function(){this.isServerRendered?this.wireFocusEvents():(this.initializeheaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl()),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=b(this.width),t=b(this.height);vt(this.element,{width:e,height:t});f(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),ft(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0&&(!w()||this.isStringTemplate)?gt("div",this.element):null,this.renderItems(),this.initItemExpand()},t.prototype.wireFocusEvents=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+If));e<t.length;e++){var i=t[e],n=i.querySelector("."+kf);i.childElementCount>0&&n&&(ce.clearEvents(n),ce.add(n,"focus",this.focusIn,this),ce.add(n,"blur",this.focusOut,this))}},t.prototype.unwireEvents=function(){ce.remove(this.element,"click",this.clickHandler),f(this.keyModule)||this.keyModule.destroy()},t.prototype.wireEvents=function(){ce.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||(this.removeRippleEffect=qt(this.element,{selector:"."+kf})),this.isNested||(this.keyModule=new wi(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},t.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return ze(document.querySelector(e).innerHTML.trim())}catch(t){return ze(e)}},t.prototype.initializeheaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},t.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},t.prototype.getheaderTemplate=function(){return this.headerTemplateFn},t.prototype.getItemTemplate=function(){return this.itemTemplateFn},t.prototype.focusIn=function(e){e.target.parentElement.classList.add("e-item-focus")},t.prototype.focusOut=function(e){e.target.parentElement.classList.remove("e-item-focus")},t.prototype.ctrlTemplate=function(){var e;this.ctrlTem=this.element.cloneNode(!0);var t=gt(".e-accordion-container",this.element);e=t?t.children:this.element.children;var i=[];[].slice.call(e).forEach((function(e){i.push({header:e.childElementCount>0&&e.children[0]?e.children[0]:"",content:e.childElementCount>1&&e.children[1]?e.children[1]:""}),e.parentNode.removeChild(e)})),t&&this.element.removeChild(t),this.setProperties({items:i},!0)},t.prototype.toggleIconGenerate=function(){var e=this.createElement("div",{className:"e-toggle-icon"}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e},t.prototype.initItemExpand=function(){var e=this.initExpand.length;if(0!==e)if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(var t=0;t<e;t++)this.expandItem(!0,this.initExpand[t])},t.prototype.renderItems=function(){var e,t,i=this,n=this.element;if(f(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach((function(e,r){t=i.renderInnerItem(e,r),n.appendChild(t),t.childElementCount>0&&(ce.add(t.querySelector("."+kf),"focus",i.focusIn,i),ce.add(t.querySelector("."+kf),"blur",i.focusOut,i))}));else{var r=this.items;n&&r.length>0&&r.forEach((function(t,r){e=i.renderInnerItem(t,r),n.appendChild(e),e.childElementCount>0&&(ce.add(e.querySelector("."+kf),"focus",i.focusIn,i),ce.add(e.querySelector("."+kf),"blur",i.focusOut,i))}))}},t.prototype.clickHandler=function(e){var t,i,n=this,r=e.target,o=this.getItems(),a={};if(yt(r,".e-accordion")===this.element){r.classList.add("e-target");var s,l=yt(r,"."+If),c=yt(r,"."+kf),h=yt(r,"."+Af);if(l&&(f(c)||f(h))&&(c=l.children[0],h=l.children[1]),c&&(i=gt(".e-toggle-icon",c)),c?s=yt(c,"."+If):h&&(s=yt(h,"."+If)),t=this.getIndexByItem(l),s&&(a.item=o[this.getIndexByItem(s)]),a.originalEvent=e,!(!f(i)&&l.childElementCount<=1)||!f(h)&&f(gt("."+kf+" .e-toggle-icon",s)))this.afterContentRender(r,a,l,c,h,s);else if(this.isServerRendered){var d=l.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",t).then((function(){n.isDestroyed||n.afterContentRender(r,a,l,c,h,s)})):this.interopAdaptor.invokeMethodAsync("OnDataClick",d).then((function(){n.isDestroyed||n.afterContentRender(r,a,l,c,h,s)}))}else l.appendChild(this.contentRendering(t)),this.ariaAttrUpdate(l),this.afterContentRender(r,a,l,c,h,s)}},t.prototype.afterContentRender=function(e,t,i,n,r,o){var a=this,s=[];this.trigger("clicked",t);var l=r&&!f(gt(".e-target",r)),c=r&&!f(gt(".e-accordion",r))&&f(yt(e,".e-acrdn-panel .e-accordion")),h=r&&f(gt(".e-accordion",r))||!(yt(e,".e-accordion")===this.element);if(l=l&&(c||h),e.classList.remove("e-target"),!(e.classList.contains(Af)||e.classList.contains("e-acrdn-content")||l)){var d=this.element.querySelector(".e-accordion-container"),p=d?d.children:this.element.children;[].slice.call(p).forEach((function(e){e.classList.contains("e-active")&&s.push(e)}));var u=[].slice.call(this.element.querySelectorAll("."+If+" [e-animate]"));if(u.length>0)for(var g=0,m=u;g<m.length;g++){var y=m[g];s.push(y.parentElement)}var v=-1!==s.indexOf(o)&&"true"===r.getAttribute("e-animate"),b=!1;if(!f(i)&&!f(n)){var w=gt("."+Af,i),x=yt(i,".e-acrdn-root").querySelector(".e-expand-state");if(f(w))return;b=x===i,!lt(w)||v&&!o.classList.contains("e-selected")?(s.length>0&&"Single"===this.expandMode&&!v&&s.forEach((function(e){a.collapse(gt("."+Af,e)),e.classList.remove("e-expand-state")})),this.expand(w)):this.collapse(w),f(x)||b||x.classList.remove("e-expand-state")}}},t.prototype.eleMoveFocus=function(e,t,i){var n,r=yt(i,"."+If);i===t?n=("moveUp"===e?i.lastElementChild:i).querySelector("."+kf):i.classList.contains(kf)&&(r="moveUp"===e?r.previousElementSibling:r.nextElementSibling)&&(n=gt("."+kf,r)),n&&n.focus()},t.prototype.keyActionHandler=function(e){var t=e.target;if(!f(yt(e.target,kf))||t.classList.contains("e-accordion")||t.classList.contains(kf)){var i,n=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,n,t);break;case"space":case"enter":!f(i=t.nextElementSibling)&&i.classList.contains(Af)?"true"!==i.getAttribute("e-animate")&&t.click():t.click();break;case"home":case"end":("home"===e.action?n.firstElementChild.children[0]:n.lastElementChild.children[0]).focus()}}},t.prototype.headerEleGenerate=function(){var e=this.createElement("div",{className:kf,id:m("acrdn_header")});return ft(e,{tabindex:"0",role:"heading","aria-selected":"false","aria-disabled":"false","aria-level":this.getItems().length.toString()}),e},t.prototype.renderInnerItem=function(e,t){var i;if((i=this.createElement("div",{className:If})).id=m("acrdn_item"),ft(i,{"aria-expanded":"false"}),this.headerTemplate){var n=this.headerEleGenerate(),r=this.createElement("div",{className:"e-acrdn-header-content"});return n.appendChild(r),ht(this.getheaderTemplate()(e,this,"headerTemplate",this.element.id+"_headerTemplate",!1),r),i.appendChild(n),n.appendChild(this.toggleIconGenerate()),this.add(i,"e-select"),i}if(e.header&&this.angularnativeCondiCheck(e,"header")){this.enableHtmlSanitizer&&"string"===typeof e.header&&(e.header=Ai.sanitize(e.header));n=this.headerEleGenerate(),r=this.createElement("div",{className:"e-acrdn-header-content"});n.appendChild(r),n.appendChild(this.fetchElement(r,e.header,t,!0)),i.appendChild(n)}var o=gt("."+kf,i);if(!e.expanded||f(t)||this.enablePersistence||-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&ot([i],e.cssClass.split(" ")),e.disabled&&ot([i],"e-overlay"),!1===e.visible&&ot([i],"e-hide"),e.iconCss){var a=this.createElement("div",{className:"e-acrdn-header-icon"}),s=this.createElement("span",{className:e.iconCss+" e-icons"});a.appendChild(s),f(o)?((o=this.headerEleGenerate()).appendChild(a),i.appendChild(o)):o.insertBefore(a,o.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){var l=this.toggleIconGenerate();f(o)&&(o=this.headerEleGenerate(),i.appendChild(o)),o.appendChild(l),this.add(i,"e-select")}return i},t.prototype.angularnativeCondiCheck=function(e,t){var i="content"===t?e.content:e.header;if(this.isAngular&&!f(i.elementRef)){var n=i.elementRef.nativeElement.data;if(f(n)||""===n||-1===n.indexOf("bindings="))return!0;var r=JSON.parse(i.elementRef.nativeElement.data.replace("bindings=",""));return!(!f(r)&&"false"===r["ng-reflect-ng-if"])}return!0},t.prototype.fetchElement=function(e,t,i,n){var r,o,a;try{if(document.querySelectorAll(t).length){var s=document.querySelector(t);o=s.outerHTML.trim(),e.appendChild(s),s.style.display=""}}catch(c){"string"===typeof t&&w()&&0!==t.indexOf("<div>Blazor")?e.innerHTML=Ai.sanitize(t):!f(this.trgtEle)&&t instanceof HTMLElement?(e.appendChild(t),e.firstElementChild.style.display=""):r=ze(t)}if(!f(r)){var l=void 0;e.classList.contains("e-acrdn-header-content")?l=this.element.id+i+"_header":e.classList.contains("e-acrdn-content")&&(l=this.element.id+i+"_content"),a=r({},null,null,l,this.isStringTemplate)}return f(a)||!(a.length>0)||f(a[0].tagName)&&1===a.length?0===e.childElementCount&&(e.innerHTML=Ai.sanitize(t)):[].slice.call(a).forEach((function(t){f(t.tagName)||(t.style.display=""),e.appendChild(t)})),f(o)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e},t.prototype.ariaAttrUpdate=function(e){var t=gt("."+kf,e),i=gt("."+Af,e);t.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",t.id),i.setAttribute("role","definition")},t.prototype.contentRendering=function(e){var t=this.createElement("div",{className:Af+" e-content-hide",id:m("acrdn_panel")});ft(t,{"aria-hidden":"true"});var i=this.createElement("div",{className:"e-acrdn-content"});return this.dataSource.length>0?(ht(this.getItemTemplate()(this.dataSource[e],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),t.appendChild(i)):(this.enableHtmlSanitizer&&(this.items[e].content,1)&&(this.items[e].content=Ai.sanitize(this.items[e].content)),t.appendChild(this.fetchElement(i,this.items[e].content,e,!1))),t},t.prototype.expand=function(e){var t,i=this,n=this.getItems(),r=yt(e,"."+If);if(!(f(e)||lt(e)&&"true"!==e.getAttribute("e-animate")||r.classList.contains("e-overlay"))){var o=yt(r,".e-acrdn-root").querySelector(".e-expand-state"),a={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},s=gt(".e-toggle-icon",r).firstElementChild;t={element:r,item:n[this.getIndexByItem(r)],index:this.getIndexByItem(r),content:r.querySelector("."+Af),isExpanded:!0},this.trigger("expanding",t,(function(t){t.cancel||(s.classList.add("e-toggle-animation"),i.expandedItemsPush(r),f(o)||o.classList.remove("e-expand-state"),r.classList.add("e-expand-state"),"None"===a.name?(i.expandProgress("begin",s,e,r,t),i.expandProgress("end",s,e,r,t)):i.expandAnimation(a.name,s,e,r,a,t))}))}},t.prototype.expandAnimation=function(e,t,i,n,r,o){var a,s=this;this.lastActiveItemId=n.id,"SlideDown"===e?(r.begin=function(){s.expandProgress("begin",t,i,n,o),i.style.position="absolute",a=n.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},r.progress=function(){n.style.minHeight=a+i.offsetHeight+"px"},r.end=function(){vt(i,{position:"",maxHeight:""}),n.style.minHeight="",s.expandProgress("end",t,i,n,o)}):(r.begin=function(){s.expandProgress("begin",t,i,n,o)},r.end=function(){s.expandProgress("end",t,i,n,o)}),new Gt(r).animate(i)},t.prototype.expandProgress=function(e,t,i,n,r){this.remove(i,"e-content-hide"),this.add(n,"e-selected"),this.add(t,"e-expand-icon"),"end"===e&&(this.add(n,"e-active"),i.setAttribute("aria-hidden","false"),ft(n,{"aria-expanded":"true"}),ft(i.previousElementSibling,{"aria-selected":"true"}),t.classList.remove("e-toggle-animation"),this.trigger("expanded",r))},t.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);if(-1===this.expandedIndices.indexOf(t)){var i=[].slice.call(this.expandedIndices);i.push(t),this.setProperties({expandedIndices:i},!0)}},t.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},t.prototype.getItemElements=function(){var e=[],t=this.element.children;return[].slice.call(t).forEach((function(t){t.classList.contains(If)&&e.push(t)})),e},t.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(t),1),this.setProperties({expandedIndices:i},!0)},t.prototype.collapse=function(e){var t,i=this,n=this.getItems(),r=yt(e,"."+If);if(!f(e)&&lt(e)&&!r.classList.contains("e-overlay")){var o={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},a=gt(".e-toggle-icon",r).firstElementChild;t={element:r,item:n[this.getIndexByItem(r)],index:this.getIndexByItem(r),content:r.querySelector("."+Af),isExpanded:!1},this.trigger("expanding",t,(function(t){t.cancel||(i.expandedItemsPop(r),r.classList.add("e-expand-state"),a.classList.add("e-toggle-animation"),"None"===o.name?(i.collapseProgress("begin",a,e,r,t),i.collapseProgress("end",a,e,r,t)):i.collapseAnimation(o.name,e,r,a,o,t))}))}},t.prototype.collapseAnimation=function(e,t,i,n,r,o){var a,s,l,c,h=this;this.lastActiveItemId=i.id,"SlideUp"===e?(r.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",t.style.position="absolute",a=i.offsetHeight,s=t.offsetHeight,t.style.maxHeight=s+"px",h.collapseProgress("begin",n,t,i,o)},r.progress=function(){(c=a-(s-t.offsetHeight))<l&&(i.style.minHeight=c+"px")},r.end=function(){t.style.display="none",h.collapseProgress("end",n,t,i,o),i.style.minHeight="",vt(t,{position:"",maxHeight:"",display:""})}):(r.begin=function(){h.collapseProgress("begin",n,t,i,o)},r.end=function(){h.collapseProgress("end",n,t,i,o)}),new Gt(r).animate(t)},t.prototype.collapseProgress=function(e,t,i,n,r){this.remove(t,"e-expand-icon"),this.remove(n,"e-selected"),"end"===e&&(this.add(i,"e-content-hide"),t.classList.remove("e-toggle-animation"),this.remove(n,"e-active"),i.setAttribute("aria-hidden","true"),ft(n,{"aria-expanded":"false"}),ft(i.previousElementSibling,{"aria-selected":"false"}),this.trigger("expanded",r))},t.prototype.getModuleName=function(){return"accordion"},t.prototype.itemAttribUpdate=function(){var e=this.getItems(),t=this.getItemElements(),i=e.length;t.forEach((function(e){gt("."+kf,e).setAttribute("aria-level",""+i)}))},t.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},t.prototype.addItem=function(e,t){var i=this,n=this.element,r=this.getItemElements(),o=this.getItems();(f(t)&&(t=o.length),n.childElementCount>=t)&&(e instanceof Array?e:[e]).forEach((function(e,a){var s=t+a;o.splice(s,0,e);var l=i.renderInnerItem(e,s);n.childElementCount===s?n.appendChild(l):n.insertBefore(l,r[s]),ce.add(l.querySelector("."+kf),"focus",i.focusIn,i),ce.add(l.querySelector("."+kf),"blur",i.focusOut,i),i.itemAttribUpdate(),i.expandedIndices=[],i.expandedItemRefresh(n),e&&e.expanded&&i.expandItem(!0,s)}))},t.prototype.expandedItemRefresh=function(e){var t=this,i=this.getItemElements();[].slice.call(i).forEach((function(e){e.classList.contains("e-selected")&&t.expandedItemsPush(e)}))},t.prototype.removeItem=function(e){var t=this.getItemElements()[e],i=this.getItems();f(t)||(this.restoreContent(e),pt(t),i.splice(e,1),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(this.element))},t.prototype.select=function(e){var t=this.getItemElements()[e];f(t)||f(gt("."+kf,t))||t.children[0].focus()},t.prototype.hideItem=function(e,t){var i=this.getItemElements()[e];f(i)||(f(t)&&(t=!0),t?this.add(i,"e-hide"):this.remove(i,"e-hide"))},t.prototype.enableItem=function(e,t){var i=this.getItemElements()[e];if(!f(i)){var n=i.firstElementChild;t?(this.remove(i,"e-overlay"),ft(n,{tabindex:"0","aria-disabled":"false"}),n.focus()):(i.classList.contains("e-active")&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,n)),this.add(i,"e-overlay"),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"))}},t.prototype.refresh=function(){this.isServerRendered||e.prototype.refresh.call(this)},t.prototype.expandItem=function(e,t){var i=this,n=this.getItemElements();if(f(t))if("Single"===this.expandMode&&e){var r=n[n.length-1];this.itemExpand(e,r,this.getIndexByItem(r))}else{var o=gt("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach((function(t){i.itemExpand(e,t,i.getIndexByItem(t)),t.classList.remove("e-expand-state")}));var a=gt(".e-expand-state",this.element);a&&a.classList.remove("e-expand-state"),o&&o.classList.add("e-expand-state")}else{if(f(r=n[t])||!r.classList.contains("e-select")||r.classList.contains("e-active")&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,r,t)}},t.prototype.itemExpand=function(e,t,i){var n=this,r=t.children[1];if(!t.classList.contains("e-overlay"))if(f(r)&&e)if(this.isServerRendered){var o=t.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",i).then((function(){n.isDestroyed||(r=t.children[1],n.expand(r))})):this.interopAdaptor.invokeMethodAsync("OnDataClick",o).then((function(){n.isDestroyed||(r=t.children[1],n.expand(r))}))}else r=this.contentRendering(i),t.appendChild(r),this.ariaAttrUpdate(t),this.expand(r);else f(r)||(e?this.expand(r):this.collapse(r))},t.prototype.destroyItems=function(){this.restoreContent(null),[].slice.call(this.element.querySelectorAll("."+If)).forEach((function(e){pt(e)}))},t.prototype.restoreContent=function(e){var t;t=f(e)?this.element:this.element.querySelectorAll("."+If)[e],this.templateEle.forEach((function(e){f(t.querySelector(e))||(document.body.appendChild(t.querySelector(e)).style.display="none")}))},t.prototype.updateItem=function(e,t){if(!f(e)){var i=this.getItems(),n=i[t];i.splice(t,1),this.restoreContent(t),pt(e),this.addItem(n,t)}},t.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element,n=!1,r=0,o=Object.keys(e);r<o.length;r++){switch(o[r]){case"items":if(this.isServerRendered){this.wireFocusEvents();break}if(e.items instanceof Array&&t.items instanceof Array)n=!0;else for(var a=Object.keys(e.items),s=0;s<a.length;s++){var l=parseInt(Object.keys(e.items)[s],10),c=Object.keys(e.items[l])[0],h=mt("."+If,this.element)[l],d=Object(t.items[l])[c],p=Object(e.items[l])[c];("header"===c||"iconCss"===c||"expanded"===c||"content"===c&&""===d)&&this.updateItem(h,l),"cssClass"!==c||f(h)||(h.classList.remove(d),h.classList.add(p)),"visible"!==c||f(h)||(!1===Object(e.items[l])[c]?h.classList.add("e-hide"):h.classList.remove("e-hide")),"disabled"!==c||f(h)||this.enableItem(l,!p),"content"!==c||f(h)||2!==h.children.length||(h.classList.contains("e-selected")&&this.expandItem(!1,l),pt(h.querySelector("."+Af)))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),n=!0;break;case"headerTemplate":this.initializeheaderTemplate(),n=!0;break;case"itemTemplate":this.initializeItemTemplate(),n=!0;break;case"enableRtl":e.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl");break;case"height":vt(this.element,{height:b(e.height)});break;case"width":vt(this.element,{width:b(e.width)});break;case"expandMode":"Single"===e.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedIndices.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}}n&&!this.isServerRendered&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},Tf([_t([],Lf)],t.prototype,"items",void 0),Tf([zt([])],t.prototype,"dataSource",void 0),Tf([zt()],t.prototype,"itemTemplate",void 0),Tf([zt()],t.prototype,"headerTemplate",void 0),Tf([zt("100%")],t.prototype,"width",void 0),Tf([zt("auto")],t.prototype,"height",void 0),Tf([zt([])],t.prototype,"expandedIndices",void 0),Tf([zt("Multiple")],t.prototype,"expandMode",void 0),Tf([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),Tf([Bt({},Df)],t.prototype,"animation",void 0),Tf([Ft()],t.prototype,"clicked",void 0),Tf([Ft()],t.prototype,"expanding",void 0),Tf([Ft()],t.prototype,"expanded",void 0),Tf([Ft()],t.prototype,"created",void 0),Tf([Ft()],t.prototype,"destroyed",void 0),t=Tf([Vt],t)}(si),jf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nf=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},zf=function(e){var t=e;return t.sourcePoint||t.targetPoint||t.sourceID||t.targetID||t.sourcePortID||t.targetPortID||t.sourceDecorator||t.targetDecorator?$a:(e.shape&&(e.shape instanceof oh||e.shape.type),Lh)},Bf=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return jf(t,e),Nf([zt("")],t.prototype,"id",void 0),Nf([zt()],t.prototype,"height",void 0),Nf([zt(!0)],t.prototype,"expanded",void 0),Nf([zt("")],t.prototype,"iconCss",void 0),Nf([zt("")],t.prototype,"title",void 0),Nf([Wt(zf)],t.prototype,"symbols",void 0),t}(ii),Hf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jf(t,e),Nf([zt()],t.prototype,"width",void 0),Nf([zt()],t.prototype,"height",void 0),t}(ii),_f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jf(t,e),Nf([zt()],t.prototype,"width",void 0),Nf([zt()],t.prototype,"height",void 0),Nf([Bt({},Qi)],t.prototype,"offset",void 0),t}(ii),Wf=function(e){function t(t,i){var n,r,o=e.call(this,t,i)||this;o.symbolTable={},o.childTable={},o.info="info",o.oldObject=null,o.laneTable={},o.isExpand=!1,o.isExpandMode=!1,o.isMethod=!1,o.paletteid=88123,o.checkOnRender=!1,o.helper=function(e){var t,i=o.selectedSymbol&&o.selectedSymbol.id||e.sender.target.id.split("_container")[0],n=o.symbolTable[i];if(n&&o.selectedSymbol){o.selectedSymbols=o.selectedSymbol.id===n.id?n:o.selectedSymbol;o.getMousePosition(e.sender);(t=o.getSymbolPreview(o.selectedSymbols,e.sender,o.element)).setAttribute("paletteId",o.element.id)}return t};for(var a=0;o&&o.palettes&&a<o.palettes.length;a++)for(var s=0;s<o.palettes[a].symbols.length;s++)n=o.palettes[a].symbols[s],r=t.palettes[a].symbols[s],n&&"UmlActivity"===n.shape.type&&Xl(r,n),(o.nodeDefaults||o.connectorDefaults)&&Kl(n,r,n instanceof Lh?o.nodeDefaults:o.connectorDefaults);return o}return jf(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=!1,n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":i=!0;break;case"enableSearch":if(e.enableSearch)this.createTextbox();else{var o=document.getElementById(this.element.id+"_search");o&&o.parentNode.removeChild(o)}break;case"palettes":for(var a=0,s=Object.keys(e.palettes);a<s.length;a++){var l=s[a],c=Number(l);this.accordionElement.items[c]||(this.accordionElement.items[c]={header:e.palettes[c].title||"",expanded:e.palettes[c].expanded,iconCss:e.palettes[c].iconCss||""}),void 0!==e.palettes[c].iconCss&&(this.accordionElement.items[c].iconCss=e.palettes[c].iconCss||"",i=!0),void 0!==e.palettes[c].expanded&&(this.palettes[c].isInteraction?this.palettes[c].isInteraction=!1:(this.accordionElement.items[c].expanded=e.palettes[c].expanded,this.isExpand=!0),this.isExpandMode||this.isMethod||this.isExpand||(this.isExpand=!0)),w()&&null===e.palettes[c].symbols&&this.updateBlazorProperties(e)}break;case"enableAnimation":this.enableAnimation?this.accordionElement.animation={expand:{duration:400},collapse:{duration:400}}:this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}};break;case"expandMode":this.accordionElement.expandMode=this.expandMode,i=!0,this.isExpandMode=!0;break;case"allowDrag":this.allowDrag=e.allowDrag,this.allowDrag?this.draggable.helper=this.helper:this.draggable.helper=function(){return null}}}if(i&&this.refreshPalettes(),this.isExpand&&!i){this.refresh(),this.isExpand=!1;for(var h=0;h<this.palettes.length;h++){var d=this.palettes[h].id;window[d]&&window[d].length>1&&(window[d][1].parentNode.removeChild(window[d][1]),window[d][1]=null)}}this.isMethod=!1},t.prototype.updateBlazorProperties=function(e){if(window&&window.Blazor){var t={methodName:"UpdateBlazorProperties",paletteobj:{palette:e.palettes}};window.sfBlazor.updateBlazorProperties(t,this)}},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){var e=this;if(""===this.element.id){var t=document.getElementsByClassName("e-symbolpalette").length;this.element.id="symbolpalette_"+this.paletteid+"_"+t}this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&this.createTextbox();var i=nd("div",{id:this.element.id+"_container"});this.accordionElement=new Rf({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.created=function(){e.checkOnRender=!0},this.accordionElement.expanded=function(t){var i=e.accordionElement.items.indexOf(t.item),n=e.allowServerDataBinding;e.allowServerDataBinding=!1,e.palettes[i].expanded=t.isExpanded,e.palettes[i].isInteraction=!0,e.allowServerDataBinding=n},this.accordionElement.expanding=function(t){if(e.checkOnRender){var i={element:t.element,content:t.content,index:t.index,cancel:!1,isExpanded:t.isExpanded,palette:e.palettes[t.index]};e.trigger("paletteExpanding",i),t.cancel=i.cancel}},this.element.appendChild(i);window.measureElement&&(window.measureElement=null),ud(),this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new Nd(this.element.id,new jd,!1),this.svgRenderer=new Nd(this.element.id,new jd,!0),this.updatePalettes(),this.accordionElement.appendTo("#"+this.element.id+"_container"),this.renderComplete()},t.prototype.getModuleName=function(){return"SymbolPalette"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e},t.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this);var t=document.getElementById(this.element.id+"_container");if(t){this.element.removeChild(t);if(window.measureElement){window.measureElement.usageCount-=1;window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null)}}(t=document.getElementById(this.element.id+"_search"))&&t.parentNode.removeChild(t),this.element.classList.remove("e-symbolpalette")}},t.prototype.addPalettes=function(e){for(var t,i=0;i<e.length;i++){var n=this.allowServerDataBinding;this.isProtectedOnChange=!0,this.allowServerDataBinding=!1,t=new Bf(this,"palettes",e[i],!0),this.palettes.push(t),this.initSymbols(t),this.allowServerDataBinding=n,this.isProtectedOnChange=!1,this.renderPalette(t)}this.bulkChanges={},this.accordionElement.refresh()},t.prototype.removePalette=function(e){for(var t=0;t<this.palettes.length;t++)if(this.palettes[t].id===e){this.palettes.splice(t,1),this.accordionElement.items.splice(t,1);break}},t.prototype.removePalettes=function(e){var t=this.allowServerDataBinding;this.allowServerDataBinding=!1;for(var i=0;i<e.length;i++)this.removePalette(e[i]);this.accordionElement.refresh(),this.allowServerDataBinding=t},t.prototype.initSymbols=function(e){for(var t=[],i=0,n=0,r=0,o=e.symbols;r<o.length;r++){if("SwimLane"===(C=o[r]).shape.type){var a=C,s=C.shape,l="Horizontal"===s.orientation;if(s.isLane){i=l?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,n=l?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2,this.laneTable[C.id]={height:i,width:n};var c=s.lanes[0].header,h=s.lanes[0].style,d=c.style,p={id:"header"+md(),shape:{type:"Basic",shape:"Rectangle"},width:l?c.width:a.width,height:l?a.height:c.height,style:d,annotations:[{content:c.annotation.content}]};p.offsetX=p.width/2,p.offsetY=p.height/2,this.addPaletteItem(e.id,p);var u={id:"lane"+md(),shape:{type:"Basic",shape:"Rectangle"},width:l?a.width-c.width:a.width,height:l?a.height:a.height-c.height,style:h};u.offsetX=l?p.width+u.width/2:u.width/2,u.offsetY=l?u.height/2:p.height+u.height/2,this.addPaletteItem(e.id,u),a.children=[p.id,u.id]}else s.isPhase&&(i=a.height?a.height:this.symbolHeight,n=a.width?a.width:this.symbolWidth,C.shape.type="Path",C.shape.data=l?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if(C instanceof Lh){var f=Ld(this.getNodeDefaults);f&&f(C,this)}else if(C instanceof $a){var g=Ld(this.getConnectorDefaults);g&&g(C,this)}this.symbolTable[C.id]=C,C instanceof Lh&&C.children&&t.push(C)}for(var m=0;m<t.length;m++)for(var y=void 0,v=0;v<t[m].children.length;v++)(y=this.symbolTable[t[m].children[v]])&&(this.childTable[y.id]=y,y.parentId=t[m].id);for(var b=0,w=e.symbols;b<w.length;b++){(C=w[b])instanceof Lh&&C.children||this.prepareSymbol(C)}for(var x=0,S=t;x<S.length;x++){var C=S[x];this.prepareSymbol(C)}},t.prototype.renderPalette=function(e){var t="display:none;overflow:auto;";e.height&&(t+="height:"+e.height+"px");var i=nd("div",{id:e.id,style:t,class:"e-remove-palette"});this.element.appendChild(i);var n={header:e.title,expanded:e.expanded,content:"#"+e.id,iconCss:e.iconCss};this.accordionElement.items.push(n),this.renderSymbols(e,i)},t.prototype.addPaletteItem=function(e,t,i){t=xd(t);for(var n=0;n<this.palettes.length;n++){var r=this.palettes[n];if(-1!==r.id.indexOf(e)){for(var o=[void 0,r,"symbols",{},!0],a=new(Function.prototype.bind.apply(zf(t),o)),s=0;s<Object.keys(t).length;s++){var l=this.allowServerDataBinding;this.allowServerDataBinding=!1,a[Object.keys(t)[s]]=t[Object.keys(t)[s]],this.allowServerDataBinding=l}Kl(a,t,a instanceof Lh?this.nodeDefaults:this.connectorDefaults),r.symbols.push(a);var c=this.allowServerDataBinding;if(this.allowServerDataBinding=!1,this.prepareSymbol(a),this.allowServerDataBinding=c,this.symbolTable[a.id]=a,i)this.childTable[a.id]=a;else{var h=document.getElementById(r.id);h&&h.appendChild(this.getSymbolContainer(a,h))}break}}},t.prototype.removePaletteItem=function(e,t){for(var i,n=0;n<this.palettes.length;n++){var r=this.palettes[n];if(-1!==r.id.indexOf(e))for(var o=0,a=r.symbols;o<a.length;o++){var s=a[o];if(-1!==s.id.indexOf(t)){var l=r.symbols.indexOf(s);if(r.symbols.splice(l,1),s.children)for(var c=s.children,h=0;h<c.length;h++)delete this.symbolTable[c[h]];delete this.symbolTable[s.id];var d=document.getElementById(s.id+"_container");d.parentNode.removeChild(d),i=!0;break}}if(i)break}},t.prototype.prepareSymbol=function(e){var t,i,n,r,o,a=new Zc,s=e,l=new sr,c=e instanceof Lh?e.initContainer():null;c&&!c.children&&(c.children=[]);var h=Ld(this.getSymbolTemplate);if(h&&(o=h(e)),o||(s.children?o=this.getContainer(s,c):(o=e.init(this),e instanceof Lh&&e.parentId&&c.children.push(o))),!e.parentId){var d={width:this.symbolWidth,height:this.symbolHeight},p=Ld(this.getSymbolInfo);if(p?d=p(e):w()&&(d=this.getBlazorSymbolInfo(e,d)),d=d||this.symbolInfo||{},e.shape&&e.shape.isPhase&&(d.width=d.width||this.symbolWidth,d.height=d.height||this.symbolHeight),o.relativeMode="Object",o.horizontalAlignment=o.verticalAlignment="Center",l.style.strokeColor=l.style.fill="none",l.children=[o],o.measure(new Zi),o.arrange(o.desiredSize),t=d.width=d.width||(void 0!==s.width?o.actualSize.width:void 0)||this.symbolWidth,n=d.height=d.height||(void 0!==s.height?o.actualSize.height:void 0)||this.symbolHeight,void 0!==t&&void 0!==n){var u=t,f=n,g=(e.shape.isLane,!!e.shape.isPhase);void 0!==this.symbolWidth?u=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:t+=s.style.strokeWidth,void 0!==this.symbolHeight?f=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:n+=s.style.strokeWidth,d.description&&""!==d.description.text&&(f-=20),i=u/(!g&&o.width||t),r=f/(!g&&o.height||n),d.fit&&(i=u/d.width,r=f/d.height),t=u,n=f,i=r=Math.min(i,r),l.width=t,l.height=n,o.width=d.width,o.height=d.height,this.scaleSymbol(e,l,i,r,t,n)}else{var m=void 0;e instanceof $a&&(m=yo(e)),o.width=e.width||m?m.width:o.actualSize.width,o.height=e.height||m?m.height:o.actualSize.height}e.wrapper=a,a.children=[l],o.pivot=a.pivot={x:0,y:0},a.id=o.id+"_symbol",a.style.fill=a.style.strokeColor="transparent",e instanceof Lh?(a.offsetX=e.style.strokeWidth/2,a.offsetY=e.style.strokeWidth/2):(a.offsetX=.5,a.offsetY=.5),this.getSymbolDescription(d,t,a),a.measure(new Zi),a.arrange(a.desiredSize),d.width=d.width||o.actualSize.width,d.height=d.height||o.actualSize.height,e[this.info]=d}e.parentId&&(c.measure(new Zi(s.width,s.height)),c.arrange(c.desiredSize))},t.prototype.getBlazorSymbolInfo=function(e,t){var i=e.symbolInfo;return i&&(t.description=i.description||this.symbolInfo.description,t.fit=i.fit||this.symbolInfo.fit,t.height=i.height||this.symbolInfo.height,t.width=i.width||this.symbolInfo.width,t.tooltip=i.tooltip||this.symbolInfo.tooltip,t.template=i.template||this.symbolInfo.template),t},t.prototype.getContainer=function(e,t){var i;t.measureChildren=!1;var n=e.children;t.children=[];for(var r=0;r<n.length;r++)this.symbolTable[n[r]]&&t.children.push(this.symbolTable[n[r]].wrapper);return t.measure(new Zi(e.width,e.height)),t.arrange(t.desiredSize),0===t.bounds.x&&0===t.bounds.y||(kc(e,(i=t.bounds).x,i.y,this.symbolTable,!1,this),t=this.getContainer(e,t)),t},t.prototype.getSymbolDescription=function(e,t,i){if(e&&e.description&&e.description.text){var n=new or;e.description.overflow=e.description.overflow||"Ellipsis",e.description.wrap=e.description.wrap||"WrapWithOverflow",n.id=i.id+"_text",n.content=e.description.text,n.width=t,n.height=20,n.style.strokeColor="transparent",n.style.fill="transparent",n.style.strokeWidth=0,n.style.textWrapping=e.description.wrap,n.style.textOverflow=e.description.overflow,n.margin={left:0,right:0,top:0,bottom:5},i.children.push(n)}},t.prototype.renderSymbols=function(e,t){for(var i=0,n=e.symbols;i<n.length;i++){var r=n[i];r.parentId||this.getSymbolContainer(r,t)}},t.prototype.getSymbolPreview=function(e,t,i){var n,r,o;this.allowServerDataBinding=!1;var a=e.wrapper.children[0].desiredSize.width+e.style.strokeWidth,s=e.wrapper.children[0].desiredSize.height+e.style.strokeWidth,l=e.wrapper.children[0].children[0],c=e.previewSize;if(e&&(c.width||c.height)||void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){a=(c.width||this.symbolPreview.width||a)-e.style.strokeWidth,s=(c.height||this.symbolPreview.height||s)-e.style.strokeWidth,r=a/l.actualSize.width,o=s/l.actualSize.height,r=o=Math.min(r,o);var h=l.actualSize.width*r,d=l.actualSize.height*o;e.wrapper.children[0].width=a,e.wrapper.children[0].height=s,this.measureAndArrangeSymbol(l,e instanceof Lh),this.scaleSymbol(e,e.wrapper.children[0],r,o,h,d,!0),a=h,s=d}var p={x:l.offsetX,y:l.offsetY};l.offsetX=l.offsetY=e.style.strokeWidth/2,l.pivot={x:0,y:0},this.measureAndArrangeSymbol(l,e instanceof Lh);var u,f=nd("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(f);var g="margin:5px;";if("Native"===e.shape.type){n=rd("svg",{id:e.id+"_preview",width:Math.ceil(a)+1,height:Math.ceil(s)+1});var m=rd("g",{id:e.id+"_g"});n.appendChild(m),f.appendChild(n),this.svgRenderer.renderElement(l,m,void 0,void 0,n)}else if("HTML"===e.shape.type)u=this.getHtmlSymbol(e,n,f,s,a,!0);else if(e.children&&e.children.length>0&&Zl(e,"HTML",this.childTable))u=this.getGroupParent(e,n,f,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!0);else{n=Rd.createCanvas(e.id+"_preview",2*(Math.ceil(a)+e.style.strokeWidth+1),2*(Math.ceil(s)+e.style.strokeWidth+1)),f.appendChild(n),"Basic"===e.shape.type||"Flow"===e.shape.type?g+="transform: scale(0.5) translate(-"+n.width/2+"px, -"+n.height/2+"px);":g+="transform:scale(0.5);",n.setAttribute("transform-origin","0 0");var y=2;e instanceof $a&&(y=1.9),n.getContext("2d").setTransform(y,0,0,y,0,0),this.diagramRenderer.renderElement(l,n,void 0)}return dd(u&&("HTML"===e.shape.type||e.children&&e.children.length>0)?u:n,g),l.offsetX=p.x,l.offsetY=p.y,this.allowServerDataBinding=!0,f},t.prototype.measureAndArrangeSymbol=function(e,t){e.children&&!t&&(e.children[0].transform=Mn.Self),e.measure(new Zi),e.arrange(e.desiredSize),e.children&&(e.children[0].transform=Mn.Parent)},t.prototype.updateSymbolSize=function(e,t,i){var n=e.wrapper.children[0].children[0],r=e.style.strokeWidth;n.width=(t||n.width)-(r+1),n.height=(i||n.height)-(r+1),e.wrapper.measure(new Zi),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.getSymbolContainer=function(e,t,i){var n,r,o,a=this.symbolTable[e.id][this.info],s=this.getSymbolSize(e,a),l=s.width+1,c=s.height+1,h=nd("div",{id:e.id+"_container",style:"width:"+l+"px;height:"+c+"px;float:left;overflow:hidden",title:a.tooltip?a.tooltip:e.id});if(t.appendChild(h),"Native"===e.shape.type)n=rd("svg",{id:e.id,width:Math.ceil(e.wrapper.actualSize.width)+1,height:Math.ceil(e.wrapper.actualSize.height)+1}),r=rd("g",{id:e.id+"_g"}),n.appendChild(r),h.appendChild(n),this.updateSymbolSize(e),this.svgRenderer.renderElement(e.wrapper,r,void 0,void 0,n);else if("HTML"===e.shape.type)o=this.getHtmlSymbol(e,n,h,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else if(e.children&&e.children.length>0&&Zl(e,"HTML",this.childTable))o=this.getGroupParent(e,n,h,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else{n=Rd.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),h.appendChild(n);var d=2;e instanceof $a&&(d=1.9),n.getContext("2d").setTransform(d,0,0,d,0,0),this.diagramRenderer.renderElement(e.wrapper,r||n,void 0,void 0,void 0,void 0,!0,void 0,!0)}if(!i){var p=e.wrapper.actualSize.width+e.style.strokeWidth,u=e.wrapper.actualSize.height+e.style.strokeWidth,f="pointer-events:none;transform-origin:0 0;overflow:hidden;";return e.shape.isPhase?"Horizontal"===e.shape.orientation?f+="margin-left:"+Math.max(this.symbolMargin.left,(l-p)/2)+"px;margin-top:"+s.height/2+"px;":f+="margin-left:"+s.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(c-u)/2)+"px;":f+="margin-left:"+Math.max(this.symbolMargin.left,(l-p)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(c-u)/2)+"px;",n instanceof HTMLCanvasElement&&(f+="transform:scale(.5,.5);"),dd(o&&("HTML"===e.shape.type||e.children&&e.children.length>0)?o:n,f),h.classList.add("e-symbol-draggable"),h}return n},t.prototype.getGroupParent=function(e,t,i,n,r,o){var a=nd("div",{id:e.id+(o?"_html_div_preview":"_html_div")}),s=nd("div",{id:e.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=nd("div",{id:e.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return s.appendChild(l),a.appendChild(s),t=Rd.createCanvas(o?e.id+"_preview":e.id,Math.ceil(r)+1,Math.ceil(n)+1),a.appendChild(t),i.appendChild(a),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,s),a},t.prototype.getHtmlSymbol=function(e,t,i,n,r,o){var a=nd("div",{id:e.id+(o?"_html_div_preview":"_html_div")}),s=nd("div",{id:e.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=nd("div",{id:e.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return s.appendChild(l),a.appendChild(s),t=Rd.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),i.appendChild(t),t.getContext("2d").setTransform(2,0,0,2,0,0),a.appendChild(t),i.appendChild(a),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,s),a},t.prototype.getSymbolSize=function(e,t){var i=e.wrapper.actualSize.width,n=e.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(i=this.symbolWidth,n=Math.max(this.symbolHeight,n)):(i+=this.symbolMargin.left+this.symbolMargin.right+e.style.strokeWidth,n+=this.symbolMargin.top+this.symbolMargin.bottom+e.style.strokeWidth),new Zi(i,n)},t.prototype.getMousePosition=function(e){var t,i,n;if(-1!==e.type.indexOf("touch")){var r=(n=e).changedTouches[0].clientY,o=n.changedTouches[0].clientX;t=r-this.element.offsetTop,i=o-this.element.offsetLeft}else t=e.clientY-this.element.offsetTop,i=e.clientX-this.element.offsetLeft;return{x:i,y:t}},t.prototype.mouseMove=function(e,t){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var i=e.target.id.split("_container")[0];if(this.symbolTable[i]){var n=document.getElementById(i+"_container");n.classList.add("e-symbol-hover"),this.highlightedSymbol=n}e.preventDefault()},t.prototype.mouseUp=function(e){if(this.isMethod=!0,e&&e.target)if("iconSearch"===e.srcElement.id){var t=document.getElementById("iconSearch");t.classList.contains("e-clear-searchtext")&&(t.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",this.searchPalette(""))}else{var i=e.target.id.split("_container")[0];if(i&&this.selectedSymbol){var n={oldValue:this.oldObject,newValue:i};this.trigger("paletteSelectionChange",n),this.oldObject=i,e.preventDefault()}}},t.prototype.keyUp=function(e){var t=this;if(this.enableSearch){var i=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",!e||"Enter"!==e.key&&13!==e.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.target instanceof HTMLInputElement&&(i.searchPalette(e.target.value),t.timer=null)}),500)):e.target instanceof HTMLInputElement&&this.searchPalette(e.target.value)}},t.prototype.mouseDown=function(e){var t=e.target.id.split("_container")[0];if(this.selectedSymbol){var i,n=document.getElementById(this.selectedSymbol.id+"_container");t!==this.selectedSymbol.id&&n&&n.classList.remove("e-symbol-selected"),(i=document.getElementById(this.selectedSymbol.id+"_container"))&&(i.style.backgroundColor=""),this.selectedSymbol=null}this.symbolTable[t]&&((i=document.getElementById(t+"_container")).classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[t],e.preventDefault())},t.prototype.keyDown=function(e){if(e&&"Escape"===e.key){var t=this.draggable.helperElement;t&&t.parentNode&&(t.parentNode.removeChild(t),this.draggable.intDestroy())}},t.prototype.initDraggable=function(){if(this.allowDrag){this.draggable=new ui(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(e){var t=od(e.target,"e-droppable");if(t&&t.classList.contains("e-diagram")){t.ej2_instances[0].droppable.over(e)}},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}})}},t.prototype.dragStart=function(e){var t=this.helper[0];t&&t.setAttribute("paletteId",this.element.id),w()&&e.bindEvents(e.dragElement)},t.prototype.dragStop=function(e){od(e.target,"e-diagram")||ut(e.helper)},t.prototype.scaleSymbol=function(e,t,i,n,r,o,a){if(e instanceof $a){var s=e.wrapper;e.wrapper=t.children[0];for(var l=e.scale(i,n,r,o,t.children[0]),c=r/2-t.children[0].children[0].offsetX+l.x/2,h=o/2-t.children[0].children[0].offsetY+l.y/2,d=0,p=t.children[0].children;d<p.length;d++){var u=p[d];u.offsetX+=c,u.offsetY+=h,u.staticSize=!1}e.wrapper=s}else if("Bpmn"===e.shape.type&&this.bpmnModule){s=e.wrapper;e.wrapper=t,t.children[0].width=r,t.children[0].height=o,this.bpmnModule.updateBPMN({width:r,height:o},e,e,null),e.wrapper=s}else if(e.children){var f,g,m=e.children;if(!a)for(var y=void 0,v=void 0,b=0;b<m.length;b++)(v=t.children[0].children[b])&&(v.children[0].children&&this.measureChild(v),y=this.symbolTable[v.id],v.width=y.width,v.height=y.height,v.measure(new Zi),v.arrange(v.children[0].desiredSize));if(f=r/t.children[0].desiredSize.width,g=o/t.children[0].desiredSize.height,t.children[0].measure(new Zi),t.children[0].arrange(t.children[0].desiredSize),!a){var w=void 0;for(b=0;b<m.length;b++)(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,f,g,e),this.scaleGroup(w,f,g,e))}if(a){y=void 0;var x=void 0,S=void 0;for(w=void 0,b=0;b<m.length;b++)y=this.symbolTable[m[b]],x=r/e.wrapper.children[0].desiredSize.width,S=o/e.wrapper.children[0].desiredSize.height,(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,x,S,e,!0),this.scaleGroup(w,x,S,e,!0));e.wrapper.children[0].measure(new Zi),e.wrapper.children[0].arrange(e.wrapper.children[0].desiredSize)}}else!function e(t,i,n,r){if(void 0!==t.width&&void 0!==t.height&&(t.width*=i,t.height*=n),t instanceof nr){var o=pn(),a=r.width||r.actualSize.width,s=r.height||r.actualSize.height;if(void 0!==a&&void 0!==s){var l=r.offsetX-a*r.pivot.x,c=r.offsetY-s*r.pivot.y,h={x:l+a*r.pivot.x,y:c+s*r.pivot.y};h=Dd(r.rotateAngle,r.offsetX,r.offsetY,h),fn(o,-r.rotateAngle,h.x,h.y),gn(o,i,n,h.x,h.y),fn(o,r.rotateAngle,h.x,h.y);for(var d=0,p=t.children;d<p.length;d++){var u=p[d];if(void 0!==u.width&&void 0!==u.height){var f=un(o,{x:u.offsetX,y:u.offsetY});u.offsetX=f.x,u.offsetY=f.y,e(u,i,n,r)}}}}}(t.children[0],i,n,t)},t.prototype.scaleChildren=function(e,t,i,n,r){for(var o,a=0;a<e.children.length;a++)(o=e.children[a]).children[0].children?this.scaleChildren(o,t,i,n,r):this.scaleGroup(o,t,i,n,r)},t.prototype.measureChild=function(e){for(var t,i,n=0;n<e.children.length;n++)(t=e.children[n]).children[0].children?this.measureChild(t):(i=this.symbolTable[t.id],t.width=i.width,t.height=i.height,t.measure(new Zi),t.arrange(t.children[0].desiredSize))},t.prototype.scaleGroup=function(e,t,i,n,r){e.width=e.width*t,e.height=e.height*i,e.offsetX=r?e.offsetX*t-n.style.strokeWidth:e.offsetX*t+n.style.strokeWidth/2,e.offsetY=r?e.offsetY*i-n.style.strokeWidth:e.offsetY*i+n.style.strokeWidth/2,e.measure(new Zi),e.arrange(e.children[0].desiredSize)},t.prototype.refreshPalettes=function(){this.accordionElement.items=[],function(e,t){var i;for(i=t?document.getElementById(t).getElementsByClassName(e):document.getElementsByClassName(e);i.length>0;)i[0].parentNode.removeChild(i[0])}("e-remove-palette",this.element.id),this.updatePalettes(),this.accordionElement.dataBind()},t.prototype.updatePalettes=function(){for(var e=0;e<this.palettes.length;e++){var t=this.palettes[e];this.initSymbols(t),this.renderPalette(t)}},t.prototype.createTextbox=function(){var e=nd("div",{id:this.element.id+"_search"});dd(e,"backgroundColor:white;height:30px"),e.className="e-input-group",this.element.appendChild(e);var t=nd("input",{});t.placeholder="Search Shapes",t.id="textEnter",dd(t,"width:100%;height:auto"),t.className="e-input",e.appendChild(t);var i=nd("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});e.appendChild(i)},t.prototype.getFilterSymbol=function(e){for(var t=[],i=0;i<e.length;i++)for(var n=0;n<this.ignoreSymbolsOnSearch.length;n++)this.ignoreSymbolsOnSearch[n]!==e[i].id&&t.push(e[0]);return t},t.prototype.searchPalette=function(e){var t,i=[],n=document.getElementById("SearchPalette");if(n)for(var r=n.children.length-1;r>=0;r--)n.removeChild(n.children[r]);for(var o=0;o<this.palettes.length;o++)for(var a=this.palettes[o],s=0;s<a.symbols.length;s++){var l=a.symbols[s];""!==e&&-1!==l.id.toLowerCase().indexOf(e.toLowerCase())&&i.push(l)}var c=Ld(this.filterSymbols);if(c&&(i=c(i)||[]),this.ignoreSymbolsOnSearch&&this.ignoreSymbolsOnSearch.length>0&&(i=this.getFilterSymbol(i)),n||(n=t=this.createSearchPalette(t)),i.length>0)for(var h=0,d=i;h<d.length;h++){var p=d[h];this.getSymbolContainer(p,n)}else if(""!==e){var u=nd("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});u.innerHTML="No Items To Display",n.appendChild(u)}else{document.getElementById("iconSearch").className="e-input-group-icon e-search e-icons",this.accordionElement.removeItem(0);var f=document.getElementById("SearchPalette");f&&f.remove()}},t.prototype.createSearchPalette=function(e){e=nd("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(e);return this.accordionElement.addItem({header:"Search Results",expanded:!0,content:"#SearchPalette"},0),e},t.prototype.wireEvents=function(){var e=le.touchStartEvent,t=le.touchEndEvent,i=le.touchMoveEvent;ce.add(this.element,e,this.mouseDown,this),ce.add(this.element,i,this.mouseMove,this),ce.add(this.element,t,this.mouseUp,this),ce.add(this.element,"keyup",this.keyUp,this),ce.add(document,"keydown",this.keyDown,this),this.initDraggable()},t.prototype.unWireEvents=function(){var e=le.touchStartEvent,t=le.touchEndEvent,i=le.touchMoveEvent;le.isPointer;ce.remove(this.element,e,this.mouseDown),ce.remove(this.element,i,this.mouseMove),ce.remove(this.element,t,this.mouseUp),ce.remove(this.element,"keyup",this.keyUp),ce.remove(document,"keydown",this.keyDown)},Nf([zt("S")],t.prototype,"accessKey",void 0),Nf([zt("100%")],t.prototype,"width",void 0),Nf([zt("100%")],t.prototype,"height",void 0),Nf([_t([],Bf)],t.prototype,"palettes",void 0),Nf([zt()],t.prototype,"getSymbolInfo",void 0),Nf([zt({fit:!0})],t.prototype,"symbolInfo",void 0),Nf([zt()],t.prototype,"filterSymbols",void 0),Nf([zt()],t.prototype,"ignoreSymbolsOnSearch",void 0),Nf([zt()],t.prototype,"getSymbolTemplate",void 0),Nf([zt()],t.prototype,"symbolWidth",void 0),Nf([zt()],t.prototype,"symbolHeight",void 0),Nf([Bt({left:10,right:10,top:10,bottom:10},Yn)],t.prototype,"symbolMargin",void 0),Nf([zt(!0)],t.prototype,"allowDrag",void 0),Nf([Bt({},_f)],t.prototype,"symbolPreview",void 0),Nf([Bt({},Hf)],t.prototype,"symbolDragSize",void 0),Nf([zt(!1)],t.prototype,"enableSearch",void 0),Nf([zt(!0)],t.prototype,"enableAnimation",void 0),Nf([zt("Multiple")],t.prototype,"expandMode",void 0),Nf([Ft()],t.prototype,"paletteSelectionChange",void 0),Nf([Ft()],t.prototype,"paletteExpanding",void 0),Nf([zt()],t.prototype,"getNodeDefaults",void 0),Nf([zt()],t.prototype,"nodeDefaults",void 0),Nf([zt()],t.prototype,"getConnectorDefaults",void 0),Nf([zt()],t.prototype,"connectorDefaults",void 0),t}(si),Ff=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vf=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Uf=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.mode="Canvas",n.id="overview",n.actionName="",n.startPoint=null,n.currentPoint=null,n.prevPoint=null,n.scale=null,n.inAction=!1,n.viewPortRatio=1,n.horizontalOffset=0,n.verticalOffset=0,n.model={},n.event=!0,n.overviewid=88123,n.model={width:n.width,height:n.height},n}return Ff(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"sourceID":this.setParent(e.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}}},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-overview").length;this.element.id="overview_"+this.overviewid+"_"+e}this.element.style.background="transparent",this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new Nd(this.element.id,new jd,!1),this.renderCanvas(),this.setParent(this.sourceID),this.renderComplete()},t.prototype.getSizeValue=function(e){return e.toString().indexOf("px")>0||e.toString().indexOf("%")>0?e.toString():e.toString()+"px"},t.prototype.renderCanvas=function(e){var t=document.getElementById(this.element.id+"_canvas");t||(t=nd("div",{}),this.element.appendChild(t)),pd(t,{id:this.element.id+"_canvas",class:"drawing",style:"position:relative; margin-top:6px; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"}),this.element.setAttribute("tabindex",String(0)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=t},t.prototype.setParent=function(e){var t=document.getElementById(e);if(this.parent){var i=this.parent;this.parent=null,i.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(t,"ej2_instances"),this.parent&&this.parent.setOverview(this)},t.prototype.getDiagram=function(e,t){for(var i,n=e[t].length,r=0;r<n;r++)if(ad(e[t][r].element,"e-diagram")){i=e[t][r];break}return i},t.prototype.unWireEvents=function(){var e=le.touchStartEvent,t=le.touchMoveEvent,i=le.isPointer?"pointerleave":"mouseleave",n=le.isPointer,r=(le.info.name,le.touchEndEvent);ce.remove(this.element,e,this.mouseDown),ce.remove(this.element,t,this.mouseMove),ce.remove(this.element,r,this.mouseUp),ce.remove(this.element,i,this.documentMouseUp),ce.remove(window,"resize",this.windowResize);var o=document.getElementById(this.sourceID+"content");o&&ce.remove(o,"scroll",this.scrolled)},t.prototype.wireEvents=function(){var e=le.touchStartEvent,t=le.touchEndEvent,i=le.touchMoveEvent,n=le.isPointer?"pointerleave":"mouseleave",r=le.isPointer;le.info.name;ce.add(this.element,e,this.mouseDown,this),ce.add(this.element,i,this.mouseMove,this),ce.add(this.element,t,this.mouseUp,this),ce.add(this.element,n,this.documentMouseUp,this),ce.add(window,"resize",this.windowResize,this);var o=document.getElementById(this.sourceID+"content");o&&ce.add(o,"scroll",this.scrolled,this)},t.prototype.renderDocument=function(e){e.canvas=this.canvas;var t=document.getElementById(this.canvas.id+"_svg");t&&t.parentNode.removeChild(t);var i=rd("svg",{id:this.canvas.id+"_svg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",class:"overview_svg"});this.svg=i,e.svg=i,e.canvas.appendChild(i);var n,r=document.getElementById(this.element.id),o=r.clientWidth,a=r.clientHeight,s=r.getBoundingClientRect(),l=window.screenX<0?-1*window.screenX:window.screenX,c=window.screenY<0?-1*window.screenY:window.screenY;if(0===o){var h=Math.floor(window.innerWidth-l-Math.floor(s.left));o=h>0?h:Math.floor(window.innerWidth)}if(0===a){var d=Math.floor(window.innerHeight-c-Math.floor(s.top));a=d>0?d:Math.floor(window.innerHeight)}if(o>0&&(i.setAttribute("width",String(o)),this.model.height=a),a>0&&(i.setAttribute("height",String(a)),this.model.width=o),!e.diagramLayerDiv){e.diagramLayerDiv=nd("div",{});document.getElementById(this.element.id);e.diagramLayer=Rd.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),e.diagramLayer.setAttribute("style","position:absolute; left:0px;  top:0px "),e.diagramLayerDiv.appendChild(e.diagramLayer),e.canvas.appendChild(e.diagramLayerDiv)}n={id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"},pd(e.diagramLayerDiv,n),this.renderHtmlLayer(e.canvas),this.renderNativeLayer(e.canvas,e),this.addOverviewRectPanel(e)},t.prototype.removeDocument=function(e){var t=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(t);var i=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(i);var n=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(n),e.diagramLayerDiv=null,e.diagramLayer=null},t.prototype.renderHtmlLayer=function(e){var t=nd("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),i=nd("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"});return t.appendChild(i),e.appendChild(t),t},t.prototype.renderNativeLayer=function(e,t){if(!document.getElementById(this.element.id+"_nativeLayer_svg")){var i=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),n=rd("g",{id:this.element.id+"_nativeLayer"});i.appendChild(n),t.diagramLayerDiv.appendChild(i),hd(i,{class:"e-native-layer"})}},t.prototype.addOverviewRectPanel=function(e){var t=document.getElementById(this.canvas.id+"_overviewsvg");t&&t.parentNode.removeChild(t),t=rd("svg",{id:this.canvas.id+"_overviewsvg",class:"overviewsvg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height}),e.canvas.appendChild(t);var i=rd("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});t.appendChild(i);var n=rd("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});n.setAttribute("style"," pointer-events: none; "),i.appendChild(n);var r=rd("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});i.appendChild(r);var o=rd("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});r.appendChild(o),this.renderOverviewCorner("left",r),this.renderOverviewCorner("right",r),this.renderOverviewCorner("top",r),this.renderOverviewCorner("bottom",r),this.renderOverviewCorner("topleft",r),this.renderOverviewCorner("topright",r),this.renderOverviewCorner("bottomleft",r),this.renderOverviewCorner("bottomright",r)},t.prototype.renderOverviewCorner=function(e,t){this.svg;var i,n=rd(i="top"===e||"bottom"===e||"right"===e||"left"===e?"rect":"circle",{id:this.canvas.id+"visible"+e});t.appendChild(n);var r=rd(i,{id:this.canvas.id+e,class:"overviewresizer",fill:"transparent"});t.appendChild(r)},t.prototype.updateOverviewRectangle=function(){var e=this.currentPoint.x-this.prevPoint.x,t=this.currentPoint.y-this.prevPoint.y,i=new Zi;i.width=0,i.height=0;var n=0,r=0;switch(this.resizeDirection){case"left":i.width-=e,i.height-=e/this.viewPortRatio,n=e,r=e/this.viewPortRatio,r/=2;break;case"right":i.width+=e,i.height+=e/this.viewPortRatio,r=e/this.viewPortRatio,r/=-2;break;case"top":i.height-=t,i.width-=t*this.viewPortRatio,r=t,n=t*this.viewPortRatio,n/=2;break;case"bottom":i.height+=t,i.width+=t*this.viewPortRatio,n=t*this.viewPortRatio,n/=-2;break;case"topleft":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,i.width-=e,i.height-=t,n=e,r=t;break;case"topright":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,r=t,i.width+=e,i.height-=t;break;case"bottomleft":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,n=e,i.width-=e,i.height+=t;break;case"bottomright":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,i.width+=e,i.height+=t}this.updateHelper(n,r,i,void 0,void 0)},t.prototype.updateHelper=function(e,t,i,n,r){var o,a,s,l=this.element.getElementsByTagName("svg")[2].getElementById("helper");if(i)o=(s=l.getBBox()).x+e,a=s.y+t,n=s.width+i.width,r=s.height+i.height;else{var c,h;c=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x,h=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y;Math.abs(h)>Math.abs(c)?(c=this.viewPortRatio*h,!0,!1):(h=c/this.viewPortRatio,!0,!1),s=l.getBBox(),o=this.startPoint.x>this.currentPoint.x?s.x-c:s.x,a=this.startPoint.y>this.currentPoint.y?s.y-h:s.y,n=s.width+c,r=s.height+h}hd(this.helper,{id:this.helper.id,x:o,y:a,width:Math.max(0,n),height:Math.max(0,r)})},t.prototype.updateOverviewrect=function(e,t,i,n){pd(document.getElementById(this.canvas.id+"overviewrect"),{x:e,y:t,width:Math.max(1,i),height:Math.max(1,n)}),this.updateOverviewCorner("top",e+8,t+1,Math.max(0,i-16),2),this.updateOverviewCorner("bottom",e+8,t+n+3,Math.max(0,i-16),2),this.updateOverviewCorner("left",e-2,t+11,2,Math.max(0,n-16)),this.updateOverviewCorner("right",e+i,t+11,2,Math.max(0,n-16)),this.updateOverviewCorner("topleft",e,t+3,5,5),this.updateOverviewCorner("topright",e+i,t+3,5,5),this.updateOverviewCorner("bottomleft",e,t+n+3,5,5),this.updateOverviewCorner("bottomright",e+i,t+n+3,5,5)},t.prototype.updateOverviewCorner=function(e,t,i,n,r){var o,a,s="visible"+e;"top"===e||"bottom"===e||"right"===e||"left"===e?(o={x:t,y:i,width:n,height:r,fill:"#ED1C24"},a={x:t-2,y:i-2,width:2===n?4:n,height:2===r?4:r}):(o={cx:t,cy:i,r:4,fill:"#ED1C24"},a={cx:t,cy:i,r:6,fill:"transparent"}),pd(document.getElementById(this.canvas.id+s),o),pd(document.getElementById(this.canvas.id+e),a)},t.prototype.translateOverviewRectangle=function(){var e=Number(this.model.width),t=Number(this.model.height),i=this.currentPoint.x-this.prevPoint.x,n=this.currentPoint.y-this.prevPoint.y,r=(Math.min(this.parent.scroller.viewPortWidth/e,this.parent.scroller.viewPortHeight/t),this.element.getElementsByClassName("overviewsvg")[0].getElementById(this.canvas.id+"overviewrect").getBBox()),o=r.x+i,a=r.y+n,s=r.width,l=r.height;this.updateOverviewrect(o,a,s,l),this.updateParentView(this.parent.scroller.currentZoom,o,a,s,l,null)},t.prototype.renderOverviewRect=function(e,t,i,n){var r=Number(this.model.width),o=Number(this.model.height),a=i/r*this.contentWidth,s=n/o*this.contentHeight,l=Math.max(this.parent.scroller.viewPortWidth/a,this.parent.scroller.viewPortHeight/s);if(l>=.25&&l<=30){this.updateParentView(l,e,t,i,n,{x:0,y:0});var c=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var h=this.element.getElementsByTagName("rect")[10].getBBox();c.x=h.x,c.y=h.y}this.updateOverviewrect(c.x,c.y,c.width,c.height)}},t.prototype.scrollOverviewRect=function(e,t,i,n){if(!this.actionName||n){var r=Number(this.model.width),o=Number(this.model.height),a=Math.min(this.contentWidth/r,this.contentHeight/o),s=new hn,l=s.x=e/i/a,c=s.y=t/i/a,h=s.width=this.parent.scroller.viewPortWidth/i/a,d=s.height=this.parent.scroller.viewPortHeight/i/a;this.parent.scroller.viewPortWidth,this.parent.scroller.viewPortHeight;if(n){var p=new hn;return p.x=l,p.y=c,p.width=h,p.height=d,p}this.updateOverviewrect(-l,-c,h,d)}return null},t.prototype.updateParentView=function(e,t,i,n,r,o){var a,s,l=Number(this.model.width),c=Number(this.model.height),h=t*(this.contentWidth/l)*e,d=i*(this.contentHeight/c)*e;this.parent.scroller.getPageBounds();1===e&&"pan"!==this.actionName||(a=-h-this.parent.scroller.horizontalOffset,s=-d-this.parent.scroller.verticalOffset),this.parent.setBlazorDiagramProps(!0),this.parent.realActions|=zn.OverViewAction,"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(e/this.parent.scroller.currentZoom,a,s,o):w()?this.parent.scroller.zoom(1,a,s,o):this.parent.pan(a,s,o)},t.prototype.updateHtmlLayer=function(e){var t=id(e.element.id),i=this.parent.scroller.getPageBounds(!0),n=i.width,r=i.height,o=Math.max(n,this.parent.scroller.viewPortWidth),a=Math.max(r,this.parent.scroller.viewPortHeight),s=Math.min(Number(this.model.width)/o,Number(this.model.height)/a);t.style.transform="scale("+s+") translate("+this.parent.scroller.transform.tx+"px,"+this.parent.scroller.transform.ty+"px)"},t.prototype.updateView=function(e){var t,i,n=this.parent.scroller.getPageBounds(),r=this.parent.scroller.viewPortWidth/this.parent.scroller.currentZoom,o=this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom,a=0,s=0;this.parent.scroller.currentZoom<1&&r>n.width&&o>n.height&&(a=(r-n.width)/2,s=(o-n.height)/2),t=n.width,i=n.height;var l,c=Number(this.model.width),h=Number(this.model.height),d=Math.max(t,this.parent.scroller.viewPortWidth),p=Math.max(i,this.parent.scroller.viewPortHeight);this.contentWidth=d=Math.max(d,c/h*p),this.contentHeight=p=Math.max(p,h/c*d),l=Math.min(c/d,h/p);var u=document.getElementById(this.element.id+"_htmlLayer");u.style.webkitTransform="scale("+l+") translate("+-n.x+"px,"+-n.y+"px)",u.style.transform="scale("+l+") translate("+(-n.x+a)+"px,"+(-n.y+s)+"px)",document.getElementById(this.element.id+"_overviewlayer").setAttribute("transform","translate("+-n.x*l+","+-n.y*l+")"),this.horizontalOffset=n.x*l,this.verticalOffset=n.y*l;var f=document.getElementById(this.element.id+"_diagramLayer"),g=td(this.element.id),m=f.getContext("2d"),y=Number(this.model.width)/this.contentWidth,v=Number(this.model.height)/this.contentHeight;y=Math.min(y,v),g.setAttribute("transform","translate(0,0),scale("+y+")"),m.setTransform(y,0,0,y,0,0),m.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},t.prototype.scrolled=function(e){if(this.event){var t=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-t.x,-t.y,t.width,t.height)}},t.prototype.updateCursor=function(e){if(ad(e.target,"overviewresizer"))switch(e.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},t.prototype.mouseMove=function(e){if(this.event=!1,this.updateCursor(e),this.currentPoint=this.mousePosition(e),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},t.prototype.documentMouseUp=function(e){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout((function(){var e=document.getElementById(t.element.id).getBoundingClientRect();t.model.width=e.width>0?e.width:t.model.width,t.model.height=e.height>0?e.height:t.model.height,t.renderCanvas(),t.setParent(t.sourceID)}),10),!1},t.prototype.mouseDown=function(e){if(e.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),e.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),ad(e.target,"overviewresizer"))switch(this.actionName="scale",e.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(e),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},t.prototype.mouseUp=function(e){this.currentPoint=this.mousePosition(e);Number(this.model.width),Number(this.model.height);if(this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var t=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"";var i=t.x,n=t.y,r=t.width,o=t.height;"topleft"===this.resizeDirection||"topright"===this.resizeDirection||"bottomleft"===this.resizeDirection||this.resizeDirection;this.renderOverviewRect(i,n,r,o)}}else if(e.target.id===this.canvas.id+"_overviewsvg"||"helper"===e.target.id){r=(t=this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()).width,o=t.height;this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-r/2,this.currentPoint.y-o/2,r,o),this.inAction=!1}this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.initHelper=function(){var e=this.element.getElementsByTagName("svg")[2],t=(this.parent.scroller.currentZoom,this.startPoint.x),i=this.startPoint.y,n=1,r=1;if("scale"===this.actionName){var o=e.getElementById(this.canvas.id+"overviewrect").getBBox();t=o.x,i=o.y,n=o.width,r=o.height}var a=rd("rect",{id:"helper",x:t,y:i,width:n,height:r,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});e.getElementById(this.element.id+"_overviewlayer").appendChild(a),this.helper=a},t.prototype.mousePosition=function(e){var t,i,n;if(-1!==e.type.indexOf("touch")){var r=(t=e).changedTouches[0].clientX,o=t.changedTouches[0].clientY;i=r-this.element.offsetLeft,n=o-this.element.offsetTop}else i=e.clientX,n=e.clientY;var a=this.element.getBoundingClientRect();return i-=a.left,n-=a.top,{x:i+this.horizontalOffset,y:n+this.verticalOffset}},t.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var t=document.getElementById(this.element.id+"_canvas");t&&this.element.removeChild(t)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},t.prototype.getModuleName=function(){return"Overview"},Vf([zt("100%")],t.prototype,"width",void 0),Vf([zt("100%")],t.prototype,"height",void 0),Vf([zt("")],t.prototype,"sourceID",void 0),Vf([Ft()],t.prototype,"created",void 0),t}(si),Yf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xf=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={layers:"layer",customCursors:"customCursor",connectors:{connector:{connectorAnnotations:"connectorAnnotation"}},nodes:{node:{nodeAnnotations:"nodeAnnotation",ports:"port"}}},i.immediateRender=!1,i}return Yf(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing))return n.createElement("div",this.getDefaultAttributes(),this.props.children);e.prototype.render.call(this),this.initRenderCalled=!0},t}(cu);Ni(Xf,[Ri,n.PureComponent]);var Gf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qf=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Gf(t,e),t.moduleName="palette"}(Hi),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Gf(t,e),t.propertyName="palettes",t.moduleName="palettes"}(Hi),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ni(function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={palettes:"palette"},i.immediateRender=!0,i}return qf(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing))return n.createElement("div",this.getDefaultAttributes(),this.props.children);e.prototype.render.call(this),this.initRenderCalled=!0},t}(Wf),[Ri,n.PureComponent]);var Zf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ni(function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.immediateRender=!0,i}return Zf(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing))return n.createElement("div",this.getDefaultAttributes(),this.props.children);e.prototype.render.call(this),this.initRenderCalled=!0},t}(Uf),[Ri,n.PureComponent])},function(e,t,i){"use strict";function n(e){for(var t="https://material-ui.com/production-error/?code="+e,i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}i.d(t,"a",(function(){return n}))},,,,,,,,,function(e,t,i){"use strict";var n=i(72),r="function"===typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,h=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.forward_ref"):60112,u=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,i){this.props=e,this.context=t,this.refs=b,this.updater=i||v}function x(){}function S(e,t,i){this.props=e,this.context=t,this.refs=b,this.updater=i||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var C=S.prototype=new x;C.constructor=S,n(C,w.prototype),C.isPureReactComponent=!0;var P={current:null},O=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var n,r={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)O.call(t,n)&&!E.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];r.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:o,type:e,key:a,ref:s,props:r,_owner:P.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var k=/\/+/g,A=[];function M(e,t,i,n){if(A.length){var r=A.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function L(e,t,i){return null==e?0:function e(t,i,n,r){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return n(r,t,""===i?"."+R(t,0):i),1;if(l=0,i=""===i?".":i+":",Array.isArray(t))for(var c=0;c<t.length;c++){var h=i+R(s=t[c],c);l+=e(s,h,n,r)}else if(null===t||"object"!==typeof t?h=null:h="function"===typeof(h=m&&t[m]||t["@@iterator"])?h:null,"function"===typeof h)for(t=h.call(t),c=0;!(s=t.next()).done;)l+=e(s=s.value,h=i+R(s,c++),n,r);else if("object"===s)throw n=""+t,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return l}(e,"",t,i)}function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function N(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?z(e,n,i,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(k,"$&/")+"/")+i)),n.push(e))}function z(e,t,i,n,r){var o="";null!=i&&(o=(""+i).replace(k,"$&/")+"/"),L(e,N,t=M(t,o,n,r)),D(t)}var B={current:null};function H(){var e=B.current;if(null===e)throw Error(y(321));return e}var _={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:P,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,i){if(null==e)return e;var n=[];return z(e,n,null,t,i),n},forEach:function(e,t,i){if(null==e)return e;L(e,j,t=M(null,null,t,i)),D(t)},count:function(e){return L(e,(function(){return null}),null)},toArray:function(e){var t=[];return z(e,t,null,(function(e){return e})),t},only:function(e){if(!I(e))throw Error(y(143));return e}},t.Component=w,t.Fragment=s,t.Profiler=c,t.PureComponent=S,t.StrictMode=l,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error(y(267,e));var r=n({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=P.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(h in t)O.call(t,h)&&!E.hasOwnProperty(h)&&(r[h]=void 0===t[h]&&void 0!==c?c[h]:t[h])}var h=arguments.length-2;if(1===h)r.children=i;else if(1<h){c=Array(h);for(var d=0;d<h;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:r,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:p,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return H().useCallback(e,t)},t.useContext=function(e,t){return H().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return H().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return H().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return H().useLayoutEffect(e,t)},t.useMemo=function(e,t){return H().useMemo(e,t)},t.useReducer=function(e,t,i){return H().useReducer(e,t,i)},t.useRef=function(e){return H().useRef(e)},t.useState=function(e){return H().useState(e)},t.version="16.13.1"},function(e,t,i){"use strict";var n=i(0),r=i(72),o=i(99);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(a(227));function s(e,t,i,n,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(h){this.onError(h)}}var l=!1,c=null,h=!1,d=null,p={onError:function(e){l=!0,c=e}};function u(e,t,i,n,r,o,a,h,d){l=!1,c=null,s.apply(p,arguments)}var f=null,g=null,m=null;function y(e,t,i){var n=e.type||"unknown-event";e.currentTarget=m(i),function(e,t,i,n,r,o,s,p,f){if(u.apply(this,arguments),l){if(!l)throw Error(a(198));var g=c;l=!1,c=null,h||(h=!0,d=g)}}(n,t,void 0,e),e.currentTarget=null}var v=null,b={};function w(){if(v)for(var e in b){var t=b[e],i=v.indexOf(e);if(!(-1<i))throw Error(a(96,e));if(!S[i]){if(!t.extractEvents)throw Error(a(97,e));for(var n in S[i]=t,i=t.eventTypes){var r=void 0,o=i[n],s=t,l=n;if(C.hasOwnProperty(l))throw Error(a(99,l));C[l]=o;var c=o.phasedRegistrationNames;if(c){for(r in c)c.hasOwnProperty(r)&&x(c[r],s,l);r=!0}else o.registrationName?(x(o.registrationName,s,l),r=!0):r=!1;if(!r)throw Error(a(98,n,e))}}}}function x(e,t,i){if(P[e])throw Error(a(100,e));P[e]=t,O[e]=t.eventTypes[i].dependencies}var S=[],C={},P={},O={};function E(e){var t,i=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];if(!b.hasOwnProperty(t)||b[t]!==n){if(b[t])throw Error(a(102,t));b[t]=n,i=!0}}i&&w()}var T=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),I=null,k=null,A=null;function M(e){if(e=g(e)){if("function"!==typeof I)throw Error(a(280));var t=e.stateNode;t&&(t=f(t),I(e.stateNode,e.type,t))}}function D(e){k?A?A.push(e):A=[e]:k=e}function L(){if(k){var e=k,t=A;if(A=k=null,M(e),t)for(e=0;e<t.length;e++)M(t[e])}}function R(e,t){return e(t)}function j(e,t,i,n,r){return e(t,i,n,r)}function N(){}var z=R,B=!1,H=!1;function _(){null===k&&null===A||(N(),L())}function W(e,t,i){if(H)return e(t,i);H=!0;try{return z(e,t,i)}finally{H=!1,_()}}var F=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V=Object.prototype.hasOwnProperty,U={},Y={};function X(e,t,i,n,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new X(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new X(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new X(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new X(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new X(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new X(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new X(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new X(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new X(e,5,!1,e.toLowerCase(),null,!1)}));var q=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(q,Z);G[t]=new X(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(q,Z);G[t]=new X(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(q,Z);G[t]=new X(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new X(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new X(e,1,!1,e.toLowerCase(),null,!0)}));var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(e,t,i,n){var r=G.hasOwnProperty(t)?G[t]:null;(null!==r?0===r.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!V.call(Y,e)||!V.call(U,e)&&(F.test(e)?Y[e]=!0:(U[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}K.hasOwnProperty("ReactCurrentDispatcher")||(K.ReactCurrentDispatcher={current:null}),K.hasOwnProperty("ReactCurrentBatchConfig")||(K.ReactCurrentBatchConfig={suspense:null});var Q=/^(.*)[\\\/]/,J="function"===typeof Symbol&&Symbol.for,ee=J?Symbol.for("react.element"):60103,te=J?Symbol.for("react.portal"):60106,ie=J?Symbol.for("react.fragment"):60107,ne=J?Symbol.for("react.strict_mode"):60108,re=J?Symbol.for("react.profiler"):60114,oe=J?Symbol.for("react.provider"):60109,ae=J?Symbol.for("react.context"):60110,se=J?Symbol.for("react.concurrent_mode"):60111,le=J?Symbol.for("react.forward_ref"):60112,ce=J?Symbol.for("react.suspense"):60113,he=J?Symbol.for("react.suspense_list"):60120,de=J?Symbol.for("react.memo"):60115,pe=J?Symbol.for("react.lazy"):60116,ue=J?Symbol.for("react.block"):60121,fe="function"===typeof Symbol&&Symbol.iterator;function ge(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=fe&&e[fe]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ie:return"Fragment";case te:return"Portal";case re:return"Profiler";case ne:return"StrictMode";case ce:return"Suspense";case he:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return me(e.type);case ue:return me(e.render);case pe:if(e=1===e._status?e._result:null)return me(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break e;default:var n=e._debugOwner,r=e._debugSource,o=me(e.type);i=null,n&&(i=me(n.type)),n=o,o="",r?o=" (at "+r.fileName.replace(Q,"")+":"+r.lineNumber+")":i&&(o=" (created by "+i+")"),i="\n    in "+(n||"Unknown")+o}t+=i,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function xe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=be(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function Se(e,t){var i=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function Ce(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=ve(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Pe(e,t){null!=(t=t.checked)&&$(e,"checked",t,!1)}function Oe(e,t){Pe(e,t);var i=ve(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Te(e,t.type,i):t.hasOwnProperty("defaultValue")&&Te(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ee(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function Te(e,t,i){"number"===t&&e.ownerDocument.activeElement===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function Ie(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ke(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+ve(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(a(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(a(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:ve(i)}}function De(e,t){var i=ve(t.value),n=ve(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function Le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",je="http://www.w3.org/2000/svg";function Ne(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ne(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Be,He=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,i,n,r){MSApp.execUnsafeLocalFunction((function(){return e(t,i)}))}:e}((function(e,t){if(e.namespaceURI!==je||"innerHTML"in e)e.innerHTML=t;else{for((Be=Be||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function _e(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}function We(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Fe={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},Ve={},Ue={};function Ye(e){if(Ve[e])return Ve[e];if(!Fe[e])return e;var t,i=Fe[e];for(t in i)if(i.hasOwnProperty(t)&&t in Ue)return Ve[e]=i[t];return e}T&&(Ue=document.createElement("div").style,"AnimationEvent"in window||(delete Fe.animationend.animation,delete Fe.animationiteration.animation,delete Fe.animationstart.animation),"TransitionEvent"in window||delete Fe.transitionend.transition);var Xe=Ye("animationend"),Ge=Ye("animationiteration"),qe=Ye("animationstart"),Ze=Ye("transitionend"),Ke="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$e=new("function"===typeof WeakMap?WeakMap:Map);function Qe(e){var t=$e.get(e);return void 0===t&&(t=new Map,$e.set(e,t)),t}function Je(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Je(e)!==e)throw Error(a(188))}function it(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(n=r.return)){i=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===i)return tt(r),e;if(o===n)return tt(r),t;o=o.sibling}throw Error(a(188))}if(i.return!==n.return)i=r,n=o;else{for(var s=!1,l=r.child;l;){if(l===i){s=!0,i=r,n=o;break}if(l===n){s=!0,n=r,i=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===i){s=!0,i=o,n=r;break}if(l===n){s=!0,n=o,i=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(i.alternate!==n)throw Error(a(190))}if(3!==i.tag)throw Error(a(188));return i.stateNode.current===i?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function nt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function rt(e,t,i){Array.isArray(e)?e.forEach(t,i):e&&t.call(i,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)y(e,t[n],i[n]);else t&&y(e,t,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=nt(ot,e)),e=ot,ot=null,e){if(rt(e,at),ot)throw Error(a(95));if(h)throw e=d,h=!1,d=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!T)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function pt(e,t,i,n){if(ht.length){var r=ht.pop();return r.topLevelType=e,r.eventSystemFlags=n,r.nativeEvent=t,r.targetInst=i,r}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:i,ancestors:[]}}function ut(e){var t=e.targetInst,i=t;do{if(!i){e.ancestors.push(i);break}var n=i;if(3===n.tag)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=3!==n.tag?null:n.stateNode.containerInfo}if(!n)break;5!==(t=i.tag)&&6!==t||e.ancestors.push(i),i=Ei(n)}while(i);for(i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var r=lt(e.nativeEvent);n=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===i&&(a|=64);for(var s=null,l=0;l<S.length;l++){var c=S[l];c&&(c=c.extractEvents(n,t,o,r,a))&&(s=nt(s,c))}st(s)}}function ft(e,t,i){if(!i.has(e)){switch(e){case"scroll":qt(t,"scroll",!0);break;case"focus":case"blur":qt(t,"focus",!0),qt(t,"blur",!0),i.set("blur",null),i.set("focus",null);break;case"cancel":case"close":ct(e)&&qt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ke.indexOf(e)&&Gt(e,t)}i.set(e,null)}}var gt,mt,yt,vt=!1,bt=[],wt=null,xt=null,St=null,Ct=new Map,Pt=new Map,Ot=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Tt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function It(e,t,i,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|i,nativeEvent:r,container:n}}function kt(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function At(e,t,i,n,r,o){return null===e||e.nativeEvent!==o?(e=It(t,i,n,r,o),null!==t&&(null!==(t=Ti(t))&&mt(t)),e):(e.eventSystemFlags|=n,e)}function Mt(e){var t=Ei(e.target);if(null!==t){var i=Je(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=et(i)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){yt(i)}))}else if(3===t&&i.stateNode.hydrate)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var i=Ti(t);return null!==i&&mt(i),e.blockedOn=t,!1}return!0}function Lt(e,t,i){Dt(e)&&i.delete(t)}function Rt(){for(vt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Ti(e.blockedOn))&&gt(e);break}var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==wt&&Dt(wt)&&(wt=null),null!==xt&&Dt(xt)&&(xt=null),null!==St&&Dt(St)&&(St=null),Ct.forEach(Lt),Pt.forEach(Lt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Rt)))}function Nt(e){function t(t){return jt(t,e)}if(0<bt.length){jt(bt[0],e);for(var i=1;i<bt.length;i++){var n=bt[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==wt&&jt(wt,e),null!==xt&&jt(xt,e),null!==St&&jt(St,e),Ct.forEach(t),Pt.forEach(t),i=0;i<Ot.length;i++)(n=Ot[i]).blockedOn===e&&(n.blockedOn=null);for(;0<Ot.length&&null===(i=Ot[0]).blockedOn;)Mt(i),null===i.blockedOn&&Ot.shift()}var zt={},Bt=new Map,Ht=new Map,_t=["abort","abort",Xe,"animationEnd",Ge,"animationIteration",qe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ze,"transitionEnd","waiting","waiting"];function Wt(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1],o="on"+(r[0].toUpperCase()+r.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[n],eventPriority:t},Ht.set(n,t),Bt.set(n,o),zt[r]=o}}Wt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Wt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Wt(_t,2);for(var Ft="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Vt=0;Vt<Ft.length;Vt++)Ht.set(Ft[Vt],0);var Ut=o.unstable_UserBlockingPriority,Yt=o.unstable_runWithPriority,Xt=!0;function Gt(e,t){qt(t,e,!1)}function qt(e,t,i){var n=Ht.get(t);switch(void 0===n?2:n){case 0:n=Zt.bind(null,t,1,e);break;case 1:n=Kt.bind(null,t,1,e);break;default:n=$t.bind(null,t,1,e)}i?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function Zt(e,t,i,n){B||N();var r=$t,o=B;B=!0;try{j(r,e,t,i,n)}finally{(B=o)||_()}}function Kt(e,t,i,n){Yt(Ut,$t.bind(null,e,t,i,n))}function $t(e,t,i,n){if(Xt)if(0<bt.length&&-1<Et.indexOf(e))e=It(null,e,t,i,n),bt.push(e);else{var r=Qt(e,t,i,n);if(null===r)kt(e,n);else if(-1<Et.indexOf(e))e=It(r,e,t,i,n),bt.push(e);else if(!function(e,t,i,n,r){switch(t){case"focus":return wt=At(wt,e,t,i,n,r),!0;case"dragenter":return xt=At(xt,e,t,i,n,r),!0;case"mouseover":return St=At(St,e,t,i,n,r),!0;case"pointerover":var o=r.pointerId;return Ct.set(o,At(Ct.get(o)||null,e,t,i,n,r)),!0;case"gotpointercapture":return o=r.pointerId,Pt.set(o,At(Pt.get(o)||null,e,t,i,n,r)),!0}return!1}(r,e,t,i,n)){kt(e,n),e=pt(e,n,null,t);try{W(ut,e)}finally{dt(e)}}}}function Qt(e,t,i,n){if(null!==(i=Ei(i=lt(n)))){var r=Je(i);if(null===r)i=null;else{var o=r.tag;if(13===o){if(null!==(i=et(r)))return i;i=null}else if(3===o){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}e=pt(e,n,i,t);try{W(ut,e)}finally{dt(e)}return null}var Jt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];function ti(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||Jt.hasOwnProperty(e)&&Jt[e]?(""+t).trim():t+"px"}function ii(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=ti(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(Jt).forEach((function(e){ei.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jt[t]=Jt[e]}))}));var ni=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ri(e,t){if(t){if(ni[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function oi(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=Re;function si(e,t){var i=Qe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=O[t];for(var n=0;n<t.length;n++)ft(t[n],e,i)}function li(){}function ci(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var i,n=hi(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hi(n)}}function pi(){for(var e=window,t=ci();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=ci((e=t.contentWindow).document)}return t}function ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var fi=null,gi=null;function mi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var vi="function"===typeof setTimeout?setTimeout:void 0,bi="function"===typeof clearTimeout?clearTimeout:void 0;function wi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function xi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var Si=Math.random().toString(36).slice(2),Ci="__reactInternalInstance$"+Si,Pi="__reactEventHandlers$"+Si,Oi="__reactContainere$"+Si;function Ei(e){var t=e[Ci];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Oi]||i[Ci]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=xi(e);null!==e;){if(i=e[Ci])return i;e=xi(e)}return t}i=(e=i).parentNode}return null}function Ti(e){return!(e=e[Ci]||e[Oi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ki(e){return e[Pi]||null}function Ai(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Mi(e,t){var i=e.stateNode;if(!i)return null;var n=f(i);if(!n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(a(231,t,typeof i));return i}function Di(e,t,i){(t=Mi(e,i.dispatchConfig.phasedRegistrationNames[t]))&&(i._dispatchListeners=nt(i._dispatchListeners,t),i._dispatchInstances=nt(i._dispatchInstances,e))}function Li(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,i=[];t;)i.push(t),t=Ai(t);for(t=i.length;0<t--;)Di(i[t],"captured",e);for(t=0;t<i.length;t++)Di(i[t],"bubbled",e)}}function Ri(e,t,i){e&&i&&i.dispatchConfig.registrationName&&(t=Mi(e,i.dispatchConfig.registrationName))&&(i._dispatchListeners=nt(i._dispatchListeners,t),i._dispatchInstances=nt(i._dispatchInstances,e))}function ji(e){e&&e.dispatchConfig.registrationName&&Ri(e._targetInst,null,e)}function Ni(e){rt(e,Li)}var zi=null,Bi=null,Hi=null;function _i(){if(Hi)return Hi;var e,t,i=Bi,n=i.length,r="value"in zi?zi.value:zi.textContent,o=r.length;for(e=0;e<n&&i[e]===r[e];e++);var a=n-e;for(t=1;t<=a&&i[n-t]===r[o-t];t++);return Hi=r.slice(e,1<t?1-t:void 0)}function Wi(){return!0}function Fi(){return!1}function Vi(e,t,i,n){for(var r in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=i,e=this.constructor.Interface)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(i):"target"===r?this.target=n:this[r]=i[r]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wi:Fi,this.isPropagationStopped=Fi,this}function Ui(e,t,i,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,i,n),r}return new this(e,t,i,n)}function Yi(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Xi(e){e.eventPool=[],e.getPooled=Ui,e.release=Yi}r(Vi.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){this.isPersistent=Wi},isPersistent:Fi,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Fi,this._dispatchInstances=this._dispatchListeners=null}}),Vi.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Vi.extend=function(e){function t(){}function i(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var o=new t;return r(o,i.prototype),i.prototype=o,i.prototype.constructor=i,i.Interface=r({},n.Interface,e),i.extend=n.extend,Xi(i),i},Xi(Vi);var Gi=Vi.extend({data:null}),qi=Vi.extend({data:null}),Zi=[9,13,27,32],Ki=T&&"CompositionEvent"in window,$i=null;T&&"documentMode"in document&&($i=document.documentMode);var Qi=T&&"TextEvent"in window&&!$i,Ji=T&&(!Ki||$i&&8<$i&&11>=$i),en=String.fromCharCode(32),tn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},nn=!1;function rn(e,t){switch(e){case"keyup":return-1!==Zi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function on(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var an=!1;var sn={eventTypes:tn,extractEvents:function(e,t,i,n){var r;if(Ki)e:{switch(e){case"compositionstart":var o=tn.compositionStart;break e;case"compositionend":o=tn.compositionEnd;break e;case"compositionupdate":o=tn.compositionUpdate;break e}o=void 0}else an?rn(e,i)&&(o=tn.compositionEnd):"keydown"===e&&229===i.keyCode&&(o=tn.compositionStart);return o?(Ji&&"ko"!==i.locale&&(an||o!==tn.compositionStart?o===tn.compositionEnd&&an&&(r=_i()):(Bi="value"in(zi=n)?zi.value:zi.textContent,an=!0)),o=Gi.getPooled(o,t,i,n),r?o.data=r:null!==(r=on(i))&&(o.data=r),Ni(o),r=o):r=null,(e=Qi?function(e,t){switch(e){case"compositionend":return on(t);case"keypress":return 32!==t.which?null:(nn=!0,en);case"textInput":return(e=t.data)===en&&nn?null:e;default:return null}}(e,i):function(e,t){if(an)return"compositionend"===e||!Ki&&rn(e,t)?(e=_i(),Hi=Bi=zi=null,an=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ji&&"ko"!==t.locale?null:t.data;default:return null}}(e,i))?((t=qi.getPooled(tn.beforeInput,t,i,n)).data=e,Ni(t)):t=null,null===r?t:null===t?r:[r,t]}},ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ln[e.type]:"textarea"===t}var hn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function dn(e,t,i){return(e=Vi.getPooled(hn.change,e,t,i)).type="change",D(i),Ni(e),e}var pn=null,un=null;function fn(e){st(e)}function gn(e){if(xe(Ii(e)))return e}function mn(e,t){if("change"===e)return t}var yn=!1;function vn(){pn&&(pn.detachEvent("onpropertychange",bn),un=pn=null)}function bn(e){if("value"===e.propertyName&&gn(un))if(e=dn(un,e,lt(e)),B)st(e);else{B=!0;try{R(fn,e)}finally{B=!1,_()}}}function wn(e,t,i){"focus"===e?(vn(),un=i,(pn=t).attachEvent("onpropertychange",bn)):"blur"===e&&vn()}function xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return gn(un)}function Sn(e,t){if("click"===e)return gn(t)}function Cn(e,t){if("input"===e||"change"===e)return gn(t)}T&&(yn=ct("input")&&(!document.documentMode||9<document.documentMode));var Pn={eventTypes:hn,_isInputEventSupported:yn,extractEvents:function(e,t,i,n){var r=t?Ii(t):window,o=r.nodeName&&r.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===r.type)var a=mn;else if(cn(r))if(yn)a=Cn;else{a=xn;var s=wn}else(o=r.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(a=Sn);if(a&&(a=a(e,t)))return dn(a,i,n);s&&s(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&Te(r,"number",r.value)}},On=Vi.extend({view:null,detail:null}),En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function In(){return Tn}var kn=0,An=0,Mn=!1,Dn=!1,Ln=On.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:In,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=kn;return kn=e.screenX,Mn?"mousemove"===e.type?e.screenX-t:0:(Mn=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=An;return An=e.screenY,Dn?"mousemove"===e.type?e.screenY-t:0:(Dn=!0,0)}}),Rn=Ln.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),jn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Nn={eventTypes:jn,extractEvents:function(e,t,i,n,r){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&r)&&(i.relatedTarget||i.fromElement)||!a&&!o)return null;(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=i.relatedTarget||i.toElement)?Ei(t):null)&&(t!==Je(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Ln,l=jn.mouseLeave,c=jn.mouseEnter,h="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Rn,l=jn.pointerLeave,c=jn.pointerEnter,h="pointer");if(e=null==a?o:Ii(a),o=null==t?o:Ii(t),(l=s.getPooled(l,a,i,n)).type=h+"leave",l.target=e,l.relatedTarget=o,(i=s.getPooled(c,t,i,n)).type=h+"enter",i.target=o,i.relatedTarget=e,h=t,(n=a)&&h)e:{for(c=h,a=0,e=s=n;e;e=Ai(e))a++;for(e=0,t=c;t;t=Ai(t))e++;for(;0<a-e;)s=Ai(s),a--;for(;0<e-a;)c=Ai(c),e--;for(;a--;){if(s===c||s===c.alternate)break e;s=Ai(s),c=Ai(c)}s=null}else s=null;for(c=s,s=[];n&&n!==c&&(null===(a=n.alternate)||a!==c);)s.push(n),n=Ai(n);for(n=[];h&&h!==c&&(null===(a=h.alternate)||a!==c);)n.push(h),h=Ai(h);for(h=0;h<s.length;h++)Ri(s[h],"bubbled",l);for(h=n.length;0<h--;)Ri(n[h],"captured",i);return 0===(64&r)?[l]:[l,i]}};var zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Bn=Object.prototype.hasOwnProperty;function Hn(e,t){if(zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!Bn.call(t,i[n])||!zn(e[i[n]],t[i[n]]))return!1;return!0}var _n=T&&"documentMode"in document&&11>=document.documentMode,Wn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Fn=null,Vn=null,Un=null,Yn=!1;function Xn(e,t){var i=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Yn||null==Fn||Fn!==ci(i)?null:("selectionStart"in(i=Fn)&&ui(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},Un&&Hn(Un,i)?null:(Un=i,(e=Vi.getPooled(Wn.select,Vn,e,t)).type="select",e.target=Fn,Ni(e),e))}var Gn={eventTypes:Wn,extractEvents:function(e,t,i,n,r,o){if(!(o=!(r=o||(n.window===n?n.document:9===n.nodeType?n:n.ownerDocument)))){e:{r=Qe(r),o=O.onSelect;for(var a=0;a<o.length;a++)if(!r.has(o[a])){r=!1;break e}r=!0}o=!r}if(o)return null;switch(r=t?Ii(t):window,e){case"focus":(cn(r)||"true"===r.contentEditable)&&(Fn=r,Vn=t,Un=null);break;case"blur":Un=Vn=Fn=null;break;case"mousedown":Yn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yn=!1,Xn(i,n);case"selectionchange":if(_n)break;case"keydown":case"keyup":return Xn(i,n)}return null}},qn=Vi.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zn=Vi.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kn=On.extend({relatedTarget:null});function $n(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Qn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},er=On.extend({key:function(e){if(e.key){var t=Qn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$n(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Jn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:In,charCode:function(e){return"keypress"===e.type?$n(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$n(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),tr=Ln.extend({dataTransfer:null}),ir=On.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:In}),nr=Vi.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),rr=Ln.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),or={eventTypes:zt,extractEvents:function(e,t,i,n){var r=Bt.get(e);if(!r)return null;switch(e){case"keypress":if(0===$n(i))return null;case"keydown":case"keyup":e=er;break;case"blur":case"focus":e=Kn;break;case"click":if(2===i.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=tr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ir;break;case Xe:case Ge:case qe:e=qn;break;case Ze:e=nr;break;case"scroll":e=On;break;case"wheel":e=rr;break;case"copy":case"cut":case"paste":e=Zn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Rn;break;default:e=Vi}return Ni(t=e.getPooled(r,t,i,n)),t}};if(v)throw Error(a(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),f=ki,g=Ti,m=Ii,E({SimpleEventPlugin:or,EnterLeaveEventPlugin:Nn,ChangeEventPlugin:Pn,SelectEventPlugin:Gn,BeforeInputEventPlugin:sn});var ar=[],sr=-1;function lr(e){0>sr||(e.current=ar[sr],ar[sr]=null,sr--)}function cr(e,t){sr++,ar[sr]=e.current,e.current=t}var hr={},dr={current:hr},pr={current:!1},ur=hr;function fr(e,t){var i=e.type.contextTypes;if(!i)return hr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mr(){lr(pr),lr(dr)}function yr(e,t,i){if(dr.current!==hr)throw Error(a(168));cr(dr,t),cr(pr,i)}function vr(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var o in n=n.getChildContext())if(!(o in e))throw Error(a(108,me(t)||"Unknown",o));return r({},i,{},n)}function br(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hr,ur=dr.current,cr(dr,e),cr(pr,pr.current),!0}function wr(e,t,i){var n=e.stateNode;if(!n)throw Error(a(169));i?(e=vr(e,t,ur),n.__reactInternalMemoizedMergedChildContext=e,lr(pr),lr(dr),cr(dr,e)):lr(pr),cr(pr,i)}var xr=o.unstable_runWithPriority,Sr=o.unstable_scheduleCallback,Cr=o.unstable_cancelCallback,Pr=o.unstable_requestPaint,Or=o.unstable_now,Er=o.unstable_getCurrentPriorityLevel,Tr=o.unstable_ImmediatePriority,Ir=o.unstable_UserBlockingPriority,kr=o.unstable_NormalPriority,Ar=o.unstable_LowPriority,Mr=o.unstable_IdlePriority,Dr={},Lr=o.unstable_shouldYield,Rr=void 0!==Pr?Pr:function(){},jr=null,Nr=null,zr=!1,Br=Or(),Hr=1e4>Br?Or:function(){return Or()-Br};function _r(){switch(Er()){case Tr:return 99;case Ir:return 98;case kr:return 97;case Ar:return 96;case Mr:return 95;default:throw Error(a(332))}}function Wr(e){switch(e){case 99:return Tr;case 98:return Ir;case 97:return kr;case 96:return Ar;case 95:return Mr;default:throw Error(a(332))}}function Fr(e,t){return e=Wr(e),xr(e,t)}function Vr(e,t,i){return e=Wr(e),Sr(e,t,i)}function Ur(e){return null===jr?(jr=[e],Nr=Sr(Tr,Xr)):jr.push(e),Dr}function Yr(){if(null!==Nr){var e=Nr;Nr=null,Cr(e)}Xr()}function Xr(){if(!zr&&null!==jr){zr=!0;var e=0;try{var t=jr;Fr(99,(function(){for(;e<t.length;e++){var i=t[e];do{i=i(!0)}while(null!==i)}})),jr=null}catch(i){throw null!==jr&&(jr=jr.slice(e+1)),Sr(Tr,Yr),i}finally{zr=!1}}}function Gr(e,t,i){return 1073741821-(1+((1073741821-e+t/10)/(i/=10)|0))*i}function qr(e,t){if(e&&e.defaultProps)for(var i in t=r({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}var Zr={current:null},Kr=null,$r=null,Qr=null;function Jr(){Qr=$r=Kr=null}function eo(e){var t=Zr.current;lr(Zr),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var i=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==i&&i.childExpirationTime<t&&(i.childExpirationTime=t);else{if(!(null!==i&&i.childExpirationTime<t))break;i.childExpirationTime=t}e=e.return}}function io(e,t){Kr=e,Qr=$r=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Aa=!0),e.firstContext=null)}function no(e,t){if(Qr!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Qr=e,t=1073741823),t={context:e,observedBits:t,next:null},null===$r){if(null===Kr)throw Error(a(308));$r=t,Kr.dependencies={expirationTime:0,firstContext:t,responders:null}}else $r=$r.next=t;return e._currentValue}var ro=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function so(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function lo(e,t){if(null!==(e=e.updateQueue)){var i=(e=e.shared).pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function co(e,t){var i=e.alternate;null!==i&&ao(i,e),null===(i=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=i.next,i.next=t)}function ho(e,t,i,n){var o=e.updateQueue;ro=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}a=s,o.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=s))}if(null!==a){l=a.next;var c=o.baseState,h=0,d=null,p=null,u=null;if(null!==l)for(var f=l;;){if((s=f.expirationTime)<n){var g={expirationTime:f.expirationTime,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null};null===u?(p=u=g,d=c):u=u.next=g,s>h&&(h=s)}else{null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null}),ol(s,f.suspenseConfig);e:{var m=e,y=f;switch(s=t,g=i,y.tag){case 1:if("function"===typeof(m=y.payload)){c=m.call(g,c,s);break e}c=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(s="function"===typeof(m=y.payload)?m.call(g,c,s):m)||void 0===s)break e;c=r({},c,s);break e;case 2:ro=!0}}null!==f.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[f]:s.push(f))}if(null===(f=f.next)||f===l){if(null===(s=o.shared.pending))break;f=a.next=s.next,s.next=l,o.baseQueue=a=s,o.shared.pending=null}}null===u?d=c:u.next=p,o.baseState=d,o.baseQueue=u,al(h),e.expirationTime=h,e.memoizedState=c}}function po(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=r,r=i,"function"!==typeof n)throw Error(a(191,n));n.call(r)}}}var uo=K.ReactCurrentBatchConfig,fo=(new n.Component).refs;function go(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:r({},t,i),e.memoizedState=i,0===e.expirationTime&&(e.updateQueue.baseState=i)}var mo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Je(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternalFiber;var n=Xs(),r=uo.suspense;(r=so(n=Gs(n,e,r),r)).payload=t,void 0!==i&&null!==i&&(r.callback=i),lo(e,r),qs(e,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternalFiber;var n=Xs(),r=uo.suspense;(r=so(n=Gs(n,e,r),r)).tag=1,r.payload=t,void 0!==i&&null!==i&&(r.callback=i),lo(e,r),qs(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var i=Xs(),n=uo.suspense;(n=so(i=Gs(i,e,n),n)).tag=2,void 0!==t&&null!==t&&(n.callback=t),lo(e,n),qs(e,i)}};function yo(e,t,i,n,r,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Hn(i,n)||!Hn(r,o))}function vo(e,t,i){var n=!1,r=hr,o=t.contextType;return"object"===typeof o&&null!==o?o=no(o):(r=gr(t)?ur:dr.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?fr(e,r):hr),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function bo(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function wo(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=fo,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=no(o):(o=gr(t)?ur:dr.current,r.context=fr(e,o)),ho(e,i,r,n),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(go(e,t,o,i),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&mo.enqueueReplaceState(r,r.state,null),ho(e,i,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.effectTag|=4)}var xo=Array.isArray;function So(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(a(309));var n=i.stateNode}if(!n)throw Error(a(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=n.refs;t===fo&&(t=n.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}if("string"!==typeof e)throw Error(a(284));if(!i._owner)throw Error(a(290,e))}return e}function Co(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Po(e){function t(t,i){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.effectTag=8}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=El(e,t)).index=0,e.sibling=null,e}function o(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.effectTag=2,i):n:(t.effectTag=2,i):i}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=kl(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){return null!==t&&t.elementType===i.type?((n=r(t,i.props)).ref=So(e,t,i),n.return=e,n):((n=Tl(i.type,i.key,i.props,null,e.mode,n)).ref=So(e,t,i),n.return=e,n)}function h(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Al(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function d(e,t,i,n,o){return null===t||7!==t.tag?((t=Il(i,e.mode,n,o)).return=e,t):((t=r(t,i)).return=e,t)}function p(e,t,i){if("string"===typeof t||"number"===typeof t)return(t=kl(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(i=Tl(t.type,t.key,t.props,null,e.mode,i)).ref=So(e,null,t),i.return=e,i;case te:return(t=Al(t,e.mode,i)).return=e,t}if(xo(t)||ge(t))return(t=Il(t,e.mode,i,null)).return=e,t;Co(e,t)}return null}function u(e,t,i,n){var r=null!==t?t.key:null;if("string"===typeof i||"number"===typeof i)return null!==r?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case ee:return i.key===r?i.type===ie?d(e,t,i.props.children,n,r):c(e,t,i,n):null;case te:return i.key===r?h(e,t,i,n):null}if(xo(i)||ge(i))return null!==r?null:d(e,t,i,n,null);Co(e,i)}return null}function f(e,t,i,n,r){if("string"===typeof n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return e=e.get(null===n.key?i:n.key)||null,n.type===ie?d(t,e,n.props.children,r,n.key):c(t,e,n,r);case te:return h(t,e=e.get(null===n.key?i:n.key)||null,n,r)}if(xo(n)||ge(n))return d(t,e=e.get(i)||null,n,r,null);Co(t,n)}return null}function g(r,a,s,l){for(var c=null,h=null,d=a,g=a=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=u(r,d,s[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(r,d),a=o(y,a,g),null===h?c=y:h.sibling=y,h=y,d=m}if(g===s.length)return i(r,d),c;if(null===d){for(;g<s.length;g++)null!==(d=p(r,s[g],l))&&(a=o(d,a,g),null===h?c=d:h.sibling=d,h=d);return c}for(d=n(r,d);g<s.length;g++)null!==(m=f(d,r,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=o(m,a,g),null===h?c=m:h.sibling=m,h=m);return e&&d.forEach((function(e){return t(r,e)})),c}function m(r,s,l,c){var h=ge(l);if("function"!==typeof h)throw Error(a(150));if(null==(l=h.call(l)))throw Error(a(151));for(var d=h=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=u(r,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(r,g),s=o(b,s,m),null===d?h=b:d.sibling=b,d=b,g=y}if(v.done)return i(r,g),h;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=p(r,v.value,c))&&(s=o(v,s,m),null===d?h=v:d.sibling=v,d=v);return h}for(g=n(r,g);!v.done;m++,v=l.next())null!==(v=f(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=o(v,s,m),null===d?h=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(r,e)})),h}return function(e,n,o,l){var c="object"===typeof o&&null!==o&&o.type===ie&&null===o.key;c&&(o=o.props.children);var h="object"===typeof o&&null!==o;if(h)switch(o.$$typeof){case ee:e:{for(h=o.key,c=n;null!==c;){if(c.key===h){switch(c.tag){case 7:if(o.type===ie){i(e,c.sibling),(n=r(c,o.props.children)).return=e,e=n;break e}break;default:if(c.elementType===o.type){i(e,c.sibling),(n=r(c,o.props)).ref=So(e,c,o),n.return=e,e=n;break e}}i(e,c);break}t(e,c),c=c.sibling}o.type===ie?((n=Il(o.props.children,e.mode,l,o.key)).return=e,e=n):((l=Tl(o.type,o.key,o.props,null,e.mode,l)).ref=So(e,n,o),l.return=e,e=l)}return s(e);case te:e:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){i(e,n.sibling),(n=r(n,o.children||[])).return=e,e=n;break e}i(e,n);break}t(e,n),n=n.sibling}(n=Al(o,e.mode,l)).return=e,e=n}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==n&&6===n.tag?(i(e,n.sibling),(n=r(n,o)).return=e,e=n):(i(e,n),(n=kl(o,e.mode,l)).return=e,e=n),s(e);if(xo(o))return g(e,n,o,l);if(ge(o))return m(e,n,o,l);if(h&&Co(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return i(e,n)}}var Oo=Po(!0),Eo=Po(!1),To={},Io={current:To},ko={current:To},Ao={current:To};function Mo(e){if(e===To)throw Error(a(174));return e}function Do(e,t){switch(cr(Ao,t),cr(ko,e),cr(Io,To),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ze(null,"");break;default:t=ze(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}lr(Io),cr(Io,t)}function Lo(){lr(Io),lr(ko),lr(Ao)}function Ro(e){Mo(Ao.current);var t=Mo(Io.current),i=ze(t,e.type);t!==i&&(cr(ko,e),cr(Io,i))}function jo(e){ko.current===e&&(lr(Io),lr(ko))}var No={current:0};function zo(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Bo(e,t){return{responder:e,props:t}}var Ho=K.ReactCurrentDispatcher,_o=K.ReactCurrentBatchConfig,Wo=0,Fo=null,Vo=null,Uo=null,Yo=!1;function Xo(){throw Error(a(321))}function Go(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!zn(e[i],t[i]))return!1;return!0}function qo(e,t,i,n,r,o){if(Wo=o,Fo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ho.current=null===e||null===e.memoizedState?ya:va,e=i(n,r),t.expirationTime===Wo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Uo=Vo=null,t.updateQueue=null,Ho.current=ba,e=i(n,r)}while(t.expirationTime===Wo)}if(Ho.current=ma,t=null!==Vo&&null!==Vo.next,Wo=0,Uo=Vo=Fo=null,Yo=!1,t)throw Error(a(300));return e}function Zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Uo?Fo.memoizedState=Uo=e:Uo=Uo.next=e,Uo}function Ko(){if(null===Vo){var e=Fo.alternate;e=null!==e?e.memoizedState:null}else e=Vo.next;var t=null===Uo?Fo.memoizedState:Uo.next;if(null!==t)Uo=t,Vo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Vo=e).memoizedState,baseState:Vo.baseState,baseQueue:Vo.baseQueue,queue:Vo.queue,next:null},null===Uo?Fo.memoizedState=Uo=e:Uo=Uo.next=e}return Uo}function $o(e,t){return"function"===typeof t?t(e):t}function Qo(e){var t=Ko(),i=t.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=e;var n=Vo,r=n.baseQueue,o=i.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}n.baseQueue=r=o,i.pending=null}if(null!==r){r=r.next,n=n.baseState;var l=s=o=null,c=r;do{var h=c.expirationTime;if(h<Wo){var d={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=d,o=n):l=l.next=d,h>Fo.expirationTime&&(Fo.expirationTime=h,al(h))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ol(h,c.suspenseConfig),n=c.eagerReducer===e?c.eagerState:e(n,c.action);c=c.next}while(null!==c&&c!==r);null===l?o=n:l.next=s,zn(n,t.memoizedState)||(Aa=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function Jo(e){var t=Ko(),i=t.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,o=t.memoizedState;if(null!==r){i.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);zn(o,t.memoizedState)||(Aa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,n]}function ea(e){var t=Zo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:$o,lastRenderedState:e}).dispatch=ga.bind(null,Fo,e),[t.memoizedState,e]}function ta(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=Fo.updateQueue)?(t={lastEffect:null},Fo.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function ia(){return Ko().memoizedState}function na(e,t,i,n){var r=Zo();Fo.effectTag|=e,r.memoizedState=ta(1|t,i,void 0,void 0===n?null:n)}function ra(e,t,i,n){var r=Ko();n=void 0===n?null:n;var o=void 0;if(null!==Vo){var a=Vo.memoizedState;if(o=a.destroy,null!==n&&Go(n,a.deps))return void ta(t,i,o,n)}Fo.effectTag|=e,r.memoizedState=ta(1|t,i,o,n)}function oa(e,t){return na(516,4,e,t)}function aa(e,t){return ra(516,4,e,t)}function sa(e,t){return ra(4,2,e,t)}function la(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ca(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,ra(4,2,la.bind(null,t,e),i)}function ha(){}function da(e,t){return Zo().memoizedState=[e,void 0===t?null:t],e}function pa(e,t){var i=Ko();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Go(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function ua(e,t){var i=Ko();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Go(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function fa(e,t,i){var n=_r();Fr(98>n?98:n,(function(){e(!0)})),Fr(97<n?97:n,(function(){var n=_o.suspense;_o.suspense=void 0===t?null:t;try{e(!1),i()}finally{_o.suspense=n}}))}function ga(e,t,i){var n=Xs(),r=uo.suspense;r={expirationTime:n=Gs(n,e,r),suspenseConfig:r,action:i,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?r.next=r:(r.next=o.next,o.next=r),t.pending=r,o=e.alternate,e===Fo||null!==o&&o===Fo)Yo=!0,r.expirationTime=Wo,Fo.expirationTime=Wo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,i);if(r.eagerReducer=o,r.eagerState=s,zn(s,a))return}catch(l){}qs(e,n)}}var ma={readContext:no,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo,useResponder:Xo,useDeferredValue:Xo,useTransition:Xo},ya={readContext:no,useCallback:da,useContext:no,useEffect:oa,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,na(4,2,la.bind(null,t,e),i)},useLayoutEffect:function(e,t){return na(4,2,e,t)},useMemo:function(e,t){var i=Zo();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=Zo();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ga.bind(null,Fo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Zo().memoizedState=e},useState:ea,useDebugValue:ha,useResponder:Bo,useDeferredValue:function(e,t){var i=ea(e),n=i[0],r=i[1];return oa((function(){var i=_o.suspense;_o.suspense=void 0===t?null:t;try{r(e)}finally{_o.suspense=i}}),[e,t]),n},useTransition:function(e){var t=ea(!1),i=t[0];return t=t[1],[da(fa.bind(null,t,e),[t,e]),i]}},va={readContext:no,useCallback:pa,useContext:no,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:ua,useReducer:Qo,useRef:ia,useState:function(){return Qo($o)},useDebugValue:ha,useResponder:Bo,useDeferredValue:function(e,t){var i=Qo($o),n=i[0],r=i[1];return aa((function(){var i=_o.suspense;_o.suspense=void 0===t?null:t;try{r(e)}finally{_o.suspense=i}}),[e,t]),n},useTransition:function(e){var t=Qo($o),i=t[0];return t=t[1],[pa(fa.bind(null,t,e),[t,e]),i]}},ba={readContext:no,useCallback:pa,useContext:no,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:ua,useReducer:Jo,useRef:ia,useState:function(){return Jo($o)},useDebugValue:ha,useResponder:Bo,useDeferredValue:function(e,t){var i=Jo($o),n=i[0],r=i[1];return aa((function(){var i=_o.suspense;_o.suspense=void 0===t?null:t;try{r(e)}finally{_o.suspense=i}}),[e,t]),n},useTransition:function(e){var t=Jo($o),i=t[0];return t=t[1],[pa(fa.bind(null,t,e),[t,e]),i]}},wa=null,xa=null,Sa=!1;function Ca(e,t){var i=Pl(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Pa(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Oa(e){if(Sa){var t=xa;if(t){var i=t;if(!Pa(e,t)){if(!(t=wi(i.nextSibling))||!Pa(e,t))return e.effectTag=-1025&e.effectTag|2,Sa=!1,void(wa=e);Ca(wa,i)}wa=e,xa=wi(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Sa=!1,wa=e}}function Ea(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;wa=e}function Ta(e){if(e!==wa)return!1;if(!Sa)return Ea(e),Sa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!yi(t,e.memoizedProps))for(t=xa;t;)Ca(e,t),t=wi(t.nextSibling);if(Ea(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){xa=wi(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}xa=null}}else xa=wa?wi(e.stateNode.nextSibling):null;return!0}function Ia(){xa=wa=null,Sa=!1}var ka=K.ReactCurrentOwner,Aa=!1;function Ma(e,t,i,n){t.child=null===e?Eo(t,null,i,n):Oo(t,e.child,i,n)}function Da(e,t,i,n,r){i=i.render;var o=t.ref;return io(t,r),n=qo(e,t,i,n,o,r),null===e||Aa?(t.effectTag|=1,Ma(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),qa(e,t,r))}function La(e,t,i,n,r,o){if(null===e){var a=i.type;return"function"!==typeof a||Ol(a)||void 0!==a.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Tl(i.type,null,n,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ra(e,t,a,n,r,o))}return a=e.child,r<o&&(r=a.memoizedProps,(i=null!==(i=i.compare)?i:Hn)(r,n)&&e.ref===t.ref)?qa(e,t,o):(t.effectTag|=1,(e=El(a,n)).ref=t.ref,e.return=t,t.child=e)}function Ra(e,t,i,n,r,o){return null!==e&&Hn(e.memoizedProps,n)&&e.ref===t.ref&&(Aa=!1,r<o)?(t.expirationTime=e.expirationTime,qa(e,t,o)):Na(e,t,i,n,o)}function ja(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.effectTag|=128)}function Na(e,t,i,n,r){var o=gr(i)?ur:dr.current;return o=fr(t,o),io(t,r),i=qo(e,t,i,n,o,r),null===e||Aa?(t.effectTag|=1,Ma(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),qa(e,t,r))}function za(e,t,i,n,r){if(gr(i)){var o=!0;br(t)}else o=!1;if(io(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),vo(t,i,n),wo(t,i,n,r),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=i.contextType;"object"===typeof c&&null!==c?c=no(c):c=fr(t,c=gr(i)?ur:dr.current);var h=i.getDerivedStateFromProps,d="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&bo(t,a,n,c),ro=!1;var p=t.memoizedState;a.state=p,ho(t,n,a,r),l=t.memoizedState,s!==n||p!==l||pr.current||ro?("function"===typeof h&&(go(t,i,h,n),l=t.memoizedState),(s=ro||yo(t,i,s,n,p,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),n=!1)}else a=t.stateNode,ao(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:qr(t.type,s),l=a.context,"object"===typeof(c=i.contextType)&&null!==c?c=no(c):c=fr(t,c=gr(i)?ur:dr.current),(d="function"===typeof(h=i.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&bo(t,a,n,c),ro=!1,l=t.memoizedState,a.state=l,ho(t,n,a,r),p=t.memoizedState,s!==n||l!==p||pr.current||ro?("function"===typeof h&&(go(t,i,h,n),p=t.memoizedState),(h=ro||yo(t,i,s,n,l,p,c))?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=c,n=h):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return Ba(e,t,i,n,o,r)}function Ba(e,t,i,n,r,o){ja(e,t);var a=0!==(64&t.effectTag);if(!n&&!a)return r&&wr(t,i,!1),qa(e,t,o);n=t.stateNode,ka.current=t;var s=a&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&a?(t.child=Oo(t,e.child,null,o),t.child=Oo(t,null,s,o)):Ma(e,t,s,o),t.memoizedState=n.state,r&&wr(t,i,!0),t.child}function Ha(e){var t=e.stateNode;t.pendingContext?yr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yr(0,t.context,!1),Do(e,t.containerInfo)}var _a,Wa,Fa,Va={dehydrated:null,retryTime:0};function Ua(e,t,i){var n,r=t.mode,o=t.pendingProps,a=No.current,s=!1;if((n=0!==(64&t.effectTag))||(n=0!==(2&a)&&(null===e||null!==e.memoizedState)),n?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),cr(No,1&a),null===e){if(void 0!==o.fallback&&Oa(t),s){if(s=o.fallback,(o=Il(null,r,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(i=Il(s,r,i,null)).return=t,o.sibling=i,t.memoizedState=Va,t.child=o,i}return r=o.children,t.memoizedState=null,t.child=Eo(t,null,r,i)}if(null!==e.memoizedState){if(r=(e=e.child).sibling,s){if(o=o.fallback,(i=El(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(i.child=s;null!==s;)s.return=i,s=s.sibling;return(r=El(r,o)).return=t,i.sibling=r,i.childExpirationTime=0,t.memoizedState=Va,t.child=i,r}return i=Oo(t,e.child,o.children,i),t.memoizedState=null,t.child=i}if(e=e.child,s){if(s=o.fallback,(o=Il(null,r,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(i=Il(s,r,i,null)).return=t,o.sibling=i,i.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Va,t.child=o,i}return t.memoizedState=null,t.child=Oo(t,e,o.children,i)}function Ya(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;null!==i&&i.expirationTime<t&&(i.expirationTime=t),to(e.return,t)}function Xa(e,t,i,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailExpiration:0,tailMode:r,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=i,a.tailExpiration=0,a.tailMode=r,a.lastEffect=o)}function Ga(e,t,i){var n=t.pendingProps,r=n.revealOrder,o=n.tail;if(Ma(e,t,n.children,i),0!==(2&(n=No.current)))n=1&n|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ya(e,i);else if(19===e.tag)Ya(e,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(cr(No,n),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===zo(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Xa(t,!1,r,i,o,t.lastEffect);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===zo(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Xa(t,!0,i,null,o,t.lastEffect);break;case"together":Xa(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function qa(e,t,i){null!==e&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(0!==n&&al(n),t.childExpirationTime<i)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(i=El(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=El(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Za(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ka(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gr(t.type)&&mr(),null;case 3:return Lo(),lr(pr),lr(dr),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||!Ta(t)||(t.effectTag|=4),null;case 5:jo(t),i=Mo(Ao.current);var o=t.type;if(null!==e&&null!=t.stateNode)Wa(e,t,o,n,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(null===t.stateNode)throw Error(a(166));return null}if(e=Mo(Io.current),Ta(t)){n=t.stateNode,o=t.type;var s=t.memoizedProps;switch(n[Ci]=t,n[Pi]=s,o){case"iframe":case"object":case"embed":Gt("load",n);break;case"video":case"audio":for(e=0;e<Ke.length;e++)Gt(Ke[e],n);break;case"source":Gt("error",n);break;case"img":case"image":case"link":Gt("error",n),Gt("load",n);break;case"form":Gt("reset",n),Gt("submit",n);break;case"details":Gt("toggle",n);break;case"input":Ce(n,s),Gt("invalid",n),si(i,"onChange");break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Gt("invalid",n),si(i,"onChange");break;case"textarea":Me(n,s),Gt("invalid",n),si(i,"onChange")}for(var l in ri(o,s),e=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?n.textContent!==c&&(e=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(e=["children",""+c]):P.hasOwnProperty(l)&&null!=c&&si(i,l)}switch(o){case"input":we(n),Ee(n,s,!0);break;case"textarea":we(n),Le(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=li)}i=e,t.updateQueue=i,null!==i&&(t.effectTag|=4)}else{switch(l=9===i.nodeType?i:i.ownerDocument,e===ai&&(e=Ne(o)),e===ai?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(o,{is:n.is}):(e=l.createElement(o),"select"===o&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,o),e[Ci]=t,e[Pi]=n,_a(e,t),t.stateNode=e,l=oi(o,n),o){case"iframe":case"object":case"embed":Gt("load",e),c=n;break;case"video":case"audio":for(c=0;c<Ke.length;c++)Gt(Ke[c],e);c=n;break;case"source":Gt("error",e),c=n;break;case"img":case"image":case"link":Gt("error",e),Gt("load",e),c=n;break;case"form":Gt("reset",e),Gt("submit",e),c=n;break;case"details":Gt("toggle",e),c=n;break;case"input":Ce(e,n),c=Se(e,n),Gt("invalid",e),si(i,"onChange");break;case"option":c=Ie(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},c=r({},n,{value:void 0}),Gt("invalid",e),si(i,"onChange");break;case"textarea":Me(e,n),c=Ae(e,n),Gt("invalid",e),si(i,"onChange");break;default:c=n}ri(o,c);var h=c;for(s in h)if(h.hasOwnProperty(s)){var d=h[s];"style"===s?ii(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&He(e,d):"children"===s?"string"===typeof d?("textarea"!==o||""!==d)&&_e(e,d):"number"===typeof d&&_e(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(P.hasOwnProperty(s)?null!=d&&si(i,s):null!=d&&$(e,s,d,l))}switch(o){case"input":we(e),Ee(e,n,!1);break;case"textarea":we(e),Le(e);break;case"option":null!=n.value&&e.setAttribute("value",""+ve(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?ke(e,!!n.multiple,i,!1):null!=n.defaultValue&&ke(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=li)}mi(o,n)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Fa(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));i=Mo(Ao.current),Mo(Io.current),Ta(t)?(i=t.stateNode,n=t.memoizedProps,i[Ci]=t,i.nodeValue!==n&&(t.effectTag|=4)):((i=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[Ci]=t,t.stateNode=i)}return null;case 13:return lr(No),n=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=i,t):(i=null!==n,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ta(t):(n=null!==(o=e.memoizedState),i||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),i&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&No.current)?Ts===ws&&(Ts=xs):(Ts!==ws&&Ts!==xs||(Ts=Ss),0!==Ds&&null!==Ps&&(Ll(Ps,Es),Rl(Ps,Ds)))),(i||n)&&(t.effectTag|=4),null);case 4:return Lo(),null;case 10:return eo(t),null;case 17:return gr(t.type)&&mr(),null;case 19:if(lr(No),null===(n=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(s=n.rendering)){if(o)Za(n,!1);else if(Ts!==ws||null!==e&&0!==(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=zo(s))){for(t.effectTag|=64,Za(n,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;null!==n;)s=i,(o=n).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;return cr(No,1&No.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=zo(s))){if(t.effectTag|=64,o=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),Za(n,!0),null===n.tail&&"hidden"===n.tailMode&&!s.alternate)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Hr()-n.renderingStartTime>n.tailExpiration&&1<i&&(t.effectTag|=64,o=!0,Za(n,!1),t.expirationTime=t.childExpirationTime=i-1);n.isBackwards?(s.sibling=t.child,t.child=s):(null!==(i=n.last)?i.sibling=s:t.child=s,n.last=s)}return null!==n.tail?(0===n.tailExpiration&&(n.tailExpiration=Hr()+500),i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Hr(),i.sibling=null,t=No.current,cr(No,o?1&t|2:1&t),i):null}throw Error(a(156,t.tag))}function $a(e){switch(e.tag){case 1:gr(e.type)&&mr();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Lo(),lr(pr),lr(dr),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return jo(e),null;case 13:return lr(No),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return lr(No),null;case 4:return Lo(),null;case 10:return eo(e),null;default:return null}}function Qa(e,t){return{value:e,source:t,stack:ye(t)}}_a=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Wa=function(e,t,i,n,o){var a=e.memoizedProps;if(a!==n){var s,l,c=t.stateNode;switch(Mo(Io.current),e=null,i){case"input":a=Se(c,a),n=Se(c,n),e=[];break;case"option":a=Ie(c,a),n=Ie(c,n),e=[];break;case"select":a=r({},a,{value:void 0}),n=r({},n,{value:void 0}),e=[];break;case"textarea":a=Ae(c,a),n=Ae(c,n),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(c.onclick=li)}for(s in ri(i,n),i=null,a)if(!n.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in c=a[s])c.hasOwnProperty(l)&&(i||(i={}),i[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(P.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in n){var h=n[s];if(c=null!=a?a[s]:void 0,n.hasOwnProperty(s)&&h!==c&&(null!=h||null!=c))if("style"===s)if(c){for(l in c)!c.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in h)h.hasOwnProperty(l)&&c[l]!==h[l]&&(i||(i={}),i[l]=h[l])}else i||(e||(e=[]),e.push(s,i)),i=h;else"dangerouslySetInnerHTML"===s?(h=h?h.__html:void 0,c=c?c.__html:void 0,null!=h&&c!==h&&(e=e||[]).push(s,h)):"children"===s?c===h||"string"!==typeof h&&"number"!==typeof h||(e=e||[]).push(s,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(P.hasOwnProperty(s)?(null!=h&&si(o,s),e||c===h||(e=[])):(e=e||[]).push(s,h))}i&&(e=e||[]).push("style",i),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Fa=function(e,t,i,n){i!==n&&(t.effectTag|=4)};var Ja="function"===typeof WeakSet?WeakSet:Set;function es(e,t){var i=t.source,n=t.stack;null===n&&null!==i&&(n=ye(i)),null!==i&&me(i.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(r){setTimeout((function(){throw r}))}}function ts(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(i){vl(e,i)}else t.current=null}function is(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var i=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:qr(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ns(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.destroy;i.destroy=void 0,void 0!==n&&n()}i=i.next}while(i!==t)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function os(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:return void rs(3,i);case 1:if(e=i.stateNode,4&i.effectTag)if(null===t)e.componentDidMount();else{var n=i.elementType===i.type?t.memoizedProps:qr(i.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=i.updateQueue)&&po(i,t,e));case 3:if(null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}po(i,t,e)}return;case 5:return e=i.stateNode,void(null===t&&4&i.effectTag&&mi(i.type,i.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&Nt(i)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(e,t,i){switch("function"===typeof Sl&&Sl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e.next;Fr(97<i?97:i,(function(){var e=n;do{var i=e.destroy;if(void 0!==i){var r=t;try{i()}catch(o){vl(r,o)}}e=e.next}while(e!==n)}))}break;case 1:ts(t),"function"===typeof(i=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){vl(e,i)}}(t,i);break;case 5:ts(t);break;case 4:hs(e,t,i)}}function ss(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ss(t)}function ls(e){return 5===e.tag||3===e.tag||4===e.tag}function cs(e){e:{for(var t=e.return;null!==t;){if(ls(t)){var i=t;break e}t=t.return}throw Error(a(160))}switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(a(161))}16&i.effectTag&&(_e(t,""),i.effectTag&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||ls(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.effectTag)continue t;if(null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.effectTag)){i=i.stateNode;break e}}n?function e(t,i,n){var r=t.tag,o=5===r||6===r;if(o)t=o?t.stateNode:t.stateNode.instance,i?8===n.nodeType?n.parentNode.insertBefore(t,i):n.insertBefore(t,i):(8===n.nodeType?(i=n.parentNode).insertBefore(t,n):(i=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==i.onclick||(i.onclick=li));else if(4!==r&&null!==(t=t.child))for(e(t,i,n),t=t.sibling;null!==t;)e(t,i,n),t=t.sibling}(e,i,t):function e(t,i,n){var r=t.tag,o=5===r||6===r;if(o)t=o?t.stateNode:t.stateNode.instance,i?n.insertBefore(t,i):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(e(t,i,n),t=t.sibling;null!==t;)e(t,i,n),t=t.sibling}(e,i,t)}function hs(e,t,i){for(var n,r,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,c=o,h=i,d=c;;)if(as(l,d,h),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===c)break e;for(;null===d.sibling;){if(null===d.return||d.return===c)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r?(l=n,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(as(e,o,i),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ds(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ns(3,t);case 1:return;case 5:var i=t.stateNode;if(null!=i){var n=t.memoizedProps,r=null!==e?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(i[Pi]=n,"input"===e&&"radio"===n.type&&null!=n.name&&Pe(i,n),oi(e,r),t=oi(e,n),r=0;r<o.length;r+=2){var s=o[r],l=o[r+1];"style"===s?ii(i,l):"dangerouslySetInnerHTML"===s?He(i,l):"children"===s?_e(i,l):$(i,s,l,t)}switch(e){case"input":Oe(i,n);break;case"textarea":De(i,n);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,null!=(e=n.value)?ke(i,!!n.multiple,e,!1):t!==!!n.multiple&&(null!=n.defaultValue?ke(i,!!n.multiple,n.defaultValue,!0):ke(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Nt(t.containerInfo)));case 12:return;case 13:if(i=t,null===t.memoizedState?n=!1:(n=!0,i=t.child,Rs=Hr()),null!==i)e:for(e=i;;){if(5===e.tag)o=e.stateNode,n?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,r=void 0!==(r=e.memoizedProps.style)&&null!==r&&r.hasOwnProperty("display")?r.display:null,o.style.display=ti("display",r));else if(6===e.tag)e.stateNode.nodeValue=n?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===i)break;for(;null===e.sibling;){if(null===e.return||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ps(t);case 19:return void ps(t);case 17:return}throw Error(a(163))}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Ja),t.forEach((function(t){var n=wl.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}var us="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,i){(i=so(i,null)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Ns||(Ns=!0,zs=n),es(e,t)},i}function gs(e,t,i){(i=so(i,null)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;i.payload=function(){return es(e,t),n(r)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){"function"!==typeof n&&(null===Bs?Bs=new Set([this]):Bs.add(this),es(e,t));var i=t.stack;this.componentDidCatch(t.value,{componentStack:null!==i?i:""})}),i}var ms,ys=Math.ceil,vs=K.ReactCurrentDispatcher,bs=K.ReactCurrentOwner,ws=0,xs=3,Ss=4,Cs=0,Ps=null,Os=null,Es=0,Ts=ws,Is=null,ks=1073741823,As=1073741823,Ms=null,Ds=0,Ls=!1,Rs=0,js=null,Ns=!1,zs=null,Bs=null,Hs=!1,_s=null,Ws=90,Fs=null,Vs=0,Us=null,Ys=0;function Xs(){return 0!==(48&Cs)?1073741821-(Hr()/10|0):0!==Ys?Ys:Ys=1073741821-(Hr()/10|0)}function Gs(e,t,i){if(0===(2&(t=t.mode)))return 1073741823;var n=_r();if(0===(4&t))return 99===n?1073741823:1073741822;if(0!==(16&Cs))return Es;if(null!==i)e=Gr(e,0|i.timeoutMs||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=Gr(e,150,100);break;case 97:case 96:e=Gr(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ps&&e===Es&&--e,e}function qs(e,t){if(50<Vs)throw Vs=0,Us=null,Error(a(185));if(null!==(e=Zs(e,t))){var i=_r();1073741823===t?0!==(8&Cs)&&0===(48&Cs)?Js(e):($s(e),0===Cs&&Yr()):$s(e),0===(4&Cs)||98!==i&&99!==i||(null===Fs?Fs=new Map([[e,t]]):(void 0===(i=Fs.get(e))||i>t)&&Fs.set(e,t))}}function Zs(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;null!==i&&i.expirationTime<t&&(i.expirationTime=t);var n=e.return,r=null;if(null===n&&3===e.tag)r=e.stateNode;else for(;null!==n;){if(i=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==i&&i.childExpirationTime<t&&(i.childExpirationTime=t),null===n.return&&3===n.tag){r=n.stateNode;break}n=n.return}return null!==r&&(Ps===r&&(al(t),Ts===Ss&&Ll(r,Es)),Rl(r,t)),r}function Ks(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Dl(e,t=e.firstPendingTime))return t;var i=e.lastPingedTime;return 2>=(e=i>(e=e.nextKnownPendingLevel)?i:e)&&t!==e?0:e}function $s(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ur(Js.bind(null,e));else{var t=Ks(e),i=e.callbackNode;if(0===t)null!==i&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=Xs();if(1073741823===t?n=99:1===t||2===t?n=95:n=0>=(n=10*(1073741821-t)-10*(1073741821-n))?99:250>=n?98:5250>=n?97:95,null!==i){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=n)return;i!==Dr&&Cr(i)}e.callbackExpirationTime=t,e.callbackPriority=n,t=1073741823===t?Ur(Js.bind(null,e)):Vr(n,Qs.bind(null,e),{timeout:10*(1073741821-t)-Hr()}),e.callbackNode=t}}}function Qs(e,t){if(Ys=0,t)return jl(e,t=Xs()),$s(e),null;var i=Ks(e);if(0!==i){if(t=e.callbackNode,0!==(48&Cs))throw Error(a(327));if(gl(),e===Ps&&i===Es||il(e,i),null!==Os){var n=Cs;Cs|=16;for(var r=rl();;)try{ll();break}catch(l){nl(e,l)}if(Jr(),Cs=n,vs.current=r,1===Ts)throw t=Is,il(e,i),Ll(e,i),$s(e),t;if(null===Os)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=i,n=Ts,Ps=null,n){case ws:case 1:throw Error(a(345));case 2:jl(e,2<i?2:i);break;case xs:if(Ll(e,i),i===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dl(r)),1073741823===ks&&10<(r=Rs+500-Hr())){if(Ls){var o=e.lastPingedTime;if(0===o||o>=i){e.lastPingedTime=i,il(e,i);break}}if(0!==(o=Ks(e))&&o!==i)break;if(0!==n&&n!==i){e.lastPingedTime=n;break}e.timeoutHandle=vi(pl.bind(null,e),r);break}pl(e);break;case Ss:if(Ll(e,i),i===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dl(r)),Ls&&(0===(r=e.lastPingedTime)||r>=i)){e.lastPingedTime=i,il(e,i);break}if(0!==(r=Ks(e))&&r!==i)break;if(0!==n&&n!==i){e.lastPingedTime=n;break}if(1073741823!==As?n=10*(1073741821-As)-Hr():1073741823===ks?n=0:(n=10*(1073741821-ks)-5e3,0>(n=(r=Hr())-n)&&(n=0),(i=10*(1073741821-i)-r)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ys(n/1960))-n)&&(n=i)),10<n){e.timeoutHandle=vi(pl.bind(null,e),n);break}pl(e);break;case 5:if(1073741823!==ks&&null!==Ms){o=ks;var s=Ms;if(0>=(n=0|s.busyMinDurationMs)?n=0:(r=0|s.busyDelayMs,n=(o=Hr()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=r?0:r+n-o),10<n){Ll(e,i),e.timeoutHandle=vi(pl.bind(null,e),n);break}}pl(e);break;default:throw Error(a(329))}if($s(e),e.callbackNode===t)return Qs.bind(null,e)}}return null}function Js(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Cs))throw Error(a(327));if(gl(),e===Ps&&t===Es||il(e,t),null!==Os){var i=Cs;Cs|=16;for(var n=rl();;)try{sl();break}catch(r){nl(e,r)}if(Jr(),Cs=i,vs.current=n,1===Ts)throw i=Is,il(e,t),Ll(e,t),$s(e),i;if(null!==Os)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ps=null,pl(e),$s(e)}return null}function el(e,t){var i=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=i)&&Yr()}}function tl(e,t){var i=Cs;Cs&=-2,Cs|=8;try{return e(t)}finally{0===(Cs=i)&&Yr()}}function il(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,bi(i)),null!==Os)for(i=Os.return;null!==i;){var n=i;switch(n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&mr();break;case 3:Lo(),lr(pr),lr(dr);break;case 5:jo(n);break;case 4:Lo();break;case 13:case 19:lr(No);break;case 10:eo(n)}i=i.return}Ps=e,Os=El(e.current,null),Es=t,Ts=ws,Is=null,As=ks=1073741823,Ms=null,Ds=0,Ls=!1}function nl(e,t){for(;;){try{if(Jr(),Ho.current=ma,Yo)for(var i=Fo.memoizedState;null!==i;){var n=i.queue;null!==n&&(n.pending=null),i=i.next}if(Wo=0,Uo=Vo=Fo=null,Yo=!1,null===Os||null===Os.return)return Ts=1,Is=t,Os=null;e:{var r=e,o=Os.return,a=Os,s=t;if(t=Es,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var l=s;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&No.current),d=o;do{var p;if(p=13===d.tag){var u=d.memoizedState;if(null!==u)p=null!==u.dehydrated;else{var f=d.memoizedProps;p=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!h)}}if(p){var g=d.updateQueue;if(null===g){var m=new Set;m.add(l),d.updateQueue=m}else g.add(l);if(0===(2&d.mode)){if(d.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=so(1073741823,null);y.tag=2,lo(a,y)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=r.pingCache;if(null===v?(v=r.pingCache=new us,s=new Set,v.set(l,s)):void 0===(s=v.get(l))&&(s=new Set,v.set(l,s)),!s.has(a)){s.add(a);var b=bl.bind(null,r,l,a);l.then(b,b)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((me(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(a))}5!==Ts&&(Ts=2),s=Qa(s,a),d=o;do{switch(d.tag){case 3:l=s,d.effectTag|=4096,d.expirationTime=t,co(d,fs(d,l,t));break e;case 1:l=s;var w=d.type,x=d.stateNode;if(0===(64&d.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Bs||!Bs.has(x)))){d.effectTag|=4096,d.expirationTime=t,co(d,gs(d,l,t));break e}}d=d.return}while(null!==d)}Os=hl(Os)}catch(S){t=S;continue}break}}function rl(){var e=vs.current;return vs.current=ma,null===e?ma:e}function ol(e,t){e<ks&&2<e&&(ks=e),null!==t&&e<As&&2<e&&(As=e,Ms=t)}function al(e){e>Ds&&(Ds=e)}function sl(){for(;null!==Os;)Os=cl(Os)}function ll(){for(;null!==Os&&!Lr();)Os=cl(Os)}function cl(e){var t=ms(e.alternate,e,Es);return e.memoizedProps=e.pendingProps,null===t&&(t=hl(e)),bs.current=null,t}function hl(e){Os=e;do{var t=Os.alternate;if(e=Os.return,0===(2048&Os.effectTag)){if(t=Ka(t,Os,Es),1===Es||1!==Os.childExpirationTime){for(var i=0,n=Os.child;null!==n;){var r=n.expirationTime,o=n.childExpirationTime;r>i&&(i=r),o>i&&(i=o),n=n.sibling}Os.childExpirationTime=i}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Os.firstEffect),null!==Os.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Os.firstEffect),e.lastEffect=Os.lastEffect),1<Os.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Os:e.firstEffect=Os,e.lastEffect=Os))}else{if(null!==(t=$a(Os)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Os.sibling))return t;Os=e}while(null!==Os);return Ts===ws&&(Ts=5),null}function dl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function pl(e){var t=_r();return Fr(99,ul.bind(null,e,t)),null}function ul(e,t){do{gl()}while(null!==_s);if(0!==(48&Cs))throw Error(a(327));var i=e.finishedWork,n=e.finishedExpirationTime;if(null===i)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,i===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=dl(i);if(e.firstPendingTime=r,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ps&&(Os=Ps=null,Es=0),1<i.effectTag?null!==i.lastEffect?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,null!==r){var o=Cs;Cs|=32,bs.current=null,fi=Xt;var s=pi();if(ui(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var h=c.anchorOffset,d=c.focusNode;c=c.focusOffset;try{l.nodeType,d.nodeType}catch(E){l=null;break e}var p=0,u=-1,f=-1,g=0,m=0,y=s,v=null;t:for(;;){for(var b;y!==l||0!==h&&3!==y.nodeType||(u=p+h),y!==d||0!==c&&3!==y.nodeType||(f=p+c),3===y.nodeType&&(p+=y.nodeValue.length),null!==(b=y.firstChild);)v=y,y=b;for(;;){if(y===s)break t;if(v===l&&++g===h&&(u=p),v===d&&++m===c&&(f=p),null!==(b=y.nextSibling))break;v=(y=v).parentNode}y=b}l=-1===u||-1===f?null:{start:u,end:f}}else l=null}l=l||{start:0,end:0}}else l=null;gi={activeElementDetached:null,focusedElem:s,selectionRange:l},Xt=!1,js=r;do{try{fl()}catch(E){if(null===js)throw Error(a(330));vl(js,E),js=js.nextEffect}}while(null!==js);js=r;do{try{for(s=e,l=t;null!==js;){var w=js.effectTag;if(16&w&&_e(js.stateNode,""),128&w){var x=js.alternate;if(null!==x){var S=x.ref;null!==S&&("function"===typeof S?S(null):S.current=null)}}switch(1038&w){case 2:cs(js),js.effectTag&=-3;break;case 6:cs(js),js.effectTag&=-3,ds(js.alternate,js);break;case 1024:js.effectTag&=-1025;break;case 1028:js.effectTag&=-1025,ds(js.alternate,js);break;case 4:ds(js.alternate,js);break;case 8:hs(s,h=js,l),ss(h)}js=js.nextEffect}}catch(E){if(null===js)throw Error(a(330));vl(js,E),js=js.nextEffect}}while(null!==js);if(S=gi,x=pi(),w=S.focusedElem,l=S.selectionRange,x!==w&&w&&w.ownerDocument&&function e(t,i){return!(!t||!i)&&(t===i||(!t||3!==t.nodeType)&&(i&&3===i.nodeType?e(t,i.parentNode):"contains"in t?t.contains(i):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(i))))}(w.ownerDocument.documentElement,w)){null!==l&&ui(w)&&(x=l.start,void 0===(S=l.end)&&(S=x),"selectionStart"in w?(w.selectionStart=x,w.selectionEnd=Math.min(S,w.value.length)):(S=(x=w.ownerDocument||document)&&x.defaultView||window).getSelection&&(S=S.getSelection(),h=w.textContent.length,s=Math.min(l.start,h),l=void 0===l.end?s:Math.min(l.end,h),!S.extend&&s>l&&(h=l,l=s,s=h),h=di(w,s),d=di(w,l),h&&d&&(1!==S.rangeCount||S.anchorNode!==h.node||S.anchorOffset!==h.offset||S.focusNode!==d.node||S.focusOffset!==d.offset)&&((x=x.createRange()).setStart(h.node,h.offset),S.removeAllRanges(),s>l?(S.addRange(x),S.extend(d.node,d.offset)):(x.setEnd(d.node,d.offset),S.addRange(x))))),x=[];for(S=w;S=S.parentNode;)1===S.nodeType&&x.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<x.length;w++)(S=x[w]).element.scrollLeft=S.left,S.element.scrollTop=S.top}Xt=!!fi,gi=fi=null,e.current=i,js=r;do{try{for(w=e;null!==js;){var C=js.effectTag;if(36&C&&os(w,js.alternate,js),128&C){x=void 0;var P=js.ref;if(null!==P){var O=js.stateNode;switch(js.tag){case 5:x=O;break;default:x=O}"function"===typeof P?P(x):P.current=x}}js=js.nextEffect}}catch(E){if(null===js)throw Error(a(330));vl(js,E),js=js.nextEffect}}while(null!==js);js=null,Rr(),Cs=o}else e.current=i;if(Hs)Hs=!1,_s=e,Ws=t;else for(js=r;null!==js;)t=js.nextEffect,js.nextEffect=null,js=t;if(0===(t=e.firstPendingTime)&&(Bs=null),1073741823===t?e===Us?Vs++:(Vs=0,Us=e):Vs=0,"function"===typeof xl&&xl(i.stateNode,n),$s(e),Ns)throw Ns=!1,e=zs,zs=null,e;return 0!==(8&Cs)||Yr(),null}function fl(){for(;null!==js;){var e=js.effectTag;0!==(256&e)&&is(js.alternate,js),0===(512&e)||Hs||(Hs=!0,Vr(97,(function(){return gl(),null}))),js=js.nextEffect}}function gl(){if(90!==Ws){var e=97<Ws?97:Ws;return Ws=90,Fr(e,ml)}}function ml(){if(null===_s)return!1;var e=_s;if(_s=null,0!==(48&Cs))throw Error(a(331));var t=Cs;for(Cs|=32,e=e.current.firstEffect;null!==e;){try{var i=e;if(0!==(512&i.effectTag))switch(i.tag){case 0:case 11:case 15:case 22:ns(5,i),rs(5,i)}}catch(n){if(null===e)throw Error(a(330));vl(e,n)}i=e.nextEffect,e.nextEffect=null,e=i}return Cs=t,Yr(),!0}function yl(e,t,i){lo(e,t=fs(e,t=Qa(i,t),1073741823)),null!==(e=Zs(e,1073741823))&&$s(e)}function vl(e,t){if(3===e.tag)yl(e,e,t);else for(var i=e.return;null!==i;){if(3===i.tag){yl(i,e,t);break}if(1===i.tag){var n=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Bs||!Bs.has(n))){lo(i,e=gs(i,e=Qa(t,e),1073741823)),null!==(i=Zs(i,1073741823))&&$s(i);break}}i=i.return}}function bl(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),Ps===e&&Es===i?Ts===Ss||Ts===xs&&1073741823===ks&&Hr()-Rs<500?il(e,Es):Ls=!0:Dl(e,i)&&(0!==(t=e.lastPingedTime)&&t<i||(e.lastPingedTime=i,$s(e)))}function wl(e,t){var i=e.stateNode;null!==i&&i.delete(t),0===(t=0)&&(t=Gs(t=Xs(),e,null)),null!==(e=Zs(e,t))&&$s(e)}ms=function(e,t,i){var n=t.expirationTime;if(null!==e){var r=t.pendingProps;if(e.memoizedProps!==r||pr.current)Aa=!0;else{if(n<i){switch(Aa=!1,t.tag){case 3:Ha(t),Ia();break;case 5:if(Ro(t),4&t.mode&&1!==i&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:gr(t.type)&&br(t);break;case 4:Do(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,r=t.type._context,cr(Zr,r._currentValue),r._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=i?Ua(e,t,i):(cr(No,1&No.current),null!==(t=qa(e,t,i))?t.sibling:null);cr(No,1&No.current);break;case 19:if(n=t.childExpirationTime>=i,0!==(64&e.effectTag)){if(n)return Ga(e,t,i);t.effectTag|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null),cr(No,No.current),!n)return null}return qa(e,t,i)}Aa=!1}}else Aa=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=fr(t,dr.current),io(t,i),r=qo(null,t,n,e,r,i),t.effectTag|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gr(n)){var o=!0;br(t)}else o=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,oo(t);var s=n.getDerivedStateFromProps;"function"===typeof s&&go(t,n,s,e),r.updater=mo,t.stateNode=r,r._reactInternalFiber=t,wo(t,n,e,i),t=Ba(null,t,n,!0,o,i)}else t.tag=0,Ma(null,t,r,i),t=t.child;return t;case 16:e:{if(r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(r),1!==r._status)throw r._result;switch(r=r._result,t.type=r,o=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===de)return 14}return 2}(r),e=qr(r,e),o){case 0:t=Na(null,t,r,e,i);break e;case 1:t=za(null,t,r,e,i);break e;case 11:t=Da(null,t,r,e,i);break e;case 14:t=La(null,t,r,qr(r.type,e),n,i);break e}throw Error(a(306,r,""))}return t;case 0:return n=t.type,r=t.pendingProps,Na(e,t,n,r=t.elementType===n?r:qr(n,r),i);case 1:return n=t.type,r=t.pendingProps,za(e,t,n,r=t.elementType===n?r:qr(n,r),i);case 3:if(Ha(t),n=t.updateQueue,null===e||null===n)throw Error(a(282));if(n=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,ao(e,t),ho(t,n,null,i),(n=t.memoizedState.element)===r)Ia(),t=qa(e,t,i);else{if((r=t.stateNode.hydrate)&&(xa=wi(t.stateNode.containerInfo.firstChild),wa=t,r=Sa=!0),r)for(i=Eo(t,null,n,i),t.child=i;i;)i.effectTag=-3&i.effectTag|1024,i=i.sibling;else Ma(e,t,n,i),Ia();t=t.child}return t;case 5:return Ro(t),null===e&&Oa(t),n=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,yi(n,r)?s=null:null!==o&&yi(n,o)&&(t.effectTag|=16),ja(e,t),4&t.mode&&1!==i&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ma(e,t,s,i),t=t.child),t;case 6:return null===e&&Oa(t),null;case 13:return Ua(e,t,i);case 4:return Do(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Oo(t,null,n,i):Ma(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,Da(e,t,n,r=t.elementType===n?r:qr(n,r),i);case 7:return Ma(e,t,t.pendingProps,i),t.child;case 8:case 12:return Ma(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value;var l=t.type._context;if(cr(Zr,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=zn(l,o)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(l,o):1073741823))){if(s.children===r.children&&!pr.current){t=qa(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var h=c.firstContext;null!==h;){if(h.context===n&&0!==(h.observedBits&o)){1===l.tag&&((h=so(i,null)).tag=2,lo(l,h)),l.expirationTime<i&&(l.expirationTime=i),null!==(h=l.alternate)&&h.expirationTime<i&&(h.expirationTime=i),to(l.return,i),c.expirationTime<i&&(c.expirationTime=i);break}h=h.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Ma(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=(o=t.pendingProps).children,io(t,i),n=n(r=no(r,o.unstable_observedBits)),t.effectTag|=1,Ma(e,t,n,i),t.child;case 14:return o=qr(r=t.type,t.pendingProps),La(e,t,r,o=qr(r.type,o),n,i);case 15:return Ra(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:qr(n,r),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,gr(n)?(e=!0,br(t)):e=!1,io(t,i),vo(t,n,r),wo(t,n,r,i),Ba(null,t,n,!0,e,i);case 19:return Ga(e,t,i)}throw Error(a(156,t.tag))};var xl=null,Sl=null;function Cl(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Pl(e,t,i,n){return new Cl(e,t,i,n)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function El(e,t){var i=e.alternate;return null===i?((i=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Tl(e,t,i,n,r,o){var s=2;if(n=e,"function"===typeof e)Ol(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case ie:return Il(i.children,r,o,t);case se:s=8,r|=7;break;case ne:s=8,r|=1;break;case re:return(e=Pl(12,i,t,8|r)).elementType=re,e.type=re,e.expirationTime=o,e;case ce:return(e=Pl(13,i,t,r)).type=ce,e.elementType=ce,e.expirationTime=o,e;case he:return(e=Pl(19,i,t,r)).elementType=he,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:s=10;break e;case ae:s=9;break e;case le:s=11;break e;case de:s=14;break e;case pe:s=16,n=null;break e;case ue:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pl(s,i,t,r)).elementType=e,t.type=n,t.expirationTime=o,t}function Il(e,t,i,n){return(e=Pl(7,e,n,t)).expirationTime=i,e}function kl(e,t,i){return(e=Pl(6,e,null,t)).expirationTime=i,e}function Al(e,t,i){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ml(e,t,i){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Dl(e,t){var i=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==i&&i>=t&&e<=t}function Ll(e,t){var i=e.firstSuspendedTime,n=e.lastSuspendedTime;i<t&&(e.firstSuspendedTime=t),(n>t||0===i)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Rl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var i=e.firstSuspendedTime;0!==i&&(t>=i?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function jl(e,t){var i=e.lastExpiredTime;(0===i||i>t)&&(e.lastExpiredTime=t)}function Nl(e,t,i,n){var r=t.current,o=Xs(),s=uo.suspense;o=Gs(o,r,s);e:if(i){t:{if(Je(i=i._reactInternalFiber)!==i||1!==i.tag)throw Error(a(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===i.tag){var c=i.type;if(gr(c)){i=vr(i,c,l);break e}}i=l}else i=hr;return null===t.context?t.context=i:t.pendingContext=i,(t=so(o,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),lo(r,t),qs(r,o),o}function zl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Bl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Hl(e,t){Bl(e,t),(e=e.alternate)&&Bl(e,t)}function _l(e,t,i){var n=new Ml(e,t,i=null!=i&&!0===i.hydrate),r=Pl(3,null,null,2===t?7:1===t?3:0);n.current=r,r.stateNode=n,oo(r),e[Oi]=n.current,i&&0!==t&&function(e,t){var i=Qe(t);Et.forEach((function(e){ft(e,t,i)})),Tt.forEach((function(e){ft(e,t,i)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=n}function Wl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Fl(e,t,i,n,r){var o=i._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof r){var s=r;r=function(){var e=zl(a);s.call(e)}}Nl(t,a,e,r)}else{if(o=i._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new _l(e,0,t?{hydrate:!0}:void 0)}(i,n),a=o._internalRoot,"function"===typeof r){var l=r;r=function(){var e=zl(a);l.call(e)}}tl((function(){Nl(t,a,e,r)}))}return zl(a)}function Vl(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}function Ul(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wl(t))throw Error(a(200));return Vl(e,t,null,i)}_l.prototype.render=function(e){Nl(e,this._internalRoot,null,null)},_l.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Nl(null,e,null,(function(){t[Oi]=null}))},gt=function(e){if(13===e.tag){var t=Gr(Xs(),150,100);qs(e,t),Hl(e,t)}},mt=function(e){13===e.tag&&(qs(e,3),Hl(e,3))},yt=function(e){if(13===e.tag){var t=Xs();qs(e,t=Gs(t,e,null)),Hl(e,t)}},I=function(e,t,i){switch(t){case"input":if(Oe(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=ki(n);if(!r)throw Error(a(90));xe(n),Oe(n,r)}}}break;case"textarea":De(e,i);break;case"select":null!=(t=i.value)&&ke(e,!!i.multiple,t,!1)}},R=el,j=function(e,t,i,n,r){var o=Cs;Cs|=4;try{return Fr(98,e.bind(null,t,i,n,r))}finally{0===(Cs=o)&&Yr()}},N=function(){0===(49&Cs)&&(function(){if(null!==Fs){var e=Fs;Fs=null,e.forEach((function(e,t){jl(t,e),$s(t)})),Yr()}}(),gl())},z=function(e,t){var i=Cs;Cs|=2;try{return e(t)}finally{0===(Cs=i)&&Yr()}};var Yl={Events:[Ti,Ii,ki,E,C,Ni,function(e){rt(e,ji)},D,L,$t,st,gl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var i=t.inject(e);xl=function(e){try{t.onCommitFiberRoot(i,e,void 0,64===(64&e.current.effectTag))}catch(n){}},Sl=function(e){try{t.onCommitFiberUnmount(i,e)}catch(n){}}}catch(n){}})(r({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=it(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Ei,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yl,t.createPortal=Ul,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=it(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Cs))throw Error(a(187));var i=Cs;Cs|=1;try{return Fr(99,e.bind(null,t))}finally{Cs=i,Yr()}},t.hydrate=function(e,t,i){if(!Wl(t))throw Error(a(200));return Fl(null,e,t,!0,i)},t.render=function(e,t,i){if(!Wl(t))throw Error(a(200));return Fl(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Wl(e))throw Error(a(40));return!!e._reactRootContainer&&(tl((function(){Fl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Oi]=null}))})),!0)},t.unstable_batchedUpdates=el,t.unstable_createPortal=function(e,t){return Ul(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Wl(i))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Fl(e,t,i,!1,n)},t.version="16.13.1"},function(e,t,i){"use strict";e.exports=i(100)},function(e,t,i){"use strict";var n,r,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,h=function e(){if(null!==l)try{var i=t.unstable_now();l(!0,i),l=null}catch(n){throw setTimeout(e,0),n}},d=Date.now();t.unstable_now=function(){return Date.now()-d},n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(h,0))},r=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var p=window.performance,u=window.Date,f=window.setTimeout,g=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof p&&"function"===typeof p.now)t.unstable_now=function(){return p.now()};else{var y=u.now();t.unstable_now=function(){return u.now()-y}}var v=!1,b=null,w=-1,x=5,S=0;a=function(){return t.unstable_now()>=S},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<e?Math.floor(1e3/e):5};var C=new MessageChannel,P=C.port2;C.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();S=e+x;try{b(!0,e)?P.postMessage(null):(v=!1,b=null)}catch(i){throw P.postMessage(null),i}}else v=!1},n=function(e){b=e,v||(v=!0,P.postMessage(null))},r=function(e,i){w=f((function(){e(t.unstable_now())}),i)},o=function(){g(w),w=-1}}function O(e,t){var i=e.length;e.push(t);e:for(;;){var n=i-1>>>1,r=e[n];if(!(void 0!==r&&0<I(r,t)))break e;e[n]=t,e[i]=r,i=n}}function E(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length;n<r;){var o=2*(n+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>I(a,i))void 0!==l&&0>I(l,a)?(e[n]=l,e[s]=i,n=s):(e[n]=a,e[o]=i,n=o);else{if(!(void 0!==l&&0>I(l,i)))break e;e[n]=l,e[s]=i,n=s}}}return t}return null}function I(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}var k=[],A=[],M=1,D=null,L=3,R=!1,j=!1,N=!1;function z(e){for(var t=E(A);null!==t;){if(null===t.callback)T(A);else{if(!(t.startTime<=e))break;T(A),t.sortIndex=t.expirationTime,O(k,t)}t=E(A)}}function B(e){if(N=!1,z(e),!j)if(null!==E(k))j=!0,n(H);else{var t=E(A);null!==t&&r(B,t.startTime-e)}}function H(e,i){j=!1,N&&(N=!1,o()),R=!0;var n=L;try{for(z(i),D=E(k);null!==D&&(!(D.expirationTime>i)||e&&!a());){var s=D.callback;if(null!==s){D.callback=null,L=D.priorityLevel;var l=s(D.expirationTime<=i);i=t.unstable_now(),"function"===typeof l?D.callback=l:D===E(k)&&T(k),z(i)}else T(k);D=E(k)}if(null!==D)var c=!0;else{var h=E(A);null!==h&&r(B,h.startTime-i),c=!1}return c}finally{D=null,L=n,R=!1}}function _(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var W=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){j||R||(j=!0,n(H))},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_getFirstCallbackNode=function(){return E(k)},t.unstable_next=function(e){switch(L){case 1:case 2:case 3:var t=3;break;default:t=L}var i=L;L=t;try{return e()}finally{L=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=W,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=L;L=e;try{return t()}finally{L=i}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var l=a.delay;l="number"===typeof l&&0<l?s+l:s,a="number"===typeof a.timeout?a.timeout:_(e)}else a=_(e),l=s;return e={id:M++,callback:i,priorityLevel:e,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(e.sortIndex=l,O(A,e),null===E(k)&&e===E(A)&&(N?o():N=!0,r(B,l-s))):(e.sortIndex=a,O(k,e),j||R||(j=!0,n(H))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();z(e);var i=E(k);return i!==D&&null!==D&&null!==i&&null!==i.callback&&i.startTime<=e&&i.expirationTime<D.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=L;return function(){var i=L;L=t;try{return e.apply(this,arguments)}finally{L=i}}}},,,function(e,t,i){"use strict";var n=i(104);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},function(e,t,i){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,i){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case p:case a:case l:case s:case f:return e;default:switch(e=e&&e.$$typeof){case h:case u:case y:case m:case c:return e;default:return t}}case o:return t}}}function C(e){return S(e)===p}t.AsyncMode=d,t.ConcurrentMode=p,t.ContextConsumer=h,t.ContextProvider=c,t.Element=r,t.ForwardRef=u,t.Fragment=a,t.Lazy=y,t.Memo=m,t.Portal=o,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return C(e)||S(e)===d},t.isConcurrentMode=C,t.isContextConsumer=function(e){return S(e)===h},t.isContextProvider=function(e){return S(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return S(e)===u},t.isFragment=function(e){return S(e)===a},t.isLazy=function(e){return S(e)===y},t.isMemo=function(e){return S(e)===m},t.isPortal=function(e){return S(e)===o},t.isProfiler=function(e){return S(e)===l},t.isStrictMode=function(e){return S(e)===s},t.isSuspense=function(e){return S(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===p||e===l||e===s||e===f||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===c||e.$$typeof===h||e.$$typeof===u||e.$$typeof===b||e.$$typeof===w||e.$$typeof===x||e.$$typeof===v)},t.typeOf=S},function(e,t,i){"use strict";var n=i(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i=o.default.memo(o.default.forwardRef((function(t,i){return o.default.createElement(a.default,(0,r.default)({ref:i},t),e)})));0;return i.muiName=a.default.muiName,i};var r=n(i(41)),o=n(i(0)),a=n(i(127))},function(e,t,i){"use strict";var n;if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=i(76),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&r.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{d(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(e){var t=null!==e&&"object"===typeof e,i="[object Function]"===o.call(e),n=a(e),s=t&&"[object String]"===o.call(e),p=[];if(!t&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var f=c&&i;if(s&&e.length>0&&!r.call(e,0))for(var g=0;g<e.length;++g)p.push(String(g));if(n&&e.length>0)for(var m=0;m<e.length;++m)p.push(String(m));else for(var y in e)f&&"prototype"===y||!r.call(e,y)||p.push(String(y));if(l)for(var v=function(e){if("undefined"===typeof window||!u)return d(e);try{return d(e)}catch(t){return!1}}(e),b=0;b<h.length;++b)v&&"constructor"===h[b]||!r.call(e,h[b])||p.push(h[b]);return p}}e.exports=n},function(e,t,i){"use strict";var n="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,r=Object.prototype.toString,o=function(e){return!(n&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===r.call(e)},a=function(e){return!!o(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==r.call(e)&&"[object Function]"===r.call(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},function(e,t,i){"use strict";var n=function(e){return e!==e};e.exports=function(e,t){return 0===e&&0===t?1/e===1/t:e===t||!(!n(e)||!n(t))}},function(e,t,i){"use strict";var n=i(112),r=RegExp.prototype.exec,o=Object.getOwnPropertyDescriptor,a=Object.prototype.toString,s="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!s)return"[object RegExp]"===a.call(e);var t=o(e,"lastIndex");return!(!t||!n(t,"value"))&&function(e){try{var t=e.lastIndex;return e.lastIndex=0,r.call(e),!0}catch(i){return!1}finally{e.lastIndex=t}}(e)}},function(e,t,i){"use strict";var n=i(63);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,i){"use strict";var n="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,o=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!==typeof t||"[object Function]"!==o.call(t))throw new TypeError(n+t);for(var i,a=r.call(arguments,1),s=function(){if(this instanceof i){var n=t.apply(this,a.concat(r.call(arguments)));return Object(n)===n?n:this}return t.apply(e,a.concat(r.call(arguments)))},l=Math.max(0,t.length-a.length),c=[],h=0;h<l;h++)c.push("$"+h);if(i=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var d=function(){};d.prototype=t.prototype,i.prototype=new d,d.prototype=null}return i}},function(e,t,i){"use strict";var n=i(64),r=i(115),o=i(77),a=i(78),s=i(119),l=r(o);n(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l},function(e,t,i){"use strict";var n=i(63),r=i(116)("%Function%"),o=r.apply,a=r.call;e.exports=function(){return n.apply(a,arguments)},e.exports.apply=function(){return n.apply(o,arguments)}},function(e,t,i){"use strict";var n=TypeError,r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch(y){r=null}var o=function(){throw new n},a=r?function(){try{return o}catch(e){try{return r(arguments,"callee").get}catch(t){return o}}}():o,s=i(117)(),l=Object.getPrototypeOf||function(e){return e.__proto__},c=void 0,h="undefined"===typeof Uint8Array?void 0:l(Uint8Array),d={"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":s?l([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":c&&s&&Symbol.asyncIterator?c[Symbol.asyncIterator]():void 0,"%Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"===typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"===typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"===typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"===typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"===typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"===typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"===typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?l(l([][Symbol.iterator]())):void 0,"%JSON%":"object"===typeof JSON?JSON:void 0,"%JSONParse%":"object"===typeof JSON?JSON.parse:void 0,"%Map%":"undefined"===typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&s?l((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"===typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"===typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"===typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"===typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"===typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"===typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"===typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&s?l((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"===typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":s?l(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":s?Symbol:void 0,"%SymbolPrototype%":s?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":h,"%TypedArrayPrototype%":h?h.prototype:void 0,"%TypeError%":n,"%TypeErrorPrototype%":n.prototype,"%Uint8Array%":"undefined"===typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"===typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"===typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"===typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"===typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"===typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"===typeof WeakSet?void 0:WeakSet.prototype},p=i(63).call(Function.call,String.prototype.replace),u=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,g=function(e){var t=[];return p(e,u,(function(e,i,n,r){t[t.length]=n?p(r,f,"$1"):i||e})),t},m=function(e,t){if(!(e in d))throw new SyntaxError("intrinsic "+e+" does not exist!");if("undefined"===typeof d[e]&&!t)throw new n("intrinsic "+e+" exists, but is not available. Please file an issue!");return d[e]};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var i=g(e),o=m("%"+(i.length>0?i[0]:"")+"%",t),a=1;a<i.length;a+=1)if(null!=o)if(r&&a+1>=i.length){var s=r(o,i[a]);if(!t&&!(i[a]in o))throw new n("base intrinsic for "+e+" exists, but the property is not available.");o=s?s.get||s.value:o[i[a]]}else o=o[i[a]];return o}},function(e,t,i){"use strict";(function(t){var n=t.Symbol,r=i(118);e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&r())))}}).call(this,i(44))},function(e,t,i){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),i=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(e,t);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},function(e,t,i){"use strict";var n=i(64).supportsDescriptors,r=i(78),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,c=/a/;e.exports=function(){if(!n||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=r(),t=l(c),i=o(t,"flags");return i&&i.get===e||a(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},function(e,t,i){"use strict";var n=Date.prototype.getDay,r=Object.prototype.toString,o="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;e.exports=function(e){return"object"===typeof e&&null!==e&&(o?function(e){try{return n.call(e),!0}catch(t){return!1}}(e):"[object Date]"===r.call(e))}},function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),r=(a(n),a(i(2))),o=a(i(122));a(i(33));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(i,n){e=i,t.forEach((function(t){return t(e,n)}))}}}t.default=function(e,t){var i,a,d="__create-react-context-"+(0,o.default)()+"__",p=function(e){function i(){var t,n;s(this,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=l(this,e.call.apply(e,[this].concat(o))),n.emitter=h(n.props.value),l(n,t)}return c(i,e),i.prototype.getChildContext=function(){var e;return(e={})[d]=this.emitter,e},i.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var i=this.props.value,n=e.value,r=void 0;((o=i)===(a=n)?0!==o||1/o===1/a:o!==o&&a!==a)?r=0:(r="function"===typeof t?t(i,n):1073741823,0!==(r|=0)&&this.emitter.set(e.value,r))}var o,a},i.prototype.render=function(){return this.props.children},i}(n.Component);p.childContextTypes=((i={})[d]=r.default.object.isRequired,i);var u=function(t){function i(){var e,n;s(this,i);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=n=l(this,t.call.apply(t,[this].concat(o))),n.state={value:n.getValue()},n.onUpdate=function(e,t){0!==((0|n.observedBits)&t)&&n.setState({value:n.getValue()})},l(n,e)}return c(i,t),i.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},i.prototype.componentDidMount=function(){this.context[d]&&this.context[d].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},i.prototype.componentWillUnmount=function(){this.context[d]&&this.context[d].off(this.onUpdate)},i.prototype.getValue=function(){return this.context[d]?this.context[d].get():e},i.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},i}(n.Component);return u.contextTypes=((a={})[d]=r.default.object,a),{Provider:p,Consumer:u}},e.exports=t.default},function(e,t,i){"use strict";(function(t){var i="__global_unique_id__";e.exports=function(){return t[i]=(t[i]||0)+1}}).call(this,i(44))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,i,n,r,o,a){var s=r||"<<anonymous>>",l=a||n;if(null==i[n])return t?new Error("Required "+o+" `"+l+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,h=Array(c>6?c-6:0),d=6;d<c;d++)h[d-6]=arguments[d];return e.apply(void 0,[i,n,s,o,l].concat(h))}var i=t.bind(null,!1);return i.isRequired=t.bind(null,!0),i},e.exports=t.default},function(e,t,i){},function(e,t,i){},,function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return h}));var n=i(1),r=i(7),o=i(0),a=(i(2),i(11)),s=i(13),l=i(20),c=o.forwardRef((function(e,t){var i=e.children,s=e.classes,c=e.className,h=e.color,d=void 0===h?"inherit":h,p=e.component,u=void 0===p?"svg":p,f=e.fontSize,g=void 0===f?"default":f,m=e.htmlColor,y=e.titleAccess,v=e.viewBox,b=void 0===v?"0 0 24 24":v,w=Object(r.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return o.createElement(u,Object(n.a)({className:Object(a.a)(s.root,c,"inherit"!==d&&s["color".concat(Object(l.a)(d))],"default"!==g&&s["fontSize".concat(Object(l.a)(g))]),focusable:"false",viewBox:b,color:m,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:t},w),i,y?o.createElement("title",null,y):null)}));c.muiName="SvgIcon";var h=Object(s.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(c)},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(1),r=i(45);function o(e){return e&&"object"===Object(r.a)(e)&&e.constructor===Object}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=i.clone?Object(n.a)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach((function(n){"__proto__"!==n&&(o(t[n])&&n in e?r[n]=a(e[n],t[n],i):r[n]=t[n])})),r}},function(e,t,i){"use strict";i.d(t,"a",(function(){return di}));var n=i(7),r=i(1),o=i(0),a=i.n(o),s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="object"===("undefined"===typeof window?"undefined":s(window))&&"object"===("undefined"===typeof document?"undefined":s(document))&&9===document.nodeType,c=(i(27),i(38)),h=i(15),d=i(46),p=i(5),u={}.constructor;function f(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(f);if(e.constructor!==u)return e;var t={};for(var i in e)t[i]=f(e[i]);return t}function g(e,t,i){void 0===e&&(e="unnamed");var n=i.jss,r=f(t),o=n.plugins.onCreateRule(e,r,i);return o||(e[0],null)}var m=function(e,t){for(var i="",n=0;n<e.length&&"!important"!==e[n];n++)i&&(i+=t),i+=e[n];return i};function y(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var i="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)i&&(i+=", "),i+=m(e[n]," ");else i=m(e,", ");return t||"!important"!==e[e.length-1]||(i+=" !important"),i}function v(e,t){for(var i="",n=0;n<t;n++)i+="  ";return i+e}function b(e,t,i){void 0===i&&(i={});var n="";if(!t)return n;var r=i.indent,o=void 0===r?0:r,a=t.fallbacks;if(e&&o++,a)if(Array.isArray(a))for(var s=0;s<a.length;s++){var l=a[s];for(var c in l){var h=l[c];null!=h&&(n&&(n+="\n"),n+=""+v(c+": "+y(h)+";",o))}}else for(var d in a){var p=a[d];null!=p&&(n&&(n+="\n"),n+=""+v(d+": "+y(p)+";",o))}for(var u in t){var f=t[u];null!=f&&"fallbacks"!==u&&(n&&(n+="\n"),n+=""+v(u+": "+y(f)+";",o))}return(n||i.allowEmpty)&&e?(n&&(n="\n"+n+"\n"),v(e+" {"+n,--o)+v("}",o)):n}var w=/([[\].#*$><+~=|^:(),"'`\s])/g,x="undefined"!==typeof CSS&&CSS.escape,S=function(e){return x?x(e):e.replace(w,"\\$1")},C=function(){function e(e,t,i){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var n=i.sheet,r=i.Renderer;this.key=e,this.options=i,this.style=t,n?this.renderer=n.renderer:r&&(this.renderer=new r)}return e.prototype.prop=function(e,t,i){if(void 0===t)return this.style[e];var n=!!i&&i.force;if(!n&&this.style[e]===t)return this;var r=t;i&&!1===i.process||(r=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==r||!1===r,a=e in this.style;if(o&&!a&&!n)return this;var s=o&&a;if(s?delete this.style[e]:this.style[e]=r,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,r),this;var l=this.options.sheet;return l&&l.attached,this},e}(),P=function(e){function t(t,i,n){var r;(r=e.call(this,t,i,n)||this).selectorText=void 0,r.id=void 0,r.renderable=void 0;var o=n.selector,a=n.scoped,s=n.sheet,l=n.generateId;return o?r.selectorText=o:!1!==a&&(r.id=l(Object(d.a)(Object(d.a)(r)),s),r.selectorText="."+S(r.id)),r}Object(h.a)(t,e);var i=t.prototype;return i.applyTo=function(e){var t=this.renderer;if(t){var i=this.toJSON();for(var n in i)t.setProperty(e,n,i[n])}return this},i.toJSON=function(){var e={};for(var t in this.style){var i=this.style[t];"object"!==typeof i?e[t]=i:Array.isArray(i)&&(e[t]=y(i))}return e},i.toString=function(e){var t=this.options.sheet,i=!!t&&t.options.link?Object(r.a)({},e,{allowEmpty:!0}):e;return b(this.selectorText,this.style,i)},Object(c.a)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,i=this.renderable;if(i&&t)t.setSelector(i,e)||t.replaceRule(i,this)}},get:function(){return this.selectorText}}]),t}(C),O={onCreateRule:function(e,t,i){return"@"===e[0]||i.parent&&"keyframes"===i.parent.type?null:new P(e,t,i)}},E={indent:1,children:!0},T=/@([\w-]+)/,I=function(){function e(e,t,i){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.query=i.name;var n=e.match(T);for(var o in this.at=n?n[1]:"unknown",this.options=i,this.rules=new $(Object(r.a)({},i,{parent:this})),t)this.rules.add(o,t[o]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,i){var n=this.rules.add(e,t,i);return n?(this.options.jss.plugins.onProcessRule(n),n):null},t.toString=function(e){if(void 0===e&&(e=E),null==e.indent&&(e.indent=E.indent),null==e.children&&(e.children=E.children),!1===e.children)return this.query+" {}";var t=this.rules.toString(e);return t?this.query+" {\n"+t+"\n}":""},e}(),k=/@media|@supports\s+/,A={onCreateRule:function(e,t,i){return k.test(e)?new I(e,t,i):null}},M={indent:1,children:!0},D=/@keyframes\s+([\w-]+)/,L=function(){function e(e,t,i){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var n=e.match(D);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var o=i.scoped,a=i.sheet,s=i.generateId;for(var l in this.id=!1===o?this.name:S(s(this,a)),this.rules=new $(Object(r.a)({},i,{parent:this})),t)this.rules.add(l,t[l],Object(r.a)({},i,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){if(void 0===e&&(e=M),null==e.indent&&(e.indent=M.indent),null==e.children&&(e.children=M.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t="\n"+t+"\n"),this.at+" "+this.id+" {"+t+"}"},e}(),R=/@keyframes\s+/,j=/\$([\w-]+)/g,N=function(e,t){return"string"===typeof e?e.replace(j,(function(e,i){return i in t?t[i]:e})):e},z=function(e,t,i){var n=e[t],r=N(n,i);r!==n&&(e[t]=r)},B={onCreateRule:function(e,t,i){return"string"===typeof e&&R.test(e)?new L(e,t,i):null},onProcessStyle:function(e,t,i){return"style"===t.type&&i?("animation-name"in e&&z(e,"animation-name",i.keyframes),"animation"in e&&z(e,"animation",i.keyframes),e):e},onChangeValue:function(e,t,i){var n=i.options.sheet;if(!n)return e;switch(t){case"animation":case"animation-name":return N(e,n.keyframes);default:return e}}},H=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).renderable=void 0,t}return Object(h.a)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,i=!!t&&t.options.link?Object(r.a)({},e,{allowEmpty:!0}):e;return b(this.key,this.style,i)},t}(C),_={onCreateRule:function(e,t,i){return i.parent&&"keyframes"===i.parent.type?new H(e,t,i):null}},W=function(){function e(e,t,i){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=i}return e.prototype.toString=function(e){if(Array.isArray(this.style)){for(var t="",i=0;i<this.style.length;i++)t+=b(this.at,this.style[i]),this.style[i+1]&&(t+="\n");return t}return b(this.at,this.style,e)},e}(),F=/@font-face/,V={onCreateRule:function(e,t,i){return F.test(e)?new W(e,t,i):null}},U=function(){function e(e,t,i){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=i}return e.prototype.toString=function(e){return b(this.key,this.style,e)},e}(),Y={onCreateRule:function(e,t,i){return"@viewport"===e||"@-ms-viewport"===e?new U(e,t,i):null}},X=function(){function e(e,t,i){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.value=t,this.options=i}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",i=0;i<this.value.length;i++)t+=this.key+" "+this.value[i]+";",this.value[i+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),G={"@charset":!0,"@import":!0,"@namespace":!0},q=[O,A,B,_,V,Y,{onCreateRule:function(e,t,i){return e in G?new X(e,t,i):null}}],Z={process:!0},K={force:!0,process:!0},$=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,i){var n=this.options,o=n.parent,a=n.sheet,s=n.jss,l=n.Renderer,c=n.generateId,h=n.scoped,d=Object(r.a)({classes:this.classes,parent:o,sheet:a,jss:s,Renderer:l,generateId:c,scoped:h,name:e,keyframes:this.keyframes,selector:void 0},i),p=e;e in this.raw&&(p=e+"-d"+this.counter++),this.raw[p]=t,p in this.classes&&(d.selector="."+S(this.classes[p]));var u=g(p,t,d);if(!u)return null;this.register(u);var f=void 0===d.index?this.index.length:d.index;return this.index.splice(f,0,u),u},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof P?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof L&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof P?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof L&&delete this.keyframes[e.name]},t.update=function(){var e,t,i;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.map[e],t,i);else for(var n=0;n<this.index.length;n++)this.updateOne(this.index[n],t,i)},t.updateOne=function(t,i,n){void 0===n&&(n=Z);var r=this.options,o=r.jss.plugins,a=r.sheet;if(t.rules instanceof e)t.rules.update(i,n);else{var s=t,l=s.style;if(o.onUpdate(i,t,a,n),n.process&&l&&l!==s.style){for(var c in o.onProcessStyle(s.style,s,a),s.style){var h=s.style[c];h!==l[c]&&s.prop(c,h,K)}for(var d in l){var p=s.style[d],u=l[d];null==p&&p!==u&&s.prop(d,null,K)}}}},t.toString=function(e){for(var t="",i=this.options.sheet,n=!!i&&i.options.link,r=0;r<this.index.length;r++){var o=this.index[r].toString(e);(o||n)&&(t&&(t+="\n"),t+=o)}return t},e}(),Q=function(){function e(e,t){for(var i in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(r.a)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new $(this.options),e)this.rules.add(i,e[i]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,i){var n=this.queue;this.attached&&!n&&(this.queue=[]);var r=this.rules.add(e,t,i);return r?(this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(n?n.push(r):(this.insertRule(r),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),r):r:(this.deployed=!1,r)):null},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var i=[];for(var n in e){var r=this.addRule(n,e[n],t);r&&i.push(r)}return i},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!!t&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,i){return this.rules.updateOne(e,t,i),this},t.toString=function(e){return this.rules.toString(e)},e}(),J=function(){function e(){this.plugins={internal:[],external:[]},this.registry=void 0}var t=e.prototype;return t.onCreateRule=function(e,t,i){for(var n=0;n<this.registry.onCreateRule.length;n++){var r=this.registry.onCreateRule[n](e,t,i);if(r)return r}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,i){for(var n=0;n<this.registry.onProcessStyle.length;n++)t.style=this.registry.onProcessStyle[n](t.style,t,i)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,i,n){for(var r=0;r<this.registry.onUpdate.length;r++)this.registry.onUpdate[r](e,t,i,n)},t.onChangeValue=function(e,t,i){for(var n=e,r=0;r<this.registry.onChangeValue.length;r++)n=this.registry.onChangeValue[r](n,t,i);return n},t.use=function(e,t){void 0===t&&(t={queue:"external"});var i=this.plugins[t.queue];-1===i.indexOf(e)&&(i.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var i in t)i in e&&e[i].push(t[i]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ee=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,i=e.options.index;if(-1===t.indexOf(e))if(0===t.length||i>=this.index)t.push(e);else for(var n=0;n<t.length;n++)if(t[n].options.index>i)return void t.splice(n,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,i=t.attached,n=Object(p.a)(t,["attached"]),r="",o=0;o<this.registry.length;o++){var a=this.registry[o];null!=i&&a.attached!==i||(r&&(r+="\n"),r+=a.toString(n))}return r},Object(c.a)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),te="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),ie="2f1acc6c3a606b082e5eef5e54414ffb";null==te[ie]&&(te[ie]=0);var ne=te[ie]++,re=function(e){void 0===e&&(e={});var t=0;return function(i,n){t+=1;var r="",o="";return n&&(n.options.classNamePrefix&&(o=n.options.classNamePrefix),null!=n.options.jss.id&&(r=String(n.options.jss.id))),e.minify?""+(o||"c")+ne+r+t:o+i.key+"-"+ne+(r?"-"+r:"")+"-"+t}},oe=function(e){var t;return function(){return t||(t=e()),t}};function ae(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(i){return""}}function se(e,t,i){try{var n=i;if(Array.isArray(i)&&(n=y(i,!0),"!important"===i[i.length-1]))return e.style.setProperty(t,n,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,n):e.style.setProperty(t,n)}catch(r){return!1}return!0}function le(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(i){}}function ce(e,t){return e.selectorText=t,e.selectorText===t}var he=oe((function(){return document.querySelector("head")}));function de(e){var t=ee.registry;if(t.length>0){var i=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e);if(i&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element};if((i=function(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e))&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&"string"===typeof n){var r=function(e){for(var t=he(),i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}(n);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}var pe=oe((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),ue=function(e,t,i){var n=e.cssRules.length;(void 0===i||i>n)&&(i=n);try{if("insertRule"in e)e.insertRule(t,i);else if("appendRule"in e){e.appendRule(t)}}catch(r){return!1}return e.cssRules[i]},fe=function(){function e(e){this.getPropertyValue=ae,this.setProperty=se,this.removeProperty=le,this.setSelector=ce,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,e&&ee.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},i=t.media,n=t.meta,r=t.element;this.element=r||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),n&&this.element.setAttribute("data-meta",n);var o=pe();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var i=t.insertionPoint,n=de(t);if(!1!==n&&n.parent)n.parent.insertBefore(e,n.node);else if(i&&"number"===typeof i.nodeType){var r=i,o=r.parentNode;o&&o.insertBefore(e,r.nextSibling)}else he().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){var e=this.element.parentNode;e&&e.removeChild(this.element)},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var i=0;i<e.index.length;i++)this.insertRule(e.index[i],i,t)},t.insertRule=function(e,t,i){if(void 0===i&&(i=this.element.sheet),e.rules){var n=e,r=i;return("conditional"!==e.type&&"keyframes"!==e.type||!1!==(r=ue(i,n.toString({children:!1}),t)))&&(this.insertRules(n.rules,r),r)}if(e.renderable&&e.renderable.parentStyleSheet===this.element.sheet)return e.renderable;var o=e.toString();if(!o)return!1;var a=ue(i,o,t);return!1!==a&&(this.hasInsertedRules=!0,e.renderable=a,a)},t.deleteRule=function(e){var t=this.element.sheet,i=this.indexOf(e);return-1!==i&&(t.deleteRule(i),!0)},t.indexOf=function(e){for(var t=this.element.sheet.cssRules,i=0;i<t.length;i++)if(e===t[i])return i;return-1},t.replaceRule=function(e,t){var i=this.indexOf(e);return-1!==i&&(this.element.sheet.deleteRule(i),this.insertRule(t,i))},t.getRules=function(){return this.element.sheet.cssRules},e}(),ge=0,me=function(){function e(e){this.id=ge++,this.version="10.4.0",this.plugins=new J,this.options={id:{minify:!1},createGenerateId:re,Renderer:l?fe:null,plugins:[]},this.generateId=re({minify:!1});for(var t=0;t<q.length;t++)this.plugins.use(q[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Object(r.a)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var i=t.index;"number"!==typeof i&&(i=0===ee.index?0:ee.index+1);var n=new Q(e,Object(r.a)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:i}));return this.plugins.onProcessSheet(n),n},t.removeStyleSheet=function(e){return e.detach(),ee.remove(e),this},t.createRule=function(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),"object"===typeof e)return this.createRule(void 0,e,t);var n=Object(r.a)({},i,{name:e,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var o=g(e,t,n);return o&&this.plugins.onProcessRule(o),o},t.use=function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach((function(t){e.plugins.use(t)})),this},e}();var ye="undefined"!==typeof CSS&&CSS&&"number"in CSS,ve=function(e){return new me(e)};ve();function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,i=e.newClasses;e.Component;if(!i)return t;var n=Object(r.a)({},t);return Object.keys(i).forEach((function(e){i[e]&&(n[e]="".concat(t[e]," ").concat(i[e]))})),n}var we={set:function(e,t,i,n){var r=e.get(t);r||(r=new Map,e.set(t,r)),r.set(i,n)},get:function(e,t,i){var n=e.get(t);return n?n.get(i):void 0},delete:function(e,t,i){e.get(t).delete(i)}},xe=i(157),Se=(i(2),"function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__"),Ce=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Pe=Date.now(),Oe="fnValues"+Pe,Ee="fnStyle"+ ++Pe;var Te=function(){return{onCreateRule:function(e,t,i){if("function"!==typeof t)return null;var n=g(e,{},i);return n[Ee]=t,n},onProcessStyle:function(e,t){if(Oe in t||Ee in t)return e;var i={};for(var n in e){var r=e[n];"function"===typeof r&&(delete e[n],i[n]=r)}return t[Oe]=i,e},onUpdate:function(e,t,i,n){var r=t,o=r[Ee];o&&(r.style=o(e)||{});var a=r[Oe];if(a)for(var s in a)r.prop(s,a[s](e),n)}}},Ie="@global",ke=function(){function e(e,t,i){for(var n in this.type="global",this.at=Ie,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=e,this.options=i,this.rules=new $(Object(r.a)({},i,{parent:this})),t)this.rules.add(n,t[n]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,i){var n=this.rules.add(e,t,i);return this.options.jss.plugins.onProcessRule(n),n},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(){return this.rules.toString()},e}(),Ae=function(){function e(e,t,i){this.type="global",this.at=Ie,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=e,this.options=i;var n=e.substr("@global ".length);this.rule=i.jss.createRule(n,t,Object(r.a)({},i,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Me=/\s*,\s*/g;function De(e,t){for(var i=e.split(Me),n="",r=0;r<i.length;r++)n+=t+" "+i[r].trim(),i[r+1]&&(n+=", ");return n}var Le=function(){return{onCreateRule:function(e,t,i){if(!e)return null;if(e===Ie)return new ke(e,t,i);if("@"===e[0]&&"@global "===e.substr(0,"@global ".length))return new Ae(e,t,i);var n=i.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(i.scoped=!1),!1===i.scoped&&(i.selector=e),null},onProcessRule:function(e){"style"===e.type&&(function(e){var t=e.options,i=e.style,n=i?i[Ie]:null;if(n){for(var o in n)t.sheet.addRule(o,n[o],Object(r.a)({},t,{selector:De(o,e.selector)}));delete i[Ie]}}(e),function(e){var t=e.options,i=e.style;for(var n in i)if("@"===n[0]&&n.substr(0,Ie.length)===Ie){var o=De(n.substr(Ie.length),e.selector);t.sheet.addRule(o,i[n],Object(r.a)({},t,{selector:o})),delete i[n]}}(e))}}},Re=/\s*,\s*/g,je=/&/g,Ne=/\$([\w-]+)/g;var ze=function(){function e(e,t){return function(i,n){var r=e.getRule(n)||t&&t.getRule(n);return r?(r=r).selector:n}}function t(e,t){for(var i=t.split(Re),n=e.split(Re),r="",o=0;o<i.length;o++)for(var a=i[o],s=0;s<n.length;s++){var l=n[s];r&&(r+=", "),r+=-1!==l.indexOf("&")?l.replace(je,a):a+" "+l}return r}function i(e,t,i){if(i)return Object(r.a)({},i,{index:i.index+1});var n=e.options.nestingLevel;n=void 0===n?1:n+1;var o=Object(r.a)({},e.options,{nestingLevel:n,index:t.indexOf(e)+1});return delete o.name,o}return{onProcessStyle:function(n,o,a){if("style"!==o.type)return n;var s,l,c=o,h=c.options.parent;for(var d in n){var p=-1!==d.indexOf("&"),u="@"===d[0];if(p||u){if(s=i(c,h,s),p){var f=t(d,c.selector);l||(l=e(h,a)),f=f.replace(Ne,l),h.addRule(f,n[d],Object(r.a)({},s,{selector:f}))}else u&&h.addRule(d,{},s).addRule(c.key,n[d],{selector:c.selector});delete n[d]}}return n}}},Be=/[A-Z]/g,He=/^ms-/,_e={};function We(e){return"-"+e.toLowerCase()}var Fe=function(e){if(_e.hasOwnProperty(e))return _e[e];var t=e.replace(Be,We);return _e[e]=He.test(t)?"-"+t:t};function Ve(e){var t={};for(var i in e){t[0===i.indexOf("--")?i:Fe(i)]=e[i]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Ve):t.fallbacks=Ve(e.fallbacks)),t}var Ue=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Ve(e[t]);return e}return Ve(e)},onChangeValue:function(e,t,i){if(0===t.indexOf("--"))return e;var n=Fe(t);return t===n?e:(i.prop(n,e),null)}}},Ye=ye&&CSS?CSS.px:"px",Xe=ye&&CSS?CSS.ms:"ms",Ge=ye&&CSS?CSS.percent:"%";function qe(e){var t=/(-[a-z])/g,i=function(e){return e[1].toUpperCase()},n={};for(var r in e)n[r]=e[r],n[r.replace(t,i)]=e[r];return n}var Ze=qe({"animation-delay":Xe,"animation-duration":Xe,"background-position":Ye,"background-position-x":Ye,"background-position-y":Ye,"background-size":Ye,border:Ye,"border-bottom":Ye,"border-bottom-left-radius":Ye,"border-bottom-right-radius":Ye,"border-bottom-width":Ye,"border-left":Ye,"border-left-width":Ye,"border-radius":Ye,"border-right":Ye,"border-right-width":Ye,"border-top":Ye,"border-top-left-radius":Ye,"border-top-right-radius":Ye,"border-top-width":Ye,"border-width":Ye,margin:Ye,"margin-bottom":Ye,"margin-left":Ye,"margin-right":Ye,"margin-top":Ye,padding:Ye,"padding-bottom":Ye,"padding-left":Ye,"padding-right":Ye,"padding-top":Ye,"mask-position-x":Ye,"mask-position-y":Ye,"mask-size":Ye,height:Ye,width:Ye,"min-height":Ye,"max-height":Ye,"min-width":Ye,"max-width":Ye,bottom:Ye,left:Ye,top:Ye,right:Ye,"box-shadow":Ye,"text-shadow":Ye,"column-gap":Ye,"column-rule":Ye,"column-rule-width":Ye,"column-width":Ye,"font-size":Ye,"font-size-delta":Ye,"letter-spacing":Ye,"text-indent":Ye,"text-stroke":Ye,"text-stroke-width":Ye,"word-spacing":Ye,motion:Ye,"motion-offset":Ye,outline:Ye,"outline-offset":Ye,"outline-width":Ye,perspective:Ye,"perspective-origin-x":Ge,"perspective-origin-y":Ge,"transform-origin":Ge,"transform-origin-x":Ge,"transform-origin-y":Ge,"transform-origin-z":Ge,"transition-delay":Xe,"transition-duration":Xe,"vertical-align":Ye,"flex-basis":Ye,"shape-margin":Ye,size:Ye,grid:Ye,"grid-gap":Ye,"grid-row-gap":Ye,"grid-column-gap":Ye,"grid-template-rows":Ye,"grid-template-columns":Ye,"grid-auto-rows":Ye,"grid-auto-columns":Ye,"box-shadow-x":Ye,"box-shadow-y":Ye,"box-shadow-blur":Ye,"box-shadow-spread":Ye,"font-line-height":Ye,"text-shadow-x":Ye,"text-shadow-y":Ye,"text-shadow-blur":Ye});function Ke(e,t,i){if(!t)return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=Ke(e,t[n],i);else if("object"===typeof t)if("fallbacks"===e)for(var r in t)t[r]=Ke(r,t[r],i);else for(var o in t)t[o]=Ke(e+"-"+o,t[o],i);else if("number"===typeof t){var a=i[e]||Ze[e];return a?"function"===typeof a?a(t).toString():""+t+a:t.toString()}return t}var $e=function(e){void 0===e&&(e={});var t=qe(e);return{onProcessStyle:function(e,i){if("style"!==i.type)return e;for(var n in e)e[n]=Ke(n,e[n],t);return e},onChangeValue:function(e,i){return Ke(i,e,t)}}},Qe=i(25),Je="",et="",tt="",it="",nt=l&&"ontouchstart"in document.documentElement;if(l){var rt={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ot=document.createElement("p").style;for(var at in rt)if(at+"Transform"in ot){Je=at,et=rt[at];break}"Webkit"===Je&&"msHyphens"in ot&&(Je="ms",et=rt.ms,it="edge"),"Webkit"===Je&&"-apple-trailing-word"in ot&&(tt="apple")}var st=Je,lt=et,ct=tt,ht=it,dt=nt;var pt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===st?"-webkit-"+e:lt+e)}},ut={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===st?lt+"print-"+e:e)}},ft=/[-\s]+(.)?/g;function gt(e,t){return t?t.toUpperCase():""}function mt(e){return e.replace(ft,gt)}function yt(e){return mt("-"+e)}var vt,bt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===st){if(mt("mask-image")in t)return e;if(st+yt("mask-image")in t)return lt+e}return e}},wt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==ct||dt?e:lt+e)}},xt={noPrefill:["transform"],supportedProperty:function(e,t,i){return"transform"===e&&(i.transform?e:lt+e)}},St={noPrefill:["transition"],supportedProperty:function(e,t,i){return"transition"===e&&(i.transition?e:lt+e)}},Ct={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===st||"ms"===st&&"edge"!==ht?lt+e:e)}},Pt={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===st||"ms"===st||"apple"===ct?lt+e:e)}},Ot={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===st?"WebkitColumn"+yt(e)in t&&lt+"column-"+e:"Moz"===st&&("page"+yt(e)in t&&"page-"+e))}},Et={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===st)return e;var i=e.replace("-inline","");return st+yt(i)in t&&lt+i}},Tt={supportedProperty:function(e,t){return mt(e)in t&&e}},It={supportedProperty:function(e,t){var i=yt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:st+i in t?lt+e:"Webkit"!==st&&"Webkit"+i in t&&"-webkit-"+e}},kt={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===st?""+lt+e:e)}},At={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===st?lt+"scroll-chaining":e)}},Mt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Dt={supportedProperty:function(e,t){var i=Mt[e];return!!i&&(st+yt(i)in t&&lt+i)}},Lt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Rt=Object.keys(Lt),jt=function(e){return lt+e},Nt=[pt,ut,bt,wt,xt,St,Ct,Pt,Ot,Et,Tt,It,kt,At,Dt,{supportedProperty:function(e,t,i){var n=i.multiple;if(Rt.indexOf(e)>-1){var r=Lt[e];if(!Array.isArray(r))return st+yt(r)in t&&lt+r;if(!n)return!1;for(var o=0;o<r.length;o++)if(!(st+yt(r[0])in t))return!1;return r.map(jt)}return!1}}],zt=Nt.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Bt=Nt.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Object(Qe.a)(t.noPrefill)),e}),[]),Ht={};if(l){vt=document.createElement("p");var _t=window.getComputedStyle(document.documentElement,"");for(var Wt in _t)isNaN(Wt)||(Ht[_t[Wt]]=_t[Wt]);Bt.forEach((function(e){return delete Ht[e]}))}function Ft(e,t){if(void 0===t&&(t={}),!vt)return e;if(null!=Ht[e])return Ht[e];"transition"!==e&&"transform"!==e||(t[e]=e in vt.style);for(var i=0;i<zt.length&&(Ht[e]=zt[i](e,vt.style,t),!Ht[e]);i++);try{vt.style[e]=""}catch(n){return!1}return Ht[e]}var Vt,Ut={},Yt={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Xt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Gt(e,t,i){if("var"===t)return"var";if("all"===t)return"all";if("all"===i)return", all";var n=t?Ft(t):", "+Ft(i);return n||(t||i)}function qt(e,t){var i=t;if(!Vt||"content"===e)return t;if("string"!==typeof i||!isNaN(parseInt(i,10)))return i;var n=e+i;if(null!=Ut[n])return Ut[n];try{Vt.style[e]=i}catch(r){return Ut[n]=!1,!1}if(Yt[e])i=i.replace(Xt,Gt);else if(""===Vt.style[e]&&("-ms-flex"===(i=lt+i)&&(Vt.style[e]="-ms-flexbox"),Vt.style[e]=i,""===Vt.style[e]))return Ut[n]=!1,!1;return Vt.style[e]="",Ut[n]=i,Ut[n]}l&&(Vt=document.createElement("p"));var Zt=function(){function e(t){for(var i in t){var n=t[i];if("fallbacks"===i&&Array.isArray(n))t[i]=n.map(e);else{var r=!1,o=Ft(i);o&&o!==i&&(r=!0);var a=!1,s=qt(o,y(n));s&&s!==n&&(a=!0),(r||a)&&(r&&delete t[i],t[o||i]=s||n)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(i=t.at)[1]||"ms"===st?i:"@"+lt+"keyframes"+i.substr(10)}var i},onProcessStyle:function(t,i){return"style"!==i.type?t:e(t)},onChangeValue:function(e,t){return qt(t,y(e))||e}}};var Kt=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,i){if("style"!==i.type)return t;for(var n={},r=Object.keys(t).sort(e),o=0;o<r.length;o++)n[r[o]]=t[r[o]];return n}}};function $t(){return{plugins:[Te(),Le(),ze(),Ue(),$e(),"undefined"===typeof window?null:Zt(),Kt()]}}var Qt=ve($t()),Jt={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,i=void 0!==t&&t,n=e.productionPrefix,r=void 0===n?"jss":n,o=e.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),l=0,c=function(){return l+=1};return function(e,t){var n=t.options.name;if(n&&0===n.indexOf("Mui")&&!t.options.link&&!i){if(-1!==Ce.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(n,"-").concat(e.key);return t.options.theme[Se]&&""===a?"".concat(o,"-").concat(c()):o}return"".concat(s).concat(r).concat(c())}}(),jss:Qt,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},ei=a.a.createContext(Jt);var ti=-1e9;function ii(){return ti+=1}i(45);var ni=i(128);function ri(e){var t="function"===typeof e;return{create:function(i,n){var o;try{o=t?e(i):e}catch(l){throw l}if(!n||!i.overrides||!i.overrides[n])return o;var a=i.overrides[n],s=Object(r.a)({},o);return Object.keys(a).forEach((function(e){s[e]=Object(ni.a)(s[e],a[e])})),s},options:{}}}var oi={};function ai(e,t,i){var n=e.state;if(e.stylesOptions.disableGeneration)return t||{};n.cacheClasses||(n.cacheClasses={value:null,lastProp:null,lastJSS:{}});var r=!1;return n.classes!==n.cacheClasses.lastJSS&&(n.cacheClasses.lastJSS=n.classes,r=!0),t!==n.cacheClasses.lastProp&&(n.cacheClasses.lastProp=t,r=!0),r&&(n.cacheClasses.value=be({baseClasses:n.cacheClasses.lastJSS,newClasses:t,Component:i})),n.cacheClasses.value}function si(e,t){var i=e.state,n=e.theme,o=e.stylesOptions,a=e.stylesCreator,s=e.name;if(!o.disableGeneration){var l=we.get(o.sheetsManager,a,n);l||(l={refs:0,staticSheet:null,dynamicStyles:null},we.set(o.sheetsManager,a,n,l));var c=Object(r.a)(Object(r.a)(Object(r.a)({},a.options),o),{},{theme:n,flip:"boolean"===typeof o.flip?o.flip:"rtl"===n.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var h=o.sheetsRegistry;if(0===l.refs){var d;o.sheetsCache&&(d=we.get(o.sheetsCache,a,n));var p=a.create(n,s);d||((d=o.jss.createStyleSheet(p,Object(r.a)({link:!1},c))).attach(),o.sheetsCache&&we.set(o.sheetsCache,a,n,d)),h&&h.add(d),l.staticSheet=d,l.dynamicStyles=function e(t){var i=null;for(var n in t){var r=t[n],o=typeof r;if("function"===o)i||(i={}),i[n]=r;else if("object"===o&&null!==r&&!Array.isArray(r)){var a=e(r);a&&(i||(i={}),i[n]=a)}}return i}(p)}if(l.dynamicStyles){var u=o.jss.createStyleSheet(l.dynamicStyles,Object(r.a)({link:!0},c));u.update(t),u.attach(),i.dynamicSheet=u,i.classes=be({baseClasses:l.staticSheet.classes,newClasses:u.classes}),h&&h.add(u)}else i.classes=l.staticSheet.classes;l.refs+=1}}function li(e,t){var i=e.state;i.dynamicSheet&&i.dynamicSheet.update(t)}function ci(e){var t=e.state,i=e.theme,n=e.stylesOptions,r=e.stylesCreator;if(!n.disableGeneration){var o=we.get(n.sheetsManager,r,i);o.refs-=1;var a=n.sheetsRegistry;0===o.refs&&(we.delete(n.sheetsManager,r,i),n.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),t.dynamicSheet&&(n.jss.removeStyleSheet(t.dynamicSheet),a&&a.remove(t.dynamicSheet))}}function hi(e,t){var i,n=a.a.useRef([]),r=a.a.useMemo((function(){return{}}),t);n.current!==r&&(n.current=r,i=e()),a.a.useEffect((function(){return function(){i&&i()}}),[r])}function di(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.name,o=t.classNamePrefix,s=t.Component,l=t.defaultTheme,c=void 0===l?oi:l,h=Object(n.a)(t,["name","classNamePrefix","Component","defaultTheme"]),d=ri(e),p=i||o||"makeStyles";d.options={index:ii(),name:i,meta:p,classNamePrefix:p};var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(xe.a)()||c,n=Object(r.a)(Object(r.a)({},a.a.useContext(ei)),h),o=a.a.useRef(),l=a.a.useRef();hi((function(){var r={name:i,state:{},stylesCreator:d,stylesOptions:n,theme:t};return si(r,e),l.current=!1,o.current=r,function(){ci(r)}}),[t,d]),a.a.useEffect((function(){l.current&&li(o.current,e),l.current=!0}));var p=ai(o.current,e.classes,s);return p};return u}},,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(1),r=i(129),o=i(29);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(e,Object(n.a)({defaultTheme:o.a},t))}},function(e,t,i){"use strict";function n(e){var t=e.theme,i=e.name,n=e.props;if(!t||!t.props||!t.props[i])return n;var r,o=t.props[i];for(r in o)void 0===n[r]&&(n[r]=o[r]);return n}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";var n=i(1),r=i(7),o=i(0),a=(i(2),i(11)),s=i(13),l=o.forwardRef((function(e,t){var i=e.classes,s=e.className,l=e.dividers,c=void 0!==l&&l,h=Object(r.a)(e,["classes","className","dividers"]);return o.createElement("div",Object(n.a)({className:Object(a.a)(i.root,s,c&&i.dividers),ref:t},h))}));t.a=Object(s.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(l)},function(e,t,i){"use strict";var n=i(1),r=i(7),o=i(0),a=(i(2),i(11)),s=i(13),l=o.forwardRef((function(e,t){var i=e.disableSpacing,s=void 0!==i&&i,l=e.classes,c=e.className,h=Object(r.a)(e,["disableSpacing","classes","className"]);return o.createElement("div",Object(n.a)({className:Object(a.a)(l.root,c,!s&&l.spacing),ref:t},h))}));t.a=Object(s.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(l)},function(e,t,i){"use strict";var n=i(1),r=i(7),o=i(0),a=(i(2),i(11)),s=i(12),l=i(157),c=i(150);function h(e){return e&&e.ownerDocument||document}var d=i(40),p=i(19);var u="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;var f=o.forwardRef((function(e,t){var i=e.children,n=e.container,r=e.disablePortal,a=void 0!==r&&r,l=e.onRendered,c=o.useState(null),h=c[0],f=c[1],g=Object(p.a)(o.isValidElement(i)?i.ref:null,t);return u((function(){a||f(function(e){return e="function"===typeof e?e():e,s.findDOMNode(e)}(n)||document.body)}),[n,a]),u((function(){if(h&&!a)return Object(d.a)(t,h),function(){Object(d.a)(t,null)}}),[t,h,a]),u((function(){l&&(h||a)&&l()}),[l,h,a]),a?o.isValidElement(i)?o.cloneElement(i,{ref:g}):i:h?s.createPortal(i,h):h}));function g(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((function(e,t){return null==t?e:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];e.apply(this,n),t.apply(this,n)}}),(function(){}))}var m=i(26),y=i(53);var v=i(38),b=i(25);function w(e){var t,i=h(e);return i.body===e?(t=i,h(t).defaultView||window).innerWidth>i.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function x(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function S(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function C(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4?arguments[4]:void 0,o=[t,i].concat(Object(b.a)(n)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&x(e,r)}))}function P(e,t){var i=-1;return e.some((function(e,n){return!!t(e)&&(i=n,!0)})),i}function O(e,t){var i,n=[],r=[],o=e.container;if(!t.disableScrollLock){if(w(o)){var a=function(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();n.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(S(o)+a,"px"),i=h(o).querySelectorAll(".mui-fixed"),[].forEach.call(i,(function(e){r.push(e.style.paddingRight),e.style.paddingRight="".concat(S(e)+a,"px")}))}var s=o.parentElement,l="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;n.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}return function(){i&&[].forEach.call(i,(function(e,t){r[t]?e.style.paddingRight=r[t]:e.style.removeProperty("padding-right")})),n.forEach((function(e){var t=e.value,i=e.el,n=e.key;t?i.style.setProperty(n,t):i.style.removeProperty(n)}))}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modals=[],this.containers=[]}return Object(v.a)(e,[{key:"add",value:function(e,t){var i=this.modals.indexOf(e);if(-1!==i)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&x(e.modalRef,!1);var n=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);C(t,e.mountNode,e.modalRef,n,!0);var r=P(this.containers,(function(e){return e.container===t}));return-1!==r?(this.containers[r].modals.push(e),i):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:n}),i)}},{key:"mount",value:function(e,t){var i=P(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),n=this.containers[i];n.restore||(n.restore=O(n,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var i=P(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),n=this.containers[i];if(n.modals.splice(n.modals.indexOf(e),1),this.modals.splice(t,1),0===n.modals.length)n.restore&&n.restore(),e.modalRef&&x(e.modalRef,!0),C(n.container,e.mountNode,e.modalRef,n.hiddenSiblingNodes,!1),this.containers.splice(i,1);else{var r=n.modals[n.modals.length-1];r.modalRef&&x(r.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var T=function(e){var t=e.children,i=e.disableAutoFocus,n=void 0!==i&&i,r=e.disableEnforceFocus,a=void 0!==r&&r,l=e.disableRestoreFocus,c=void 0!==l&&l,d=e.getDoc,u=e.isEnabled,f=e.open,g=o.useRef(),m=o.useRef(null),y=o.useRef(null),v=o.useRef(),b=o.useRef(null),w=o.useCallback((function(e){b.current=s.findDOMNode(e)}),[]),x=Object(p.a)(t.ref,w),S=o.useRef();return o.useEffect((function(){S.current=f}),[f]),!S.current&&f&&"undefined"!==typeof window&&(v.current=d().activeElement),o.useEffect((function(){if(f){var e=h(b.current);n||!b.current||b.current.contains(e.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex",-1),b.current.focus());var t=function(){e.hasFocus()&&!a&&u()&&!g.current?b.current&&!b.current.contains(e.activeElement)&&b.current.focus():g.current=!1},i=function(t){!a&&u()&&9===t.keyCode&&e.activeElement===b.current&&(g.current=!0,t.shiftKey?y.current.focus():m.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",i,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",i,!0),c||(v.current&&v.current.focus&&v.current.focus(),v.current=null)}}}),[n,a,c,u,f]),o.createElement(o.Fragment,null,o.createElement("div",{tabIndex:0,ref:m,"data-test":"sentinelStart"}),o.cloneElement(t,{ref:x}),o.createElement("div",{tabIndex:0,ref:y,"data-test":"sentinelEnd"}))},I={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},k=o.forwardRef((function(e,t){var i=e.invisible,a=void 0!==i&&i,s=e.open,l=Object(r.a)(e,["invisible","open"]);return s?o.createElement("div",Object(n.a)({"aria-hidden":!0,ref:t},l,{style:Object(n.a)({},I.root,a?I.invisible:{},l.style)})):null}));var A=new E,M=o.forwardRef((function(e,t){var i=Object(l.a)(),a=Object(c.a)({name:"MuiModal",props:Object(n.a)({},e),theme:i}),d=a.BackdropComponent,u=void 0===d?k:d,v=a.BackdropProps,b=a.children,w=a.closeAfterTransition,S=void 0!==w&&w,C=a.container,P=a.disableAutoFocus,O=void 0!==P&&P,E=a.disableBackdropClick,I=void 0!==E&&E,M=a.disableEnforceFocus,D=void 0!==M&&M,L=a.disableEscapeKeyDown,R=void 0!==L&&L,j=a.disablePortal,N=void 0!==j&&j,z=a.disableRestoreFocus,B=void 0!==z&&z,H=a.disableScrollLock,_=void 0!==H&&H,W=a.hideBackdrop,F=void 0!==W&&W,V=a.keepMounted,U=void 0!==V&&V,Y=a.manager,X=void 0===Y?A:Y,G=a.onBackdropClick,q=a.onClose,Z=a.onEscapeKeyDown,K=a.onRendered,$=a.open,Q=Object(r.a)(a,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),J=o.useState(!0),ee=J[0],te=J[1],ie=o.useRef({}),ne=o.useRef(null),re=o.useRef(null),oe=Object(p.a)(re,t),ae=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(a),se=function(){return h(ne.current)},le=function(){return ie.current.modalRef=re.current,ie.current.mountNode=ne.current,ie.current},ce=function(){X.mount(le(),{disableScrollLock:_}),re.current.scrollTop=0},he=Object(m.a)((function(){var e=function(e){return e="function"===typeof e?e():e,s.findDOMNode(e)}(C)||se().body;X.add(le(),e),re.current&&ce()})),de=o.useCallback((function(){return X.isTopModal(le())}),[X]),pe=Object(m.a)((function(e){ne.current=e,e&&(K&&K(),$&&de()?ce():x(re.current,!0))})),ue=o.useCallback((function(){X.remove(le())}),[X]);if(o.useEffect((function(){return function(){ue()}}),[ue]),o.useEffect((function(){$?he():ae&&S||ue()}),[$,ue,ae,S,he]),!U&&!$&&(!ae||ee))return null;var fe=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(i||{zIndex:y.a}),ge={};return void 0===b.props.tabIndex&&(ge.tabIndex=b.props.tabIndex||"-1"),ae&&(ge.onEnter=g((function(){te(!1)}),b.props.onEnter),ge.onExited=g((function(){te(!0),S&&ue()}),b.props.onExited)),o.createElement(f,{ref:pe,container:C,disablePortal:N},o.createElement("div",Object(n.a)({ref:oe,onKeyDown:function(e){"Escape"===e.key&&de()&&(Z&&Z(e),R||(e.stopPropagation(),q&&q(e,"escapeKeyDown")))},role:"presentation"},Q,{style:Object(n.a)({},fe.root,!$&&ee?fe.hidden:{},Q.style)}),F?null:o.createElement(u,Object(n.a)({open:$,onClick:function(e){e.target===e.currentTarget&&(G&&G(e),!I&&q&&q(e,"backdropClick"))}},v)),o.createElement(T,{disableEnforceFocus:D,disableAutoFocus:O,disableRestoreFocus:B,getDoc:se,isEnabled:de,open:$},o.cloneElement(b,ge))))})),D=i(13),L=i(58),R=i(61),j=i(24),N=i(29);function z(){return Object(l.a)()||N.a}var B=function(e){return e.scrollTop};function H(e,t){var i=e.timeout,n=e.style,r=void 0===n?{}:n;return{duration:r.transitionDuration||"number"===typeof i?i:i[t.mode]||0,delay:r.transitionDelay}}var _={entering:{opacity:1},entered:{opacity:1}},W={enter:j.b.enteringScreen,exit:j.b.leavingScreen},F=o.forwardRef((function(e,t){var i=e.children,a=e.disableStrictModeCompat,s=void 0!==a&&a,l=e.in,c=e.onEnter,h=e.onEntered,d=e.onEntering,u=e.onExit,f=e.onExited,g=e.onExiting,m=e.style,y=e.TransitionComponent,v=void 0===y?R.c:y,b=e.timeout,w=void 0===b?W:b,x=Object(r.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),S=z(),C=S.unstable_strictMode&&!s,P=o.useRef(null),O=Object(p.a)(i.ref,t),E=Object(p.a)(C?P:void 0,O),T=function(e){return function(t,i){if(e){var n=C?[P.current,t]:[t,i],r=Object(L.a)(n,2),o=r[0],a=r[1];void 0===a?e(o):e(o,a)}}},I=T(d),k=T((function(e,t){B(e);var i=H({style:m,timeout:w},{mode:"enter"});e.style.webkitTransition=S.transitions.create("opacity",i),e.style.transition=S.transitions.create("opacity",i),c&&c(e,t)})),A=T(h),M=T(g),D=T((function(e){var t=H({style:m,timeout:w},{mode:"exit"});e.style.webkitTransition=S.transitions.create("opacity",t),e.style.transition=S.transitions.create("opacity",t),u&&u(e)})),j=T(f);return o.createElement(v,Object(n.a)({appear:!0,in:l,nodeRef:C?P:void 0,onEnter:k,onEntered:A,onEntering:I,onExit:D,onExited:j,onExiting:M,timeout:w},x),(function(e,t){return o.cloneElement(i,Object(n.a)({style:Object(n.a)({opacity:0,visibility:"exited"!==e||l?void 0:"hidden"},_[e],m,i.props.style),ref:E},t))}))})),V=o.forwardRef((function(e,t){var i=e.children,s=e.classes,l=e.className,c=e.invisible,h=void 0!==c&&c,d=e.open,p=e.transitionDuration,u=e.TransitionComponent,f=void 0===u?F:u,g=Object(r.a)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return o.createElement(f,Object(n.a)({in:d,timeout:p},g),o.createElement("div",{className:Object(a.a)(s.root,l,h&&s.invisible),"aria-hidden":!0,ref:t},i))})),U=Object(D.a)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(V);function Y(e,t){var i=function(e,t){var i,n=t.getBoundingClientRect();if(t.fakeTransform)i=t.fakeTransform;else{var r=window.getComputedStyle(t);i=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("transform")}var o=0,a=0;if(i&&"none"!==i&&"string"===typeof i){var s=i.split("(")[1].split(")")[0].split(",");o=parseInt(s[4],10),a=parseInt(s[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(o-n.left,"px)"):"right"===e?"translateX(-".concat(n.left+n.width-o,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(a-n.top,"px)"):"translateY(-".concat(n.top+n.height-a,"px)")}(e,t);i&&(t.style.webkitTransform=i,t.style.transform=i)}var X={enter:j.b.enteringScreen,exit:j.b.leavingScreen},G=o.forwardRef((function(e,t){var i=e.children,a=e.direction,l=void 0===a?"down":a,c=e.in,h=e.onEnter,d=e.onEntered,u=e.onEntering,f=e.onExit,g=e.onExited,m=e.onExiting,y=e.style,v=e.timeout,b=void 0===v?X:v,w=e.TransitionComponent,x=void 0===w?R.c:w,S=Object(r.a)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),C=z(),P=o.useRef(null),O=o.useCallback((function(e){P.current=s.findDOMNode(e)}),[]),E=Object(p.a)(i.ref,O),T=Object(p.a)(E,t),I=function(e){return function(t){e&&(void 0===t?e(P.current):e(P.current,t))}},k=I((function(e,t){Y(l,e),B(e),h&&h(e,t)})),A=I((function(e,t){var i=H({timeout:b,style:y},{mode:"enter"});e.style.webkitTransition=C.transitions.create("-webkit-transform",Object(n.a)({},i,{easing:C.transitions.easing.easeOut})),e.style.transition=C.transitions.create("transform",Object(n.a)({},i,{easing:C.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",u&&u(e,t)})),M=I(d),D=I(m),L=I((function(e){var t=H({timeout:b,style:y},{mode:"exit"});e.style.webkitTransition=C.transitions.create("-webkit-transform",Object(n.a)({},t,{easing:C.transitions.easing.sharp})),e.style.transition=C.transitions.create("transform",Object(n.a)({},t,{easing:C.transitions.easing.sharp})),Y(l,e),f&&f(e)})),j=I((function(e){e.style.webkitTransition="",e.style.transition="",g&&g(e)})),N=o.useCallback((function(){P.current&&Y(l,P.current)}),[l]);return o.useEffect((function(){if(!c&&"down"!==l&&"right"!==l){var e=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=this,s=function(){e.apply(a,r)};clearTimeout(t),t=setTimeout(s,i)}return n.clear=function(){clearTimeout(t)},n}((function(){P.current&&Y(l,P.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[l,c]),o.useEffect((function(){c||N()}),[c,N]),o.createElement(x,Object(n.a)({nodeRef:P,onEnter:k,onEntered:M,onEntering:A,onExit:L,onExited:j,onExiting:D,appear:!0,in:c,timeout:b},S),(function(e,t){return o.cloneElement(i,Object(n.a)({ref:T,style:Object(n.a)({visibility:"exited"!==e||c?void 0:"hidden"},y,i.props.style)},t))}))})),q=o.forwardRef((function(e,t){var i=e.classes,s=e.className,l=e.component,c=void 0===l?"div":l,h=e.square,d=void 0!==h&&h,p=e.elevation,u=void 0===p?1:p,f=e.variant,g=void 0===f?"elevation":f,m=Object(r.a)(e,["classes","className","component","square","elevation","variant"]);return o.createElement(c,Object(n.a)({className:Object(a.a)(i.root,s,"outlined"===g?i.outlined:i["elevation".concat(u)],!d&&i.rounded),ref:t},m))})),Z=Object(D.a)((function(e){var t={};return e.shadows.forEach((function(e,i){t["elevation".concat(i)]={boxShadow:e}})),Object(n.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(q),K=i(20),$={left:"right",right:"left",top:"down",bottom:"up"};var Q={enter:j.b.enteringScreen,exit:j.b.leavingScreen},J=o.forwardRef((function(e,t){var i=e.anchor,s=void 0===i?"left":i,l=e.BackdropProps,c=e.children,h=e.classes,d=e.className,p=e.elevation,u=void 0===p?16:p,f=e.ModalProps,g=(f=void 0===f?{}:f).BackdropProps,m=Object(r.a)(f,["BackdropProps"]),y=e.onClose,v=e.open,b=void 0!==v&&v,w=e.PaperProps,x=void 0===w?{}:w,S=e.SlideProps,C=e.TransitionComponent,P=void 0===C?G:C,O=e.transitionDuration,E=void 0===O?Q:O,T=e.variant,I=void 0===T?"temporary":T,k=Object(r.a)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"]),A=z(),D=o.useRef(!1);o.useEffect((function(){D.current=!0}),[]);var L=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?$[t]:t}(A,s),R=o.createElement(Z,Object(n.a)({elevation:"temporary"===I?u:0,square:!0},x,{className:Object(a.a)(h.paper,h["paperAnchor".concat(Object(K.a)(L))],x.className,"temporary"!==I&&h["paperAnchorDocked".concat(Object(K.a)(L))])}),c);if("permanent"===I)return o.createElement("div",Object(n.a)({className:Object(a.a)(h.root,h.docked,d),ref:t},k),R);var j=o.createElement(P,Object(n.a)({in:b,direction:$[L],timeout:E,appear:D.current},S),R);return"persistent"===I?o.createElement("div",Object(n.a)({className:Object(a.a)(h.root,h.docked,d),ref:t},k),j):o.createElement(M,Object(n.a)({BackdropProps:Object(n.a)({},l,g,{transitionDuration:E}),BackdropComponent:U,className:Object(a.a)(h.root,h.modal,d),open:b,onClose:y,ref:t},k,m),j)}));t.a=Object(D.a)((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(J)},function(e,t,i){"use strict";var n=i(25),r=i(1),o=(i(2),i(28));var a=function(e){var t=function(t){var i=e(t);return t.css?Object(r.a)(Object(r.a)({},Object(o.a)(i,e(Object(r.a)({theme:t.theme},t.css)))),function(e,t){var i={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(i[n]=e[n])})),i}(t.css,[e.filterProps])):i};return t.propTypes={},t.filterProps=["css"].concat(Object(n.a)(e.filterProps)),t};var s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=function(e){return t.reduce((function(t,i){var n=i(e);return n?Object(o.a)(t,n):t}),{})};return n.propTypes={},n.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),n},l=i(34),c=i(52);function h(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var d=function(e){var t=e.prop,i=e.cssProperty,n=void 0===i?e.prop:i,r=e.themeKey,o=e.transform,a=function(e){if(null==e[t])return null;var i=e[t],a=h(e.theme,r)||{};return Object(c.a)(e,i,(function(e){var t;return"function"===typeof a?t=a(e):Array.isArray(a)?t=a[e]||e:(t=h(a,e)||e,o&&(t=o(t))),!1===n?t:Object(l.a)({},n,t)}))};return a.propTypes={},a.filterProps=[t],a};function p(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var u=s(d({prop:"border",themeKey:"borders",transform:p}),d({prop:"borderTop",themeKey:"borders",transform:p}),d({prop:"borderRight",themeKey:"borders",transform:p}),d({prop:"borderBottom",themeKey:"borders",transform:p}),d({prop:"borderLeft",themeKey:"borders",transform:p}),d({prop:"borderColor",themeKey:"palette"}),d({prop:"borderRadius",themeKey:"shape"})),f=s(d({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),d({prop:"display"}),d({prop:"overflow"}),d({prop:"textOverflow"}),d({prop:"visibility"}),d({prop:"whiteSpace"})),g=s(d({prop:"flexBasis"}),d({prop:"flexDirection"}),d({prop:"flexWrap"}),d({prop:"justifyContent"}),d({prop:"alignItems"}),d({prop:"alignContent"}),d({prop:"order"}),d({prop:"flex"}),d({prop:"flexGrow"}),d({prop:"flexShrink"}),d({prop:"alignSelf"}),d({prop:"justifyItems"}),d({prop:"justifySelf"})),m=s(d({prop:"gridGap"}),d({prop:"gridColumnGap"}),d({prop:"gridRowGap"}),d({prop:"gridColumn"}),d({prop:"gridRow"}),d({prop:"gridAutoFlow"}),d({prop:"gridAutoColumns"}),d({prop:"gridAutoRows"}),d({prop:"gridTemplateColumns"}),d({prop:"gridTemplateRows"}),d({prop:"gridTemplateAreas"}),d({prop:"gridArea"})),y=s(d({prop:"position"}),d({prop:"zIndex",themeKey:"zIndex"}),d({prop:"top"}),d({prop:"right"}),d({prop:"bottom"}),d({prop:"left"})),v=s(d({prop:"color",themeKey:"palette"}),d({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),b=d({prop:"boxShadow",themeKey:"shadows"});function w(e){return e<=1?"".concat(100*e,"%"):e}var x=d({prop:"width",transform:w}),S=d({prop:"maxWidth",transform:w}),C=d({prop:"minWidth",transform:w}),P=d({prop:"height",transform:w}),O=d({prop:"maxHeight",transform:w}),E=d({prop:"minHeight",transform:w}),T=(d({prop:"size",cssProperty:"width",transform:w}),d({prop:"size",cssProperty:"height",transform:w}),s(x,S,C,P,O,E,d({prop:"boxSizing"}))),I=i(158),k=s(d({prop:"fontFamily",themeKey:"typography"}),d({prop:"fontSize",themeKey:"typography"}),d({prop:"fontStyle",themeKey:"typography"}),d({prop:"fontWeight",themeKey:"typography"}),d({prop:"letterSpacing"}),d({prop:"lineHeight"}),d({prop:"textAlign"})),A=i(7),M=i(0),D=i.n(M),L=i(11),R=i(36),j=i.n(R),N=i(129);function z(e,t){var i={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(i[n]=e[n])})),i}var B=i(29),H=function(e){var t=function(e){return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.name,o=Object(A.a)(i,["name"]);var a,s=n,l="function"===typeof t?function(e){return{root:function(i){return t(Object(r.a)({theme:e},i))}}}:{root:t},c=Object(N.a)(l,Object(r.a)({Component:e,name:n||e.displayName,classNamePrefix:s},o));t.filterProps&&(a=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var h=D.a.forwardRef((function(t,i){var n=t.children,o=t.className,s=t.clone,l=t.component,h=Object(A.a)(t,["children","className","clone","component"]),d=c(t),p=Object(L.a)(d.root,o),u=h;if(a&&(u=z(u,a)),s)return D.a.cloneElement(n,Object(r.a)({className:Object(L.a)(n.props.className,p)},u));if("function"===typeof n)return n(Object(r.a)({className:p},u));var f=l||e;return D.a.createElement(f,Object(r.a)({ref:i,className:p},u),n)}));return j()(h,e),h}}(e);return function(e,i){return t(e,Object(r.a)({defaultTheme:B.a},i))}},_=a(s(u,f,g,m,y,v,b,T,I.b,k)),W=H("div")(_,{name:"MuiBox"});t.a=W},function(e,t,i){"use strict";var n=i(1),r=i(7),o=i(0),a=i.n(o),s=(i(2),i(11)),l=i(13),c=i(31),h=i(12),d=i(19),p=i(26),u=!0,f=!1,g=null,m={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function y(e){e.metaKey||e.altKey||e.ctrlKey||(u=!0)}function v(){u=!1}function b(){"hidden"===this.visibilityState&&f&&(u=!0)}function w(e){var t=e.target;try{return t.matches(":focus-visible")}catch(i){}return u||function(e){var t=e.type,i=e.tagName;return!("INPUT"!==i||!m[t]||e.readOnly)||("TEXTAREA"===i&&!e.readOnly||!!e.isContentEditable)}(t)}function x(){f=!0,window.clearTimeout(g),g=window.setTimeout((function(){f=!1}),100)}function S(){return{isFocusVisible:w,onBlurVisible:x,ref:o.useCallback((function(e){var t,i=h.findDOMNode(e);null!=i&&((t=i.ownerDocument).addEventListener("keydown",y,!0),t.addEventListener("mousedown",v,!0),t.addEventListener("pointerdown",v,!0),t.addEventListener("touchstart",v,!0),t.addEventListener("visibilitychange",b,!0))}),[])}}var C=i(25),P=i(5),O=i(46),E=i(15),T=i(39);function I(e,t){var i=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){i[e.key]=function(e){return t&&Object(o.isValidElement)(e)?t(e):e}(e)})),i}function k(e,t,i){return null!=i[t]?i[t]:e.props[t]}function A(e,t,i){var n=I(e.children),r=function(e,t){function i(i){return i in t?t[i]:e[i]}e=e||{},t=t||{};var n,r=Object.create(null),o=[];for(var a in e)a in t?o.length&&(r[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(r[l])for(n=0;n<r[l].length;n++){var c=r[l][n];s[r[l][n]]=i(c)}s[l]=i(l)}for(n=0;n<o.length;n++)s[o[n]]=i(o[n]);return s}(t,n);return Object.keys(r).forEach((function(a){var s=r[a];if(Object(o.isValidElement)(s)){var l=a in t,c=a in n,h=t[a],d=Object(o.isValidElement)(h)&&!h.props.in;!c||l&&!d?c||!l||d?c&&l&&Object(o.isValidElement)(h)&&(r[a]=Object(o.cloneElement)(s,{onExited:i.bind(null,s),in:h.props.in,exit:k(s,"exit",e),enter:k(s,"enter",e)})):r[a]=Object(o.cloneElement)(s,{in:!1}):r[a]=Object(o.cloneElement)(s,{onExited:i.bind(null,s),in:!0,exit:k(s,"exit",e),enter:k(s,"enter",e)})}})),r}var M=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},D=function(e){function t(t,i){var n,r=(n=e.call(this,t,i)||this).handleExited.bind(Object(O.a)(n));return n.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},n}Object(E.a)(t,e);var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var i,n,r=t.children,a=t.handleExited;return{children:t.firstRender?(i=e,n=a,I(i.children,(function(e){return Object(o.cloneElement)(e,{onExited:n.bind(null,e),in:!0,appear:k(e,"appear",i),enter:k(e,"enter",i),exit:k(e,"exit",i)})}))):A(e,r,a),firstRender:!1}},i.handleExited=function(e,t){var i=I(this.props.children);e.key in i||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var i=Object(n.a)({},t.children);return delete i[e.key],{children:i}})))},i.render=function(){var e=this.props,t=e.component,i=e.childFactory,n=Object(P.a)(e,["component","childFactory"]),r=this.state.contextValue,o=M(this.state.children).map(i);return delete n.appear,delete n.enter,delete n.exit,null===t?a.a.createElement(T.a.Provider,{value:r},o):a.a.createElement(T.a.Provider,{value:r},a.a.createElement(t,n,o))},t}(a.a.Component);D.propTypes={},D.defaultProps={component:"div",childFactory:function(e){return e}};var L=D,R="undefined"===typeof window?o.useEffect:o.useLayoutEffect;var j=function(e){var t=e.classes,i=e.pulsate,n=void 0!==i&&i,r=e.rippleX,a=e.rippleY,l=e.rippleSize,c=e.in,h=e.onExited,d=void 0===h?function(){}:h,u=e.timeout,f=o.useState(!1),g=f[0],m=f[1],y=Object(s.a)(t.ripple,t.rippleVisible,n&&t.ripplePulsate),v={width:l,height:l,top:-l/2+a,left:-l/2+r},b=Object(s.a)(t.child,g&&t.childLeaving,n&&t.childPulsate),w=Object(p.a)(d);return R((function(){if(!c){m(!0);var e=setTimeout(w,u);return function(){clearTimeout(e)}}}),[w,c,u]),o.createElement("span",{className:y,style:v},o.createElement("span",{className:b}))},N=o.forwardRef((function(e,t){var i=e.center,a=void 0!==i&&i,l=e.classes,c=e.className,h=Object(r.a)(e,["center","classes","className"]),d=o.useState([]),p=d[0],u=d[1],f=o.useRef(0),g=o.useRef(null);o.useEffect((function(){g.current&&(g.current(),g.current=null)}),[p]);var m=o.useRef(!1),y=o.useRef(null),v=o.useRef(null),b=o.useRef(null);o.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var w=o.useCallback((function(e){var t=e.pulsate,i=e.rippleX,n=e.rippleY,r=e.rippleSize,a=e.cb;u((function(e){return[].concat(Object(C.a)(e),[o.createElement(j,{key:f.current,classes:l,timeout:550,pulsate:t,rippleX:i,rippleY:n,rippleSize:r})])})),f.current+=1,g.current=a}),[l]),x=o.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,n=t.pulsate,r=void 0!==n&&n,o=t.center,s=void 0===o?a||t.pulsate:o,l=t.fakeElement,c=void 0!==l&&l;if("mousedown"===e.type&&m.current)m.current=!1;else{"touchstart"===e.type&&(m.current=!0);var h,d,p,u=c?null:b.current,f=u?u.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)h=Math.round(f.width/2),d=Math.round(f.height/2);else{var g=e.touches?e.touches[0]:e,x=g.clientX,S=g.clientY;h=Math.round(x-f.left),d=Math.round(S-f.top)}if(s)(p=Math.sqrt((2*Math.pow(f.width,2)+Math.pow(f.height,2))/3))%2===0&&(p+=1);else{var C=2*Math.max(Math.abs((u?u.clientWidth:0)-h),h)+2,P=2*Math.max(Math.abs((u?u.clientHeight:0)-d),d)+2;p=Math.sqrt(Math.pow(C,2)+Math.pow(P,2))}e.touches?null===v.current&&(v.current=function(){w({pulsate:r,rippleX:h,rippleY:d,rippleSize:p,cb:i})},y.current=setTimeout((function(){v.current&&(v.current(),v.current=null)}),80)):w({pulsate:r,rippleX:h,rippleY:d,rippleSize:p,cb:i})}}),[a,w]),S=o.useCallback((function(){x({},{pulsate:!0})}),[x]),P=o.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===e.type&&v.current)return e.persist(),v.current(),v.current=null,void(y.current=setTimeout((function(){P(e,t)})));v.current=null,u((function(e){return e.length>0?e.slice(1):e})),g.current=t}),[]);return o.useImperativeHandle(t,(function(){return{pulsate:S,start:x,stop:P}}),[S,x,P]),o.createElement("span",Object(n.a)({className:Object(s.a)(l.root,c),ref:b},h),o.createElement(L,{component:null,exit:!0},p))})),z=Object(l.a)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(o.memo(N)),B=o.forwardRef((function(e,t){var i=e.action,a=e.buttonRef,l=e.centerRipple,c=void 0!==l&&l,u=e.children,f=e.classes,g=e.className,m=e.component,y=void 0===m?"button":m,v=e.disabled,b=void 0!==v&&v,w=e.disableRipple,x=void 0!==w&&w,C=e.disableTouchRipple,P=void 0!==C&&C,O=e.focusRipple,E=void 0!==O&&O,T=e.focusVisibleClassName,I=e.onBlur,k=e.onClick,A=e.onFocus,M=e.onFocusVisible,D=e.onKeyDown,L=e.onKeyUp,R=e.onMouseDown,j=e.onMouseLeave,N=e.onMouseUp,B=e.onTouchEnd,H=e.onTouchMove,_=e.onTouchStart,W=e.onDragLeave,F=e.tabIndex,V=void 0===F?0:F,U=e.TouchRippleProps,Y=e.type,X=void 0===Y?"button":Y,G=Object(r.a)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),q=o.useRef(null);var Z=o.useRef(null),K=o.useState(!1),$=K[0],Q=K[1];b&&$&&Q(!1);var J=S(),ee=J.isFocusVisible,te=J.onBlurVisible,ie=J.ref;function ne(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P;return Object(p.a)((function(n){return t&&t(n),!i&&Z.current&&Z.current[e](n),!0}))}o.useImperativeHandle(i,(function(){return{focusVisible:function(){Q(!0),q.current.focus()}}}),[]),o.useEffect((function(){$&&E&&!x&&Z.current.pulsate()}),[x,E,$]);var re=ne("start",R),oe=ne("stop",W),ae=ne("stop",N),se=ne("stop",(function(e){$&&e.preventDefault(),j&&j(e)})),le=ne("start",_),ce=ne("stop",B),he=ne("stop",H),de=ne("stop",(function(e){$&&(te(e),Q(!1)),I&&I(e)}),!1),pe=Object(p.a)((function(e){q.current||(q.current=e.currentTarget),ee(e)&&(Q(!0),M&&M(e)),A&&A(e)})),ue=function(){var e=h.findDOMNode(q.current);return y&&"button"!==y&&!("A"===e.tagName&&e.href)},fe=o.useRef(!1),ge=Object(p.a)((function(e){E&&!fe.current&&$&&Z.current&&" "===e.key&&(fe.current=!0,e.persist(),Z.current.stop(e,(function(){Z.current.start(e)}))),e.target===e.currentTarget&&ue()&&" "===e.key&&e.preventDefault(),D&&D(e),e.target===e.currentTarget&&ue()&&"Enter"===e.key&&!b&&(e.preventDefault(),k&&k(e))})),me=Object(p.a)((function(e){E&&" "===e.key&&Z.current&&$&&!e.defaultPrevented&&(fe.current=!1,e.persist(),Z.current.stop(e,(function(){Z.current.pulsate(e)}))),L&&L(e),k&&e.target===e.currentTarget&&ue()&&" "===e.key&&!e.defaultPrevented&&k(e)})),ye=y;"button"===ye&&G.href&&(ye="a");var ve={};"button"===ye?(ve.type=X,ve.disabled=b):("a"===ye&&G.href||(ve.role="button"),ve["aria-disabled"]=b);var be=Object(d.a)(a,t),we=Object(d.a)(ie,q),xe=Object(d.a)(be,we),Se=o.useState(!1),Ce=Se[0],Pe=Se[1];o.useEffect((function(){Pe(!0)}),[]);var Oe=Ce&&!x&&!b;return o.createElement(ye,Object(n.a)({className:Object(s.a)(f.root,g,$&&[f.focusVisible,T],b&&f.disabled),onBlur:de,onClick:k,onFocus:pe,onKeyDown:ge,onKeyUp:me,onMouseDown:re,onMouseLeave:se,onMouseUp:ae,onDragLeave:oe,onTouchEnd:ce,onTouchMove:he,onTouchStart:le,ref:xe,tabIndex:b?-1:V},ve,G),u,Oe?o.createElement(z,Object(n.a)({ref:Z,center:c},U)):null)})),H=Object(l.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(B),_=i(20),W=o.forwardRef((function(e,t){var i=e.edge,a=void 0!==i&&i,l=e.children,c=e.classes,h=e.className,d=e.color,p=void 0===d?"default":d,u=e.disabled,f=void 0!==u&&u,g=e.disableFocusRipple,m=void 0!==g&&g,y=e.size,v=void 0===y?"medium":y,b=Object(r.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return o.createElement(H,Object(n.a)({className:Object(s.a)(c.root,h,"default"!==p&&c["color".concat(Object(_.a)(p))],f&&c.disabled,"small"===v&&c["size".concat(Object(_.a)(v))],{start:c.edgeStart,end:c.edgeEnd}[a]),centerRipple:!0,focusRipple:!m,disabled:f,ref:t},b),o.createElement("span",{className:c.label},l))}));t.a=Object(l.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(c.b)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(c.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(c.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(W)},function(e,t,i){"use strict";var n=i(1),r=i(7),o=i(0),a=(i(2),i(11)),s=i(13),l=i(20),c={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},h=o.forwardRef((function(e,t){var i=e.align,s=void 0===i?"inherit":i,h=e.classes,d=e.className,p=e.color,u=void 0===p?"initial":p,f=e.component,g=e.display,m=void 0===g?"initial":g,y=e.gutterBottom,v=void 0!==y&&y,b=e.noWrap,w=void 0!==b&&b,x=e.paragraph,S=void 0!==x&&x,C=e.variant,P=void 0===C?"body1":C,O=e.variantMapping,E=void 0===O?c:O,T=Object(r.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),I=f||(S?"p":E[P]||c[P])||"span";return o.createElement(I,Object(n.a)({className:Object(a.a)(h.root,d,"inherit"!==P&&h[P],"initial"!==u&&h["color".concat(Object(l.a)(u))],w&&h.noWrap,v&&h.gutterBottom,S&&h.paragraph,"inherit"!==s&&h["align".concat(Object(l.a)(s))],"initial"!==m&&h["display".concat(Object(l.a)(m))]),ref:t},T))})),d=Object(s.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(h),p=o.forwardRef((function(e,t){var i=e.children,s=e.classes,l=e.className,c=e.disableTypography,h=void 0!==c&&c,p=Object(r.a)(e,["children","classes","className","disableTypography"]);return o.createElement("div",Object(n.a)({className:Object(a.a)(s.root,l),ref:t},p),h?i:o.createElement(d,{component:"h2",variant:"h6"},i))}));t.a=Object(s.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(p)},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(0),r=i.n(n);var o=r.a.createContext(null);function a(){return r.a.useContext(o)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(58),r=i(52),o=i(28);var a={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){var t={};return function(i){return void 0===t[i]&&(t[i]=e(i)),t[i]}}((function(e){if(e.length>2){if(!l[e])return[e];e=l[e]}var t=e.split(""),i=Object(n.a)(t,2),r=i[0],o=i[1],c=a[r],h=s[o]||"";return Array.isArray(h)?h.map((function(e){return c+e})):[c+h]})),h=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function d(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function p(e,t){return function(i){return e.reduce((function(e,n){return e[n]=function(e,t){if("string"===typeof t)return t;var i=e(Math.abs(t));return t>=0?i:"number"===typeof i?-i:"-".concat(i)}(t,i),e}),{})}}function u(e){var t=d(e.theme);return Object.keys(e).map((function(i){if(-1===h.indexOf(i))return null;var n=p(c(i),t),o=e[i];return Object(r.a)(e,o,n)})).reduce(o.a,{})}u.propTypes={},u.filterProps=h;t.b=u}]]);
//# sourceMappingURL=2.3fed61c1.chunk.js.map